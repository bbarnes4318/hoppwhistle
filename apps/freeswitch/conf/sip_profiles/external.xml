<!-- External SIP Profile for Trunks -->
<profile name="external">
  <settings>
    <!-- Basic Settings -->
    <param name="debug" value="0"/>
    <param name="sip-trace" value="false"/>

    <!-- Network Settings -->
    <param name="sip-ip" value="$${local_ip_v4}"/>
    <param name="sip-port" value="5080"/>
    <param name="rtp-ip" value="$${local_ip_v4}"/>
    <param name="ext-rtp-ip" value="$${public_ip}"/>
    <param name="ext-sip-ip" value="$${public_ip}"/>

    <!-- SIP Settings -->
    <param name="dialplan" value="XML"/>
    <param name="context" value="public"/>
    <param name="rtp-timeout-sec" value="300"/>
    <param name="rtp-hold-timeout-sec" value="1800"/>

    <!-- Codec Settings -->
    <param name="codec-prefs" value="OPUS,G722,PCMU,PCMA"/>

    <!-- Authentication - disabled for outbound -->
    <param name="auth-calls" value="false"/>

    <!-- NAT Traversal -->
    <param name="aggressive-nat-detection" value="true"/>
    <param name="apply-nat-acl" value="nat.auto"/>
  </settings>

  <!-- Gateways included from external/ subdirectory -->
  <gateways>
    <X-PRE-PROCESS cmd="include" data="external/*.xml"/>
  </gateways>
</profile>
