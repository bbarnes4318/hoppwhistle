 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return a.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},84177:(e,s,t)=>{"use strict";t.d(s,{$N:()=>x,Be:()=>f,Vq:()=>o,cN:()=>p,cZ:()=>m,fK:()=>u});var a=t(27685),r=t(35639),i=t(54654),n=t(83810),l=t(4120);let o=r.fC;r.xz;let d=r.h_;r.x8;let c=n.forwardRef(({className:e,...s},t)=>a.jsx(r.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));c.displayName=r.aV.displayName;let m=n.forwardRef(({className:e,children:s,...t},n)=>(0,a.jsxs)(d,{children:[a.jsx(c,{}),(0,a.jsxs)(r.VY,{ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(i.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=r.VY.displayName;let u=({className:e,...s})=>a.jsx("div",{className:(0,l.cn)("flexflex-col space-y-1.5 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let p=({className:e,...s})=>a.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});p.displayName="DialogFooter";let x=n.forwardRef(({className:e,...s},t)=>a.jsx(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));x.displayName=r.Dx.displayName;let f=n.forwardRef(({className:e,...s},t)=>a.jsx(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));f.displayName=r.dk.displayName},57869:(e,s,t)=>{"use strict";t.d(s,{_:()=>l});var a=t(27685),r=t(73891),i=t(83810),n=t(4120);let l=i.forwardRef(({className:e,...s},t)=>a.jsx(r.f,{ref:t,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));l.displayName=r.f.displayName},25277:(e,s,t)=>{"use strict";t.d(s,{RM:()=>o,SC:()=>d,iA:()=>n,pj:()=>m,ss:()=>c,xD:()=>l});var a=t(27685),r=t(83810),i=t(4120);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let l=r.forwardRef(({className:e,...s},t)=>a.jsx("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...s}));o.displayName="TableBody",r.forwardRef(({className:e,...s},t)=>a.jsx("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));d.displayName="TableRow";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));c.displayName="TableHead";let m=r.forwardRef(({className:e,...s},t)=>a.jsx("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));m.displayName="TableCell",r.forwardRef(({className:e,...s},t)=>a.jsx("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},39881:(e,s,t)=>{"use strict";t.d(s,{x:()=>r});class a{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,s={}){let t="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");t&&a&&(s.headers={...s.headers,"X-Demo-Tenant-Id":a});letr=`${this.baseUrl}${e}`,i={"Content-Type":"application/json",...s.headers};this.token&&(i.Authorization=`Bearer ${this.token}`),this.apiKey&&(i["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...s,headers:i}),t=await e.json();if(!e.ok)return{error:{code:t.error?.code||"UNKNOWN_ERROR",message:t.error?.message||"An error occurred"}};return{data:t}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,s){return this.request(e,{method:"POST",body:s?JSON.stringify(s):void 0})}async put(e,s){return this.request(e,{method:"PUT",body:s?JSON.stringify(s):void 0})}async patch(e,s){return this.request(e,{method:"PATCH",body:s?JSON.stringify(s):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let r=new a},81088:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
/app/apps/web/.next/server/app/(dashboard)/settings/dnc/page.js:(()=>{var e={};e.id=807,e.ids=[807],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49364:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(59441),a=s(1498),n=s(6580),o=s.n(n),i=s(15511),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d=["",{children:["(dashboard)",{children:["settings",{children:["dnc",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,76497)),"/app/apps/web/src/app/(dashboard)/settings/dnc/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/settings/dnc/page.tsx"],p="/(dashboard)/settings/dnc/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/settings/dnc/page",pathname:"/settings/dnc",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},36618:(e,t,s)=>{Promise.resolve().then(s.bind(s,74389))},74389:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(27685),a=s(87109),n=s(81088),o=s(35943),i=s(83810),l=s(35090),d=s(4283),c=s(3920),p=s(25277),u=s(39881);function h(){let[e,t]=(0,i.useState)([]),[s,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{x()},[]);let x=async()=>{h(!0);try{let e=await u.x.get("/api/v1/compliance/dnc-lists");e.data?.data&&t(e.data.data)}catch(e){console.error("Failed to load DNC lists:",e)}finally{h(!1)}},m=async e=>{if(confirm("Are you sure you want to delete this DNC list? This action cannot be undone."))try{let t=await u.x.delete(`/api/v1/compliance/dnc-lists/${e}`);t.error?alert(`Failed to delete DNC list: ${t.error.message}`):x()}catch(e){alert(`Failed to delete DNC list: ${e instanceof Error?e.message:"Unknown error"}`)}};return(0,r.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Do Not Call Lists"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage DNC lists and compliance"})]}),(0,r.jsxs)(d.z,{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.txt",e.onchange=e=>{let t=e.target.files?.[0];t&&alert(`DNC list upload functionality coming soon. Selected file: ${t.name}`)},e.click()},children:[r.jsx(a.Z,{className:"mr-2 h-4 w-4"}),"Upload List"]})]}),(0,r.jsxs)(c.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,r.jsxs)(c.Ol,{className:"flex-shrink-0",children:[r.jsx(c.ll,{children:"DNC Lists"}),r.jsx(c.SZ,{children:"View and manage your Do Not Call lists"})]}),r.jsx(c.aY,{className:"flex-1 overflow-y-auto min-h-0",children:s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(n.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No DNC lists found"}):(0,r.jsxs)(p.iA,{children:[r.jsx(p.xD,{children:(0,r.jsxs)(p.SC,{children:[r.jsx(p.ss,{children:"Name"}),r.jsx(p.ss,{children:"Type"}),r.jsx(p.ss,{children:"Entries"}),r.jsx(p.ss,{children:"Status"}),r.jsx(p.ss,{children:"Created"}),r.jsx(p.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(p.RM,{children:e.map(e=>(0,r.jsxs)(p.SC,{children:[r.jsx(p.pj,{className:"font-medium",children:e.name}),r.jsx(p.pj,{children:r.jsx(l.C,{variant:"outline",children:e.type.toLowerCase()})}),r.jsx(p.pj,{children:e.entryCount.toLocaleString()}),r.jsx(p.pj,{children:r.jsx(l.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),r.jsx(p.pj,{children:new Date(e.createdAt).toLocaleDateString()}),r.jsx(p.pj,{className:"text-right",children:r.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>m(e.id),children:r.jsx(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},35090:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var r=s(27685),a=s(31727);s(83810);var n=s(4120);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...s}){return r.jsx("div",{className:(0,n.cn)(o({variant:t}),e),...s})}},25277:(e,t,s)=>{"use strict";s.d(t,{RM:()=>l,SC:()=>d,iA:()=>o,pj:()=>p,ss:()=>c,xD:()=>i});var r=s(27685),a=s(83810),n=s(4120);let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));o.displayName="Table";let i=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let p=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));p.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let s="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");s&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let a=`${this.baseUrl}${e}`,n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:n}),s=await e.json();if(!e.ok)return{error:{code:s.error?.code||"UNKNOWN_ERROR",message:s.error?.message||"An error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new r},81088:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
/app/apps/web/.next/server/app/(dashboard)/tools/recording-analyzer/page.js:(()=>{var e={};e.id=364,e.ids=[364],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},82589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(59441),a=r(1498),n=r(6580),l=r.n(n),i=r(15511),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(dashboard)",{children:["tools",{children:["recording-analyzer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25109)),"/app/apps/web/src/app/(dashboard)/tools/recording-analyzer/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/tools/recording-analyzer/page.tsx"],u="/(dashboard)/tools/recording-analyzer/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/tools/recording-analyzer/page",pathname:"/tools/recording-analyzer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12158:(e,t,r)=>{Promise.resolve().then(r.bind(r,8008))},8008:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RecordingAnalyzer:()=>I});var s=r(27685),a=r(83810);let n=[{key:"ACA",label:"ACA Health",description:"Enrollments, carrier, follow-ups, billable, transcript optional."},{key:"FINAL_EXPENSE",label:"Final Expense",description:"Apps, quotes, premium, carrier, follow-ups, billable, transcript optional."},{key:"MEDICARE",label:"Medicare",description:"Enrollments, carrier, follow-ups, billable, transcript optional."}],l={FINAL_EXPENSE:[{key:"Applications Submitted",label:"Applications Submitted",defaultChecked:!0},{key:"Monthly Premium (if app submitted)",label:"Monthly Premium (if app submitted)",defaultChecked:!0},{key:"Carrier (If app submitted)",label:"Carrier (If app submitted)",defaultChecked:!0},{key:"Quotes",label:"Quotes",defaultChecked:!0},{key:"Monthly Premium (If Quote Provided)",label:"Monthly Premium (If Quote Provided)",defaultChecked:!0},{key:"Carrier (If Quote Provided)",label:"Carrier (If Quote Provided)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],ACA:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],MEDICARE:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}]};var i=r(39881);async function o(e,t){let r=await i.x.post("/api/v1/recording-analysis/presign",{filename:e,contentType:t});if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from presign");return r.data}async function d(e,t){let r=await fetch(e,{method:"PUT",headers:{"Content-Type":t.type||"application/octet-stream"},body:t});if(!r.ok)throw Error(`Upload failed: ${r.status}`)}async function c(e){let t=await i.x.post("/api/v1/recording-analysis/analyze",e);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from analyze");return t.data}async function u(e){let t=await i.x.get(`/api/v1/recording-analysis/batch/${e}`);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from batch");return t.data}async function m(e,t){let r=await i.x.post(`/api/v1/recording-analysis/${e}/rerun`,t);if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from rerun");return r.data}async function x(e){let t="a1b2c3d4e5f67890",r={};t&&(r["x-api-key"]=t);let s=await fetch(`http://45.32.213.201:3001/api/v1/recording-analysis/batch/${e}/csv`,{headers:r});if(!s.ok)throw Error(await s.text());return await s.text()}var f=r(3920),p=r(74550),h=r(4283),g=r(14887),j=r(57869),b=r(44517),v=r(35090),y=r(25277),N=r(84177),w=r(71499);function k(...e){return e.filter(Boolean).join(" ")}function C(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function R(e){let t=Math.round(100*C(e));return`${t}%`}function S({status:e}){let t=(e||"").toLowerCase();return s.jsx(v.C,{variant:"done"===t?"default":"failed"===t?"destructive":"analyzing"===t||"transcribing"===t?"secondary":"outline",children:e})}function A({extracted:e}){let t=e?.Billable??e?.["Billable (Y/N)"]??e?.billable??e?.isBillable,r="string"==typeof t?t.trim().toUpperCase():t;return"Y"===r||!0===r?s.jsx(v.C,{className:"bg-emerald-600 text-white",children:"Billable"}):"N"===r||!1===r?s.jsx(v.C,{variant:"destructive",children:"Non-billable"}):s.jsx(v.C,{variant:"outline",children:"Billable: —"})}function E({value:e}){return null==e?s.jsx("div",{className:"h-2 w-full rounded-fullbg-muted",children:s.jsx("div",{className:"h-2 rounded-full bg-muted",style:{width:"0%"}})}):(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:s.jsx("div",{className:"h-2 bg-foreground/70",style:{width:R(e)}})}),(0,s.jsxs)("div",{className:"text-[11px] text-muted-foreground",children:[R(e)," confidence"]})]})}function I(){let[e,t]=a.useState("ACA"),r=a.useMemo(()=>l[e],[e]),i=a.useMemo(()=>new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)),[r]),[R,I]=a.useState(i),[P,z]=a.useState(""),[F,M]=a.useState([]),[U,T]=a.useState(!1),[L,_]=a.useState(null),[V,D]=a.useState([]),[B,$]=a.useState(null),[q,K]=a.useState(!1),[Y,O]=a.useState(null),[G,Q]=a.useState(!1),[W,Z]=a.useState(null),[X,H]=a.useState(new Set),[J,ee]=a.useState(!1);async function et(e){let t=await u(e);return D(t.items),t.items.length>0&&t.items.every(e=>{let t=(e.status||"").toLowerCase();return"done"===t||"failed"===t})}async function er(e){K(!0);try{if(await et(e)){K(!1);return}}catch(e){K(!1),$(e?.message||"Failed to fetch batch");return}let t=setInterval(async()=>{try{await et(e)&&(clearInterval(t),K(!1))}catch(e){clearInterval(t),K(!1),$(e?.message||"Failed to fetch batch")}},1500)}async function es(){$(null);let t=P.split(/\r?\n|,|\s+/g).map(e=>e.trim()).filter(Boolean).filter(e=>/^https?:\/\//i.test(e));if(0===t.length&&0===F.length){$("Add at least one recording URL or upload at least one audio file.");return}let r=Array.from(R);if(0===r.length){$("Select at least one stat/field to extract.");return}T(!0);try{let s=[];for(let e of F){let{storageKey:t,url:r}=await o(e.name,e.type||"application/octet-stream");await d(r,e),s.push({storageKey:t,filename:e.name})}let a=await c({vertical:e,selectedFields:r,urls:t,uploads:s});_(a.batchId),D([]),await er(a.batchId)}catch(e){$(e?.message||"Failed to start analysis")}finally{T(!1)}}async function ea(){if(!W)return;let e=Array.from(X);if(!e.length){$("Select at least one field for re-run.");return}ee(!0),$(null);try{let t=await m(W.id,{selectedFields:e});Q(!1),Z(null),_(t.batchId),D([]),await er(t.batchId)}catch(e){$(e?.message||"Failed to re-run")}finally{ee(!1)}}async function en(){if(!L){$("No batch to export yet.");return}try{let e=await x(L),t=new Blob([e],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`recording-analysis-${L}.csv`,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}catch(e){$(e?.message||"CSV export failed")}}a.useEffect(()=>{I(new Set(i)),$(null),M([]),z(""),D([]),_(null),O(null)},[e,i]);let el=n.find(t=>t.key===e);return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Recording Analyzer"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Paste recording URLs or upload audio, select a vertical and fields, and get structured results per recording."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,s.jsxs)(v.C,{variant:"outline",className:"font-mono",children:["Batch: ",L.slice(0,8),"…"]}),q&&s.jsx(v.C,{variant:"secondary",children:"Live updating…"}),s.jsx(h.z,{variant:"outline",onClick:en,disabled:!L,children:"Export CSV"})]})]}),B&&s.jsx(w.bZ,{className:"border-destructive/50",children:s.jsx("div",{className:"text-sm text-destructive",children:B})}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[s.jsx(f.Ol,{children:s.jsx(f.ll,{className:"text-base",children:"1) Select Vertical"})}),s.jsx(f.aY,{children:(0,s.jsxs)(p.mQ,{value:e,onValueChange:e=>t(e),children:[(0,s.jsxs)(p.dr,{className:"grid grid-cols-3 w-full",children:[s.jsx(p.SP,{value:"ACA",children:"ACA Health"}),s.jsx(p.SP,{value:"FINAL_EXPENSE",children:"Final Expense"}),s.jsx(p.SP,{value:"MEDICARE",children:"Medicare"})]}),s.jsx(p.nU,{value:e,className:"pt-4",children:(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{className:"font-medium text-foreground",children:[el?.label,":"]})," ",el?.description]})})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[s.jsx(f.Ol,{children:s.jsx(f.ll,{className:"text-base",children:"2) Add Recordings"})}),(0,s.jsxs)(f.aY,{className:"space-y-5",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(j._,{children:"Recording URLs"}),s.jsx("textarea",{value:P,onChange:e=>z(e.target.value),placeholder:"Paste one URL per line (or space/comma separated)…",className:k("min-h-[140px] w-full rounded-md border bg-background px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring")}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Supports multiple URLs. We’ll process each URL as a separate recording."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(j._,{children:"Upload audio (mp3/wav)"}),s.jsx(g.I,{type:"file",accept:".wav,.mp3,audio/wav,audio/mpeg",multiple:!0,onChange:e=>(function(e){if(!e)return;let t=[];for(let r of Array.from(e))(/audio\/(wav|mpeg|mp3|x-wav|ogg|opus)/i.test(r.type)||/\.(wav|mp3|ogg|opus)$/i.test(r.name))&&t.push(r);M(e=>[...e,...t].slice(0,20))})(e.target.files)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Upload uses a presigned PUT URL (S3/Spaces). If presign isn’t wired up yet, URL paste still works."}),F.length>0&&s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"File"}),s.jsx(y.ss,{className:"text-right",children:"Size"}),s.jsx(y.ss,{className:"text-right",children:"Remove"})]})}),s.jsx(y.RM,{children:F.map((e,t)=>(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{className:"font-medium",children:e.name}),s.jsx(y.pj,{className:"text-right text-muted-foreground",children:function(e){if(!e&&0!==e)return"";let t=["B","KB","MB","GB"],r=e,s=0;for(;r>=1024&&s<t.length-1;)r/=1024,s++;return`${r.toFixed(0===s?0:2)} ${t[s]}`}(e.size)}),s.jsx(y.pj,{className:"text-right",children:s.jsx(h.z,{variant:"ghost",size:"sm",onClick:()=>{M(e=>e.filter((e,r)=>r!==t))},children:"Remove"})})]},`${e.name}-${t}`))})]})})]})]})]}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[(0,s.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between gap-3",children:[s.jsx(f.ll,{className:"text-base",children:"3) Choose Stats To Extract"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)))},children:"Defaults"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.map(e=>e.key)))},children:"All"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set)},children:"None"})]})]}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,s.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",R.has(e.key)?"bg-muted/50":"bg-background"),children:[s.jsx(b.X,{checked:R.has(e.key),onCheckedChange:()=>{var t;return t=e.key,void I(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"text-sm font-medium",children:e.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},e.key))}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4 border-t pt-4",children:[(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Selected: ",s.jsx("span",{className:"font-mono",children:R.size})]}),s.jsx(h.z,{onClick:es,disabled:U,className:"min-w-[180px]",children:U?"Starting…":"Analyze Recordings"})]})]})]})]}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[(0,s.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(f.ll,{className:"text-base",children:"Results"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Click ",s.jsx("span",{className:"font-medium",children:"View"})," for details, audio playback, confidences, and re-run."]})]}),s.jsx(f.aY,{children:0===V.length?s.jsx("div",{className:"text-sm text-muted-foreground",children:"No results yet. Start an analysis to see per-recording results here."}):s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"Status"}),s.jsx(y.ss,{children:"Billable"}),s.jsx(y.ss,{children:"Source"}),s.jsx(y.ss,{children:"Vertical"}),s.jsx(y.ss,{children:"Extracted"}),s.jsx(y.ss,{className:"text-right",children:"Actions"})]})}),s.jsx(y.RM,{children:V.map(e=>(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{children:s.jsx(S,{status:e.status})}),s.jsx(y.pj,{children:s.jsx(A,{extracted:e.extracted})}),s.jsx(y.pj,{className:"max-w-[420px] truncate",children:"url"===e.sourceType?s.jsx("span",{className:"font-mono text-xs",children:e.sourceUrl}):s.jsx("span",{className:"text-sm",children:e.filename||e.storageKey})}),s.jsx(y.pj,{children:s.jsx(v.C,{variant:"outline",children:e.vertical})}),(0,s.jsxs)(y.pj,{className:"text-muted-foreground text-sm",children:[e.extracted?`${Object.keys(e.extracted).length} fields`:"—",e.error?(0,s.jsxs)("span",{className:"text-destructive",children:[" • ",e.error]}):null]}),(0,s.jsxs)(y.pj,{className:"text-right space-x-2",children:[s.jsx(h.z,{variant:"outline",size:"sm",onClick:()=>O(e),children:"View"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:()=>(function(e){Z(e);let t=Array.isArray(e.selectedFields)?e.selectedFields:[];H(new Set(t.length?t:Array.from(i))),Q(!0)})(e),children:"Re-run"})]})]},e.id))})]})})})]}),s.jsx(N.Vq,{open:!!Y,onOpenChange:e=>!e&&O(null),children:(0,s.jsxs)(N.cZ,{className:"max-w-4xl",children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Recording Result"})}),Y&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"ID"}),s.jsx("div",{className:"font-mono text-xs",children:Y.id})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(S,{status:Y.status}),s.jsx(A,{extracted:Y.extracted})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Audio"}),"url"===Y.sourceType&&Y.sourceUrl?s.jsx("audio",{controls:!0,className:"w-full",children:s.jsx("source",{src:Y.sourceUrl})}):Y.playbackUrl?s.jsx("audio",{controls:!0,className:"w-full",children:s.jsx("source",{src:Y.playbackUrl})}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No playback URL available yet for uploads. (If you want, we can add an API endpoint that returns a signed GET URL for storageKey.)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Extracted Fields"}),Y.extracted?s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"Field"}),s.jsx(y.ss,{children:"Value"}),s.jsx(y.ss,{className:"w-[220px]",children:"Confidence"})]})}),s.jsx(y.RM,{children:Object.keys(Y.extracted).map(e=>{let t=Y.extracted?.[e],r=function(e,t){if(!e)return null;let r=String(t),s=r.toLowerCase(),a=e?._confidence?.[r];if("number"==typeof a)return C(a);let n=e?.confidence?.[r];if("number"==typeof n)return C(n);let l=e?.[`${r}_confidence`];if("number"==typeof l)return C(l);let i=e?.[`${s}_confidence`];return"number"==typeof i?C(i):null}(Y.extracted,e);return(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{className:"font-medium",children:e}),s.jsx(y.pj,{className:"text-sm",children:"object"==typeof t?s.jsx("pre",{className:"text-xs bg-muted/30 border rounded p-2 overflow-auto max-h-[160px]",children:JSON.stringify(t,null,2)}):String(t??"—")}),s.jsx(y.pj,{children:s.jsx(E,{value:r})})]},e)})})]})}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No extracted JSON yet."})]}),Y.transcript&&(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transcript"}),s.jsx("pre",{className:"max-h-[360px] overflow-autorounded-md border bg-muted/30 p-3 text-xs whitespace-pre-wrap",children:Y.transcript})]})]})]})}),s.jsx(N.Vq,{open:G,onOpenChange:e=>!e&&Q(!1),children:(0,s.jsxs)(N.cZ,{className:"max-w-3xl",children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Re-run extraction with different fields"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"This will create a new batch using the same recording but different selected fields."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,s.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",X.has(e.key)?"bg-muted/50":"bg-background"),children:[s.jsx(b.X,{checked:X.has(e.key),onCheckedChange:()=>H(t=>{let r=new Set(t);return r.has(e.key)?r.delete(e.key):r.add(e.key),r}),className:"mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"text-sm font-medium",children:e.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},`rerun-${e.key}`))}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[s.jsx(h.z,{variant:"outline",onClick:()=>Q(!1),disabled:J,children:"Cancel"}),s.jsx(h.z,{onClick:ea,disabled:J,children:J?"Re-running…":"Re-run"})]})]})]})})]})}},71499:(e,t,r)=>{"use strict";r.d(t,{X:()=>d,bZ:()=>o});var s=r(27685),a=r(31727),n=r(83810),l=r(4120);let i=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,l.cn)(i({variant:t}),e),...r}));o.displayName="Alert",n.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=n.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},74550:(e,t,r)=>{"use strict";r.d(t,{SP:()=>d,dr:()=>o,mQ:()=>i,nU:()=>c});var s=r(27685),a=r(57045),n=r(83810),l=r(4120);let i=a.fC,o=n.forwardRef(({className:e,...t},r)=>s.jsx(a.aV,{ref:r,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=a.aV.displayName;let d=n.forwardRef(({className:e,...t},r)=>s.jsx(a.xz,{ref:r,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=a.xz.displayName;let c=n.forwardRef(({className:e,...t},r)=>s.jsx(a.VY,{ref:r,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-nonefocus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=a.VY.displayName},25109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(36491),a=r(30599);let n=(0,a.createProxy)(String.raw`/app/apps/web/src/components/recording-analyzer/RecordingAnalyzer.tsx`),{__esModule:l,$$typeof:i}=n;n.default;let o=(0,a.createProxy)(String.raw`/app/apps/web/src/components/recording-analyzer/RecordingAnalyzer.tsx#RecordingAnalyzer`);function d(){return s.jsx(o,{})}},57045:(e,t,r)=>{"use strict";r.d(t,{VY:()=>W,aV:()=>G,fC:()=>O,xz:()=>Q});var s=r(83810),a=r(2724),n=r(6872),l=r(75262),i=r(68118),o=r(99892),d=r(29548),c=r(82013),u=r(39294),m=r(7079),x=r(27685),f="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[g,j,b]=(0,l.B)(h),[v,y]=(0,n.b)(h,[b]),[N,w]=v(h),k=s.forwardRef((e,t)=>(0,x.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(C,{...e,ref:t})})}));k.displayName=h;var C=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:l=!1,dir:o,currentTabStopId:g,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:v,onEntryFocus:y,preventScrollOnEntryFocus:w=!1,...k}=e,C=s.useRef(null),R=(0,i.e)(t,C),S=(0,m.gm)(o),[A,I]=(0,u.T)({prop:g,defaultProp:b??null,onChange:v,caller:h}),[P,z]=s.useState(!1),F=(0,c.W)(y),M=j(r),U=s.useRef(!1),[T,L]=s.useState(0);return s.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(f,F),()=>e.removeEventListener(f,F)},[F]),(0,x.jsx)(N,{scope:r,orientation:n,dir:S,loop:l,currentTabStopId:A,onItemFocus:s.useCallback(e=>I(e),[I]),onItemShiftTab:s.useCallback(()=>z(!0),[]),onFocusableItemAdd:s.useCallback(()=>L(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>L(e=>e-1),[]),children:(0,x.jsx)(d.WV.div,{tabIndex:P||0===T?-1:0,"data-orientation":n,...k,ref:R,style:{outline:"none",...e.style},onMouseDown:(0,a.Mj)(e.onMouseDown,()=>{U.current=!0}),onFocus:(0,a.Mj)(e.onFocus,e=>{let t=!U.current;if(e.target===e.currentTarget&&t&&!P){let t=new CustomEvent(f,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=M().filter(e=>e.focusable);E([e.find(e=>e.active),e.find(e=>e.id===A),...e].filter(Boolean).map(e=>e.ref.current),w)}}U.current=!1}),onBlur:(0,a.Mj)(e.onBlur,()=>z(!1))})})}),R="RovingFocusGroupItem",S=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:l=!1,tabStopId:i,children:c,...u}=e,m=(0,o.M)(),f=i||m,p=w(R,r),h=p.currentTabStopId===f,b=j(r),{onFocusableItemAdd:v,onFocusableItemRemove:y,currentTabStopId:N}=p;return s.useEffect(()=>{if(n)return v(),()=>y()},[n,v,y]),(0,x.jsx)(g.ItemSlot,{scope:r,id:f,focusable:n,active:l,children:(0,x.jsx)(d.WV.span,{tabIndex:h?0:-1,"data-orientation":p.orientation,...u,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{n?p.onItemFocus(f):e.preventDefault()}),onFocus:(0,a.Mj)(e.onFocus,()=>p.onItemFocus(f)),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){p.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return A[a]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();letr=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=p.loop?function(e,t){return e.map((r,s)=>e[(t+s)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>E(r))}}),children:"function"==typeof c?c({isCurrentTabStop:h,hasTabStop:null!=N}):c})})});S.displayName=R;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function E(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var I=r(1090),P="Tabs",[z,F]=(0,n.b)(P,[y]),M=y(),[U,T]=z(P),L=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:a,defaultValue:n,orientation:l="horizontal",dir:i,activationMode:c="automatic",...f}=e,p=(0,m.gm)(i),[h,g]=(0,u.T)({prop:s,onChange:a,defaultProp:n??"",caller:P});return(0,x.jsx)(U,{scope:r,baseId:(0,o.M)(),value:h,onValueChange:g,orientation:l,dir:p,activationMode:c,children:(0,x.jsx)(d.WV.div,{dir:p,"data-orientation":l,...f,ref:t})})});L.displayName=P;var _="TabsList",V=s.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...a}=e,n=T(_,r),l=M(r);return(0,x.jsx)(k,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:s,children:(0,x.jsx)(d.WV.div,{role:"tablist","aria-orientation":n.orientation,...a,ref:t})})});V.displayName=_;var D="TabsTrigger",B=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,disabled:n=!1,...l}=e,i=T(D,r),o=M(r),c=K(i.baseId,s),u=Y(i.baseId,s),m=s===i.value;return(0,x.jsx)(S,{asChild:!0,...o,focusable:!n,active:m,children:(0,x.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...l,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:(0,a.Mj)(e.onFocus,()=>{let e="manual"!==i.activationMode;m||n||!e||i.onValueChange(s)})})})});B.displayName=D;var $="TabsContent",q=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,forceMount:n,children:l,...i}=e,o=T($,r),c=K(o.baseId,a),u=Y(o.baseId,a),m=a===o.value,f=s.useRef(m);return s.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(I.z,{present:n||m,children:({present:r})=>(0,x.jsx)(d.WV.div,{"data-state":m?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&l})})});function K(e,t){return`${e}-trigger-${t}`}function Y(e,t){return`${e}-content-${t}`}q.displayName=$;var O=L,G=V,Q=B,W=q}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[289,957,856,838,491,439,560,201],()=>r(82589));module.exports=s})();
/app/apps/web/.next/server/chunks/560.js:exports.id=560,exports.ids=[560],exports.modules={48802:(e,t,a)=>{Promise.resolve().then(a.bind(a,34208))},16278:(e,t,a)=>{Promise.resolve().then(a.bind(a,96500))},96373:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,49489,23)),Promise.resolve().then(a.t.bind(a,76225,23)),Promise.resolve().then(a.t.bind(a,85964,23)),Promise.resolve().then(a.t.bind(a,5804,23)),Promise.resolve().then(a.t.bind(a,27255,23)),Promise.resolve().then(a.t.bind(a,1021,23))},34208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var s=a(27685),l=a(61964),r=a(73972),n=a(3630),i=a(13161);function c(){let e=new Date().getFullYear();return s.jsx("footer",{className:"border-t bg-background",children:s.jsx("div",{className:"container mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["\xa9 ",e," Hopwhistle. All rights reserved."]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,s.jsxs)(i.default,{href:"/legal/privacy",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(l.Z,{className:"h-4 w-4"}),"Privacy Policy"]}),(0,s.jsxs)(i.default,{href:"/legal/terms",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Terms ofService"]}),(0,s.jsxs)(i.default,{href:"/legal/data-retention",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Data Retention"]}),(0,s.jsxs)(i.default,{href:"/legal/call-recording",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Call Recording"]}),(0,s.jsxs)(i.default,{href:"/legal/dpa",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(n.Z,{className:"h-4 w-4"}),"DPA"]})]})]})})})}var o=a(73045),d=a(72742),x=a(28369),m=a(99596),h=a(17563),u=a(88351),b=a(83810),g=a(4283);function f(){let{theme:e,setTheme:t}=(0,u.F)(),[a,l]=b.useState(!1);return(b.useEffect(()=>{l(!0)},[]),a)?(0,s.jsxs)(g.z,{variant:"ghost",size:"icon",onClick:()=>t("dark"===e?"light":"dark"),children:[s.jsx(m.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(h.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),s.jsx("span",{className:"sr-only",children:"Toggle theme"})]}):null}var p=a(14887);function w(){return(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-6",children:[s.jsx("div",{className:"flex flex-1 items-center gap-4",children:(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[s.jsx(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(p.I,{type:"search",id:"global-search",name:"global-search",placeholder:"Search calls, numbers, campaigns...",className:"pl-10"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(g.z,{variant:"ghost",size:"icon",children:s.jsx(d.Z,{className:"h-5 w-5"})}),s.jsx(f,{}),s.jsx(g.z,{variant:"ghost",size:"icon",children:s.jsx(x.Z,{className:"h-5 w-5"})})]})]})}var v=a(55165),j=a(53639),y=a(77921),N=a(75827),k=a(26072),C=a(87905),Z=a(90449),S=a(90584),z=a(92015),P=a(61099),T=a(6620),$=a(90157),I=a(35817),D=a(4120);let O=[{name:"Dashboard",href:"/dashboard",icon:v.Z},{name:"Conductor",href:"/bot",icon:j.Z,title:"Outbound calling & live transfer orchestration"},{name:"Phone",href:"/phone",icon:y.Z},{name:"Numbers",href:"/numbers",icon:N.Z},{name:"Campaigns",href:"/campaigns",icon:k.Z},{name:"Flows",href:"/flows",icon:C.Z},{name:"Calls",href:"/calls",icon:Z.Z},{name:"Billing",href:"/billing",icon:S.Z},{name:"Settings",href:"/settings",icon:z.Z}],E=[{name:"Recording Analyzer",href:"/tools/recording-analyzer",icon:Z.Z}],A=[{name:"Users",href:"/settings/users",icon:P.Z},{name:"Webhooks",href:"/settings/webhooks",icon:r.Z},{name:"DNC Lists",href:"/settings/dnc",icon:l.Z},{name:"Quotas & Budgets",href:"/settings/quotas",icon:T.Z}];function F(){let e=(0,I.usePathname)();return(0,s.jsxs)("div",{className:"flex h-full w-64 flex-col border-r bg-card",children:[s.jsx("div",{className:"flex h-16 items-center border-b px-6",children:s.jsx($.default,{src:"/hopwhistle.png",alt:"Hopwhistle",width:120,height:40,className:"h-8 w-auto",priority:!0})}),(0,s.jsxs)("nav",{className:"flex-1 space-y-1 overflow-y-auto p-4",children:[O.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,title:t.title,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)}),(0,s.jsxs)("div",{className:"pt-4",children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold uppercase text-muted-foreground",children:"Tools"}),E.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)})]}),(0,s.jsxs)("div",{className:"pt-4",children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold uppercase text-muted-foreground",children:"Admin"}),A.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)})]})]})]})}var M=a(64598);function H({children:e}){return s.jsx(M.ZB,{children:(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[s.jsx(F,{}),(0,s.jsxs)("div",{className:"flexflex-1 flex-col overflow-hidden",children:[s.jsx(w,{}),s.jsx("main",{className:"flex-1 overflow-auto bg-background p-6",children:s.jsx("div",{className:"h-full overflow-auto",children:e})}),s.jsx(c,{})]}),s.jsx(M.gw,{})]})})}},14208:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var s=a(27685),l=a(4610),r=a(83810),n=a(14581),i=a(4120);let c=[{value:"available",label:"Available",color:"text-emerald-400",bgColor:"bg-emerald-500",description:"Ready to receive calls"},{value:"away",label:"Away",color:"text-amber-400",bgColor:"bg-amber-500",description:"Temporarily unavailable"},{value:"dnd",label:"Do Not Disturb",color:"text-red-400",bgColor:"bg-red-500",description:"No calls or notifications"},{value:"offline",label:"Offline",color:"text-gray-400",bgColor:"bg-gray-500",description:"Not logged in"}];function o(){let{agentStatus:e,setAgentStatus:t,currentCall:a}=(0,n.zs)(),[o,d]=(0,r.useState)(!1),x=(0,r.useRef)(null),m=c.find(t=>t.value===e)??c[3];(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=(0,r.useCallback)(e=>{a&&"ended"!==a.state||(t(e),d(!1))},[a,t]),u=a&&"ended"!==a.state;return(0,s.jsxs)("div",{className:"relative",ref:x,children:[(0,s.jsxs)("button",{onClick:()=>d(!o),disabled:!!u,className:(0,i.cn)("flex items-center gap-2 px-2 py-1 rounded-lg","text-xs font-medium transition-all","hover:bg-white/5",u&&"opacity-50 cursor-not-allowed"),children:[s.jsx("span",{className:(0,i.cn)("w-2 h-2 rounded-full",m.bgColor)}),s.jsx("span",{className:m.color,children:u?"On Call":m.label}),!u&&s.jsx(l.Z,{className:(0,i.cn)("w-3 h-3 text-gray-400 transition-transform",o&&"rotate-180")})]}),o&&!u&&s.jsx("div",{className:(0,i.cn)("absolute top-full left-0 mt-2 w-56 z-50","bg-slate-900 border border-white/10 rounded-xl","shadow-xl shadow-black/50 overflow-hidden","animate-in fade-in-0 zoom-in-95 duration-150"),children:c.map(t=>(0,s.jsxs)("button",{onClick:()=>h(t.value),className:(0,i.cn)("w-full px-4 py-3 flex items-center gap-3 text-left","hover:bg-white/5 transition-colors",e===t.value&&"bg-white/5"),children:[s.jsx("span",{className:(0,i.cn)("w-2.5 h-2.5 rounded-full",t.bgColor)}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:(0,i.cn)("text-sm font-medium",t.color),children:t.label}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),e===t.value&&s.jsx("span",{className:"ml-auto text-cyan-400 text-xs",children:"✓"})]},t.value))})]})}},16340:(e,t,a)=>{"use strict";a.d(t,{c:()=>m});var s=a(27685),l=a(36168),r=a(77921),n=a(83810),i=a(14581),c=a(4283),o=a(4120);let d=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],x={1:[697,1209],2:[697,1336],3:[697,1477],4:[770,1209],5:[770,1336],6:[770,1477],7:[852,1209],8:[852,1336],9:[852,1477],"*":[941,1209],0:[941,1336],"#":[941,1477]};function m(){let{makeCall:e,sendDTMF:t,currentCall:a,isConnecting:m}=(0,i.zs)(),[h,u]=(0,n.useState)(""),b=(0,n.useRef)(null),g=(0,n.useCallback)(e=>{try{if(!b.current){let e=window.AudioContext||window.webkitAudioContext;e&&(b.current=new e)}let t=b.current;if(!t)return;let a=x[e];if(!a)return;let s=t.createOscillator(),l=t.createOscillator(),r=t.createGain();s.type="sine",l.type="sine",s.frequency.value=a[0],l.frequency.value=a[1],r.gain.value=.1,s.connect(r),l.connect(r),r.connect(t.destination),s.start(),l.start(),setTimeout(()=>{s.stop(),l.stop()},150)}catch{}},[]),f=(0,n.useCallback)(e=>{a&&"ended"!==a.state?t(e):u(t=>t+e),g(e)},[a,t,g]),p=(0,n.useCallback)(()=>{u(e=>e.slice(0,-1))},[]),w=(0,n.useCallback)(()=>{h&&!m&&(e(h),u(""))},[h,m,e]),v=(0,n.useCallback)(e=>{/^[0-9*#]$/.test(e.key)?f(e.key):"Backspace"===e.key?p():"Enter"===e.key&&h&&w()},[f,p,w,h]);return(0,s.jsxs)("div",{className:"space-y-4",onKeyDown:v,tabIndex:0,children:[(0,s.jsxs)("div",{className:(0,o.cn)("h-16 px-4 rounded-xl flexitems-center justify-between","bg-white/5 border border-white/10"),children:[s.jsx("input",{type:"text",value:h,onChange:e=>u(e.target.value.replace(/[^0-9+*#()-\s]/g,"")),placeholder:"Enter number...",className:(0,o.cn)("flex-1 bg-transparent text-2xl font-mono text-white","placeholder:text-gray-600 outline-none")}),h&&s.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white transition-colors",children:s.jsx(l.Z,{className:"w-5 h-5"})})]}),h&&s.jsx("p",{className:"text-center text-gray-400 text-sm",children:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`})(h)}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.map(({digit:e,letters:t})=>(0,s.jsxs)("button",{onClick:()=>f(e),className:(0,o.cn)("h-16 rounded-xl flex flex-col items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","border border-transparent hover:border-white/10","transition-all duration-150 ease-out","active:scale-95"),children:[s.jsx("span",{className:"text-2xl text-white font-medium",children:e}),t&&s.jsx("span",{className:"text-[10px] text-gray-500 tracking-widest -mt-0.5",children:t})]},e))}),(0,s.jsxs)(c.z,{onClick:w,disabled:!h||m,className:(0,o.cn)("w-full h-14 rounded-xl text-lg font-medium","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","disabled:opacity-50 disabled:cursor-not-allowed","shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30","transition-all duration-200"),children:[s.jsx(r.Z,{className:"w-5 h-5 mr-2"}),m?"Connecting...":"Call"]})]})}},64598:(e,t,a)=>{"use strict";a.d(t,{gw:()=>W,ZB:()=>N.ZB,zs:()=>N.zs});var s=a(27685),l=a(77921),r=a(92015),n=a(4610),i=a(24427),c=a(54654),o=a(28369),d=a(95101),x=a(22248),m=a(31087),h=a(48984),u=a(83810),b=a(14208),g=a(74854),f=a(85393),p=a(76500),w=a(43301),v=a(71459),j=a(61099),y=a(73045),N=a(14581),k=a(4283),C=a(14887),Z=a(4120);let S=[{id:"1",name:"John Smith",extension:"1001",status:"available"},{id:"2",name:"Jane Doe",extension:"1002",status:"busy"},{id:"3",name:"Bob Wilson",extension:"1003",status:"available"},{id:"4",name:"Alice Brown",extension:"1004",status:"offline"}],z=[{id:"q1",name:"Sales",waitingCalls:2,availableAgents:5},{id:"q2",name:"Support",waitingCalls:5,availableAgents:3},{id:"q3",name:"Billing",waitingCalls:0,availableAgents:2}];function P({onClose:e}){let{transferCall:t}=(0,N.zs)(),[a,r]=(0,u.useState)("agents"),[n,i]=(0,u.useState)(""),[d,x]=(0,u.useState)(""),[m,b]=(0,u.useState)("blind"),g=S.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.extension.includes(n)),f=z.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())),p=(0,u.useCallback)(a=>{t(a.extension,m),e()},[t,m,e]),w=(0,u.useCallback)(a=>{t(`queue:${a.id}`,m),e()},[t,m,e]),v=(0,u.useCallback)(()=>{d&&(t(d,m),e())},[t,d,m,e]),P=(0,u.useCallback)(e=>{i(e.target.value)},[]),T=(0,u.useCallback)(e=>{x(e.target.value)},[]),$=(0,u.useCallback)(t=>{t.target===t.currentTarget&&e()},[e]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:$,role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,Z.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:s.jsx(h.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-white text-lg font-semibold",children:"Transfer Call"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Select a destination"})]})]}),s.jsx(k.z,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-white",children:s.jsx(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>b("blind"),className:(0,Z.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","blind"===m?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Blind Transfer"}),s.jsx("button",{onClick:()=>b("warm"),className:(0,Z.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","warm"===m?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Warm Transfer"})]}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"blind"===m?"Call willbe transferred immediately":"You can speak to the recipient before transferring"})]}),s.jsx("div",{className:"px-6 pt-4",children:s.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["agents","queues","external"].map(e=>(0,s.jsxs)("button",{onClick:()=>r(e),className:(0,Z.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5",a===e?"bg-cyan-500 text-white":"text-gray-400 hover:text-white hover:bg-white/5"),children:["agents"===e&&s.jsx(o.Z,{className:"w-3.5 h-3.5"}),"queues"===e&&s.jsx(j.Z,{className:"w-3.5 h-3.5"}),"external"===e&&s.jsx(l.Z,{className:"w-3.5 h-3.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})}),(0,s.jsxs)("div",{className:"p-6",children:["external"!==a&&(0,s.jsxs)("div",{className:"relative mb-4",children:[s.jsx(y.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx(C.I,{value:n,onChange:P,placeholder:`Search ${a}...`,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),"agents"===a&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[g.map(e=>(0,s.jsxs)("button",{onClick:()=>p(e),disabled:"available"!==e.status,className:(0,Z.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all","available"===e.status?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[s.jsx("div",{className:(0,Z.cn)("w-10 h-10 rounded-full flex items-center justify-center","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:s.jsx(o.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ext. ",e.extension]})]}),s.jsx("span",{className:(0,Z.cn)("text-xs px-2 py-0.5 rounded-full","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:e.status})]},e.id)),0===g.length&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No agents found"})]}),"queues"===a&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[f.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e),disabled:0===e.availableAgents,className:(0,Z.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all",e.availableAgents>0?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center",children:s.jsx(j.Z,{className:"w-5 h-5 text-purple-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:[e.waitingCalls," waiting • ",e.availableAgents," available"]})]})]},e.id)),0===f.length&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No queues found"})]}),"external"===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Phone Number"}),s.jsx(C.I,{value:d,onChange:T,placeholder:"+1 (555) 000-0000",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),(0,s.jsxs)(k.z,{onClick:v,disabled:!d,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600",children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Transfer to ",d||"Number"]})]})]})]})]})}function T(){let{currentCall:e,toggleMute:t,toggleHold:a,hangupCall:l}=(0,N.zs)(),[r,n]=(0,u.useState)(!1),[i,c]=(0,u.useState)(!1),o=e?.isMuted??!1,x=e?.isOnHold??!1,m=(0,u.useCallback)(()=>{t()},[t]),b=(0,u.useCallback)(()=>{a()},[a]),j=(0,u.useCallback)(()=>{l()},[l]),y=(0,u.useCallback)(()=>{n(!0)},[]);return((0,u.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key.toLowerCase()){case"m":m();break;case"h":b();break;case"t":y()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,b,y]),e)?(0,s.jsxs)(s.Fragment,{children:[r&&s.jsx(P,{onClose:()=>n(!1)}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsxs)("button",{onClick:m,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",o?"bg-red-500/20 border-2 border-red-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:o?s.jsx(g.Z,{className:"w-6 h-6 text-red-400"}):s.jsx(f.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:o?"Unmute":"Mute"})]}),(0,s.jsxs)("button",{onClick:b,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",x?"bg-amber-500/20 border-2 border-amber-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:x?s.jsx(p.Z,{className:"w-6 h-6 text-amber-400"}):s.jsx(d.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:x?"Resume":"Hold"})]}),(0,s.jsxs)("button",{onClick:y,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","bg-white/10 border-2 border-transparent hover:bg-white/15","transition-all duration-200"),children:s.jsx(h.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:"Transfer"})]}),(0,s.jsxs)("button",{onClick:()=>c(!i),className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",i?"bg-cyan-500/20 border-2 border-cyan-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:s.jsx(w.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:"Keypad"})]})]}),i&&s.jsx($,{}),(0,s.jsxs)("button",{onClick:j,className:(0,Z.cn)("w-full py-4 rounded-xl flex items-center justify-center gap-3","bg-gradient-to-r from-red-500 to-red-600","hover:from-red-400 hover:to-red-500","shadow-lg shadow-red-500/25 hover:shadow-xl hover:shadow-red-500/30","transition-all duration-200","active:scale-98"),children:[s.jsx(v.Z,{className:"w-6 h-6 text-white"}),s.jsx("span",{className:"text-white font-semibold",children:"End Call"})]}),s.jsx("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"M"})," Mute"," ",s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"H"})," Hold"," ",s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"T"})," Transfer"]})})]})]}):s.jsx(s.Fragment,{})}function $(){let{sendDTMF:e}=(0,N.zs)();return s.jsx("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/5 rounded-xl",children:["1","2","3","4","5","6","7","8","9","*","0","#"].map(t=>s.jsx("button",{onClick:()=>e(t),className:(0,Z.cn)("h-12 rounded-lg flex items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","text-white text-lg font-medium","transition-all duration-150 active:scale-95"),children:t},t))})}var I=a(16340),D=a(10532),O=a(95239),E=a(98952),A=a(25897),F=a(73972),M=a(66802),H=a(1943);let R={fullName:o.Z,firstName:o.Z,lastName:o.Z,phoneNumber:l.Z,email:O.Z,company:E.Z,address:A.Z,city:A.Z,state:A.Z,zipCode:A.Z,leadSource:D.Z,campaignName:D.Z,notes:F.Z,createdAt:M.Z,website:H.Z};function L({data:e,variant:t="panel",className:a}){let{screenPopFields:l}=(0,N.zs)(),[r,c]=(0,u.useState)("modal"===t),d=l.filter(e=>e.enabled).sort((e,t)=>e.order-t.order),x=t=>{if(t in e){let a=e[t];return null==a?null:"object"==typeof a?JSON.stringify(a):String(a)}return e.customFields&&t in e.customFields?String(e.customFields[t]):null},m=()=>{let t=[e.address,e.city,e.state,e.zipCode].filter(Boolean);return t.length>0?t.join(", "):null},h=e=>{let a=x(e.key);if(["address","city","state","zipCode"].includes(e.key)&&"address"===e.key)a=m();else if(["city","state","zipCode"].includes(e.key)){let e=d.find(e=>"address"===e.key);if(e?.enabled)return null}if(!a)return null;let l=R[e.key]??F.Z;return(0,s.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[s.jsx("div",{className:(0,Z.cn)("w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0","modal"===t?"bg-white/10":"bg-cyan-500/10"),children:s.jsx(l,{className:(0,Z.cn)("w-4 h-4","modal"===t?"text-cyan-400":"text-cyan-500")})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-gray-500 text-xs mb-0.5",children:e.label}),s.jsx("p",{className:(0,Z.cn)("text-sm break-words","modal"===t?"text-white":"text-gray-200"),children:a})]})]},e.id)},b=d.map(e=>({field:e,value:x(e.key)})).filter(({value:e})=>null!==e);if(0===b.length)return(0,s.jsxs)("div",{className:(0,Z.cn)("p-4 rounded-xl text-center","modal"===t?"bg-white/5":"bg-slate-800/50",a),children:[s.jsx(F.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No prospect data available"})]});let g="modal"===t?5:3,f=b.length>g;return(0,s.jsxs)("div",{className:(0,Z.cn)("rounded-xl overflow-hidden","modal"===t?"bg-white/5border border-white/10":"bg-slate-800/30 border border-white/5",a),children:[(0,s.jsxs)("div",{className:(0,Z.cn)("px-4 py-3 flex items-center justify-between","modal"===t?"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-white/10":"bg-white/5 border-b border-white/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(o.Z,{className:"w-4 h-4 text-cyan-400"}),s.jsx("span",{className:(0,Z.cn)("font-medium text-sm","modal"===t?"text-white":"text-gray-200"),children:"Prospect Information"})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[b.length," field",1!==b.length?"s":""]})]}),s.jsx("div",{className:"px-4 divide-y divide-white/5",children:d.slice(0,r?void 0:g).map(e=>h(e))}),f&&s.jsx("button",{onClick:()=>c(!r),className:(0,Z.cn)("w-full px-4 py-2 flex items-center justify-center gap-2","text-xs text-gray-400 hover:text-white","border-t border-white/5 hover:bg-white/5","transition-colors"),children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{className:"w-4 h-4"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{className:"w-4 h-4"}),"Show ",b.length-g," More"]})})]})}function q({call:e}){let{answerCall:t,hangupCall:a}=(0,N.zs)(),[r,n]=(0,u.useState)(0);return(0,u.useEffect)(()=>{let e=setInterval(()=>{n(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,Z.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-3xl border border-white/10 shadow-2xl shadow-cyan-500/10","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-300"),children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 rounded-full bg-cyan-500/20 animate-ping"}),s.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-cyan-500/10 animate-pulse"})]}),(0,s.jsxs)("div",{className:"relative pt-8 pb-4 text-center",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-cyan-500/10 rounded-full border border-cyan-500/20 mb-4",children:[s.jsx(l.Z,{className:"w-4 h-4 text-cyan-400 animate-bounce"}),s.jsx("span",{className:"text-cyan-400 text-sm font-medium",children:"Incoming Call"})]}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ringing for ",`${Math.floor(r/60).toString().padStart(2,"0")}:${(r%60).toString().padStart(2,"0")}`]})]}),(0,s.jsxs)("div",{className:"relative px-6 pb-6 text-center",children:[s.jsx("div",{className:(0,Z.cn)("w-24 h-24 mx-auto mb-4 rounded-full","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border-2 border-cyan-500/30","flex items-center justify-center","shadow-lg shadow-cyan-500/20"),children:s.jsx(o.Z,{className:"w-12 h-12 text-cyan-400"})}),s.jsx("h2",{className:"text-white text-2xl font-bold mb-1",children:e.callerName||"Unknown Caller"}),s.jsx("p",{className:"text-gray-400 text-lg font-mono",children:e.phoneNumber}),e.queueName&&s.jsx("div",{className:"mt-3 flex items-center justify-center gap-2",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-500/10 rounded-full text-purple-400 text-xs",children:[s.jsx(D.Z,{className:"w-3 h-3"}),e.queueName]})})]}),e.prospectData&&Object.keys(e.prospectData).length>0&&s.jsx("div",{className:"px-6 pb-6",children:s.jsx(L,{data:e.prospectData,variant:"modal"})}),s.jsx("div",{className:"px-6 pb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,s.jsxs)("button",{onClick:()=>{a()},className:(0,Z.cn)("group relative flex flex-colitems-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-16 h-16 rounded-full","bg-gradient-to-br from-red-500 to-red-600","flex items-center justify-center","shadow-lg shadow-red-500/30","group-hover:shadow-xl group-hover:shadow-red-500/40","transition-all duration-200"),children:s.jsx(v.Z,{className:"w-7 h-7 text-white"})}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Decline"})]}),(0,s.jsxs)("button",{onClick:()=>{t()},className:(0,Z.cn)("group relative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-20 h-20 rounded-full","bg-gradient-to-br from-emerald-500 to-green-600","flex items-center justify-center","shadow-lg shadow-emerald-500/30","group-hover:shadow-xl group-hover:shadow-emerald-500/40","transition-allduration-200","animate-pulse"),children:s.jsx(l.Z,{className:"w-9 h-9 text-white"})}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Answer"})]})]})}),s.jsx("div",{className:"px-6 pb-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Press ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"A"})," to answer or ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"D"})," to decline"]})})]})]})}var B=a(26401),U=a(3920);function W(){var e;let{agentStatus:t,currentCall:a,isPhonePanelOpen:h,closePhonePanel:g,togglePhonePanel:f,error:p,clearError:w}=(0,N.zs)(),[v,j]=(0,u.useState)(!0),[y,C]=(0,u.useState)("dialpad"),[S,z]=(0,u.useState)(!1);return h?(0,s.jsxs)(s.Fragment,{children:[a?.state==="ringing"&&"inbound"===a.direction&&s.jsx(q,{call:a}),S&&s.jsx(B.h,{onClose:()=>z(!1)}),(0,s.jsxs)(U.Zb,{className:(0,Z.cn)("fixed bottom-6 right-6 z-40","w-[380px] overflow-hidden","bg-gradient-to-b from-slate-900/95 to-slate-950/95","backdrop-blur-xl border-white/10","shadow-2xl shadow-black/50","transition-all duration-300 ease-out",v?"h-auto":"h-[72px]"),children:[(0,s.jsxs)(U.Ol,{className:"p-4 pb-3 space-y-0 flex flex-row items-center justify-between border-b border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:(0,Z.cn)("w-10 h-10 rounded-xl flex items-center justify-center","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border border-cyan-500/30"),children:s.jsx(l.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-white text-sm",children:"Agent Phone"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(b.b,{})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[a?.state==="active"&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 rounded-full mr-2",children:[s.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-emerald-400 text-xs font-mono",children:(e=a.duration,`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`)})]}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>z(!0),children:s.jsx(r.Z,{className:"w-4 h-4"})}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>j(!v),children:v?s.jsx(n.Z,{className:"w-4 h-4"}):s.jsx(i.Z,{className:"w-4 h-4"})}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:g,children:s.jsx(c.Z,{className:"w-4 h-4"})})]})]}),p&&s.jsx("div",{className:"px-4 py-2 bg-red-500/10 border-b border-red-500/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-red-400 text-xs",children:p}),s.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-300",children:s.jsx(c.Z,{className:"w-3 h-3"})})]})}),v&&(0,s.jsxs)(U.aY,{className:"p-0",children:[a&&"ringing"!==a.state&&"ended"!==a.state&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[a.prospectData&&s.jsx(L,{data:a.prospectData}),(0,s.jsxs)("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center border border-cyan-500/30",children:s.jsx(o.Z,{className:"w-8 h-8 text-cyan-400"})}),s.jsx("h4",{className:"text-white font-semibold text-lg",children:a.callerName||"Unknown Caller"}),s.jsx("p",{className:"text-gray-400 text-sm",children:a.phoneNumber}),a.queueName&&(0,s.jsxs)("p",{className:"text-cyan-400 text-xs mt-1",children:["From: ",a.queueName]})]}),a.isOnHold&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 bg-amber-500/10 rounded-lg",children:[s.jsx(d.Z,{className:"w-4 h-4 text-amber-400"}),s.jsx("span",{className:"text-amber-400 text-sm",children:"Call On Hold"})]}),s.jsx(T,{})]}),(!a||"ended"===a.state)&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[s.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["dialpad","history","settings"].map(e=>(0,s.jsxs)("button",{onClick:()=>C(e),className:(0,Z.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all",y===e?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5"),children:["dialpad"===e&&s.jsx(x.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"history"===e&&s.jsx(m.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"settings"===e&&s.jsx(r.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),"dialpad"===y&&s.jsx(I.c,{}),"history"===y&&s.jsx(J,{}),"settings"===y&&s.jsx(Y,{})]})]})]})]}):(0,s.jsxs)("button",{onClick:f,className:(0,Z.cn)("fixed bottom-6 right-6 z-50","flex items-center gap-3 px-5 py-3 rounded-full","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","text-white font-medium shadow-2xl","transition-all duration-300 ease-out","hover:scale-105 hover:shadow-cyan-500/25","border border-white/10",a?.state==="ringing"&&"animate-pulse"),"aria-label":"Open phone",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(l.Z,{className:"w-5 h-5"}),a?.state==="ringing"&&s.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]}),s.jsx("span",{className:"capitalize",children:"on-call"===t?"On Call":t}),s.jsx("span",{className:(0,Z.cn)("w-2.5 h-2.5 rounded-full",(e=>{switch(e){case"available":return"bg-emerald-500";case"on-call":return"bg-amber-500";case"away":return"bg-red-500";case"dnd":return"bg-purple-500";default:return"bg-gray-500"}})(t))})]})}function J(){let{callHistory:e,makeCall:t}=(0,N.zs)(),a=e=>e?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",r=e=>{t(e)};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[s.jsx(m.Z,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No recent calls"})]}):s.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:e.map((e,t)=>s.jsx("button",{onClick:()=>r(e.phoneNumber),className:(0,Z.cn)("w-full p-3 rounded-lg text-left transition-all","bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:(0,Z.cn)("w-8 h-8 rounded-full flex items-center justify-center","inbound"===e.direction?"bg-cyan-500/20 text-cyan-400":"bg-blue-500/20 text-blue-400"),children:"inbound"===e.direction?s.jsx(l.Z,{className:"w-4 h-4"}):s.jsx(h.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.callerName||e.phoneNumber}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["inbound"===e.direction?"Incoming":"Outgoing",e.duration>0&&` • ${Math.floor(e.duration/60)}m ${e.duration%60}s`]})]})]}),s.jsx("span",{className:"text-gray-500 text-xs",children:a(e.startTime)})]})},`${e.callId}-${t}`))})}function Y(){let{audioDevices:e,selectedAudioInput:t,selectedAudioOutput:a,setAudioInput:l,setAudioOutput:n}=(0,N.zs)(),i=e.filter(e=>"audioinput"===e.kind),c=e.filter(e=>"audiooutput"===e.kind);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Microphone"}),s.jsx("select",{value:t??"",onChange:e=>l(e.target.value),className:(0,Z.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:i.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Speaker"}),s.jsx("select",{value:a??"",onChange:e=>n(e.target.value),className:(0,Z.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:c.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`Speaker ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Configure which prospect fields appear during incoming calls."}),(0,s.jsxs)(k.z,{variant:"outline",size:"sm",className:"w-full border-white/10 text-gray-300 hover:bg-white/5",children:[s.jsx(r.Z,{className:"w-4 h-4 mr-2"}),"Configure Screen Pop Fields"]})]})]})}},14581:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>c,zs:()=>i});var s=a(27685),l=a(83810);let r=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}],n=(0,l.createContext)(null);function i(){let e=(0,l.useContext)(n);if(!e)throw Error("usePhone must be used within a PhoneProvider");return e}function c({children:e,wsUrl:t="ws://45.32.213.201:3001",apiUrl:a="http://45.32.213.201:3001"}){let i=a.replace(/\/api\/v1\/?$/,""),c="a1b2c3d4e5f67890",o=(0,l.useCallback)((e=!0)=>{let t={};return e&&(t["Content-Type"]="application/json"),c&&(t["x-api-key"]=c),t},[c]),[d,x]=(0,l.useState)("offline"),[m,h]=(0,l.useState)(null),[u,b]=(0,l.useState)([]),[g,f]=(0,l.useState)(!1),[p,w]=(0,l.useState)(!1),[v,j]=(0,l.useState)([]),[y,N]=(0,l.useState)(null),[k,C]=(0,l.useState)(null),[Z,S]=(0,l.useState)(()=>r),[z,P]=(0,l.useState)(null);(0,l.useRef)(null);let T=(0,l.useRef)(null),$=(0,l.useRef)(null),I=(0,l.useCallback)(()=>{$.current?.play().catch(()=>{})},[]),D=(0,l.useCallback)(()=>{$.current&&($.current.pause(),$.current.currentTime=0)},[]),O=(0,l.useCallback)(()=>{T.current&&clearInterval(T.current),T.current=setInterval(()=>{h(e=>e&&e.answerTime?{...e,duration:Math.floor((Date.now()-e.answerTime.getTime())/1e3)}:e)},1e3)},[]),E=(0,l.useCallback)(()=>{T.current&&(clearInterval(T.current),T.current=null)},[]),A=(0,l.useCallback)(e=>{e&&(h({callId:e.callId??`call_${Date.now()}`,direction:"inbound",state:"ringing",phoneNumber:e.callerNumber??e.from??"",callerName:e.callerName,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0,prospectData:e.prospectData??e.screenPopData,queueName:e.queueName,campaignId:e.campaignId}),f(!0),I())},[I]),F=(0,l.useCallback)(()=>{h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),D(),O()},[D,O]),M=(0,l.useCallback)(()=>{h(e=>{if(e){let t={...e,state:"ended",endTime:new Date};b(e=>[t,...e].slice(0,50))}return null}),x("available"),D(),E()},[D,E]),H=(0,l.useCallback)(e=>{e&&h(t=>{if(!t)return t;let a=e.isOnHold??!t.isOnHold;return{...t,isOnHold:a,state:a?"hold":"active"}})},[]),R=(0,l.useCallback)(e=>{let{type:t,channel:a,payload:s}=e;if("event"===t)switch(a){case"agent.call.incoming":A(s);break;case"agent.call.answered":F();break;case"agent.call.ended":M();break;case"agent.call.hold":H(s)}},[A,F,M,H]);(0,l.useEffect)(()=>{},[t,R]),(0,l.useEffect)(()=>{},[y,k]);let L=(0,l.useCallback)(e=>{S(e)},[]),q=(0,l.useCallback)(e=>{fetch(`${i}/api/v1/agent/status`,{method:"PUT",headers:o(),body:JSON.stringify({status:e})}).catch(()=>{}),x(e)},[i,o]),B=(0,l.useCallback)(()=>f(!0),[]),U=(0,l.useCallback)(()=>f(!1),[]),W=(0,l.useCallback)(()=>f(e=>!e),[]),J=(0,l.useCallback)(async e=>{console.log("[Phone] Initiating call to:",e),w(!0),P(null);try{let t=`${i}/api/v1/agent/call/originate`;console.log("[Phone] Calling API:",t);let a=await fetch(t,{method:"POST",headers:o(),body:JSON.stringify({phoneNumber:e})}),s=await a.json();if(console.log("[Phone] API response:",a.status,s),!a.ok)throw Error(s.error?.message??"Failed to place call");let l={callId:s.callId??`call_${Date.now()}`,direction:"outbound",state:"connecting",phoneNumber:e,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0};console.log("[Phone] Call initiated successfully:",l),h(l),x("on-call"),f(!0),setTimeout(()=>{h(e=>e&&e.callId===l.callId?{...e,state:"active",answerTime:new Date}:e),O()},2e3)}catch(e){console.error("[Phone] Call failed:",e),P(e instanceof Error?e.message:"Failed to place call")}finally{w(!1)}},[i,o,O]),Y=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/answer`,{method:"POST",headers:o(!1)}),h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),D(),O()}catch(e){P(e instanceof Error?e.message:"Failed to answer call")}},[i,m,D,O,o]),_=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/hangup`,{method:"POST",headers:o(!1)});let e={...m,state:"ended",endTime:new Date};b(t=>[e,...t].slice(0,50)),h(null),x("available"),E()}catch(e){P(e instanceof Error?e.message:"Failed to hang up")}},[i,m,E,o]),G=(0,l.useCallback)(()=>{h(e=>e?{...e,isMuted:!e.isMuted}:e)},[]),K=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/hold`,{method:"POST",headers:o(!1)}),h(e=>e?{...e,isOnHold:!e.isOnHold,state:e.isOnHold?"active":"hold"}:e)}catch(e){P(e instanceof Error?e.message:"Failed to toggle hold")}},[i,m,o]),Q=(0,l.useCallback)(e=>{m&&console.log("[Phone] Sending DTMF:",e)},[m]),V=(0,l.useCallback)(async(e,t)=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/transfer`,{method:"POST",headers:o(),body:JSON.stringify({destination:e,type:t})}),"blind"===t&&(h(null),x("available"))}catch(e){P(e instanceof Error?e.message:"Failed to transfer call")}},[i,m,o]),X=(0,l.useCallback)(e=>{N(e)},[]),ee=(0,l.useCallback)(e=>{C(e)},[]),et=(0,l.useCallback)(()=>P(null),[]);return s.jsx(n.Provider,{value:{agentStatus:d,currentCall:m,callHistory:u,isPhonePanelOpen:g,isConnecting:p,audioDevices:v,selectedAudioInput:y,selectedAudioOutput:k,screenPopFields:Z,error:z,setAgentStatus:q,openPhonePanel:B,closePhonePanel:U,togglePhonePanel:W,makeCall:J,answerCall:Y,hangupCall:_,toggleMute:G,toggleHold:K,sendDTMF:Q,transferCall:V,setAudioInput:X,setAudioOutput:ee,updateScreenPopFields:L,clearError:et},children:e})}},26401:(e,t,a)=>{"use strict";a.d(t,{h:()=>j});var s=a(27685),l=a(28369),r=a(77921),n=a(95239),i=a(98952),c=a(25897),o=a(10532),d=a(73972),x=a(54654),m=a(70167),h=a(34748),u=a(63197),b=a(83810),g=a(14581),f=a(4283),p=a(4120);let w={fullName:l.Z,firstName:l.Z,lastName:l.Z,phoneNumber:r.Z,email:n.Z,company:i.Z,address:c.Z,city:c.Z,state:c.Z,zipCode:c.Z,leadSource:o.Z,campaignName:o.Z,notes:d.Z},v=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}];function j({onClose:e}){let{screenPopFields:t,updateScreenPopFields:a}=(0,g.zs)(),[l,r]=(0,b.useState)([...t]),[n,i]=(0,b.useState)(null),c=(0,b.useCallback)(e=>{r(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},[]),o=(0,b.useCallback)(e=>{i(e)},[]),j=(0,b.useCallback)(e=>{n&&n!==e&&r(t=>{let a=t.findIndex(e=>e.id===n),s=t.findIndex(t=>t.id===e);if(-1===a||-1===s)return t;let l=[...t],[r]=l.splice(a,1);return l.splice(s,0,r),l.map((e,t)=>({...e,order:t+1}))})},[n]),y=(0,b.useCallback)(()=>{i(null)},[]),N=(0,b.useCallback)(()=>{a(l),e()},[l,a,e]),k=(0,b.useCallback)(()=>{r([...v])},[]),C=(0,b.useCallback)(t=>{t.target===t.currentTarget&&e()},[e]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:C,role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,p.cn)("relative z-10 w-full max-w-lg mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-white text-lg font-semibold",children:"Screen Pop Settings"}),s.jsx("p",{className:"text-gray-500 text-sm mt-0.5",children:"Configure which fields appear during incoming calls"})]}),s.jsx(f.z,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-white",children:s.jsx(x.Z,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"px-6 py-4 max-h-[400px] overflow-y-auto",children:s.jsx("div",{className:"space-y-2",children:l.sort((e,t)=>e.order-t.order).map(e=>{let t=w[e.key]??d.Z;return(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>o(e.id),onDragOver:t=>{t.preventDefault(),j(e.id)},onDragEnd:y,className:(0,p.cn)("flex items-center gap-3 p-3 rounded-lg","bg-white/5 border border-transparent","hover:bg-white/10 hover:border-white/10","transition-all cursor-move",n===e.id&&"opacity-50 scale-95"),children:[s.jsx(m.Z,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),s.jsx("div",{className:(0,p.cn)("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",e.enabled?"bg-cyan-500/10 text-cyan-400":"bg-white/5 text-gray-500"),children:s.jsx(t,{className:"w-4 h-4"})}),s.jsx("span",{className:(0,p.cn)("flex-1 text-sm",e.enabled?"text-white":"text-gray-500"),children:e.label}),s.jsx("button",{onClick:()=>c(e.id),className:(0,p.cn)("w-10 h-6 rounded-full p-1 transition-colors",e.enabled?"bg-cyan-500":"bg-white/10"),children:s.jsx("div",{className:(0,p.cn)("w-4 h-4 rounded-full bg-white transition-transform",e.enabled?"translate-x-4":"translate-x-0")})})]},e.id)})})}),(0,s.jsxs)("div",{className:"px-6 py-3 bg-white/5 border-t border-white/10",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Preview:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.filter(e=>e.enabled).sort((e,t)=>e.order-t.order).map(e=>s.jsx("span",{className:"px-2 py-1 bg-cyan-500/10 text-cyan-400 text-xs rounded-full border border-cyan-500/20",children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex items-center justify-between",children:[(0,s.jsxs)(f.z,{variant:"ghost",onClick:k,className:"text-gray-400 hover:text-white gap-2",children:[s.jsx(h.Z,{className:"w-4 h-4"}),"Reset to Default"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(f.z,{variant:"outline",onClick:e,className:"border-white/10",children:"Cancel"}),(0,s.jsxs)(f.z,{onClick:N,className:"bg-gradient-to-r from-cyan-600 to-blue-600 gap-2",children:[s.jsx(u.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})]})]})}},96500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ThemeProvider:()=>r});var s=a(27685),l=a(88351);function r({children:e,...t}){return s.jsx(l.f,{...t,children:e})}a(83810)},4283:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var s=a(27685),l=a(40461),r=a(31727),n=a(83810),i=a(4120);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...n},o)=>{let d=r?l.g7:"button";return s.jsx(d,{className:(0,i.cn)(c({variant:t,size:a,className:e})),ref:o,...n})});o.displayName="Button"},3920:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>i,SZ:()=>o,Zb:()=>n,aY:()=>d,ll:()=>c});var s=a(27685),l=a(83810),r=a(4120);let n=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let c=l.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let o=l.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},14887:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(27685),l=a(83810),r=a(4120);let n=l.forwardRef(({className:e,type:t,...a},l)=>s.jsx("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a}));n.displayName="Input"},4120:(e,t,a)=>{"use strict";a.d(t,{LU:()=>c,cn:()=>r,p6:()=>o,un:()=>n,xG:()=>i});var s=a(91261),l=a(96510);function r(...e){return(0,l.m6)((0,s.W)(e))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`}return e}function i(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function c(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return t>0?`${t}:${String(a).padStart(2,"0")}:${String(s).padStart(2,"0")}`:`${a}:${String(s).padStart(2,"0")}`}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},41097:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>l,default:()=>n});let s=(0,a(30599).createProxy)(String.raw`/app/apps/web/src/app/(dashboard)/layout.tsx`),{__esModule:l,$$typeof:r}=s,n=s.default},47632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m,metadata:()=>x});var s=a(36491),l=a(51846),r=a.n(l);a(75556);var n=a(30599);let i=(0,n.createProxy)(String.raw`/app/apps/web/src/components/theme-provider.tsx`),{__esModule:c,$$typeof:o}=i;i.default;let d=(0,n.createProxy)(String.raw`/app/apps/web/src/components/theme-provider.tsx#ThemeProvider`),x={title:"Hopwhistle",description:"Production-grade telephony platform"};function m({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:r().className,children:s.jsx(d,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:e})})})}},75556:()=>{}};
/app/apps/web/.next/server/chunks/101.js:"use strict";exports.id=101,exports.ids=[101],exports.modules={65944:(e,t,r)=>{r.d(t,{Bw:()=>p,Ph:()=>c,Ql:()=>m,i4:()=>h,ki:()=>d});var n=r(27685),a=r(66134),i=r(4610),s=r(24427),o=r(63197),l=r(83810),u=r(4120);let c=a.fC;a.ZA;let d=a.B4,h=l.forwardRef(({className:e,children:t,...r},s)=>(0,n.jsxs)(a.xz,{ref:s,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(a.JO,{asChild:!0,children:n.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=a.xz.displayName;let f=l.forwardRef(({className:e,...t},r)=>n.jsx(a.u_,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(s.Z,{className:"h-4 w-4"})}));f.displayName=a.u_.displayName;let g=l.forwardRef(({className:e,...t},r)=>n.jsx(a.$G,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(i.Z,{className:"h-4 w-4"})}));g.displayName=a.$G.displayName;let p=l.forwardRef(({className:e,children:t,position:r="popper",...i},s)=>n.jsx(a.h_,{children:(0,n.jsxs)(a.VY,{ref:s,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[n.jsx(f,{}),n.jsx(a.l_,{className:(0,u.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(g,{})]})}));p.displayName=a.VY.displayName,l.forwardRef(({className:e,...t},r)=>n.jsx(a.__,{ref:r,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=a.__.displayName;let m=l.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsxs)(a.ck,{ref:i,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(a.wU,{children:n.jsx(o.Z,{className:"h-4 w-4"})})}),n.jsx(a.eT,{children:t})]}));m.displayName=a.ck.displayName,l.forwardRef(({className:e,...t},r)=>n.jsx(a.Z0,{ref:r,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=a.Z0.displayName},39881:(e,t,r)=>{r.d(t,{x:()=>a});class n{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a=`${this.baseUrl}${e}`,i={"Content-Type":"application/json",...t.headers};this.token&&(i.Authorization=`Bearer ${this.token}`),this.apiKey&&(i["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:i}),r=await e.json();if(!e.ok)return{error:{code:r.error?.code||"UNKNOWN_ERROR",message:r.error?.message||"An error occurred"}};return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new n},33173:(e,t,r)=>{r.d(t,{Z:()=>n});/**
/app/apps/web/.next/server/chunks/201.js:"use strict";exports.id=201,exports.ids=[201],exports.modules={35090:(e,t,a)=>{a.d(t,{C:()=>d});var r=a(27685),s=a(31727);a(83810);var o=a(4120);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...a}){return r.jsx("div",{className:(0,o.cn)(n({variant:t}),e),...a})}},44517:(e,t,a)=>{a.d(t,{X:()=>O});var r=a(27685),s=a(83810),o=a(68118),n=a(6872),d=a(2724),i=a(39294),l=a(39430),c=a(12518),f=a(1090),u=a(29548),m="Checkbox",[p,x]=(0,n.b)(m),[b,h]=p(m);function y(e){let{__scopeCheckbox:t,checked:a,children:o,defaultChecked:n,disabled:d,form:l,name:c,onCheckedChange:f,required:u,value:p="on",internal_do_not_use_render:x}=e,[h,y]=(0,i.T)({prop:a,defaultProp:n??!1,onChange:f,caller:m}),[g,N]=s.useState(null),[v,w]=s.useState(null),j=s.useRef(!1),k=!g||!!l||!!g.closest("form"),R={checked:h,disabled:d,setChecked:y,control:g,setControl:N,name:c,form:l,value:p,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:!T(n)&&n,isFormControl:k,bubbleInput:v,setBubbleInput:w};return(0,r.jsx)(b,{scope:t,...R,children:"function"==typeof x?x(R):o})}var g="CheckboxTrigger",N=s.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...n},i)=>{let{control:l,value:c,disabled:f,checked:m,required:p,setControl:x,setChecked:b,hasConsumerStoppedPropagationRef:y,isFormControl:N,bubbleInput:v}=h(g,e),w=(0,o.e)(i,x),j=s.useRef(m);return s.useEffect(()=>{let e=l?.form;if(e){let t=()=>b(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,b]),(0,r.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":T(m)?"mixed":m,"aria-required":p,"data-state":E(m),"data-disabled":f?"":void 0,disabled:f,value:c,...n,ref:w,onKeyDown:(0,d.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.Mj)(a,e=>{b(e=>!!T(e)||!e),v&&N&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});N.displayName=g;var v=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:s,checked:o,defaultChecked:n,required:d,disabled:i,value:l,onCheckedChange:c,form:f,...u}=e;return(0,r.jsx)(y,{__scopeCheckbox:a,checked:o,defaultChecked:n,disabled:i,required:d,onCheckedChange:c,name:s,form:f,value:l,internal_do_not_use_render:({isFormControl:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{...u,ref:t,__scopeCheckbox:a}),e&&(0,r.jsx)(R,{__scopeCheckbox:a})]})})});v.displayName=m;var w="CheckboxIndicator",j=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:s,...o}=e,n=h(w,a);return(0,r.jsx)(f.z,{present:s||T(n.checked)||!0===n.checked,children:(0,r.jsx)(u.WV.span,{"data-state":E(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});j.displayName=w;var k="CheckboxBubbleInput",R=s.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:n,hasConsumerStoppedPropagationRef:d,checked:i,defaultChecked:f,required:m,disabled:p,name:x,value:b,form:y,bubbleInput:g,setBubbleInput:N}=h(k,e),v=(0,o.e)(a,N),w=(0,l.D)(i),j=(0,c.t)(n);s.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(w!==i&&e){let a=new Event("click",{bubbles:t});g.indeterminate=T(i),e.call(g,!T(i)&&i),g.dispatchEvent(a)}},[g,w,i,d]);let R=s.useRef(!T(i)&&i);return(0,r.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??R.current,required:m,disabled:p,name:x,value:b,form:y,...t,tabIndex:-1,ref:v,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function T(e){return"indeterminate"===e}function E(e){return T(e)?"indeterminate":e?"checked":"unchecked"}R.displayName=k;var C=a(63197),D=a(4120);let O=s.forwardRef(({className:e,...t},a)=>r.jsx(v,{ref:a,className:(0,D.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(j,{className:(0,D.cn)("flex items-center justify-center text-current"),children:r.jsx(C.Z,{className:"h-4 w-4"})})}));O.displayName=v.displayName},84177:(e,t,a)=>{a.d(t,{$N:()=>p,Be:()=>x,Vq:()=>i,cN:()=>m,cZ:()=>f,fK:()=>u});var r=a(27685),s=a(35639),o=a(54654),n=a(83810),d=a(4120);let i=s.fC;s.xz;letl=s.h_;s.x8;let c=n.forwardRef(({className:e,...t},a)=>r.jsx(s.aV,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));c.displayName=s.aV.displayName;let f=n.forwardRef(({className:e,children:t,...a},n)=>(0,r.jsxs)(l,{children:[r.jsx(c,{}),(0,r.jsxs)(s.VY,{ref:n,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=s.VY.displayName;let u=({className:e,...t})=>r.jsx("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});u.displayName="DialogHeader";let m=({className:e,...t})=>r.jsx("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});m.displayName="DialogFooter";let p=n.forwardRef(({className:e,...t},a)=>r.jsx(s.Dx,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));p.displayName=s.Dx.displayName;let x=n.forwardRef(({className:e,...t},a)=>r.jsx(s.dk,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=s.dk.displayName},57869:(e,t,a)=>{a.d(t,{_:()=>d});var r=a(27685),s=a(73891),o=a(83810),n=a(4120);let d=o.forwardRef(({className:e,...t},a)=>r.jsx(s.f,{ref:a,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));d.displayName=s.f.displayName},25277:(e,t,a)=>{a.d(t,{RM:()=>i,SC:()=>l,iA:()=>n,pj:()=>f,ss:()=>c,xD:()=>d});var r=a(27685),s=a(83810),o=a(4120);let n=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));n.displayName="Table";let d=s.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:(0,o.cn)("[&_tr]:border-b",e),...t}));d.displayName="TableHeader";let i=s.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));i.displayName="TableBody",s.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let l=s.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));l.displayName="TableRow";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let f=s.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));f.displayName="TableCell",s.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,a)=>{a.d(t,{x:()=>s});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let s=`${this.baseUrl}${e}`,o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization=`Bearer ${this.token}`),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:o}),a=await e.json();if(!e.ok)return{error:{code:a.error?.code||"UNKNOWN_ERROR",message:a.error?.message||"An error occurred"}};return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){returnthis.request(e,{method:"DELETE"})}}let s=new r}};
/app/apps/web/.next/static/chunks/4748-f436e6451501f6eb.js:"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4748],{1506:function(e,t,a){a.d(t,{b:function(){return o}});var s=a(91674),l=a(50802),r=a(86655),n=a(88562),i=a(33061);let c=[{value:"available",label:"Available",color:"text-emerald-400",bgColor:"bg-emerald-500",description:"Ready to receive calls"},{value:"away",label:"Away",color:"text-amber-400",bgColor:"bg-amber-500",description:"Temporarily unavailable"},{value:"dnd",label:"Do Not Disturb",color:"text-red-400",bgColor:"bg-red-500",description:"No callsor notifications"},{value:"offline",label:"Offline",color:"text-gray-400",bgColor:"bg-gray-500",description:"Not logged in"}];function o(){var e;let{agentStatus:t,setAgentStatus:a,currentCall:o}=(0,n.zs)(),[d,u]=(0,r.useState)(!1),x=(0,r.useRef)(null),m=null!==(e=c.find(e=>e.value===t))&&void 0!==e?e:c[3];(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=(0,r.useCallback)(e=>{o&&"ended"!==o.state||(a(e),u(!1))},[o,a]),b=o&&"ended"!==o.state;return(0,s.jsxs)("div",{className:"relative",ref:x,children:[(0,s.jsxs)("button",{onClick:()=>u(!d),disabled:!!b,className:(0,i.cn)("flex items-center gap-2 px-2 py-1 rounded-lg","text-xs font-medium transition-all","hover:bg-white/5",b&&"opacity-50 cursor-not-allowed"),children:[(0,s.jsx)("span",{className:(0,i.cn)("w-2 h-2 rounded-full",m.bgColor)}),(0,s.jsx)("span",{className:m.color,children:b?"On Call":m.label}),!b&&(0,s.jsx)(l.Z,{className:(0,i.cn)("w-3 h-3 text-gray-400 transition-transform",d&&"rotate-180")})]}),d&&!b&&(0,s.jsx)("div",{className:(0,i.cn)("absolute top-full left-0 mt-2 w-56 z-50","bg-slate-900 border border-white/10 rounded-xl","shadow-xl shadow-black/50 overflow-hidden","animate-in fade-in-0 zoom-in-95 duration-150"),children:c.map(e=>(0,s.jsxs)("button",{onClick:()=>h(e.value),className:(0,i.cn)("w-full px-4 py-3 flex items-center gap-3 text-left","hover:bg-white/5 transition-colors",t===e.value&&"bg-white/5"),children:[(0,s.jsx)("span",{className:(0,i.cn)("w-2.5 h-2.5 rounded-full",e.bgColor)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:(0,i.cn)("text-sm font-medium",e.color),children:e.label}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),t===e.value&&(0,s.jsx)("span",{className:"ml-auto text-cyan-400 text-xs",children:"✓"})]},e.value))})]})}},54506:function(e,t,a){a.d(t,{c:function(){return x}});var s=a(91674),l=a(55756),r=a(4458),n=a(86655),i=a(88562),c=a(90747),o=a(33061);let d=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],u={1:[697,1209],2:[697,1336],3:[697,1477],4:[770,1209],5:[770,1336],6:[770,1477],7:[852,1209],8:[852,1336],9:[852,1477],"*":[941,1209],0:[941,1336],"#":[941,1477]};function x(){let{makeCall:e,sendDTMF:t,currentCall:a,isConnecting:x}=(0,i.zs)(),[m,h]=(0,n.useState)(""),b=(0,n.useRef)(null),g=(0,n.useCallback)(e=>{try{if(!b.current){let e=window.AudioContext||window.webkitAudioContext;e&&(b.current=new e)}let t=b.current;if(!t)return;let a=u[e];if(!a)return;let s=t.createOscillator(),l=t.createOscillator(),r=t.createGain();s.type="sine",l.type="sine",s.frequency.value=a[0],l.frequency.value=a[1],r.gain.value=.1,s.connect(r),l.connect(r),r.connect(t.destination),s.start(),l.start(),setTimeout(()=>{s.stop(),l.stop()},150)}catch(e){}},[]),f=(0,n.useCallback)(e=>{a&&"ended"!==a.state?t(e):h(t=>t+e),g(e)},[a,t,g]),p=(0,n.useCallback)(()=>{h(e=>e.slice(0,-1))},[]),v=(0,n.useCallback)(()=>{m&&!x&&(e(m),h(""))},[m,x,e]),w=(0,n.useCallback)(e=>{/^[0-9*#]$/.test(e.key)?f(e.key):"Backspace"===e.key?p():"Enter"===e.key&&m&&v()},[f,p,v,m]);return(0,s.jsxs)("div",{className:"space-y-4",onKeyDown:w,tabIndex:0,children:[(0,s.jsxs)("div",{className:(0,o.cn)("h-16 px-4 rounded-xl flex items-center justify-between","bg-white/5 border border-white/10"),children:[(0,s.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value.replace(/[^0-9+*#()-\s]/g,"")),placeholder:"Enter number...",className:(0,o.cn)("flex-1 bg-transparent text-2xl font-mono text-white","placeholder:text-gray-600 outline-none")}),m&&(0,s.jsx)("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(l.Z,{className:"w-5 h-5"})})]}),m&&(0,s.jsx)("p",{className:"text-center text-gray-400 text-sm",children:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))})(m)}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:d.map(e=>{let{digit:t,letters:a}=e;return(0,s.jsxs)("button",{onClick:()=>f(t),className:(0,o.cn)("h-16 rounded-xl flex flex-col items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","border border-transparent hover:border-white/10","transition-all duration-150 ease-out","active:scale-95"),children:[(0,s.jsx)("span",{className:"text-2xl text-white font-medium",children:t}),a&&(0,s.jsx)("span",{className:"text-[10px] text-gray-500 tracking-widest -mt-0.5",children:a})]},t)})}),(0,s.jsxs)(c.z,{onClick:v,disabled:!m||x,className:(0,o.cn)("w-full h-14 rounded-xl text-lg font-medium","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","disabled:opacity-50 disabled:cursor-not-allowed","shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30","transition-all duration-200"),children:[(0,s.jsx)(r.Z,{className:"w-5 h-5 mr-2"}),x?"Connecting...":"Call"]})]})}},54748:function(e,t,a){a.d(t,{gw:function(){return W},ZB:function(){return j.ZB},zs:function(){return j.zs}});var s=a(91674),l=a(4458),r=a(25390),n=a(50802),i=a(98371),c=a(77037),o=a(61082),d=a(96733),u=a(81124),x=a(80317),m=a(34173),h=a(86655),b=a(1506),g=a(86819),f=a(40100),p=a(95807),v=a(10015),w=a(95902),y=a(51436),N=a(89175),j=a(88562),k=a(90747),C=a(66120),S=a(33061);let Z=[{id:"1",name:"John Smith",extension:"1001",status:"available"},{id:"2",name:"Jane Doe",extension:"1002",status:"busy"},{id:"3",name:"Bob Wilson",extension:"1003",status:"available"},{id:"4",name:"Alice Brown",extension:"1004",status:"offline"}],z=[{id:"q1",name:"Sales",waitingCalls:2,availableAgents:5},{id:"q2",name:"Support",waitingCalls:5,availableAgents:3},{id:"q3",name:"Billing",waitingCalls:0,availableAgents:2}];function I(e){let{onClose:t}=e,{transferCall:a}=(0,j.zs)(),[r,n]=(0,h.useState)("agents"),[i,d]=(0,h.useState)(""),[u,x]=(0,h.useState)(""),[b,g]=(0,h.useState)("blind"),f=Z.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.extension.includes(i)),p=z.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),v=(0,h.useCallback)(e=>{a(e.extension,b),t()},[a,b,t]),w=(0,h.useCallback)(e=>{a("queue:".concat(e.id),b),t()},[a,b,t]),I=(0,h.useCallback)(()=>{u&&(a(u,b),t())},[a,u,b,t]),D=(0,h.useCallback)(e=>{d(e.target.value)},[]),T=(0,h.useCallback)(e=>{x(e.target.value)},[]),O=(0,h.useCallback)(e=>{e.target===e.currentTarget&&t()},[t]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:O,role:"dialog","aria-modal":"true",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,S.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-white text-lg font-semibold",children:"Transfer Call"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Select a destination"})]})]}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400hover:text-white",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>g("blind"),className:(0,S.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","blind"===b?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Blind Transfer"}),(0,s.jsx)("button",{onClick:()=>g("warm"),className:(0,S.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","warm"===b?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Warm Transfer"})]}),(0,s.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:"blind"===b?"Call will be transferred immediately":"You can speak to the recipient before transferring"})]}),(0,s.jsx)("div",{className:"px-6 pt-4",children:(0,s.jsx)("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["agents","queues","external"].map(e=>(0,s.jsxs)("button",{onClick:()=>n(e),className:(0,S.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5",r===e?"bg-cyan-500 text-white":"text-gray-400 hover:text-white hover:bg-white/5"),children:["agents"===e&&(0,s.jsx)(o.Z,{className:"w-3.5 h-3.5"}),"queues"===e&&(0,s.jsx)(y.Z,{className:"w-3.5 h-3.5"}),"external"===e&&(0,s.jsx)(l.Z,{className:"w-3.5 h-3.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})}),(0,s.jsxs)("div",{className:"p-6",children:["external"!==r&&(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,s.jsx)(C.I,{value:i,onChange:D,placeholder:"Search ".concat(r,"..."),className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),"agents"===r&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[f.map(e=>(0,s.jsxs)("button",{onClick:()=>v(e),disabled:"available"!==e.status,className:(0,S.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all","available"===e.status?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-10 h-10 rounded-full flex items-center justify-center","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:(0,s.jsx)(o.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ext. ",e.extension]})]}),(0,s.jsx)("span",{className:(0,S.cn)("text-xs px-2 py-0.5 rounded-full","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:e.status})]},e.id)),0===f.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No agents found"})]}),"queues"===r&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[p.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e),disabled:0===e.availableAgents,className:(0,S.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all",e.availableAgents>0?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center",children:(0,s.jsx)(y.Z,{className:"w-5 h-5 text-purple-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:[e.waitingCalls," waiting • ",e.availableAgents," available"]})]})]},e.id)),0===p.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No queues found"})]}),"external"===r&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Phone Number"}),(0,s.jsx)(C.I,{value:u,onChange:T,placeholder:"+1 (555) 000-0000",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),(0,s.jsxs)(k.z,{onClick:I,disabled:!u,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Transfer to ",u||"Number"]})]})]})]})]})}function D(){var e,t;let{currentCall:a,toggleMute:l,toggleHold:r,hangupCall:n}=(0,j.zs)(),[i,c]=(0,h.useState)(!1),[o,u]=(0,h.useState)(!1),x=null!==(e=null==a?void 0:a.isMuted)&&void 0!==e&&e,b=null!==(t=null==a?void 0:a.isOnHold)&&void 0!==t&&t,y=(0,h.useCallback)(()=>{l()},[l]),N=(0,h.useCallback)(()=>{r()},[r]),k=(0,h.useCallback)(()=>{n()},[n]),C=(0,h.useCallback)(()=>{c(!0)},[]);return((0,h.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key.toLowerCase()){case"m":y();break;case"h":N();break;case"t":C()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y,N,C]),a)?(0,s.jsxs)(s.Fragment,{children:[i&&(0,s.jsx)(I,{onClose:()=>c(!1)}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsxs)("button",{onClick:y,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",x?"bg-red-500/20 border-2 border-red-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:x?(0,s.jsx)(g.Z,{className:"w-6 h-6 text-red-400"}):(0,s.jsx)(f.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:x?"Unmute":"Mute"})]}),(0,s.jsxs)("button",{onClick:N,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-amber-500/20 border-2 border-amber-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:b?(0,s.jsx)(p.Z,{className:"w-6 h-6 text-amber-400"}):(0,s.jsx)(d.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:b?"Resume":"Hold"})]}),(0,s.jsxs)("button",{onClick:C,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","bg-white/10 border-2 border-transparent hover:bg-white/15","transition-all duration-200"),children:(0,s.jsx)(m.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Transfer"})]}),(0,s.jsxs)("button",{onClick:()=>u(!o),className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",o?"bg-cyan-500/20 border-2 border-cyan-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:(0,s.jsx)(v.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Keypad"})]})]}),o&&(0,s.jsx)(T,{}),(0,s.jsxs)("button",{onClick:k,className:(0,S.cn)("w-full py-4 rounded-xl flex items-center justify-center gap-3","bg-gradient-to-r from-red-500 to-red-600","hover:from-red-400 hover:to-red-500","shadow-lg shadow-red-500/25 hover:shadow-xl hover:shadow-red-500/30","transition-all duration-200","active:scale-98"),children:[(0,s.jsx)(w.Z,{className:"w-6 h-6 text-white"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:"End Call"})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:[(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"M"})," Mute"," ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"H"})," Hold"," ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"T"})," Transfer"]})})]})]}):(0,s.jsx)(s.Fragment,{})}function T(){let{sendDTMF:e}=(0,j.zs)();return(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/5 rounded-xl",children:["1","2","3","4","5","6","7","8","9","*","0","#"].map(t=>(0,s.jsx)("button",{onClick:()=>e(t),className:(0,S.cn)("h-12 rounded-lg flex items-centerjustify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","text-white text-lg font-medium","transition-all duration-150 active:scale-95"),children:t},t))})}var O=a(54506),P=a(57197),E=a(30250),A=a(29182),F=a(27604),M=a(68182),L=a(40646),R=a(54375);let H={fullName:o.Z,firstName:o.Z,lastName:o.Z,phoneNumber:l.Z,email:E.Z,company:A.Z,address:F.Z,city:F.Z,state:F.Z,zipCode:F.Z,leadSource:P.Z,campaignName:P.Z,notes:M.Z,createdAt:L.Z,website:R.Z};function q(e){let{data:t,variant:a="panel",className:l}=e,{screenPopFields:r}=(0,j.zs)(),[c,d]=(0,h.useState)("modal"===a),u=r.filter(e=>e.enabled).sort((e,t)=>e.order-t.order),x=e=>{if(e in t){let a=t[e];return null==a?null:"object"==typeof a?JSON.stringify(a):String(a)}return t.customFields&&e in t.customFields?String(t.customFields[e]):null},m=()=>{let e=[t.address,t.city,t.state,t.zipCode].filter(Boolean);return e.length>0?e.join(", "):null},b=e=>{var t;let l=x(e.key);if(["address","city","state","zipCode"].includes(e.key)&&"address"===e.key)l=m();else if(["city","state","zipCode"].includes(e.key)){let e=u.find(e=>"address"===e.key);if(null==e?void 0:e.enabled)return null}if(!l)return null;let r=null!==(t=H[e.key])&&void 0!==t?t:M.Z;return(0,s.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0","modal"===a?"bg-white/10":"bg-cyan-500/10"),children:(0,s.jsx)(r,{className:(0,S.cn)("w-4 h-4","modal"===a?"text-cyan-400":"text-cyan-500")})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-gray-500 text-xsmb-0.5",children:e.label}),(0,s.jsx)("p",{className:(0,S.cn)("text-sm break-words","modal"===a?"text-white":"text-gray-200"),children:l})]})]},e.id)},g=u.map(e=>({field:e,value:x(e.key)})).filter(e=>{let{value:t}=e;return null!==t});if(0===g.length)return(0,s.jsxs)("div",{className:(0,S.cn)("p-4 rounded-xl text-center","modal"===a?"bg-white/5":"bg-slate-800/50",l),children:[(0,s.jsx)(M.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No prospect data available"})]});let f="modal"===a?5:3,p=g.length>f;return(0,s.jsxs)("div",{className:(0,S.cn)("rounded-xl overflow-hidden","modal"===a?"bg-white/5 border border-white/10":"bg-slate-800/30 border border-white/5",l),children:[(0,s.jsxs)("div",{className:(0,S.cn)("px-4 py-3 flex items-center justify-between","modal"===a?"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-white/10":"bg-white/5 border-b border-white/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 text-cyan-400"}),(0,s.jsx)("span",{className:(0,S.cn)("font-medium text-sm","modal"===a?"text-white":"text-gray-200"),children:"Prospect Information"})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[g.length," field",1!==g.length?"s":""]})]}),(0,s.jsx)("div",{className:"px-4 divide-y divide-white/5",children:u.slice(0,c?void 0:f).map(e=>b(e))}),p&&(0,s.jsx)("button",{onClick:()=>d(!c),className:(0,S.cn)("w-full px-4 py-2 flex items-center justify-center gap-2","text-xs text-gray-400 hover:text-white","border-t border-white/5 hover:bg-white/5","transition-colors"),children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{className:"w-4 h-4"}),"Show ",g.length-f," More"]})})]})}function U(e){let{call:t}=e,{answerCall:a,hangupCall:r}=(0,j.zs)(),[n,i]=(0,h.useState)(0);return(0,h.useEffect)(()=>{let e=setInterval(()=>{i(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"fixedinset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,S.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-3xl border border-white/10 shadow-2xl shadow-cyan-500/10","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-300"),children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 rounded-full bg-cyan-500/20 animate-ping"}),(0,s.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-cyan-500/10 animate-pulse"})]}),(0,s.jsxs)("div",{className:"relative pt-8 pb-4 text-center",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-cyan-500/10 rounded-full border border-cyan-500/20 mb-4",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4 text-cyan-400 animate-bounce"}),(0,s.jsx)("span",{className:"text-cyan-400 text-sm font-medium",children:"Incoming Call"})]}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ringing for ","".concat(Math.floor(n/60).toString().padStart(2,"0"),":").concat((n%60).toString().padStart(2,"0"))]})]}),(0,s.jsxs)("div",{className:"relative px-6 pb-6 text-center",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-24 h-24 mx-auto mb-4 rounded-full","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border-2 border-cyan-500/30","flex items-center justify-center","shadow-lg shadow-cyan-500/20"),children:(0,s.jsx)(o.Z,{className:"w-12 h-12 text-cyan-400"})}),(0,s.jsx)("h2",{className:"text-white text-2xl font-bold mb-1",children:t.callerName||"Unknown Caller"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg font-mono",children:t.phoneNumber}),t.queueName&&(0,s.jsx)("div",{className:"mt-3 flex items-center justify-center gap-2",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-500/10 rounded-full text-purple-400 text-xs",children:[(0,s.jsx)(P.Z,{className:"w-3 h-3"}),t.queueName]})})]}),t.prospectData&&Object.keys(t.prospectData).length>0&&(0,s.jsx)("div",{className:"px-6 pb-6",children:(0,s.jsx)(q,{data:t.prospectData,variant:"modal"})}),(0,s.jsx)("div",{className:"px-6 pb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,s.jsxs)("button",{onClick:()=>{r()},className:(0,S.cn)("grouprelative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-16 h-16 rounded-full","bg-gradient-to-br from-red-500 to-red-600","flex items-center justify-center","shadow-lg shadow-red-500/30","group-hover:shadow-xl group-hover:shadow-red-500/40","transition-all duration-200"),children:(0,s.jsx)(w.Z,{className:"w-7 h-7 text-white"})}),(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Decline"})]}),(0,s.jsxs)("button",{onClick:()=>{a()},className:(0,S.cn)("group relative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-20 h-20 rounded-full","bg-gradient-to-br from-emerald-500 to-green-600","flex items-center justify-center","shadow-lg shadow-emerald-500/30","group-hover:shadow-xl group-hover:shadow-emerald-500/40","transition-all duration-200","animate-pulse"),children:(0,s.jsx)(l.Z,{className:"w-9 h-9 text-white"})}),(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Answer"})]})]})}),(0,s.jsx)("div",{className:"px-6 pb-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Press ",(0,s.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"A"})," to answer or",(0,s.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"D"})," to decline"]})})]})]})}var B=a(1560),J=a(30999);function W(){var e;let{agentStatus:t,currentCall:a,isPhonePanelOpen:m,closePhonePanel:g,togglePhonePanel:f,error:p,clearError:v}=(0,j.zs)(),[w,y]=(0,h.useState)(!0),[N,C]=(0,h.useState)("dialpad"),[Z,z]=(0,h.useState)(!1);return m?(0,s.jsxs)(s.Fragment,{children:[(null==a?void 0:a.state)==="ringing"&&"inbound"===a.direction&&(0,s.jsx)(U,{call:a}),Z&&(0,s.jsx)(B.h,{onClose:()=>z(!1)}),(0,s.jsxs)(J.Zb,{className:(0,S.cn)("fixed bottom-6 right-6 z-40","w-[380px] overflow-hidden","bg-gradient-to-b from-slate-900/95 to-slate-950/95","backdrop-blur-xl border-white/10","shadow-2xl shadow-black/50","transition-all duration-300 ease-out",w?"h-auto":"h-[72px]"),children:[(0,s.jsxs)(J.Ol,{className:"p-4 pb-3 space-y-0 flex flex-row items-center justify-between border-b border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-10 h-10 rounded-xl flex items-center justify-center","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border border-cyan-500/30"),children:(0,s.jsx)(l.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Agent Phone"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(b.b,{})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(null==a?void 0:a.state)==="active"&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 rounded-full mr-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-emerald-400 text-xs font-mono",children:(e=a.duration,"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")))})]}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>z(!0),children:(0,s.jsx)(r.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>y(!w),children:w?(0,s.jsx)(n.Z,{className:"w-4 h-4"}):(0,s.jsx)(i.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:g,children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),p&&(0,s.jsx)("div",{className:"px-4 py-2 bg-red-500/10 border-b border-red-500/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-red-400 text-xs",children:p}),(0,s.jsx)("button",{onClick:v,className:"text-red-400 hover:text-red-300",children:(0,s.jsx)(c.Z,{className:"w-3 h-3"})})]})}),w&&(0,s.jsxs)(J.aY,{className:"p-0",children:[a&&"ringing"!==a.state&&"ended"!==a.state&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[a.prospectData&&(0,s.jsx)(q,{data:a.prospectData}),(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center border border-cyan-500/30",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 text-cyan-400"})}),(0,s.jsx)("h4",{className:"text-white font-semibold text-lg",children:a.callerName||"Unknown Caller"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:a.phoneNumber}),a.queueName&&(0,s.jsxs)("p",{className:"text-cyan-400 text-xs mt-1",children:["From:",a.queueName]})]}),a.isOnHold&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 bg-amber-500/10 rounded-lg",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-amber-400"}),(0,s.jsx)("span",{className:"text-amber-400 text-sm",children:"Call On Hold"})]}),(0,s.jsx)(D,{})]}),(!a||"ended"===a.state)&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsx)("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["dialpad","history","settings"].map(e=>(0,s.jsxs)("button",{onClick:()=>C(e),className:(0,S.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all",N===e?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5"),children:["dialpad"===e&&(0,s.jsx)(u.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"history"===e&&(0,s.jsx)(x.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"settings"===e&&(0,s.jsx)(r.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),"dialpad"===N&&(0,s.jsx)(O.c,{}),"history"===N&&(0,s.jsx)(_,{}),"settings"===N&&(0,s.jsx)(K,{})]})]})]})]}):(0,s.jsxs)("button",{onClick:f,className:(0,S.cn)("fixed bottom-6 right-6 z-50","flex items-center gap-3 px-5 py-3 rounded-full","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","text-white font-medium shadow-2xl","transition-all duration-300 ease-out","hover:scale-105 hover:shadow-cyan-500/25","border border-white/10",(null==a?void0:a.state)==="ringing"&&"animate-pulse"),"aria-label":"Open phone",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5"}),(null==a?void 0:a.state)==="ringing"&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]}),(0,s.jsx)("span",{className:"capitalize",children:"on-call"===t?"On Call":t}),(0,s.jsx)("span",{className:(0,S.cn)("w-2.5 h-2.5 rounded-full",(e=>{switch(e){case"available":return"bg-emerald-500";case"on-call":return"bg-amber-500";case"away":return"bg-red-500";case"dnd":return"bg-purple-500";default:return"bg-gray-500"}})(t))})]})}function _(){let{callHistory:e,makeCall:t}=(0,j.zs)(),a=e=>e?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",r=e=>{t(e)};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(x.Z,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent calls"})]}):(0,s.jsx)("div",{className:"space-y-2max-h-[300px] overflow-y-auto",children:e.map((e,t)=>(0,s.jsx)("button",{onClick:()=>r(e.phoneNumber),className:(0,S.cn)("w-full p-3 rounded-lg text-left transition-all","bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-8 h-8 rounded-full flex items-center justify-center","inbound"===e.direction?"bg-cyan-500/20 text-cyan-400":"bg-blue-500/20 text-blue-400"),children:"inbound"===e.direction?(0,s.jsx)(l.Z,{className:"w-4 h-4"}):(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.callerName||e.phoneNumber}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["inbound"===e.direction?"Incoming":"Outgoing",e.duration>0&&" • ".concat(Math.floor(e.duration/60),"m ").concat(e.duration%60,"s")]})]})]}),(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:a(e.startTime)})]})},"".concat(e.callId,"-").concat(t)))})}function K(){let{audioDevices:e,selectedAudioInput:t,selectedAudioOutput:a,setAudioInput:l,setAudioOutput:n}=(0,j.zs)(),i=e.filter(e=>"audioinput"===e.kind),c=e.filter(e=>"audiooutput"===e.kind);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Microphone"}),(0,s.jsx)("select",{value:null!=t?t:"",onChange:e=>l(e.target.value),className:(0,S.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:i.map(e=>(0,s.jsx)("option",{value:e.deviceId,children:e.label||"Microphone ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Speaker"}),(0,s.jsx)("select",{value:null!=a?a:"",onChange:e=>n(e.target.value),className:(0,S.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:c.map(e=>(0,s.jsx)("option",{value:e.deviceId,children:e.label||"Speaker ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Configure which prospect fields appear during incoming calls."}),(0,s.jsxs)(k.z,{variant:"outline",size:"sm",className:"w-full border-white/10 text-gray-300 hover:bg-white/5",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Configure Screen Pop Fields"]})]})]})}},88562:function(e,t,a){a.d(t,{ZB:function(){return c},zs:function(){return i}});var s=a(91674),l=a(86655);let r=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}],n=(0,l.createContext)(null);function i(){let e=(0,l.useContext)(n);if(!e)throw Error("usePhone must be used within a PhoneProvider");return e}function c(e){let{children:t,wsUrl:a="ws://45.32.213.201:3001",apiUrl:i="http://45.32.213.201:3001"}=e,c=i.replace(/\/api\/v1\/?$/,""),o="a1b2c3d4e5f67890",d=(0,l.useCallback)(function(){let e=!(arguments.length>0)||void0===arguments[0]||arguments[0],t={};return e&&(t["Content-Type"]="application/json"),o&&(t["x-api-key"]=o),t},[o]),[u,x]=(0,l.useState)("offline"),[m,h]=(0,l.useState)(null),[b,g]=(0,l.useState)([]),[f,p]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[y,N]=(0,l.useState)([]),[j,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(null),[Z,z]=(0,l.useState)(()=>{{let e=localStorage.getItem("screenPopFields");if(e)try{return JSON.parse(e)}catch(e){}}return r}),[I,D]=(0,l.useState)(null),T=(0,l.useRef)(null),O=(0,l.useRef)(null),P=(0,l.useRef)(null),E=(0,l.useCallback)(()=>{var e;P.current||(P.current=new Audio("/sounds/ringtone.mp3"),P.current.loop=!0),null===(e=P.current)||void 0===e||e.play().catch(()=>{})},[]),A=(0,l.useCallback)(()=>{P.current&&(P.current.pause(),P.current.currentTime=0)},[]),F=(0,l.useCallback)(()=>{O.current&&clearInterval(O.current),O.current=setInterval(()=>{h(e=>e&&e.answerTime?{...e,duration:Math.floor((Date.now()-e.answerTime.getTime())/1e3)}:e)},1e3)},[]),M=(0,l.useCallback)(()=>{O.current&&(clearInterval(O.current),O.current=null)},[]),L=(0,l.useCallback)(e=>{var t,a,s,l;e&&(h({callId:null!==(t=e.callId)&&void 0!==t?t:"call_".concat(Date.now()),direction:"inbound",state:"ringing",phoneNumber:null!==(s=null!==(a=e.callerNumber)&&void 0!==a?a:e.from)&&void 0!==s?s:"",callerName:e.callerName,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0,prospectData:null!==(l=e.prospectData)&&void 0!==l?l:e.screenPopData,queueName:e.queueName,campaignId:e.campaignId}),p(!0),E())},[E]),R=(0,l.useCallback)(()=>{h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),A(),F()},[A,F]),H=(0,l.useCallback)(()=>{h(e=>{if(e){let t={...e,state:"ended",endTime:new Date};g(e=>[t,...e].slice(0,50))}return null}),x("available"),A(),M()},[A,M]),q=(0,l.useCallback)(e=>{e&&h(t=>{var a;if(!t)return t;let s=null!==(a=e.isOnHold)&&void 0!==a?a:!t.isOnHold;return{...t,isOnHold:s,state:s?"hold":"active"}})},[]),U=(0,l.useCallback)(e=>{let{type:t,channel:a,payload:s}=e;if("event"===t)switch(a){case"agent.call.incoming":L(s);break;case"agent.call.answered":R();break;case"agent.call.ended":H();break;case"agent.call.hold":q(s)}},[L,R,H,q]);(0,l.useEffect)(()=>{let e=()=>{try{let t=new WebSocket("".concat(a,"/ws/events?apiKey=").concat("a1b2c3d4e5f67890"));t.onopen=()=>{t.send(JSON.stringify({type:"subscribe",channels:["agent.call.*","agent.status.*"]}))},t.onmessage=e=>{try{let t=JSON.parse(e.data);U(t)}catch(e){}},t.onclose=()=>{setTimeout(e,3e3)},T.current=t}catch(t){setTimeout(e,3e3)}};return e(),()=>{T.current&&T.current.close()}},[a,U]),(0,l.useEffect)(()=>{if(!navigator.mediaDevices)return;let e=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0});let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind||"audiooutput"===e.kind);N(e);let t=e.find(e=>"audioinput"===e.kind),a=e.find(e=>"audiooutput"===e.kind);t&&!j&&k(t.deviceId),a&&!C&&S(a.deviceId)}catch(e){}};e();let t=()=>{e()};return navigator.mediaDevices.addEventListener("devicechange",t),()=>{navigator.mediaDevices.removeEventListener("devicechange",t)}},[j,C]);let B=(0,l.useCallback)(e=>{z(e),localStorage.setItem("screenPopFields",JSON.stringify(e))},[]),J=(0,l.useCallback)(e=>{fetch("".concat(c,"/api/v1/agent/status"),{method:"PUT",headers:d(),body:JSON.stringify({status:e})}).catch(()=>{}),x(e)},[c,d]),W=(0,l.useCallback)(()=>p(!0),[]),_=(0,l.useCallback)(()=>p(!1),[]),K=(0,l.useCallback)(()=>p(e=>!e),[]),Y=(0,l.useCallback)(async e=>{console.log("[Phone] Initiating call to:",e),w(!0),D(null);try{var t,a,s;let l="".concat(c,"/api/v1/agent/call/originate");console.log("[Phone] Calling API:",l);let r=await fetch(l,{method:"POST",headers:d(),body:JSON.stringify({phoneNumber:e})}),n=await r.json();if(console.log("[Phone] API response:",r.status,n),!r.ok)throw Error(null!==(a=null===(t=n.error)||void 0===t?void 0:t.message)&&void 0!==a?a:"Failed to place call");let i={callId:null!==(s=n.callId)&&void 0!==s?s:"call_".concat(Date.now()),direction:"outbound",state:"connecting",phoneNumber:e,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0};console.log("[Phone] Call initiated successfully:",i),h(i),x("on-call"),p(!0),setTimeout(()=>{h(e=>e&&e.callId===i.callId?{...e,state:"active",answerTime:new Date}:e),F()},2e3)}catch(e){console.error("[Phone] Call failed:",e),D(e instanceof Error?e.message:"Failed to place call")}finally{w(!1)}},[c,d,F]),G=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/answer"),{method:"POST",headers:d(!1)}),h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),A(),F()}catch(e){D(e instanceof Error?e.message:"Failed to answer call")}},[c,m,A,F,d]),V=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/hangup"),{method:"POST",headers:d(!1)});let e={...m,state:"ended",endTime:new Date};g(t=>[e,...t].slice(0,50)),h(null),x("available"),M()}catch(e){D(e instanceof Error?e.message:"Failed to hang up")}},[c,m,M,d]),$=(0,l.useCallback)(()=>{h(e=>e?{...e,isMuted:!e.isMuted}:e)},[]),Q=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/hold"),{method:"POST",headers:d(!1)}),h(e=>e?{...e,isOnHold:!e.isOnHold,state:e.isOnHold?"active":"hold"}:e)}catch(e){D(e instanceof Error?e.message:"Failed to toggle hold")}},[c,m,d]),X=(0,l.useCallback)(e=>{m&&console.log("[Phone] Sending DTMF:",e)},[m]),ee=(0,l.useCallback)(async(e,t)=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/transfer"),{method:"POST",headers:d(),body:JSON.stringify({destination:e,type:t})}),"blind"===t&&(h(null),x("available"))}catch(e){D(e instanceof Error?e.message:"Failed to transfer call")}},[c,m,d]),et=(0,l.useCallback)(e=>{k(e)},[]),ea=(0,l.useCallback)(e=>{S(e)},[]),es=(0,l.useCallback)(()=>D(null),[]);return(0,s.jsx)(n.Provider,{value:{agentStatus:u,currentCall:m,callHistory:b,isPhonePanelOpen:f,isConnecting:v,audioDevices:y,selectedAudioInput:j,selectedAudioOutput:C,screenPopFields:Z,error:I,setAgentStatus:J,openPhonePanel:W,closePhonePanel:_,togglePhonePanel:K,makeCall:Y,answerCall:G,hangupCall:V,toggleMute:$,toggleHold:Q,sendDTMF:X,transferCall:ee,setAudioInput:et,setAudioOutput:ea,updateScreenPopFields:B,clearError:es},children:t})}},1560:function(e,t,a){a.d(t,{h:function(){return y}});var s=a(91674),l=a(61082),r=a(4458),n=a(30250),i=a(29182),c=a(27604),o=a(57197),d=a(68182),u=a(77037),x=a(55491),m=a(47791),h=a(72781),b=a(86655),g=a(88562),f=a(90747),p=a(33061);let v={fullName:l.Z,firstName:l.Z,lastName:l.Z,phoneNumber:r.Z,email:n.Z,company:i.Z,address:c.Z,city:c.Z,state:c.Z,zipCode:c.Z,leadSource:o.Z,campaignName:o.Z,notes:d.Z},w=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}];function y(e){let{onClose:t}=e,{screenPopFields:a,updateScreenPopFields:l}=(0,g.zs)(),[r,n]=(0,b.useState)([...a]),[i,c]=(0,b.useState)(null),o=(0,b.useCallback)(e=>{n(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},[]),y=(0,b.useCallback)(e=>{c(e)},[]),N=(0,b.useCallback)(e=>{i&&i!==e&&n(t=>{let a=t.findIndex(e=>e.id===i),s=t.findIndex(t=>t.id===e);if(-1===a||-1===s)return t;let l=[...t],[r]=l.splice(a,1);return l.splice(s,0,r),l.map((e,t)=>({...e,order:t+1}))})},[i]),j=(0,b.useCallback)(()=>{c(null)},[]),k=(0,b.useCallback)(()=>{l(r),t()},[r,l,t]),C=(0,b.useCallback)(()=>{n([...w])},[]),S=(0,b.useCallback)(e=>{e.target===e.currentTarget&&t()},[t]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:S,role:"dialog","aria-modal":"true",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,p.cn)("relative z-10 w-full max-w-lg mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-white text-lg font-semibold",children:"Screen Pop Settings"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-0.5",children:"Configure which fields appear during incoming calls"})]}),(0,s.jsx)(f.z,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400 hover:text-white",children:(0,s.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"px-6 py-4 max-h-[400px] overflow-y-auto",children:(0,s.jsx)("div",{className:"space-y-2",children:r.sort((e,t)=>e.order-t.order).map(e=>{var t;let a=null!==(t=v[e.key])&&void 0!==t?t:d.Z;return(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>y(e.id),onDragOver:t=>{t.preventDefault(),N(e.id)},onDragEnd:j,className:(0,p.cn)("flex items-center gap-3 p-3 rounded-lg","bg-white/5 border border-transparent","hover:bg-white/10 hover:border-white/10","transition-all cursor-move",i===e.id&&"opacity-50 scale-95"),children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),(0,s.jsx)("div",{className:(0,p.cn)("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",e.enabled?"bg-cyan-500/10 text-cyan-400":"bg-white/5 text-gray-500"),children:(0,s.jsx)(a,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:(0,p.cn)("flex-1 text-sm",e.enabled?"text-white":"text-gray-500"),children:e.label}),(0,s.jsx)("button",{onClick:()=>o(e.id),className:(0,p.cn)("w-10 h-6 rounded-full p-1 transition-colors",e.enabled?"bg-cyan-500":"bg-white/10"),children:(0,s.jsx)("div",{className:(0,p.cn)("w-4 h-4 rounded-full bg-white transition-transform",e.enabled?"translate-x-4":"translate-x-0")})})]},e.id)})})}),(0,s.jsxs)("div",{className:"px-6 py-3 bg-white/5 border-t border-white/10",children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Preview:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:r.filter(e=>e.enabled).sort((e,t)=>e.order-t.order).map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-cyan-500/10 text-cyan-400 text-xs rounded-full border border-cyan-500/20",children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex items-center justify-between",children:[(0,s.jsxs)(f.z,{variant:"ghost",onClick:C,className:"text-gray-400 hover:text-white gap-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Reset to Default"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(f.z,{variant:"outline",onClick:t,className:"border-white/10",children:"Cancel"}),(0,s.jsxs)(f.z,{onClick:k,className:"bg-gradient-to-r from-cyan-600 to-blue-600 gap-2",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})]})]})}},90747:function(e,t,a){a.d(t,{z:function(){return o}});var s=a(91674),l=a(32814),r=a(47828),n=a(86655),i=a(33061);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:o=!1,...d}=e,u=o?l.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:r,size:n,className:a})),ref:t,...d})});o.displayName="Button"},30999:function(e,t,a){a.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},ll:function(){return c}});var s=a(91674),l=a(86655),r=a(33061);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});c.displayName="CardTitle";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});o.displayName="CardDescription";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...l})});d.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},66120:function(e,t,a){a.d(t,{I:function(){return n}});var s=a(91674),l=a(86655),r=a(33061);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-inputbg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},33061:function(e,t,a){a.d(t,{LU:function(){return c},cn:function(){return r},p6:function(){return o},un:function(){return n},xG:function(){return i}});var s=a(44115),l=a(38352);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.m6)((0,s.W)(t))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function c(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(s).padStart(2,"0")):"".concat(a,":").concat(String(s).padStart(2,"0"))}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/campaigns/page-082ed12c46fcb478.js: */let l=(0,a(19596).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 00 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var i=a(86655),o=a(54741),d=a(90747),c=a(88151),u=a(66120),f=a(66801),m=a(38137),h=a(28314);function p(e){let{open:t,onOpenChange:a,onSuccess:s}=e,[n,l]=(0,i.useState)(!1),[p,x]=(0,i.useState)(null),[g,b]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[j,w]=(0,i.useState)(!1),[N,k]=(0,i.useState)({name:"",publisherId:"",flowId:"",status:"ACTIVE"});(0,i.useEffect)(()=>{t&&(k({name:"",publisherId:"",flowId:"",status:"ACTIVE"}),x(null),C())},[t]);letC=async()=>{w(!0);try{var e,t;if("true"===localStorage.getItem("demoMode"))b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]);else{let e=await h.x.get("/api/v1/publishers");(null===(t=e.data)||void 0===t?void 0:t.data)?b(e.data.data):b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}])}let a=await h.x.get("/api/v1/flows");(null===(e=a.data)||void 0===e?void 0:e.data)?y(a.data.data):y([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}catch(e){console.warn("Failedto load initial data, using mock data:",e),b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]),y([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}finally{w(!1)}},R=async()=>{if(!N.name.trim()){x("Campaign name isrequired");return}if(!N.publisherId){x("Publisher is required");return}l(!0),x(null);try{let t=await h.x.post("/api/v1/campaigns",{name:N.name.trim(),publisherId:N.publisherId,flowId:N.flowId||void 0,status:N.status});if(t.error){var e;if("NETWORK_ERROR"===t.error.code||(null===(e=t.error.message)||void 0===e?void 0:e.includes("Failed to fetch")))throw Error("Unable to connect to the server. Please make sure the API server is running.");throw Error(t.error.message||"Failed to create campaign")}t.data&&(null==s||s(),a(!1))}catch(t){let e=t instanceof Error?t.message:"Failed to create campaign";x(e),(e.includes("connect to the server")||e.includes("Failed to fetch"))&&alert("Cannot connect to the API server. Please make sure the backend is running on port 3001.")}finally{l(!1)}};return(0,r.jsx)(c.Vq,{open:t,onOpenChange:a,children:(0,r.jsxs)(c.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,r.jsxs)(c.fK,{children:[(0,r.jsx)(c.$N,{children:"Create New Campaign"}),(0,r.jsx)(c.Be,{children:"Create a new call campaign to manage your outbound calling operations."})]}),(0,r.jsx)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:j?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(o.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"name",children:"Campaign Name *"}),(0,r.jsx)(u.I,{id:"name",placeholder:"e.g., Summer Campaign 2024",value:N.name,onChange:e=>k({...N,name:e.target.value}),disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"publisher",children:"Publisher *"}),(0,r.jsxs)(m.Ph,{value:N.publisherId||void 0,onValueChange:e=>k({...N,publisherId:e}),disabled:n||j,children:[(0,r.jsx)(m.i4,{id:"publisher",children:(0,r.jsx)(m.ki,{placeholder:"Select a publisher"})}),(0,r.jsx)(m.Bw,{children:0===g.length?(0,r.jsx)(m.Ql,{value:"no-publishers",disabled:!0,children:"No publishers available"}):g.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.name," (",e.code,")"]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"flow",children:"Flow (Optional)"}),(0,r.jsxs)(m.Ph,{value:N.flowId||void 0,onValueChange:e=>k({...N,flowId:e||""}),disabled:n||j,children:[(0,r.jsx)(m.i4,{id:"flow",children:(0,r.jsx)(m.ki,{placeholder:"Select a flow (optional)"})}),(0,r.jsx)(m.Bw,{children:0===v.length?(0,r.jsx)(m.Ql,{value:"no-flows",disabled:!0,children:"No flows available"}):v.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.name," (v",e.version,")"]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,r.jsxs)(m.Ph,{value:N.status,onValueChange:e=>k({...N,status:e}),disabled:n,children:[(0,r.jsx)(m.i4,{id:"status",children:(0,r.jsx)(m.ki,{})}),(0,r.jsxs)(m.Bw,{children:[(0,r.jsx)(m.Ql,{value:"ACTIVE",children:"Active"}),(0,r.jsx)(m.Ql,{value:"PAUSED",children:"Paused"})]})]})]}),p&&(0,r.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:p})]})}),(0,r.jsxs)(c.cN,{children:[(0,r.jsx)(d.z,{variant:"outline",onClick:()=>a(!1),disabled:n||j,children:"Cancel"}),(0,r.jsxs)(d.z,{onClick:R,disabled:n||j||!N.name.trim()||!N.publisherId,children:[n&&(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Campaign"]})]})]})})}var x=a(60044),g=a(30999),b=a(86190);let v=[{id:"1",name:"Summer Campaign",status:"active",flow:"Default Flow",calls:1234,asr:.65,createdAt:"2024-01-15"},{id:"2",name:"Winter Campaign",status:"paused",flow:"Holiday Flow",calls:567,asr:.58,createdAt:"2024-01-10"}];function y(){let[e,t]=(0,i.useState)(!1);return(0,r.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Campaigns"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your call campaigns and flows"})]}),(0,r.jsxs)(d.z,{onClick:()=>{t(!0)},children:[(0,r.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),"New Campaign"]})]}),(0,r.jsxs)(g.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,r.jsxs)(g.Ol,{className:"flex-shrink-0",children:[(0,r.jsx)(g.ll,{children:"Campaigns"}),(0,r.jsx)(g.SZ,{children:"View and manageall campaigns"})]}),(0,r.jsx)(g.aY,{className:"flex-1 overflow-y-auto min-h-0",children:(0,r.jsxs)(b.iA,{children:[(0,r.jsx)(b.xD,{children:(0,r.jsxs)(b.SC,{children:[(0,r.jsx)(b.ss,{children:"Name"}),(0,r.jsx)(b.ss,{children:"Status"}),(0,r.jsx)(b.ss,{children:"Flow"}),(0,r.jsx)(b.ss,{children:"Calls"}),(0,r.jsx)(b.ss,{children:"ASR"}),(0,r.jsx)(b.ss,{children:"Created"}),(0,r.jsx)(b.ss,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(b.RM,{children:v.map(e=>(0,r.jsxs)(b.SC,{children:[(0,r.jsx)(b.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(b.pj,{children:(0,r.jsx)(x.C,{variant:"active"===e.status?"success":"secondary",children:e.status})}),(0,r.jsx)(b.pj,{children:e.flow}),(0,r.jsx)(b.pj,{children:e.calls.toLocaleString()}),(0,r.jsxs)(b.pj,{children:[(100*e.asr).toFixed(1),"%"]}),(0,r.jsx)(b.pj,{children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)(b.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})}),(0,r.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(l,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,r.jsx)(p,{open:e,onOpenChange:t,onSuccess:()=>{window.location.reload()}})]})}},60044:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var r=a(91674),s=a(47828);a(86655);var n=a(33061);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(91674),s=a(32814),n=a(47828),l=a(86655),i=a(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},88151:function(e,t,a){"use strict";a.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var r=a(91674),s=a(7472),n=a(77037),l=a(86655),i=a(33061);let o=s.fC;s.xz;let d=s.h_;s.x8;let c=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});c.displayName=s.aV.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[l,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let h=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});h.displayName=s.Dx.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});p.displayName=s.dk.displayName},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var r=a(91674),s=a(35974),n=a(86655),l=a(33061);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n})});i.displayName=s.f.displayName},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return x},i4:function(){return f},ki:function(){return u}});var r=a(91674),s=a(65485),n=a(50802),l=a(98371),i=a(72781),o=a(86655),d=a(33061);let c=s.fC;s.ZA;let u=s.B4,f=o.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,r.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,r.jsx)(s.JO,{asChild:!0,children:(0,r.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let m=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let h=o.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:n,position:l="popper",...i}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(m,{}),(0,r.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(h,{})]})})});p.displayName=s.VY.displayName,o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=s.__.displayName;let x=o.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,r.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(s.eT,{children:n})]})});x.displayName=s.ck.displayName,o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=s.Z0.displayName},86190:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return s}});class r{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),a=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new r},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return d},un:function(){return l},xG:function(){return i}});var r=a(44115),s=a(38352);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(a,":").concat(String(r).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},54741:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/flows/page-30b598e10845117f.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7416],{51235:function(e,t,a){Promise.resolve().then(a.bind(a,4550))},4550:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var r=a(91674),n=a(28814),o=a(16728),l=a(54741),s=a(24341),i=a(30588),d=a(86655);a(10026);var c=a(95807),u=a(4458),m=a(77914),p=a(51436),f=a(6481),h=a(40100),g=a(57197),x=a(4608),v=a(80317),y=a(47791),b=a(95902),w=a(33061);let N={entry:c.Z,ivr:u.Z,if:m.Z,queue:p.Z,buyer:f.Z,record:h.Z,tag:g.Z,whisper:x.Z,timeout:v.Z,fallback:y.Z,hangup:b.Z},j={entry:"bg-[#00D084]",ivr:"bg-[#1E3A5F]",if:"bg-[#FF6B35]",queue:"bg-[#1E3A5F]",buyer:"bg-[#FF6B35]",record:"bg-[#00D084]",tag:"bg-[#1E3A5F]",whisper:"bg-[#00D084]",timeout:"bg-gray-500",fallback:"bg-[#FF6B35]",hangup:"bg-slate-500"};function k(e){let{data:t,selected:a}=e,l=t.nodeType||"entry",s=N[l]||c.Z,i=j[l]||"bg-gray-500";return(0,r.jsxs)("div",{className:(0,w.cn)("rounded-lg border-2 bg-card p-4shadow-md transition-all",a?"border-primary shadow-lg":"border-border"),children:[(0,r.jsx)(n.HH,{type:"target",position:o.Ly.Top,className:"!bg-primary"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:(0,w.cn)("flex h-10 w-10 items-center justify-center rounded",i),children:(0,r.jsx)(s,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:t.label}),t.config&&Object.keys(t.config).length>0&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:function(e,t){switch(e){case"entry":return t.target?"→ ".concat(t.target):"No target";case"ivr":return t.prompt?"Prompt: ".concat(String(t.prompt).substring(0,20),"..."):"No prompt";case"if":return t.condition?"If: ".concat(String(t.condition).substring(0,20),"..."):"No condition";case"queue":return t.queueId?"Queue:".concat(t.queueId):"No queue";case"buyer":return t.strategy?"Strategy: ".concat(t.strategy):"No strategy";case"record":return t.format?"Format: ".concat(t.format):"No format";case"tag":return t.tags?"".concat(Object.keys(t.tags).length," tags"):"No tags";case"whisper":return t.callerPrompt?"Whisper configured":"No prompts";case"timeout":return t.duration?"".concat(t.duration,"s"):"0s";case"fallback":return t.targets?"".concat(t.targets.length," targets"):"No targets";case"hangup":return t.reason?"Reason: ".concat(t.reason):"Normal";default:return""}}(l,t.config)})]})]}),(0,r.jsx)(n.HH,{type:"source",position:o.Ly.Bottom,className:"!bg-primary"})]})}var C=a(5814),E=a(90747);function F(e){var t,a,n;let{edge:o,onUpdate:l,onDelete:s}=e,i=(null===(t=o.data)||void 0===t?void 0:t.condition)||"",d=null!==(n=null===(a=o.data)||void 0===a?void 0:a.weight)&&void 0!==n?n:void 0;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Edge Configuration"}),s&&(0,r.jsx)(E.z,{onClick:()=>s(o.id),variant:"destructive",size:"sm",children:(0,r.jsx)(C.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["From: ",o.source," → To: ",o.target]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Condition"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>l(o.id,{...o.data,condition:e.target.value}),className:"w-full rounded border px-2 py-1",placeholder:"e.g., '1' for IVR choice, 'true' for if-then, 'connected' for queue"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Condition expression for routing (e.g., DTMF digit, event type, or boolean)"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Weight (Priority)"}),(0,r.jsx)("input",{type:"number",value:null!=d?d:"",onChange:e=>l(o.id,{...o.data,weight:e.target.value?parseInt(e.target.value):void 0}),className:"w-full rounded border px-2 py-1",placeholder:"Higher weight = higher priority"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used for weighted routing and priority ordering"})]})]})}class Z{serializeToFlow(e,t,a,r,n){var o,l,s;let i=e.find(e=>"entry"===e.type);if(!i)throw Error("Flow must have an entry node");let d=new Map;e.forEach(e=>{d.set(e.id,e)});let c=new Map;t.forEach(e=>{var t,a;c.has(e.source)||c.set(e.source,[]),c.get(e.source).push({target:e.target,condition:null===(t=e.data)||void 0===t?void 0:t.condition,weight:null===(a=e.data)||void 0===a?void 0:a.weight})});let u=e.filter(e=>"entry"!==e.type).map(e=>this.convertNodeToFlowNode(e,c)),m=null===(o=i.data.config)||void 0===o?void 0:o.target,p=c.get(i.id)||[],f=m||(null===(l=p[0])||void 0===l?void 0:l.target)||(null===(s=u[0])||void 0===s?void 0:s.id)||"",h={id:i.id,type:"entry",target:f};return{id:n||"flow-".concat(Date.now()),name:a,version:r,entry:h,nodes:u}}convertNodeToFlowNode(e,t){var a,r,n,o,l;let s=e.data.config||{},i=t.get(e.id)||[],d=null===(a=i[0])||void 0===a?void 0:a.target;switch(e.type){case"ivr":{let t=i.filter(e=>e.condition).map(e=>({digits:e.condition||"",target:e.target}));return{id:e.id,type:"ivr",prompt:s.prompt||"",timeout:s.timeout||void 0,maxDigits:s.maxDigits||void 0,finishOnKey:s.finishOnKey||void 0,choices:t,default:(null===(r=i.find(e=>!e.condition))||void 0===r?void 0:r.target)||s.default,...d?{next:d}:{}}}case"if":{let t=i.find(e=>"true"===e.condition||1===e.weight),a=i.find(e=>"false"===e.condition||0===e.weight);return{id:e.id,type:"if",condition:s.condition||"",then:(null==t?void 0:t.target)||s.then||"",else:(null==a?void 0:a.target)||s.else||void 0}}case"queue":{let t=i.find(e=>"connected"===e.condition),a=i.find(e=>"timeout"===e.condition),r=i.find(e=>"full"===e.condition);return{id:e.id,type:"queue",queueId:s.queueId||"",waitUrl:s.waitUrl||void 0,timeout:s.timeout||void 0,maxSize:s.maxSize||void 0,onTimeout:(null==a?void 0:a.target)||s.onTimeout||void 0,onFull:(null==r?void 0:r.target)||s.onFull||void 0,onConnect:(null==t?void 0:t.target)||s.onConnect||void 0}}case"buyer":return{id:e.id,type:"buyer",buyers:s.buyers||[],strategy:s.strategy||"round-robin",onNoBuyers:(null===(n=i.find(e=>"no-buyers"===e.condition))||void 0===n?void 0:n.target)||s.onNoBuyers||void 0,onAllBusy:(null===(o=i.find(e=>"all-busy"===e.condition))||void 0===o?void 0:o.target)||s.onAllBusy||void 0,...d?{next:d}:{}};case"record":{let t=i.find(e=>"complete"===e.condition),a=i.find(e=>"error"===e.condition);return{id:e.id,type:"record",format:s.format||"wav",channels:s.channels||"dual",beep:s.beep||!1,onComplete:(null==t?void 0:t.target)||s.onComplete||void 0,onError:(null==a?void 0:a.target)||s.onError||void 0}}case"tag":return{id:e.id,type:"tag",tags:s.tags||{},...d?{next:d}:{}};case"whisper":{let t=i.find(e=>"accept"===e.condition),a=i.find(e=>"reject"===e.condition);return{id:e.id,type:"whisper",callerPrompt:s.callerPrompt||void 0,calleePrompt:s.calleePrompt||void 0,onAccept:(null==t?void 0:t.target)||s.onAccept||void 0,onReject:(null==a?void 0:a.target)||s.onReject||void 0,timeout:s.timeout||void 0}}case"timeout":return{id:e.id,type:"timeout",duration:s.duration||0,...d?{next:d}:{}};case"fallback":{let t=i.map(e=>e.target);return{id:e.id,type:"fallback",targets:t.length>0?t:s.targets||[],onAllFailed:(null===(l=i.find(e=>"all-failed"===e.condition))||void 0===l?void 0:l.target)||s.onAllFailed||void 0}}case"hangup":return{id:e.id,type:"hangup",reason:s.reason||"normal"};default:throw Error("Unknown node type: ".concat(e.type))}}deserializeFromFlow(e){let t=[],a=[],r={id:e.entry.id,type:"entry",position:{x:250,y:100},data:{label:"Entry",nodeType:"entry",config:{target:e.entry.target}}};t.push(r),e.entry.target&&a.push({id:"edge-".concat(e.entry.id,"-").concat(e.entry.target),source:e.entry.id,target:e.entry.target,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});let n=new Map;return e.nodes.forEach((e,r)=>{let o={x:250+r%3*300,y:200+150*Math.floor(r/3)};n.set(e.id,o);let l=this.convertFlowNodeToNode(e,o);t.push(l),this.createEdgesFromFlowNode(e,a)}),{nodes:t,edges:a}}convertFlowNodeToNode(e,t){let a={id:e.id,type:e.type,position:t,data:{label:e.type.charAt(0).toUpperCase()+e.type.slice(1),nodeType:e.type,config:{}}};switch(e.type){case"ivr":a.data.config={prompt:e.prompt,timeout:e.timeout,maxDigits:e.maxDigits,finishOnKey:e.finishOnKey,default:e.default};break;case"if":a.data.config={condition:e.condition,then:e.then,else:e.else};break;case"queue":a.data.config={queueId:e.queueId,waitUrl:e.waitUrl,timeout:e.timeout,maxSize:e.maxSize,onTimeout:e.onTimeout,onFull:e.onFull,onConnect:e.onConnect};break;case"buyer":a.data.config={buyers:e.buyers,strategy:e.strategy,onNoBuyers:e.onNoBuyers,onAllBusy:e.onAllBusy};break;case"record":a.data.config={format:e.format,channels:e.channels,beep:e.beep,onComplete:e.onComplete,onError:e.onError};break;case"tag":a.data.config={tags:e.tags};break;case"whisper":a.data.config={callerPrompt:e.callerPrompt,calleePrompt:e.calleePrompt,onAccept:e.onAccept,onReject:e.onReject,timeout:e.timeout};break;case"timeout":a.data.config={duration:e.duration};break;case"fallback":a.data.config={targets:e.targets,onAllFailed:e.onAllFailed};break;case"hangup":a.data.config={reason:e.reason}}return a}createEdgesFromFlowNode(e,t){switch(e.type){case"ivr":e.choices&&e.choices.forEach((a,r)=>{t.push({id:"edge-".concat(e.id,"-").concat(a.target,"-").concat(r),source:e.id,target:a.target,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:a.digits}})}),e.default&&t.push({id:"edge-".concat(e.id,"-").concat(e.default,"-default"),source:e.id,target:e.default,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}}),"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});break;case"if":e.then&&t.push({id:"edge-".concat(e.id,"-").concat(e.then,"-then"),source:e.id,target:e.then,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"true"}}),e.else&&t.push({id:"edge-".concat(e.id,"-").concat(e.else,"-else"),source:e.id,target:e.else,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"false"}});break;case"queue":e.onConnect&&t.push({id:"edge-".concat(e.id,"-").concat(e.onConnect,"-connect"),source:e.id,target:e.onConnect,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"connected"}}),e.onTimeout&&t.push({id:"edge-".concat(e.id,"-").concat(e.onTimeout,"-timeout"),source:e.id,target:e.onTimeout,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"timeout"}}),e.onFull&&t.push({id:"edge-".concat(e.id,"-").concat(e.onFull,"-full"),source:e.id,target:e.onFull,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"full"}});break;case"buyer":"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}}),e.onNoBuyers&&t.push({id:"edge-".concat(e.id,"-").concat(e.onNoBuyers,"-no-buyers"),source:e.id,target:e.onNoBuyers,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"no-buyers"}}),e.onAllBusy&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAllBusy,"-all-busy"),source:e.id,target:e.onAllBusy,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"all-busy"}});break;case"record":e.onComplete&&t.push({id:"edge-".concat(e.id,"-").concat(e.onComplete,"-complete"),source:e.id,target:e.onComplete,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"complete"}}),e.onError&&t.push({id:"edge-".concat(e.id,"-").concat(e.onError,"-error"),source:e.id,target:e.onError,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"error"}});break;case"tag":case"timeout":"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});break;case"whisper":e.onAccept&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAccept,"-accept"),source:e.id,target:e.onAccept,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"accept"}}),e.onReject&&t.push({id:"edge-".concat(e.id,"-").concat(e.onReject,"-reject"),source:e.id,target:e.onReject,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"reject"}});break;case"fallback":e.targets&&e.targets.forEach((a,r)=>{t.push({id:"edge-".concat(e.id,"-").concat(a,"-").concat(r),source:e.id,target:a,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}})}),e.onAllFailed&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAllFailed,"-all-failed"),source:e.id,target:e.onAllFailed,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"all-failed"}})}}}var A=a(77037),S=a(30999);function T(e){let{nodes:t,edges:a,onClose:n}=e,[o,l]=(0,d.useState)(!1),[s,i]=(0,d.useState)({currentNodeId:null,path:[],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[]}),u=(0,d.useMemo)(()=>t.find(e=>"entry"===e.type),[t]),m=(0,d.useMemo)(()=>{let e=new Map;return t.forEach(t=>e.set(t.id,t)),e},[t]),p=(0,d.useMemo)(()=>{let e=new Map;returna.forEach(t=>{e.has(t.source)||e.set(t.source,[]),e.get(t.source).push(t)}),e},[a]),f=(0,d.useCallback)(()=>{var e,t;if(!u){alert("No entry node found");return}let r=(null===(e=u.data.config)||void 0===e?void 0:e.target)||(null===(t=a.find(e=>e.source===u.id))||void 0===t?void 0:t.target);if(!r){alert("No target node found from entry");return}l(!0),i({currentNodeId:r,path:[u.id,r],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[{type:"call.started",timestamp:new Date().toISOString(),data:{from:"+1234567890",to:"+0987654321"}}]})},[u,a]),h=(0,d.useCallback)((e,t)=>{if(!s.currentNodeId)return;let a=m.get(s.currentNodeId);if(!a)return;let r=[...s.events,{type:e,timestamp:newDate().toISOString(),data:t}],n=function(e,t,a,r,n){var o,l,s,i,d,c;let u=r.get(e.id)||[],m=e.data.config||{};switch(e.type){case"ivr":if("dtmf.received"===t){let e=(null==a?void 0:a.digits)||"",t=u.find(t=>{var a;return(null===(a=t.data)||void 0===a?void 0:a.condition)===e});return(null==t?void 0:t.target)||m.default||null}break;case"if":{let e=function(e,t){try{let a=e;if((a=(a=a.replace(/\$\{caller\.number\}/g,"'+1234567890'")).replace(/\$\{hour\}/g,String(t.hour||12))).includes("==")){let[e,t]=a.split("==").map(e=>e.trim());return e===t}if(a.includes(">=")){let[e,t]=a.split(">=").map(e=>parseInt(e.trim()));return e>=t}return!1}catch(e){return!1}}(m.condition||"",n),t=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="true"}),a=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="false"});return e?(null==t?void 0:t.target)||m.then||null:(null==a?void 0:a.target)||m.else||null}case"queue":if("queue.connected"===t)return m.onConnect||(null===(o=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="connected"}))||void 0===o?void 0:o.target)||null;if("queue.timeout"===t)return m.onTimeout||(null===(l=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="timeout"}))||void 0===l?void 0:l.target)||null;break;case"whisper":if("whisper.accepted"===t)return m.onAccept||(null===(s=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="accept"}))||void 0===s?void 0:s.target)||null;if("whisper.rejected"===t)return m.onReject||(null===(i=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void0:t.condition)==="reject"}))||void 0===i?void 0:i.target)||null;break;case"record":if("recording.completed"===t)return m.onComplete||(null===(d=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="complete"}))||void 0===d?void 0:d.target)||null;break;default:return(null===(c=u[0])||void 0===c?void 0:c.target)||m.next||null}return null}(a,e,t,p,s.variables);n?i({...s,currentNodeId:n,path:[...s.path,n],events:r}):i({...s,events:r})},[s,m,p]),g=(0,d.useCallback)(()=>{l(!1),i({currentNodeId:null,path:[],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[]})},[]),x=s.currentNodeId?m.get(s.currentNodeId):null;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,r.jsxs)(S.Zb,{className:"w-full max-w-4xl p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Flow Simulator"}),(0,r.jsx)(E.z,{variant:"ghost",size:"sm",onClick:n,children:(0,r.jsx)(A.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(E.z,{onClick:f,disabled:o,children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Start Simulation"]}),(0,r.jsxs)(E.z,{onClick:g,variant:"outline",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Reset"]})]}),x&&(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsxs)("div",{className:"font-semibold",children:["Current Node: ",x.data.label]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",x.id]}),(0,r.jsxs)("div",{className:"mt-2 text-sm",children:["Type: ",x.type]})]}),(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Execution Path"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.path.map((e,t)=>{let a=m.get(e);return(0,r.jsxs)("div",{className:"rounded px-2 py-1 text-xs ".concat(e===s.currentNodeId?"bg-primary text-primary-foreground":"bg-background"),children:[(null==a?void 0:a.data.label)||e,t<s.path.length-1&&(0,r.jsx)("span",{className:"ml-2",children:"→"})]},t)})})]}),x&&(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Inject Event"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(function(e){switch(e){case"ivr":return["dtmf.received","call.ended"];case"queue":return["queue.connected","queue.timeout","call.ended"];case"whisper":return["whisper.accepted","whisper.rejected","call.ended"];case"record":return["recording.completed","call.ended"];default:return["call.answered","call.ended"]}})(x.type).map(e=>(0,r.jsx)(E.z,{size:"sm",variant:"outline",onClick:()=>h(e),children:e},e))})]}),(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Events"}),(0,r.jsx)("div",{className:"max-h-48 space-y-1 overflow-y-auto",children:s.events.map((e,t)=>(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsx)("span",{className:"font-mono text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()}),": ",(0,r.jsx)("span",{className:"font-semibold",children:e.type}),e.data&&(0,r.jsx)("span",{className:"ml-2 text-muted-foreground",children:JSON.stringify(e.data)})]},t))})]})]})]})})}let R=[{type:"entry",label:"Entry",icon:c.Z,color:"bg-[#00D084]"},{type:"ivr",label:"IVR",icon:u.Z,color:"bg-[#1E3A5F]"},{type:"if",label:"If",icon:m.Z,color:"bg-[#FF6B35]"},{type:"queue",label:"Queue",icon:p.Z,color:"bg-[#1E3A5F]"},{type:"buyer",label:"Buyer",icon:f.Z,color:"bg-[#FF6B35]"},{type:"record",label:"Record",icon:h.Z,color:"bg-[#00D084]"},{type:"tag",label:"Tag",icon:g.Z,color:"bg-[#1E3A5F]"},{type:"whisper",label:"Whisper",icon:x.Z,color:"bg-[#00D084]"},{type:"timeout",label:"Timeout",icon:v.Z,color:"bg-gray-500"},{type:"fallback",label:"Fallback",icon:y.Z,color:"bg-[#FF6B35]"},{type:"hangup",label:"Hangup",icon:b.Z,color:"bg-slate-500"}];function D(e){let{onAddNode:t}=e,a=(0,d.useCallback)((e,t)=>{e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"},[]);return(0,r.jsxs)("div",{className:"w-64 border-r bg-card flex flex-col overflow-hidden flex-shrink-0 h-full",children:[(0,r.jsx)("div",{className:"p-4 flex-shrink-0",children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Node Palette"})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4 pt-0",children:(0,r.jsx)("div",{className:"space-y-2",children:R.map(e=>(0,r.jsxs)("div",{draggable:!0,onDragStart:t=>a(t,e.type),className:(0,w.cn)("flex cursor-grab items-center gap-3 rounded-lg border p-3 transition-colors hover:bg-accent","active:cursor-grabbing"),children:[(0,r.jsx)("div",{className:(0,w.cn)("flex h-8 w-8 items-center justify-center rounded",e.color),children:(0,r.jsx)(e.icon,{className:"h-4 w-4 text-white"})}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.type))})})]})}var I=a(66801),q=a(38137),z=a(28314);let B={entry:k,ivr:k,if:k,queue:k,buyer:k,record:k,tag:k,whisper:k,timeout:k,fallback:k,hangup:k},P=[{id:"entry-1",type:"entry",position:{x:250,y:100},data:{label:"Entry",nodeType:"entry",config:{}}}],O=[];function Q(){let e=(0,d.useRef)(null),[t,a,c]=(0,n.Rr)(P),[u,m,p]=(0,n.ll)(O),[f,h]=(0,d.useState)(null),[g,x]=(0,d.useState)(null),[v,y]=(0,d.useState)("New Flow"),[b,w]=(0,d.useState)("1.0.0"),[N,j]=(0,d.useState)(null),[k,C]=(0,d.useState)(!1),[A,S]=(0,d.useState)([]),[R,Q]=(0,d.useState)(null),[_,M]=(0,d.useState)(!1),[V,H]=(0,d.useState)(!1),K=(0,d.useCallback)(e=>{m(t=>(0,o.Z_)({...e,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}},t))},[m]),L=(0,d.useCallback)((e,t)=>{h(t),x(null)},[]),J=(0,d.useCallback)((e,t)=>{x(t),h(null)},[]),W=(0,d.useCallback)(()=>{h(null),x(null)},[]),$=(0,d.useCallback)((e,t)=>{let r={id:"".concat(e,"-").concat(Date.now()),type:e,position:t,data:{label:e.charAt(0).toUpperCase()+e.slice(1),nodeType:e,config:function(e){switch(e){case"entry":return{target:""};case"ivr":return{prompt:"",timeout:10,maxDigits:1,choices:[],default:""};case"if":return{condition:"",then:"",else:""};case"queue":return{queueId:"",timeout:60};case"buyer":return{buyers:[],strategy:"round-robin"};case"record":return{format:"wav",channels:"dual",beep:!1};case"tag":return{tags:{}};case"whisper":return{callerPrompt:"",calleePrompt:"",timeout:10};case"timeout":return{duration:0};case"fallback":return{targets:[]};case"hangup":return{reason:"normal"};default:return{}}}(e)}};a(e=>[...e,r])},[a]),G=(0,d.useCallback)(t=>{t.preventDefault();let a=t.dataTransfer.getData("application/reactflow");if(!a||!e.current)return;let r=e.current.getBoundingClientRect();$(a,{x:t.clientX-r.left,y:t.clientY-r.top})},[$]),Y=(0,d.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),X=(0,d.useCallback)((e,t)=>{a(a=>a.map(a=>a.id===e?{...a,data:{...a.data,config:t}}:a))},[a]),ee=(0,d.useCallback)((e,t)=>{m(a=>a.map(a=>a.id===e?{...a,data:{...a.data,...t}}:a))},[m]),et=(0,d.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e)),m(t=>t.filter(t=>t.source!==e&&t.target!==e)),(null==f?void 0:f.id)===e&&h(null)},[a,m,f]),ea=(0,d.useCallback)(e=>{m(t=>t.filter(t=>t.id!==e)),(null==g?void 0:g.id)===e&&x(null)},[m,g]);(0,d.useEffect)(()=>{er()},[]);let er=async()=>{M(!0);try{var e;let t=await z.x.get("/api/v1/flows");(null===(e=t.data)||void 0===e?void 0:e.data)&&S(t.data.data)}catch(e){console.error("Failed to load flows:",e)}finally{M(!1)}},en=async(e,t)=>{M(!0);try{var r,n;let o=t?"/api/v1/flows/".concat(e,"/versions/").concat(t):"/api/v1/flows/".concat(e),l=await z.x.get(o);if(null===(r=l.data)||void 0===r?void 0:r.flow){let{nodes:t,edges:r}=new Z().deserializeFromFlow(l.data.flow);a(t),m(r),j(l.data.flowId),y(l.data.flow.name||"Unnamed Flow"),w(l.data.version),Q(e)}else alert("Error: ".concat((null===(n=l.error)||void 0===n?void 0:n.message)||"Failed to load flow"))}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to load flow"))}finally{M(!1)}},eo=()=>{a(P),m([]),j(null),y("New Flow"),w("1.0.0"),Q(null)},el=(0,d.useCallback)(async()=>{if(!v.trim()){alert("Please enter a flow name");return}H(!0);let e=new Z().serializeToFlow(t,u,v,b,N);try{let t=await z.x.post("/api/v1/flows",e);if(t.data)j(t.data.flowId),Q(t.data.flowId),await er(),alert("Flow saved successfully!");else{var a;alert("Error: ".concat((null===(a=t.error)||void 0===a?void 0:a.message)||"Failed to save flow"))}}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to save flow"))}finally{H(!1)}},[t,u,v,b,N]),es=(0,d.useCallback)(()=>{let e=new Z().serializeToFlow(t,u,v,b,N),a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="".concat(v,"-").concat(b,".json"),n.click(),URL.revokeObjectURL(r)},[t,u,v,b,N]);return(0,r.jsx)(n.tV,{children:(0,r.jsxs)("div",{className:"flex h-full w-full flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b bg-card px-3 py-2 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-lg font-bold whitespace-nowrap",children:"Flow Builder"}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(I._,{htmlFor:"flow-select",className:"text-xs whitespace-nowrap",children:"Flow:"}),(0,r.jsxs)(q.Ph,{value:R||"new",onValueChange:e=>{"new"===e?eo():en(e)},disabled:_,children:[(0,r.jsx)(q.i4,{id:"flow-select",className:"w-48 h-8 text-sm",children:(0,r.jsx)(q.ki,{placeholder:"Select a flow"})}),(0,r.jsxs)(q.Bw,{children:[(0,r.jsx)(q.Ql,{value:"new",children:"+ New Flow"}),A.map(e=>(0,r.jsxs)(q.Ql,{value:e.id,children:[e.name||e.id," ",e.publishedVersion?"(v".concat(e.publishedVersion,")"):""]},e.id))]})]})]}),(0,r.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),className:"rounded border px-2 py-1 h-8 text-sm w-40",placeholder:"Flow Name"}),(0,r.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),className:"rounded border px-2 py-1 h-8 w-20 text-sm",placeholder:"Version"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(0,r.jsxs)(E.z,{onClick:el,variant:"default",disabled:V||_,size:"sm",className:"h-8",children:[V?(0,r.jsx)(l.Z,{className:"mr-1.5 h-3.5 w-3.5 animate-spin"}):(0,r.jsx)(s.Z,{className:"mr-1.5 h-3.5 w-3.5"}),"Save"]}),(0,r.jsxs)(E.z,{onClick:es,variant:"outline",disabled:_,size:"sm",className:"h-8",children:[(0,r.jsx)(i.Z,{className:"mr-1.5 h-3.5 w-3.5"}),"Export"]}),(0,r.jsx)(E.z,{onClick:()=>C(!k),variant:"outline",size:"sm",className:"h-8",children:"Simulator"})]})]}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden min-h-0",children:[(0,r.jsx)(D,{onAddNode:$}),(0,r.jsx)("div",{className:"relative flex-1 min-w-0 h-full",ref:e,onDrop:G,onDragOver:Y,children:(0,r.jsxs)(n.x$,{nodes:t,edges:u,onNodesChange:c,onEdgesChange:p,onConnect:K,onNodeClick:L,onEdgeClick:J,onPaneClick:W,nodeTypes:B,fitView:!0,className:"h-full w-full",children:[(0,r.jsx)(n.Aq,{}),(0,r.jsx)(n.ZX,{}),(0,r.jsx)(n.a9,{})]})}),(0,r.jsx)("div",{className:"w-80 border-l bg-card p-4 overflow-y-auto flex-shrink-0 h-full",children:f?(0,r.jsx)(U,{node:f,onUpdate:X,onDelete:et}):g?(0,r.jsx)(F,{edge:g,onUpdate:ee,onDelete:ea}):(0,r.jsx)("div",{className:"text-muted-foreground",children:"Select a node or edge to configure"})})]}),k&&(0,r.jsx)(T,{nodes:t,edges:u,onClose:()=>C(!1)})]})})}function U(e){let{node:t,onUpdate:a,onDelete:n}=e,o=t.data.config||{};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:t.data.label}),(0,r.jsx)(E.z,{onClick:()=>n(t.id),variant:"destructive",size:"sm",children:"Delete"})]}),(0,r.jsx)(_,{nodeType:t.data.nodeType,config:o,onChange:(e,r)=>{a(t.id,{...o,[e]:r})}})]})}function _(e){let{nodeType:t,config:a,onChange:n}=e;switch(t){case"entry":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Target Node ID"}),(0,r.jsx)("input",{type:"text",value:a.target||"",onChange:e=>n("target",e.target.value),className:"w-full rounded border px-2 py-1"})]});case"ivr":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Prompt"}),(0,r.jsx)("input",{type:"text",value:a.prompt||"",onChange:e=>n("prompt",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Audio URL or text"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.timeout||10,onChange:e=>n("timeout",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Max Digits"}),(0,r.jsx)("input",{type:"number",value:a.maxDigits||1,onChange:e=>n("maxDigits",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"if":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Condition"}),(0,r.jsx)("textarea",{value:a.condition||"",onChange:e=>n("condition",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:'e.g., ${caller.number == "+1234567890"}',rows:3})]});case"queue":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Queue ID"}),(0,r.jsx)("input",{type:"text",value:a.queueId||"",onChange:e=>n("queueId",e.target.value),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.timeout||60,onChange:e=>n("timeout",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"buyer":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Strategy"}),(0,r.jsxs)("select",{value:a.strategy||"round-robin",onChange:e=>n("strategy",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"round-robin",children:"Round Robin"}),(0,r.jsx)("option",{value:"weighted",children:"Weighted"}),(0,r.jsx)("option",{value:"least-calls",children:"Least Calls"})]})]});case"record":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Format"}),(0,r.jsxs)("select",{value:a.format||"wav",onChange:e=>n("format",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"wav",children:"WAV"}),(0,r.jsx)("option",{value:"mp3",children:"MP3"})]})]});case"tag":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Tags (JSON)"}),(0,r.jsx)("textarea",{value:JSON.stringify(a.tags||{},null,2),onChange:e=>{try{n("tags",JSON.parse(e.target.value))}catch(e){}},className:"w-full rounded border px-2 py-1 font-mono text-xs",rows:5})]});case"whisper":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Caller Prompt"}),(0,r.jsx)("input",{type:"text",value:a.callerPrompt||"",onChange:e=>n("callerPrompt",e.target.value),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Callee Prompt"}),(0,r.jsx)("input",{type:"text",value:a.calleePrompt||"",onChange:e=>n("calleePrompt",e.target.value),className:"w-full rounded border px-2 py-1"})]});case"timeout":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Duration (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.duration||0,onChange:e=>n("duration",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"fallback":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Target Node IDs (comma-separated)"}),(0,r.jsx)("input",{type:"text",value:(a.targets||[]).join(", "),onChange:e=>n("targets",e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),className:"w-full rounded border px-2 py-1"})]});case"hangup":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Reason"}),(0,r.jsxs)("select",{value:a.reason||"normal",onChange:e=>n("reason",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"normal",children:"Normal"}),(0,r.jsx)("option",{value:"busy",children:"Busy"}),(0,r.jsx)("option",{value:"rejected",children:"Rejected"}),(0,r.jsx)("option",{value:"timeout",children:"Timeout"}),(0,r.jsx)("option",{value:"error",children:"Error"})]})]});default:return(0,r.jsx)("div",{children:"No configuration available"})}}function M(){return(0,r.jsx)("div",{className:"h-full w-full -m-6",children:(0,r.jsx)(Q,{})})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(91674),n=a(32814),o=a(47828),l=a(86655),s=a(33061);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:o,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,s.cn)(i({variant:o,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return i}});var r=a(91674),n=a(86655),o=a(33061);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...n})});s.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){returns}});var r=a(91674),n=a(35974),o=a(86655),l=a(33061);let s=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...o})});s.displayName=n.f.displayName},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return g},i4:function(){return m},ki:function(){return u}});var r=a(91674),n=a(65485),o=a(50802),l=a(98371),s=a(72781),i=a(86655),d=a(33061);let c=n.fC;n.ZA;let u=n.B4,m=i.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[l,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let p=i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=n.u_.displayName;let f=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let h=i.forwardRef((e,t)=>{let{className:a,children:o,position:l="popper",...s}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...s,children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,r.jsx)(f,{})]})})});h.displayName=n.VY.displayName,i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...o})}).displayName=n.__.displayName;let g=i.forwardRef((e,t)=>{let{className:a,children:o,...l}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(s.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:o})]})});g.displayName=n.ck.displayName,i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...o})}).displayName=n.Z0.displayName},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return n}});class r{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){lett=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let n="".concat(this.baseUrl).concat(e),o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization="Bearer ".concat(this.token)),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(n,{...t,headers:o}),a=await e.json();if(!e.ok){var l,s;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(s=a.error)||void 0===s?void 0:s.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let n=new r},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return i},cn:function(){return o},p6:function(){return d},un:function(){return l},xG:function(){return s}});var r=a(44115),n=a(38352);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function i(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(a,":").concat(String(r).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[130,1856,7880,2546,802,8474,4395,4623,8700,1293,9997,1744],function(){return e(e.s=51235)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/billing/page-a0900e5c34202e7d.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8921],{8121:function(e,t,r){Promise.resolve().then(r.bind(r,88825))},88825:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(91674),s=r(54741),a=r(92277),i=r(92794),o=r(30588),l=r(86655),c=r(60044),d=r(90747),u=r(30999),f=r(86190),m=r(28314),x=r(33061);function h(){let[e,t]=(0,l.useState)([]),[r,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(!0),[b,y]=(0,l.useState)(null),v=(0,l.useCallback)(async()=>{g(!0),y(null);try{let[e,r]=await Promise.all([m.x.get("/api/v1/billing/invoices"),m.x.get("/api/v1/billing/balance")]);e.data&&t(e.data.data||[]),r.data&&h(r.data)}catch(e){y(e instanceof Error?e.message:"Failed to load billing data")}finally{g(!1)}},[]);return((0,l.useEffect)(()=>{v()},[v]),p)?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Billing"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Billing"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),b&&(0,n.jsx)(u.Zb,{children:(0,n.jsx)(u.aY,{className:"pt-6",children:(0,n.jsxs)("div",{className:"text-center text-destructive",children:["Error: ",b]})})}),r&&(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Available Balance"}),(0,n.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.available))})})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Pending"}),(0,n.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.pending))})})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Held"}),(0,n.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.held))})})]})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{children:"Invoices"}),(0,n.jsx)(u.SZ,{children:"View and download your invoices"})]}),(0,n.jsx)(u.aY,{children:0===e.length?(0,n.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"}):(0,n.jsxs)(f.iA,{children:[(0,n.jsx)(f.xD,{children:(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.ss,{children:"Invoice Number"}),(0,n.jsx)(f.ss,{children:"Period"}),(0,n.jsx)(f.ss,{children:"Amount"}),(0,n.jsx)(f.ss,{children:"Status"}),(0,n.jsx)(f.ss,{children:"Due Date"}),(0,n.jsx)(f.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(f.RM,{children:e.map(e=>(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.pj,{className:"font-medium",children:e.invoiceNumber}),(0,n.jsxs)(f.pj,{children:[(0,x.p6)(e.period.start)," -",(0,x.p6)(e.period.end)]}),(0,n.jsx)(f.pj,{children:(0,x.xG)(parseFloat(e.total))}),(0,n.jsx)(f.pj,{children:(0,n.jsx)(c.C,{variant:"paid"===e.status?"success":"warning",children:e.status})}),(0,n.jsx)(f.pj,{children:(0,x.p6)(e.dueDate)}),(0,n.jsx)(f.pj,{className:"text-right",children:(0,n.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(91674),s=r(47828);r(86655);var a=r(33061);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(91674),s=r(32814),a=r(47828),i=r(86655),o=r(33061);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var n=r(91674),s=r(86655),a=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-smtext-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return o}});var n=r(91674),s=r(86655),a=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...s})});o.displayName="TableHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...s})});l.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let s="".concat(this.baseUrl).concat(e),a={"Content-Type":"application/json",...t.headers};this.token&&(a.Authorization="Bearer ".concat(this.token)),this.apiKey&&(a["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:a}),r=await e.json();if(!e.ok){var i,o;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(o=r.error)||void 0===o?void 0:o.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){returnthis.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new n},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return a},p6:function(){return c},un:function(){return i},xG:function(){return o}});var n=r(44115),s=r(38352);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},19596:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(86655),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
/app/apps/web/.next/static/chunks/app/(dashboard)/numbers/page-f56fc061f4b4f3b5.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{93410:function(e,t,r){Promise.resolve().then(r.bind(r,9443))},9443:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(91674),s=r(30588),n=r(98548),i=r(89175),l=r(54741),o=r(86655),c=r(90747),d=r(55738),u=r(88151),f=r(66801),m=r(38137),h=r(28314);function x(e){var t,r,s,n;let{open:i,onOpenChange:x,numberId:p,number:v,currentStatus:g,currentCampaignId:j,currentCapabilities:b={},onSuccess:y}=e,[N,w]=(0,o.useState)(!1),[C,k]=(0,o.useState)(!1),[S,R]=(0,o.useState)(null),[_,E]=(0,o.useState)([]),[T,I]=(0,o.useState)({status:g.toUpperCase(),campaignId:j||"",capabilities:{voice:null===(t=b.voice)||void 0===t||t,sms:null!==(r=b.sms)&&void 0!==r&&r,mms:null!==(s=b.mms)&&void 0!==s&&s,fax:null!==(n=b.fax)&&void0!==n&&n}});(0,o.useEffect)(()=>{if(i){var e,t,r,a;I({status:g.toUpperCase(),campaignId:j||"",capabilities:{voice:null===(e=b.voice)||void 0===e||e,sms:null!==(t=b.sms)&&void 0!==t&&t,mms:null!==(r=b.mms)&&void 0!==r&&r,fax:null!==(a=b.fax)&&void 0!==a&&a}}),Z()}},[i,g,j,b]);let Z=async()=>{k(!0);try{var e;let t=await h.x.get("/api/v1/campaigns");(null===(e=t.data)||void 0===e?void 0:e.data)&&E(t.data.data)}catch(e){console.error("Failed to load campaigns:",e)}finally{k(!1)}},F=async()=>{w(!0),R(null);try{let e=await h.x.patch("/api/v1/numbers/".concat(p),{status:T.status,campaignId:T.campaignId||null,capabilities:T.capabilities});if(e.error)throw Error(e.error.message||"Failed to update number");e.data&&(null==y||y(),x(!1))}catch(e){R(e instanceof Error?e.message:"Failed to update number")}finally{w(!1)}};return(0,a.jsx)(u.Vq,{open:i,onOpenChange:x,children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(u.fK,{children:[(0,a.jsx)(u.$N,{children:"Edit Phone Number"}),(0,a.jsxs)(u.Be,{children:["Update settings for ",v]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(m.Ph,{value:T.status,onValueChange:e=>I({...T,status:e}),disabled:N,children:[(0,a.jsx)(m.i4,{id:"status",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"ACTIVE",children:"Active"}),(0,a.jsx)(m.Ql,{value:"INACTIVE",children:"Inactive"}),(0,a.jsx)(m.Ql,{value:"SUSPENDED",children:"Suspended"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"campaign",children:"Campaign (Optional)"}),(0,a.jsxs)(m.Ph,{value:T.campaignId||void 0,onValueChange:e=>I({...T,campaignId:e||""}),disabled:N||C,children:[(0,a.jsx)(m.i4,{id:"campaign",children:(0,a.jsx)(m.ki,{placeholder:"Selecta campaign (optional)"})}),(0,a.jsx)(m.Bw,{children:_.map(e=>(0,a.jsx)(m.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(f._,{children:"Capabilities"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-voice",checked:T.capabilities.voice,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,voice:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-voice",className:"font-normal cursor-pointer",children:"Voice"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-sms",checked:T.capabilities.sms,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,sms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-sms",className:"font-normal cursor-pointer",children:"SMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-mms",checked:T.capabilities.mms,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,mms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-mms",className:"font-normal cursor-pointer",children:"MMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-fax",checked:T.capabilities.fax,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,fax:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-fax",className:"font-normal cursor-pointer",children:"Fax"})]})]})]}),S&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:S})]}),(0,a.jsxs)(u.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>x(!1),disabled:N,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:F,disabled:N,children:[N&&(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})}var p=r(66120);function v(e){let{open:t,onOpenChange:r,onSuccess:s}=e,[n,i]=(0,o.useState)(!1),[x,v]=(0,o.useState)(null),[g,j]=(0,o.useState)({areaCode:"",country:"US",region:"",provider:"local",features:{voice:!0,sms:!1,mms:!1,fax:!1}}),b=async()=>{i(!0),v(null);try{let e=await h.x.post("/api/v1/numbers",{areaCode:g.areaCode||void 0,country:g.country,region:g.region||void 0,provider:g.provider,features:g.features});if(e.error)throw Error(e.error.message||"Failed to purchase number");e.data&&(null==s||s(),r(!1),j({areaCode:"",country:"US",region:"",provider:"local",features:{voice:!0,sms:!1,mms:!1,fax:!1}}))}catch(e){v(e instanceof Error?e.message:"Failed to purchase number")}finally{i(!1)}};return(0,a.jsx)(u.Vq,{open:t,onOpenChange:r,children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(u.fK,{children:[(0,a.jsx)(u.$N,{children:"Purchase Phone Number"}),(0,a.jsx)(u.Be,{children:"Search and purchase a new phone number for your account."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"provider",children:"Provider"}),(0,a.jsxs)(m.Ph,{value:g.provider,onValueChange:e=>j({...g,provider:e}),children:[(0,a.jsx)(m.i4,{id:"provider",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"local",children:"Local (Test)"}),(0,a.jsx)(m.Ql,{value:"signalwire",children:"SignalWire"}),(0,a.jsx)(m.Ql,{value:"telnyx",children:"Telnyx"}),(0,a.jsx)(m.Ql,{value:"bandwidth",children:"Bandwidth"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"country",children:"Country"}),(0,a.jsxs)(m.Ph,{value:g.country,onValueChange:e=>j({...g,country:e}),children:[(0,a.jsx)(m.i4,{id:"country",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"US",children:"United States"}),(0,a.jsx)(m.Ql,{value:"CA",children:"Canada"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"areaCode",children:"Area Code (Optional)"}),(0,a.jsx)(p.I,{id:"areaCode",placeholder:"e.g., 212, 310, 415",value:g.areaCode,onChange:e=>j({...g,areaCode:e.target.value}),maxLength:3,pattern:"[0-9]{3}"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty to get any available number"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"region",children:"Region/State (Optional)"}),(0,a.jsx)(p.I,{id:"region",placeholder:"e.g., CA, NY, TX",value:g.region,onChange:e=>j({...g,region:e.target.value}),maxLength:2})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(f._,{children:"Capabilities"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-centerspace-x-2",children:[(0,a.jsx)(d.X,{id:"voice",checked:g.features.voice,onCheckedChange:e=>j({...g,features:{...g.features,voice:!!e}})}),(0,a.jsx)(f._,{htmlFor:"voice",className:"font-normal cursor-pointer",children:"Voice"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"sms",checked:g.features.sms,onCheckedChange:e=>j({...g,features:{...g.features,sms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"sms",className:"font-normal cursor-pointer",children:"SMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"mms",checked:g.features.mms,onCheckedChange:e=>j({...g,features:{...g.features,mms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"mms",className:"font-normal cursor-pointer",children:"MMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"fax",checked:g.features.fax,onCheckedChange:e=>j({...g,features:{...g.features,fax:!!e}})}),(0,a.jsx)(f._,{htmlFor:"fax",className:"font-normal cursor-pointer",children:"Fax"})]})]})]}),x&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:x})]}),(0,a.jsxs)(u.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>r(!1),disabled:n,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:b,disabled:n,children:[n&&(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Purchase Number"]})]})]})})}var g=r(60044),j=r(30999),b=r(86190),y=r(33061);function N(){var e;let[t,r]=(0,o.useState)(""),[d,u]=(0,o.useState)(!1),[f,m]=(0,o.useState)(!1),[N,w]=(0,o.useState)(null),[C,k]=(0,o.useState)([]),[S,R]=(0,o.useState)(!0);(0,o.useEffect)(()=>{_()},[]);let _=async()=>{R(!0);try{var e;let t=await h.x.get("/api/v1/numbers");(null===(e=t.data)||void 0===e?void 0:e.data)&&k(t.data.data)}catch(e){console.error("Failed to load numbers:",e)}finally{R(!1)}},E=C.filter(e=>{var r;return e.number.includes(t)||(null===(r=e.campaign)||void 0===r?void 0:r.name.toLowerCase().includes(t.toLowerCase()))}),T=e=>{w(e),m(!0)};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Numbers"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your phone numbers and assignments"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.z,{variant:"outline",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.xlsx,.xls",e.onchange=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&alert("Import functionality coming soon. Selected file: ".concat(r.name))},e.click()},children:[(0,a.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),"Import"]}),(0,a.jsxs)(c.z,{onClick:()=>{u(!0)},children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Buy Number"]})]})]}),(0,a.jsxs)(j.Zb,{className:"flex-1 flex flex-col overflow-hiddenmin-h-0",children:[(0,a.jsx)(j.Ol,{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.ll,{children:"Phone Numbers"}),(0,a.jsx)(j.SZ,{children:"Search and manage your numbers"})]}),(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(p.I,{id:"numbers-search",name:"numbers-search",placeholder:"Search numbers...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]})]})}),(0,a.jsx)(j.aY,{className:"flex-1 overflow-y-auto min-h-0",children:S?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===E.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No phone numbers found"}):(0,a.jsxs)(b.iA,{children:[(0,a.jsx)(b.xD,{children:(0,a.jsxs)(b.SC,{children:[(0,a.jsx)(b.ss,{children:"Number"}),(0,a.jsx)(b.ss,{children:"Status"}),(0,a.jsx)(b.ss,{children:"Campaign"}),(0,a.jsx)(b.ss,{children:"Purchased"}),(0,a.jsx)(b.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(b.RM,{children:E.map(e=>{var t;return(0,a.jsxs)(b.SC,{children:[(0,a.jsx)(b.pj,{className:"font-mono",children:(0,y.un)(e.number)}),(0,a.jsx)(b.pj,{children:(0,a.jsx)(g.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),(0,a.jsx)(b.pj,{children:(null===(t=e.campaign)||void 0===t?void 0:t.name)||"-"}),(0,a.jsx)(b.pj,{children:e.purchasedAt?new Date(e.purchasedAt).toLocaleDateString():"-"}),(0,a.jsx)(b.pj,{className:"text-right",children:(0,a.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>T(e),children:"Edit"})})]},e.id)})})]})})]}),(0,a.jsx)(v,{open:d,onOpenChange:u,onSuccess:()=>{_()}}),N&&(0,a.jsx)(x,{open:f,onOpenChange:m,numberId:N.id,number:N.number,currentStatus:N.status,currentCampaignId:null===(e=N.campaign)||void 0===e?void 0:e.id,currentCapabilities:N.capabilities,onSuccess:()=>{_()}})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(91674),s=r(47828);r(86655);var n=r(33061);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(91674),s=r(32814),n=r(47828),i=r(86655),l=r(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-nonedisabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},55738:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var a=r(91674),s=r(38598),n=r(72781),i=r(86655),l=r(33061);let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:(0,a.jsx)(s.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});o.displayName=s.fC.displayName},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return h},Be:function(){return x},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),s=r(7472),n=r(77037),i=r(86655),l=r(33061);let o=s.fC;s.xz;let c=s.h_;s.x8;let d=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});d.displayName=s.aV.displayName;let u=i.forwardRef((e,t)=>{let{className:r,children:i,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[i,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let h=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});h.displayName=s.Dx.displayName;letx=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});x.displayName=s.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(91674),s=r(35974),n=r(86655),i=r(33061);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});l.displayName=s.f.displayName},38137:function(e,t,r){"use strict";r.d(t,{Bw:function(){return x},Ph:function(){return d},Ql:function(){return p},i4:function(){return f},ki:function(){return u}});var a=r(91674),s=r(65485),n=r(50802),i=r(98371),l=r(72781),o=r(86655),c=r(33061);let d=s.fC;s.ZA;let u=s.B4,f=o.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,a.jsxs)(s.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[i,(0,a.jsx)(s.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let h=o.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(s.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...i,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let x=o.forwardRef((e,t)=>{let{className:r,children:n,position:i="popper",...l}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsxs)(s.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,a.jsx)(m,{}),(0,a.jsx)(s.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(h,{})]})})});x.displayName=s.VY.displayName,o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...n})}).displayName=s.__.displayName;let p=o.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,a.jsxs)(s.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(s.eT,{children:n})]})});p.displayName=s.ck.displayName,o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=s.Z0.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});l.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),r=await e.json();if(!e.ok){var i,l;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(l=r.error)||void 0===l?void 0:l.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return c},un:function(){return i},xG:function(){return l}});var a=r(44115),s=r(38352);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},30588:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/quotas/page-3b8b6b5431f63b41.js: */let s=(0,r.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l=(0,r.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=a(4458),o=a(80317),d=a(92277),c=a(86655),u=a(78419),m=a(90747),f=a(30999),x=a(66120),h=a(66801),g=a(81317),v=a(76604),p=a(28314);function y(){var e,t,a,r,y,b,N,j,k,S,w,C,R;let[E,M]=(0,c.useState)(""),[T,B]=(0,c.useState)(null),[D,O]=(0,c.useState)(!1),[P,I]=(0,c.useState)(null),[_,U]=(0,c.useState)(null),[F,A]=(0,c.useState)({maxConcurrentCalls:"",maxMinutesPerDay:"",maxRecordingRetentionDays:"",maxPhoneNumbers:"",maxStorageGB:"",enabled:!0}),[Z,q]=(0,c.useState)({monthlyBudget:"",dailyBudget:"",alertThreshold:"80",alertEmails:"",alertSlackWebhook:"",hardStopEnabled:!0,enabled:!0}),[W,z]=(0,c.useState)(null),[G,L]=(0,c.useState)(null);(0,c.useEffect)(()=>{M("00000000-0000-0000-0000-000000000000")},[]);let V=async()=>{if(E)try{O(!0);let e=await p.x.get("/admin/api/v1/tenants/".concat(E,"/quota/status"));e.data?B(e.data):e.error&&I(e.error.message||"Failed to load quota status")}catch(e){I("Failed to load quota status")}finally{O(!1)}},Q=async()=>{if(E)try{let l=await p.x.get("/admin/api/v1/tenants/".concat(E,"/quota"));if(l.data){var e,t,a,n,r,s;A({maxConcurrentCalls:(null===(e=l.data.maxConcurrentCalls)||void 0===e?void 0:e.toString())||"",maxMinutesPerDay:(null===(t=l.data.maxMinutesPerDay)||void 0===t?void 0:t.toString())||"",maxRecordingRetentionDays:(null===(a=l.data.maxRecordingRetentionDays)||void 0===a?void 0:a.toString())||"",maxPhoneNumbers:(null===(n=l.data.maxPhoneNumbers)||void 0===n?void 0:n.toString())||"",maxStorageGB:(null===(r=l.data.maxStorageGB)||void 0===r?void 0:r.toString())||"",enabled:null===(s=l.data.enabled)||void 0===s||s})}}catch(e){}},Y=async()=>{if(E)try{let l=await p.x.get("/admin/api/v1/tenants/".concat(E,"/budget"));if(l.data){var e,t,a,n,r,s;q({monthlyBudget:(null===(e=l.data.monthlyBudget)||void 0===e?void 0:e.toString())||"",dailyBudget:(null===(t=l.data.dailyBudget)||void 0===t?void 0:t.toString())||"",alertThreshold:(null===(a=l.data.alertThreshold)||void 0===a?void 0:a.toString())||"80",alertEmails:(null===(n=l.data.alertEmails)||void 0===n?void 0:n.join(", "))||"",alertSlackWebhook:l.data.alertSlackWebhook||"",hardStopEnabled:null===(r=l.data.hardStopEnabled)||void 0===r||r,enabled:null===(s=l.data.enabled)||void 0===s||s})}}catch(e){}};(0,c.useEffect)(()=>{E&&(V(),Q(),Y())},[E]);let $=async()=>{if(E)try{O(!0),I(null),await p.x.patch("/admin/api/v1/tenants/".concat(E,"/quota"),{maxConcurrentCalls:F.maxConcurrentCalls?parseInt(F.maxConcurrentCalls):null,maxMinutesPerDay:F.maxMinutesPerDay?parseInt(F.maxMinutesPerDay):null,maxRecordingRetentionDays:F.maxRecordingRetentionDays?parseInt(F.maxRecordingRetentionDays):null,maxPhoneNumbers:F.maxPhoneNumbers?parseInt(F.maxPhoneNumbers):null,maxStorageGB:F.maxStorageGB?parseFloat(F.maxStorageGB):null,enabled:F.enabled}),U("Quota settings saved"),V(),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to save quota settings")}finally{O(!1)}},K=async()=>{if(E)try{O(!0),I(null),await p.x.patch("/admin/api/v1/tenants/".concat(E,"/budget"),{monthlyBudget:Z.monthlyBudget?parseFloat(Z.monthlyBudget):null,dailyBudget:Z.dailyBudget?parseFloat(Z.dailyBudget):null,alertThreshold:parseFloat(Z.alertThreshold),alertEmails:Z.alertEmails.split(",").map(e=>e.trim()).filter(Boolean),alertSlackWebhook:Z.alertSlackWebhook||null,hardStopEnabled:Z.hardStopEnabled,enabled:Z.enabled}),U("Budget settings saved"),V(),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to save budget settings")}finally{O(!1)}},H=async()=>{if(E)try{O(!0),I(null);let e=await p.x.post("/admin/api/v1/tenants/".concat(E,"/budget/override-token"),{expiresInHours:24});z(e.token),L(e.expiresAt),U("Override token generated"),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to generate override token")}finally{O(!1)}},X=async()=>{if(E)try{O(!0),I(null),await p.x.delete("/admin/api/v1/tenants/".concat(E,"/budget/override-token")),z(null),L(null),U("Override token revoked"),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to revoke override token")}finally{O(!1)}};return(0,n.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex-shrink-0 mb-2",children:[(0,n.jsx)("h1",{className:"text-xl font-bold",children:"Quotas & Budgets"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage tenant quotas and budget controls"})]}),P&&(0,n.jsxs)(u.bZ,{variant:"destructive",className:"flex-shrink-0 mb-2 py-2",children:[(0,n.jsx)(s,{className:"h-3 w-3"}),(0,n.jsx)(u.X,{className:"text-sm",children:P})]}),_&&(0,n.jsxs)(u.bZ,{className:"flex-shrink-0 mb-2 py-2",children:[(0,n.jsx)(l,{className:"h-3 w-3"}),(0,n.jsx)(u.X,{className:"text-sm",children:_})]}),T&&T.concurrentCalls&&(0,n.jsxs)(f.Zb,{className:"flex-shrink-0 mb-2",children:[(0,n.jsx)(f.Ol,{className:"pb-3",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Current Usage"})}),(0,n.jsx)(f.aY,{className:"pt-0",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Concurrent Calls"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(S=T.concurrentCalls.current)&&void 0!==S?S:0,T.concurrentCalls.limit&&" / ".concat(T.concurrentCalls.limit)]}),null!==T.concurrentCalls.remaining&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.concurrentCalls.remaining," remaining"]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(o.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Daily Minutes"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(w=null===(e=T.dailyMinutes)||void 0===e?void 0:e.current)&&void 0!==w?w:0,(null===(t=T.dailyMinutes)||void 0===t?void 0:t.limit)&&" / ".concat(T.dailyMinutes.limit)]}),(null===(a=T.dailyMinutes)||void 0===a?void 0:a.remaining)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.dailyMinutes.remaining," remaining"]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Phone Numbers"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(C=null===(r=T.phoneNumbers)||void 0===r?void 0:r.current)&&void 0!==C?C:0,(null===(y=T.phoneNumbers)||void 0===y?void 0:y.limit)&&" / ".concat(T.phoneNumbers.limit)]}),(null===(b=T.phoneNumbers)||void 0===b?void 0:b.remaining)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.phoneNumbers.remaining," remaining"]})]}),T.budget&&(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(d.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Monthly Budget"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:["$",(null!==(R=null===(N=T.budget.monthly)||void 0===N?void 0:N.current)&&void 0!==R?R:0).toFixed(2),(null===(j=T.budget.monthly)||void 0===j?void 0:j.limit)&&" / $".concat(T.budget.monthly.limit.toFixed(2))]}),(null===(k=T.budget.monthly)||void 0===k?void 0:k.percentage)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.budget.monthly.percentage.toFixed(1),"% used"]})]})]})})]}),(0,n.jsxs)(v.mQ,{defaultValue:"quotas",className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,n.jsxs)(v.dr,{className:"flex-shrink-0 h-9",children:[(0,n.jsx)(v.SP,{value:"quotas",className:"text-sm",children:"Quotas"}),(0,n.jsx)(v.SP,{value:"budget",className:"text-sm",children:"Budget"}),(0,n.jsx)(v.SP,{value:"overrides",className:"text-sm",children:"Overrides"})]}),(0,n.jsx)(v.nU,{value:"quotas",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,n.jsxs)(f.Zb,{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsx)(f.Ol,{className:"pb-2 flex-shrink-0",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Quota Settings"})}),(0,n.jsxs)(f.aY,{className:"flex-1overflow-y-auto space-y-3 pt-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Enable Quotas"})}),(0,n.jsx)(g.r,{checked:F.enabled,onCheckedChange:e=>A({...F,enabled:e})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxConcurrentCalls",className:"text-sm",children:"Max Concurrent Calls"}),(0,n.jsx)(x.I,{id:"maxConcurrentCalls",type:"number",value:F.maxConcurrentCalls,onChange:e=>A({...F,maxConcurrentCalls:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxMinutesPerDay",className:"text-sm",children:"Max Minutes Per Day"}),(0,n.jsx)(x.I,{id:"maxMinutesPerDay",type:"number",value:F.maxMinutesPerDay,onChange:e=>A({...F,maxMinutesPerDay:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxPhoneNumbers",className:"text-sm",children:"Max Phone Numbers"}),(0,n.jsx)(x.I,{id:"maxPhoneNumbers",type:"number",value:F.maxPhoneNumbers,onChange:e=>A({...F,maxPhoneNumbers:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxRecordingRetentionDays",className:"text-sm",children:"Max Recording Retention (Days)"}),(0,n.jsx)(x.I,{id:"maxRecordingRetentionDays",type:"number",value:F.maxRecordingRetentionDays,onChange:e=>A({...F,maxRecordingRetentionDays:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxStorageGB",className:"text-sm",children:"Max Storage (GB)"}),(0,n.jsx)(x.I,{id:"maxStorageGB",type:"number",step:"0.01",value:F.maxStorageGB,onChange:e=>A({...F,maxStorageGB:e.target.value}),placeholder:"Unlimited",className:"h-8"})]})]}),(0,n.jsx)(m.z,{onClick:$,disabled:D,size:"sm",className:"mt-2",children:"Save Quota Settings"})]})]})}),(0,n.jsxs)(v.nU,{value:"budget",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:[(0,n.jsxs)(f.Zb,{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsx)(f.Ol,{className:"pb-2 flex-shrink-0",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Budget Settings"})}),(0,n.jsxs)(f.aY,{className:"flex-1 overflow-y-auto space-y-3 pt-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Enable Budget"})}),(0,n.jsx)(g.r,{checked:Z.enabled,onCheckedChange:e=>q({...Z,enabled:e})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"monthlyBudget",className:"text-sm",children:"Monthly Budget ($)"}),(0,n.jsx)(x.I,{id:"monthlyBudget",type:"number",step:"0.01",value:Z.monthlyBudget,onChange:e=>q({...Z,monthlyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"dailyBudget",className:"text-sm",children:"Daily Budget ($)"}),(0,n.jsx)(x.I,{id:"dailyBudget",type:"number",step:"0.01",value:Z.dailyBudget,onChange:e=>q({...Z,dailyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertThreshold",className:"text-sm",children:"Alert Threshold (%)"}),(0,n.jsx)(x.I,{id:"alertThreshold",type:"number",value:Z.alertThreshold,onChange:e=>q({...Z,alertThreshold:e.target.value}),placeholder:"80",className:"h-8"})]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertEmails",className:"text-sm",children:"Alert Email Addresses"}),(0,n.jsx)(x.I,{id:"alertEmails",value:Z.alertEmails,onChange:e=>q({...Z,alertEmails:e.target.value}),placeholder:"admin@example.com, finance@example.com",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertSlackWebhook",className:"text-sm",children:"Slack Webhook URL"}),(0,n.jsx)(x.I,{id:"alertSlackWebhook",value:Z.alertSlackWebhook,onChange:e=>q({...Z,alertSlackWebhook:e.target.value}),placeholder:"https://hooks.slack.com/services/...",className:"h-8"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Hard Stop Enabled"})}),(0,n.jsx)(g.r,{checked:Z.hardStopEnabled,onCheckedChange:e=>q({...Z,hardStopEnabled:e})})]}),(0,n.jsx)(m.z,{onClick:K,disabled:D,size:"sm",className:"mt-2",children:"Save Budget Settings"})]})]}),(0,n.jsxs)(f.Zb,{className:"mt-2",children:[(0,n.jsx)(f.Ol,{className:"pb-2",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Override Token"})}),(0,n.jsx)(f.aY,{className:"pt-0 space-y-2",children:W?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u.bZ,{className:"py-2",children:(0,n.jsxs)(u.X,{className:"text-sm",children:[(0,n.jsx)("div",{className:"font-mono text-xs break-all",children:W}),G&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",new Date(G).toLocaleString()]})]})}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Use this token in the ",(0,n.jsx)("code",{className:"text-xs",children:"X-Quota-Override"})," header to bypass quota limits."]}),(0,n.jsx)(m.z,{variant:"destructive",onClick:X,disabled:D,size:"sm",children:"Revoke Token"})]}):(0,n.jsx)(m.z,{onClick:H,disabled:D,size:"sm",children:"Generate Override Token"})})]})]}),(0,n.jsx)(v.nU,{value:"overrides",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,n.jsxs)(f.Zb,{children:[(0,n.jsx)(f.Ol,{className:"pb-2",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Quota Overrides"})}),(0,n.jsx)(f.aY,{className:"pt-0",children:(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quota overrides allow temporarily increasing limits for specific quota types. Use the API to create overrides programmatically."})})]})})]})]})}},78419:function(e,t,a){"use strict";a.d(t,{X:function(){return d},bZ:function(){return o}});var n=a(91674),r=a(47828),s=a(86655),l=a(33061);let i=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:r,...s}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:r}),a),...s})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...r})});d.displayName="AlertDescription"},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var n=a(91674),r=a(32814),s=a(47828),l=a(86655),i=a(33061);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var n=a(91674),r=a(86655),s=a(33061);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flexflex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var n=a(91674),r=a(86655),s=a(33061);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,n.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var n=a(91674),r=a(35974),s=a(86655),l=a(33061);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...s})});i.displayName=r.f.displayName},81317:function(e,t,a){"use strict";a.d(t,{r:function(){return i}});var n=a(91674),r=a(47650),s=a(86655),l=a(33061);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:(0,n.jsx)(r.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=r.fC.displayName},76604:function(e,t,a){"use strict";a.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return i},nU:function(){return c}});var n=a(91674),r=a(89258),s=a(86655),l=a(33061);let i=r.fC,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});o.displayName=r.aV.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-centerwhitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});d.displayName=r.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});c.displayName=r.VY.displayName},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");a&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:s}),a=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let r=new n},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return s},p6:function(){return d},un:function(){return l},xG:function(){return i}});var n=a(44115),r=a(38352);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}returne}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(a,":").concat(String(n).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},80317:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/users/page-2a3b2c32045129bb.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1456],{13326:function(e,t,r){Promise.resolve().then(r.bind(r,5699))},5699:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(91674),n=r(98548),s=r(54741),i=r(30250),o=r(32353),l=r(86655),d=r(60044),c=r(90747),u=r(30999),f=r(86190),m=r(88151),x=r(66120),h=r(66801),p=r(28314);function g(e){let{open:t,onOpenChange:r,onSuccess:n}=e,[i,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[f,g]=(0,l.useState)({email:"",firstName:"",lastName:""});(0,l.useEffect)(()=>{t&&(g({email:"",firstName:"",lastName:""}),u(null))},[t]);let v=async()=>{if(!f.email.trim()){u("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)){u("Invalid email format");return}o(!0),u(null);try{let e=await p.x.post("/api/v1/users/invite",{email:f.email.trim(),firstName:f.firstName.trim()||void 0,lastName:f.lastName.trim()||void 0});if(e.error)throw Error(e.error.message||"Failed to invite user");e.data&&(e.data.tempPassword?alert("User invited successfully!\n\nTemporary password: ".concat(e.data.tempPassword,"\n\n(Note: In production, this would be sent via email)")):alert("User invited successfully!"),null==n||n(),r(!1))}catch(e){u(e instanceof Error?e.message:"Failed to invite user")}finally{o(!1)}};return(0,a.jsx)(m.Vq,{open:t,onOpenChange:r,children:(0,a.jsxs)(m.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsx)(m.$N,{children:"Invite User"}),(0,a.jsx)(m.Be,{children:"Send an invitationto a new team member"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"email",children:"Email Address *"}),(0,a.jsx)(x.I,{id:"email",type:"email",placeholder:"user@example.com",value:f.email,onChange:e=>g({...f,email:e.target.value}),disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"firstName",children:"First Name (Optional)"}),(0,a.jsx)(x.I,{id:"firstName",placeholder:"John",value:f.firstName,onChange:e=>g({...f,firstName:e.target.value}),disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"lastName",children:"Last Name (Optional)"}),(0,a.jsx)(x.I,{id:"lastName",placeholder:"Doe",value:f.lastName,onChange:e=>g({...f,lastName:e.target.value}),disabled:i})]}),d&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:d})]}),(0,a.jsxs)(m.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>r(!1),disabled:i,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:v,disabled:i||!f.email.trim(),children:[i&&(0,a.jsx)(s.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Invitation"]})]})]})})}function v(){let[e,t]=(0,l.useState)([]),[r,m]=(0,l.useState)(!0),[x,h]=(0,l.useState)(!1);(0,l.useEffect)(()=>{v()},[]);let v=async()=>{m(!0);try{var e;let r=await p.x.get("/api/v1/users");(null===(e=r.data)||void 0===e?void 0:e.data)&&t(r.data.data)}catch(e){console.error("Failed to load users:",e)}finally{m(!1)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Users"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage team members and permissions"})]}),(0,a.jsxs)(c.z,{onClick:()=>h(!0),children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Invite User"]})]}),(0,a.jsxs)(u.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,a.jsxs)(u.Ol,{className:"flex-shrink-0",children:[(0,a.jsx)(u.ll,{children:"Team Members"}),(0,a.jsx)(u.SZ,{children:"View and manage user access"})]}),(0,a.jsx)(u.aY,{className:"flex-1 overflow-y-auto min-h-0",children:r?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No users found"}):(0,a.jsxs)(f.iA,{children:[(0,a.jsx)(f.xD,{children:(0,a.jsxs)(f.SC,{children:[(0,a.jsx)(f.ss,{children:"Email"}),(0,a.jsx)(f.ss,{children:"Role"}),(0,a.jsx)(f.ss,{children:"Status"}),(0,a.jsx)(f.ss,{children:"Invited"}),(0,a.jsx)(f.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(f.RM,{children:e.map(e=>(0,a.jsxs)(f.SC,{children:[(0,a.jsxs)(f.pj,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"}),e.email]}),(0,a.jsx)(f.pj,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.roles.map(e=>(0,a.jsxs)(d.C,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3"}),e]},e))})}),(0,a.jsx)(f.pj,{children:(0,a.jsx)(d.C,{variant:"active"===e.status?"success":"warning",children:e.status})}),(0,a.jsx)(f.pj,{children:new Date(e.invitedAt).toLocaleDateString()}),(0,a.jsx)(f.pj,{className:"text-right",children:(0,a.jsx)(c.z,{variant:"ghost",size:"sm",children:"Edit"})})]},e.id))})]})})]}),(0,a.jsx)(g,{open:x,onOpenChange:h,onSuccess:v})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(91674),n=r(47828);r(86655);var s=r(33061);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(i({variant:r}),t),...n})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(91674),n=r(32814),s=r(47828),i=r(86655),o=r(33061);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return l},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),n=r(7472),s=r(77037),i=r(86655),o=r(33061);let l=n.fC;n.xz;let d=n.h_;n.x8;let c=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});c.displayName=n.aV.displayName;let u=i.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[i,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(s.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let x=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=n.Dx.displayName;let h=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=n.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var a=r(91674),n=r(35974),s=r(86655),i=r(33061);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...s})});o.displayName=n.f.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...n})});o.displayName="TableHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...n})});l.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});d.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let n="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(n,{...t,headers:s}),r=await e.json();if(!e.ok){var i,o;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(o=r.error)||void 0===o?void 0:o.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let n=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return s},p6:function(){return d},un:function(){return i},xG:function(){return o}});var a=r(44115),n=r(38352);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},54741:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/dnc/page-8d7c3f369bc18f0d.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2807],{43175:function(e,t,r){Promise.resolve().then(r.bind(r,76696))},76696:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(91674),a=r(48929),s=r(54741),o=r(5814),i=r(86655),l=r(60044),c=r(90747),d=r(30999),u=r(86190),f=r(28314);function h(){let[e,t]=(0,i.useState)([]),[r,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{m()},[]);let m=async()=>{h(!0);try{var e;let r=await f.x.get("/api/v1/compliance/dnc-lists");(null===(e=r.data)||void 0===e?void 0:e.data)&&t(r.data.data)}catch(e){console.error("Failed to load DNC lists:",e)}finally{h(!1)}},x=async e=>{if(confirm("Are you sure you want to delete this DNC list? This action cannot be undone."))try{let t=await f.x.delete("/api/v1/compliance/dnc-lists/".concat(e));t.error?alert("Failed to delete DNC list: ".concat(t.error.message)):m()}catch(e){alert("Failed to delete DNC list: ".concat(e instanceof Error?e.message:"Unknown error"))}};return(0,n.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"flexitems-center justify-between flex-shrink-0 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Do Not Call Lists"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage DNC lists and compliance"})]}),(0,n.jsxs)(c.z,{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.txt",e.onchange=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&alert("DNC list upload functionality coming soon. Selected file: ".concat(r.name))},e.click()},children:[(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4"}),"Upload List"]})]}),(0,n.jsxs)(d.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,n.jsxs)(d.Ol,{className:"flex-shrink-0",children:[(0,n.jsx)(d.ll,{children:"DNC Lists"}),(0,n.jsx)(d.SZ,{children:"View and manage your Do Not Call lists"})]}),(0,n.jsx)(d.aY,{className:"flex-1 overflow-y-auto min-h-0",children:r?(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?(0,n.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No DNC listsfound"}):(0,n.jsxs)(u.iA,{children:[(0,n.jsx)(u.xD,{children:(0,n.jsxs)(u.SC,{children:[(0,n.jsx)(u.ss,{children:"Name"}),(0,n.jsx)(u.ss,{children:"Type"}),(0,n.jsx)(u.ss,{children:"Entries"}),(0,n.jsx)(u.ss,{children:"Status"}),(0,n.jsx)(u.ss,{children:"Created"}),(0,n.jsx)(u.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(u.RM,{children:e.map(e=>(0,n.jsxs)(u.SC,{children:[(0,n.jsx)(u.pj,{className:"font-medium",children:e.name}),(0,n.jsx)(u.pj,{children:(0,n.jsx)(l.C,{variant:"outline",children:e.type.toLowerCase()})}),(0,n.jsx)(u.pj,{children:e.entryCount.toLocaleString()}),(0,n.jsx)(u.pj,{children:(0,n.jsx)(l.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),(0,n.jsx)(u.pj,{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsx)(u.pj,{className:"text-right",children:(0,n.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>x(e.id),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(91674),a=r(47828);r(86655);var s=r(33061);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparentbg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...a})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(91674),a=r(32814),s=r(47828),o=r(86655),i=r(33061);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return l}});var n=r(91674),a=r(86655),s=r(33061);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return o},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var n=r(91674),a=r(86655),s=r(33061);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...a})})});o.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...a})});i.displayName="TableHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...a})});l.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});c.displayName="TableRow";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});d.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});classn{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:s}),r=await e.json();if(!e.ok){var o,i;return{error:{code:(null===(o=r.error)||void 0===o?void 0:o.code)||"UNKNOWN_ERROR",message:(null===(i=r.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let a=new n},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return s},p6:function(){return c},un:function(){return o},xG:function(){return i}});var n=r(44115),a=r(38352);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function o(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},19596:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(86655),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
/app/apps/web/.next/static/chunks/app/(dashboard)/dashboard/page-45925c94347a6319.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6903],{14887:function(e,t,a){Promise.resolve().then(a.bind(a,24617))},24617:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $}});varl=a(91674),r=a(86655),s=a(40646),n=a(64936),i=a(4458),o=a(89648),d=a(36963),c=a(92794),u=a(99659),m=a(92277),x=a(76283),f=a(69057),h=a(67359),p=a(50450),g=a(33061);function b(e){let{title:t,value:a,unit:r,trend:s,trendLabel:n,icon:i,onClick:o,className:d,loading:c,variant:u="default"}=e,m=s&&s>0,x=s&&s<0,b=!s||0===s;return(0,l.jsxs)("div",{role:o?"button":void 0,tabIndex:o?0:void 0,onClick:o,onKeyDown:e=>{o&&("Enter"===e.key||" "===e.key)&&o()},className:(0,g.cn)("relative overflow-hidden rounded-xl border p-5 transition-all duration-200",{default:"bg-card border-border",revenue:"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20",conversion:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20",warning:"bg-gradient-to-br from-amber-500/10 to-amber-600/5 border-amber-500/20"}[u],o&&"cursor-pointer hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]",d),children:[i&&(0,l.jsx)("div",{className:"absolute -right-4 -top-4 opacity-5",children:(0,l.jsx)(i,{className:"h-24 w-24"})}),(0,l.jsxs)("div",{className:"relative z-10 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:t}),i&&(0,l.jsx)(i,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)("div",{className:"flex items-baseline gap-1.5",children:c?(0,l.jsx)("div",{className:"h-9 w-24 animate-pulse rounded bg-muted"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-3xl font-bold tracking-tight text-foreground",children:"number"==typeof a?a.toLocaleString():a}),r&&(0,l.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:r})]})}),void 0!==s&&!c&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:(0,g.cn)("flex items-center gap-0.5 rounded-full px-2 py-0.5 text-xs font-medium",m&&"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",x&&"bg-rose-500/10 text-rose-600 dark:text-rose-400",b&&"bg-muted text-muted-foreground"),children:[m&&(0,l.jsx)(f.Z,{className:"h-3 w-3"}),x&&(0,l.jsx)(h.Z,{className:"h-3 w-3"}),b&&(0,l.jsx)(p.Z,{className:"h-3 w-3"}),(0,l.jsxs)("span",{children:[Math.abs(s).toFixed(1),"%"]})]}),n&&(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:n})]})]})]})}var v=a(28314);function j(e){vart,a,s,n,f,h,p;let{dateRange:g,onFilterChange:j}=e,[N,y]=(0,r.useState)(null),[w,C]=(0,r.useState)(!0),[S,k]=(0,r.useState)(null),R=(0,r.useCallback)(async()=>{C(!0),k(null);try{var e,t;let a=new Date,l=(null==g?void 0:g.start)||new Date(a.getTime()-864e5),r=(null==g?void 0:g.end)||a,s=r.getTime()-l.getTime(),n=new Date(l.getTime()-s),i=new URLSearchParams({startDate:l.toISOString(),endDate:r.toISOString(),granularity:"hour"}),o=new URLSearchParams({startDate:n.toISOString(),endDate:l.toISOString(),granularity:"hour"}),[d,c]=await Promise.all([v.x.get("/api/v1/reporting/metrics?".concat(i)),v.x.get("/api/v1/reporting/metrics?".concat(o))]);if(d.error)throw Error(d.error.message);let u=null===(e=d.data)||void 0===e?void 0:e.metrics,m=null===(t=c.data)||void 0===t?void 0:t.metrics;if(!u)throw Error("No metrics data received");let x=u.completedCalls||0,f=u.totalCalls-x,h=Math.floor(x*(u.conversionRate||.15)),p=x>0?h/x*100:0,b=u.totalCost||0,j=u.totalCalls>0?b/u.totalCalls:0,N=(null==m?void 0:m.completedCalls)||0,w=Math.floor(N*((null==m?void 0:m.conversionRate)||.15)),C=(null==m?void 0:m.totalCost)||0,S=(e,t)=>0===t?e>0?100:0:(e-t)/t*100;y({totalCalls:u.totalCalls||0,billableCalls:x,nonBillableCalls:f,salesClosed:h,conversionRate:p,revenue:b,revenuePerCall:j,trends:{calls:S(u.totalCalls||0,(null==m?void 0:m.totalCalls)||0),billable:S(x,N),sales:S(h,w),revenue:S(b,C)}})}catch(e){k(e instanceof Error?e.message:"Failed to fetch metrics"),y({totalCalls:0,billableCalls:0,nonBillableCalls:0,salesClosed:0,conversionRate:0,revenue:0,revenuePerCall:0,trends:{calls:0,billable:0,sales:0,revenue:0}})}finally{C(!1)}},[g]);(0,r.useEffect)(()=>{R();let e=setInterval(R,3e4);return()=>clearInterval(e)},[R]);let T=e=>e>=1e6?"$".concat((e/1e6).toFixed(2),"M"):e>=1e3?"$".concat((e/1e3).toFixed(1),"K"):"$".concat(e.toFixed(2));return(0,l.jsxs)("div",{className:"space-y-4",children:[S&&(0,l.jsxs)("div",{className:"rounded-lg border border-amber-500/20 bg-amber-500/10 p-3 text-sm text-amber-600 dark:text-amber-400",children:[S," - Showing default values"]}),(0,l.jsxs)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4 xl:grid-cols-7",children:[(0,l.jsx)(b,{title:"Total Calls",value:null!==(t=null==N?void 0:N.totalCalls)&&void 0!==t?t:0,icon:i.Z,trend:null==N?void 0:N.trends.calls,trendLabel:"vs prev period",loading:w,onClick:()=>null==j?void 0:j({type:"status",value:"all"})}),(0,l.jsx)(b,{title:"Billable Calls",value:null!==(a=null==N?void 0:N.billableCalls)&&void 0!==a?a:0,icon:o.Z,trend:null==N?void 0:N.trends.billable,trendLabel:"vs prev period",variant:"revenue",loading:w,onClick:()=>null==j?void 0:j({type:"billable",value:"true"})}),(0,l.jsx)(b,{title:"Non-Billable",value:null!==(s=null==N?void 0:N.nonBillableCalls)&&void 0!==s?s:0,icon:d.Z,variant:"warning",loading:w,onClick:()=>null==j?void 0:j({type:"billable",value:"false"})}),(0,l.jsx)(b,{title:"Sales Closed",value:null!==(n=null==N?void 0:N.salesClosed)&&void 0!==n?n:0,icon:c.Z,trend:null==N?void 0:N.trends.sales,trendLabel:"vs prev period",variant:"conversion",loading:w,onClick:()=>null==j?void 0:j({type:"sale",value:"true"})}),(0,l.jsx)(b,{title:"Conversion Rate",value:"".concat((null!==(f=null==N?void 0:N.conversionRate)&&void 0!==f?f:0).toFixed(1),"%"),icon:u.Z,variant:"conversion",loading:w}),(0,l.jsx)(b,{title:"Revenue",value:T(null!==(h=null==N?void 0:N.revenue)&&void 0!==h?h:0),icon:m.Z,trend:null==N?void 0:N.trends.revenue,trendLabel:"vs prev period",variant:"revenue",loading:w}),(0,l.jsx)(b,{title:"RPC",value:T(null!==(p=null==N?void 0:N.revenuePerCall)&&void 0!==p?p:0),icon:x.Z,loading:w})]})]})}var N=a(13015),y=a(54255),w=a(19011),C=a(34174),S=a(68947),k=a(11480),R=a(81758),T=a(32784),D=a(30999),O=a(90747);function Z(e){let{onPeriodSelect:t}=e,[a,s]=(0,r.useState)("day"),[n,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),m=(0,r.useCallback)(e=>{let t,a;let l=new Date;switch(e){case"day":t=new Date(l.getTime()-864e5),a="hour";break;case"week":t=new Date(l.getTime()-6048e5),a="day";break;case"month":t=new Date(l.getTime()-2592e6),a="day"}return{start:t,end:l,granularity:a}},[]),x=(0,r.useCallback)(async()=>{d(!0),u(null);try{var e;let{start:t,end:l,granularity:r}=m(a),s=new URLSearchParams({startDate:t.toISOString(),endDate:l.toISOString(),granularity:r}),n=await v.x.get("/api/v1/reporting/metrics?".concat(s));if(n.error)throw Error(n.error.message);let o=((null===(e=n.data)||void 0===e?void 0:e.breakdown)||[]).map(e=>{let t=new Date(e.timestamp),l=Math.floor(.7*e.answeredCalls),r=e.totalCalls-l;return{time:"day"===a?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),billable:l,nonBillable:r,total:e.totalCalls}});i(o)}catch(e){u(e instanceof Error?e.message:"Failed to fetch data"),i([])}finally{d(!1)}},[a,m]);return(0,r.useEffect)(()=>{x()},[x]),(0,l.jsxs)(D.Zb,{className:"col-span-full lg:col-span-2",children:[(0,l.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Calls Over Time"}),(0,l.jsx)("div",{className:"flex items-center gap-1",children:["day","week","month"].map(e=>(0,l.jsx)(O.z,{variant:a===e?"default":"ghost",size:"sm",onClick:()=>s(e),className:(0,g.cn)("h-7 px-3 text-xs",a===e&&"bg-primary text-primary-foreground"),children:"day"===e?"24H":"week"===e?"7D":"30D"},e))})]}),(0,l.jsxs)(D.aY,{children:[c&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:c}),o?(0,l.jsx)("div",{className:"flex h-[280px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):0===n.length?(0,l.jsx)("div",{className:"flex h-[280px] items-center justify-center text-muted-foreground",children:"No call data available"}):(0,l.jsx)(N.h,{width:"100%",height:280,children:(0,l.jsxs)(y.T,{data:n,margin:{top:10,right:10,left:0,bottom:0},children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"billableGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"hsl(160 100% 41%)",stopOpacity:.3}),(0,l.jsx)("stop",{offset:"95%",stopColor:"hsl(160 100% 41%)",stopOpacity:0})]}),(0,l.jsxs)("linearGradient",{id:"nonBillableGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"hsl(45 100% 51%)",stopOpacity:.3}),(0,l.jsx)("stop",{offset:"95%",stopColor:"hsl(45 100% 51%)",stopOpacity:0})]})]}),(0,l.jsx)(w.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,l.jsx)(C.K,{dataKey:"time",tick:{fontSize:11},tickLine:!1,axisLine:!1,className:"fill-muted-foreground"}),(0,l.jsx)(S.B,{tick:{fontSize:11},tickLine:!1,axisLine:!1,className:"fill-muted-foreground"}),(0,l.jsx)(k.u,{content:(0,l.jsx)(e=>{let{active:t,payload:a,label:r}=e;return t&&a?(0,l.jsxs)("div",{className:"rounded-lg border bg-popover p-3 shadow-lg",children:[(0,l.jsx)("p",{className:"mb-2 font-medium text-foreground",children:r}),a.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:e.color}}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:[e.name,":"]}),(0,l.jsx)("span",{className:"font-medium",children:e.value})]},t))]}):null},{})}),(0,l.jsx)(R.D,{wrapperStyle:{paddingTop:"16px"},formatter:e=>(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:e})}),(0,l.jsx)(T.u,{type:"monotone",dataKey:"billable",name:"Billable",stackId:"1",stroke:"hsl(160 100% 41%)",fill:"url(#billableGradient)",strokeWidth:2}),(0,l.jsx)(T.u,{type:"monotone",dataKey:"nonBillable",name:"Non-Billable",stackId:"1",stroke:"hsl(45 100% 51%)",fill:"url(#nonBillableGradient)",strokeWidth:2})]})})]})]})}var E=a(20220);function z(e){let{onStageClick:t}=e,[a,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{i(!0),d(null);try{var e;let t=new Date,a=new Date(t.getTime()-6048e5),l=new URLSearchParams({startDate:a.toISOString(),endDate:t.toISOString(),granularity:"day"}),r=await v.x.get("/api/v1/reporting/metrics?".concat(l));if(r.error)throw Error(r.error.message);let n=null===(e=r.data)||void 0===e?void 0:e.metrics;if(!n)throw Error("No metrics data");let i=n.totalCalls||0,o=n.answeredCalls||Math.floor(.75*i),d=n.completedCalls||Math.floor(.6*o),c=Math.floor(d*(n.conversionRate||.15)),u=i||1;s([{label:"Total Calls",value:i,percentage:100,color:"bg-slate-500"},{label:"Qualified",value:o,percentage:o/u*100,color:"bg-blue-500"},{label:"Billable",value:d,percentage:d/u*100,color:"bg-emerald-500"},{label:"Sold",value:c,percentage:c/u*100,color:"bg-violet-500"}])}catch(e){d(e instanceof Error?e.message:"Failed to fetch funnel data"),s([{label:"Total Calls",value:0,percentage:100,color:"bg-slate-500"},{label:"Qualified",value:0,percentage:0,color:"bg-blue-500"},{label:"Billable",value:0,percentage:0,color:"bg-emerald-500"},{label:"Sold",value:0,percentage:0,color:"bg-violet-500"}])}finally{i(!1)}},[]);(0,r.useEffect)(()=>{c()},[c]);let u=e=>{if(0===e||a.length<2)return null;let t=a[e-1].value,l=a[e].value;return 0===t?null:((t-l)/t*100).toFixed(0)};return(0,l.jsxs)(D.Zb,{children:[(0,l.jsx)(D.Ol,{className:"pb-2",children:(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Sales Funnel"})}),(0,l.jsxs)(D.aY,{children:[o&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:o}),n?(0,l.jsx)("div",{className:"flex h-[200px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):(0,l.jsx)("div",{className:"space-y-3",children:a.map((e,a)=>(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:e.label}),u(a)&&(0,l.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,l.jsx)(E.Z,{className:"h-3 w-3"}),(0,l.jsxs)("span",{className:"text-rose-500",children:["-",u(a),"%"]})]})]}),(0,l.jsx)("span",{className:"text-sm font-bold",children:e.value.toLocaleString()})]}),(0,l.jsx)("div",{role:t?"button":void 0,tabIndex:t?0:void 0,onClick:()=>null==t?void 0:t(e.label.toLowerCase().replace(" ","_")),className:(0,g.cn)("h-8 rounded-lg transition-all duration-300",e.color,t&&"cursor-pointer hover:opacity-80"),style:{width:"".concat(Math.max(e.percentage,5),"%")}})]},e.label))}),(0,l.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t pt-4",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Overall Conversion"}),(0,l.jsx)("span",{className:"text-lg font-bold text-violet-600",children:a.length>0&&a[0].value>0?"".concat((a[a.length-1].value/a[0].value*100).toFixed(1),"%"):"0%"})]})]})]})}var P=a(80317),B=a(73129),L=a(8552),I=a(60044);function F(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{s(!0),i(null);try{var e,a,l;let r=await v.x.get("/api/v1/campaigns?limit=5");if(r.error)throw Error(r.error.message);let s=(null===(e=r.data)||void 0===e?void 0:e.data)||[],n=[{label:"Best Time Window",value:"Tue-Thu 2-4pm",metric:"42% conversion",icon:"clock"},{label:"Top Campaign",value:(null===(a=s[0])||void 0===a?void 0:a.name)||"Summer Promo",metric:"$12.50 RPC",icon:"target"},{label:"Highest ASR",value:(null===(l=s[1])||void 0===l?void 0:l.name)||"Retention Flow",metric:"78% answer rate",icon:"star"}];t(n)}catch(e){i(e instanceof Error?e.message:"Failed to fetch data"),t([{label:"Best Time Window",value:"Tue-Thu 2-4pm",metric:"42% conversion",icon:"clock"},{label:"Top Campaign",value:"Default Campaign",metric:"$0.00 RPC",icon:"target"},{label:"Highest ASR",value:"N/A",metric:"0% answer rate",icon:"star"}])}finally{s(!1)}},[]);(0,r.useEffect)(()=>{o()},[o]);let d=e=>{switch(e){case"clock":return(0,l.jsx)(P.Z,{className:"h-4 w-4 text-blue-500"});case"target":return(0,l.jsx)(B.Z,{className:"h-4 w-4 text-emerald-500"});case"star":return(0,l.jsx)(L.Z,{className:"h-4 w-4 text-amber-500"});default:return null}};return(0,l.jsxs)(D.Zb,{children:[(0,l.jsx)(D.Ol,{className:"pb-2",children:(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Top Performers"})}),(0,l.jsxs)(D.aY,{children:[n&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:n}),a?(0,l.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"h-8 w-8 animate-pulse rounded-lg bg-muted"}),(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)("div",{className:"h-3 w-24 animate-pulse rounded bg-muted"}),(0,l.jsx)("div",{className:"h-4 w-32 animate-pulse rounded bg-muted"})]})]},e))}):(0,l.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-muted/50",children:d(e.icon)}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:e.label}),(0,l.jsx)("p",{className:"font-medium truncate",children:e.value}),(0,l.jsx)(I.C,{variant:"outline",className:"mt-1 text-xs",children:e.metric})]})]},t))})]})]})}var U=a(89175),M=a(51490),_=a(96733),A=a(95807),K=a(30588),G=a(68182),Q=a(90543),Y=a(78565),H=a(66120),W=a(86190),q=a(38137);function V(e){var t,a;let{filters:s}=e,[n,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(1),[f,h]=(0,r.useState)(1),[p,b]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[y,w]=(0,r.useState)({billable:null!==(t=null==s?void 0:s.billable)&&void 0!==t?t:"all",sold:null!==(a=null==s?void 0:s.sold)&&void 0!==a?a:"all"}),[C,S]=(0,r.useState)(null),k=(0,r.useRef)(null),R=(0,r.useCallback)(async()=>{d(!0),u(null);try{var e,t;let a=new URLSearchParams({page:m.toString(),limit:"15"}),l=await v.x.get("/api/v1/calls?".concat(a));if(l.error)throw Error(l.error.message);let r=(null===(e=l.data)||void 0===e?void 0:e.data)||[],s=null===(t=l.data)||void 0===t?void 0:t.meta,n=r.map(e=>{var t,a,l,r;let s=(e.billableDuration||0)>0||"COMPLETED"===e.status,n="COMPLETED"===e.status&&s?Math.random()>.7?"sold":"not_sold":"pending";return{id:e.id,timestamp:new Date(e.createdAt),duration:e.duration||0,isBillable:s,saleOutcome:n,campaign:(null===(t=e.campaign)||void 0===t?void 0:t.name)||"Direct",source:e.direction||"inbound",recordingUrl:(null===(l=e.recordings)||void 0===l?void 0:null===(a=l[0])||void 0===a?void 0:a.url)||"/sample.wav",transcriptAvailable:Math.random()>.5,from:null===(r=e.fromNumber)||void 0===r?void 0:r.number,to:e.toNumber,status:e.status}});if("all"!==y.billable&&(n=n.filter(e=>e.isBillable===("true"===y.billable))),"all"!==y.sold&&(n=n.filter(e=>"sold"===e.saleOutcome==("true"===y.sold))),p){let e=p.toLowerCase();n=n.filter(t=>{var a,l;return t.id.toLowerCase().includes(e)||t.campaign.toLowerCase().includes(e)||(null===(a=t.from)||void 0===a?void 0:a.includes(e))||(null===(l=t.to)||void 0===l?void 0:l.includes(e))})}i(n),h((null==s?void 0:s.totalPages)||1)}catch(e){u(e instanceof Error?e.message:"Failed to fetch calls"),i([])}finally{d(!1)}},[m,y,p]);(0,r.useEffect)(()=>{R()},[R]);let T=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),Z=e=>e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=e=>{if(C===e.id){var t;null===(t=k.current)||void 0===t||t.pause(),S(null)}else k.current&&k.current.pause(),k.current=new Audio(e.recordingUrl||"/sample.wav"),k.current.play(),k.current.onended=()=>S(null),S(e.id)},z=e=>{let t=document.createElement("a");t.href=e.recordingUrl||"/sample.wav",t.download="call-".concat(e.id,".wav"),t.click()};return(0,l.jsxs)(D.Zb,{className:"col-span-full",children:[(0,l.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between pb-4",children:[(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Call Intelligence"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(U.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,l.jsx)(H.I,{placeholder:"Search calls...",value:p,onChange:e=>b(e.target.value),className:"h-9 w-[200px] pl-9"})]}),(0,l.jsxs)(O.z,{variant:j?"default":"outline",size:"sm",onClick:()=>N(!j),className:"h-9",children:[(0,l.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"Filters"]})]})]}),j&&(0,l.jsx)("div",{className:"border-t px-6 py-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Billable:"}),(0,l.jsxs)(q.Ph,{value:String(y.billable),onValueChange:e=>w(t=>({...t,billable:e})),children:[(0,l.jsx)(q.i4,{className:"h-8 w-[100px]",children:(0,l.jsx)(q.ki,{})}),(0,l.jsxs)(q.Bw,{children:[(0,l.jsx)(q.Ql,{value:"all",children:"All"}),(0,l.jsx)(q.Ql,{value:"true",children:"Yes"}),(0,l.jsx)(q.Ql,{value:"false",children:"No"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Sale:"}),(0,l.jsxs)(q.Ph,{value:String(y.sold),onValueChange:e=>w(t=>({...t,sold:e})),children:[(0,l.jsx)(q.i4,{className:"h-8 w-[100px]",children:(0,l.jsx)(q.ki,{})}),(0,l.jsxs)(q.Bw,{children:[(0,l.jsx)(q.Ql,{value:"all",children:"All"}),(0,l.jsx)(q.Ql,{value:"true",children:"Sold"}),(0,l.jsx)(q.Ql,{value:"false",children:"Not Sold"})]})]})]})]})}),(0,l.jsxs)(D.aY,{className:"pt-0",children:[c&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:c}),o?(0,l.jsx)("div",{className:"flex h-[300px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):0===n.length?(0,l.jsx)("div",{className:"flex h-[300px] items-center justify-center text-muted-foreground",children:"No calls found"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"rounded-lg border",children:(0,l.jsxs)(W.iA,{children:[(0,l.jsx)(W.xD,{children:(0,l.jsxs)(W.SC,{className:"hover:bg-transparent",children:[(0,l.jsx)(W.ss,{className:"w-[140px]",children:"Time"}),(0,l.jsx)(W.ss,{className:"w-[80px]",children:"Duration"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Billable"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Sale"}),(0,l.jsx)(W.ss,{children:"Campaign"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Source"}),(0,l.jsx)(W.ss,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(W.RM,{children:n.map(e=>(0,l.jsxs)(W.SC,{className:"group",children:[(0,l.jsx)(W.pj,{className:"font-medium",children:Z(e.timestamp)}),(0,l.jsx)(W.pj,{className:"font-mono text-sm",children:T(e.duration)}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:(0,g.cn)(e.isBillable?"border-emerald-500/30 bg-emerald-500/10text-emerald-600":"border-amber-500/30 bg-amber-500/10 text-amber-600"),children:e.isBillable?"Yes":"No"})}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:(0,g.cn)("sold"===e.saleOutcome?"border-blue-500/30 bg-blue-500/10 text-blue-600":"pending"===e.saleOutcome?"border-gray-500/30 bg-gray-500/10 text-gray-600":"border-rose-500/30 bg-rose-500/10 text-rose-600"),children:"sold"===e.saleOutcome?"Sold":"pending"===e.saleOutcome?"Pending":"No Sale"})}),(0,l.jsx)(W.pj,{className:"text-muted-foreground",children:e.campaign}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:"capitalize",children:e.source})}),(0,l.jsx)(W.pj,{className:"text-right",children:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[e.recordingUrl&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>E(e),title:C===e.id?"Pause":"Play",children:C===e.id?(0,l.jsx)(_.Z,{className:"h-4 w-4"}):(0,l.jsx)(A.Z,{className:"h-4 w-4"})}),(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>z(e),title:"Download",children:(0,l.jsx)(K.Z,{className:"h-4 w-4"})})]}),e.transcriptAvailable&&(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"View Transcript",children:(0,l.jsx)(G.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",m," of ",f]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(O.z,{variant:"outline",size:"sm",onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===m,children:(0,l.jsx)(Q.Z,{className:"h-4 w-4"})}),(0,l.jsx)(O.z,{variant:"outline",size:"sm",onClick:()=>x(e=>Math.min(f,e+1)),disabled:m===f,children:(0,l.jsx)(Y.Z,{className:"h-4 w-4"})})]})]})]})]})]})}function $(){let[e,t]=(0,r.useState)("today"),[a,i]=(0,r.useState)({});return(0,l.jsxs)("div",{className:"h-full flex flex-col overflow-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Command Center"}),(0,l.jsx)("p",{className:"text-muted-foreground mt-1",children:"Real-time call analytics and revenue insights"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border bg-muted/30 p-1",children:[["today","7d","30d"].map(a=>(0,l.jsx)(O.z,{variant:e===a?"default":"ghost",size:"sm",onClick:()=>t(a),className:(0,g.cn)("h-8 px-3",e===a&&"bg-primary text-primary-foreground shadow-sm"),children:"today"===a?"Today":a.toUpperCase()},a)),(0,l.jsx)(O.z,{variant:"custom"===e?"default":"ghost",size:"sm",onClick:()=>t("custom"),className:"h-8 px-3",children:(0,l.jsx)(s.Z,{className:"h-4 w-4"})})]}),(0,l.jsx)(O.z,{variant:"outline",size:"icon",onClick:()=>{window.location.reload()},children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsx)("section",{className:"flex-shrink-0 mb-6",children:(0,l.jsx)(j,{dateRange:(()=>{let t=new Date;switch(e){case"today":return{start:new Date(t.setHours(0,0,0,0)),end:new Date};case"7d":return{start:new Date(t.getTime()-6048e5),end:new Date};case"30d":return{start:new Date(t.getTime()-2592e6),end:new Date};default:return{start:new Date(t.getTime()-864e5),end:new Date}}})(),onFilterChange:e=>{switch(e.type){case"billable":i(t=>({...t,billable:"true"===e.value}));break;case"sale":i(t=>({...t,sold:"true"===e.value}));break;case"status":i({})}}})}),(0,l.jsxs)("section",{className:"grid gap-6 lg:grid-cols-3 mb-6 flex-shrink-0",children:[(0,l.jsx)(Z,{}),(0,l.jsx)(z,{onStageClick:e=>console.log("Stage clicked:",e)}),(0,l.jsx)(F,{})]}),(0,l.jsx)("section",{className:"flex-1 min-h-0",children:(0,l.jsx)(V,{filters:a})})]})}},60044:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var l=a(91674),r=a(47828);a(86655);var s=a(33061);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,l.jsx)("div",{className:(0,s.cn)(n({variant:a}),t),...r})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var l=a(91674),r=a(32814),s=a(47828),n=a(86655),i=a(33061);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"borderborder-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,l.jsx)(u,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,l.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var l=a(91674),r=a(65485),s=a(50802),n=a(98371),i=a(72781),o=a(86655),d=a(33061);let c=r.fC;r.ZA;let u=r.B4,m=o.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,l.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[n,(0,l.jsx)(r.JO,{asChild:!0,children:(0,l.jsx)(s.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let f=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,l.jsx)(s.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let h=o.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,l.jsx)(r.h_,{children:(0,l.jsxs)(r.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,l.jsx)(x,{}),(0,l.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,l.jsx)(f,{})]})})});h.displayName=r.VY.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=r.__.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,l.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.wU,{children:(0,l.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(r.eT,{children:s})]})});p.displayName=r.ck.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=r.Z0.displayName},86190:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return n},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...r})});o.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});c.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});class l{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),l=localStorage.getItem("demoTenantId");a&&l&&(t.headers={...t.headers,"X-Demo-Tenant-Id":l});let r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:s}),a=await e.json();if(!e.ok){var n,i;return{error:{code:(null===(n=a.error)||void 0===n?void 0:n.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let r=new l},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return s},p6:function(){return d},un:function(){return n},xG:function(){return i}});var l=a(44115),r=a(38352);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,l.W)(t))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),l=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(l).padStart(2,"0")):"".concat(a,":").concat(String(l).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[7880,2546,802,8474,4395,4623,3162,1293,9997,1744],function(){return e(e.s=14887)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/tools/recording-analyzer/page-4e3517d5f8d98606.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4364],{70161:function(e,t,r){Promise.resolve().then(r.bind(r,78800))},78800:function(e,t,r){"use strict";r.r(t),r.d(t,{RecordingAnalyzer:function(){return I}});var a=r(91674),s=r(86655);let n=[{key:"ACA",label:"ACA Health",description:"Enrollments, carrier, follow-ups, billable, transcript optional."},{key:"FINAL_EXPENSE",label:"Final Expense",description:"Apps, quotes, premium, carrier, follow-ups, billable, transcript optional."},{key:"MEDICARE",label:"Medicare",description:"Enrollments, carrier, follow-ups, billable, transcript optional."}],l={FINAL_EXPENSE:[{key:"Applications Submitted",label:"Applications Submitted",defaultChecked:!0},{key:"Monthly Premium (if app submitted)",label:"Monthly Premium (if app submitted)",defaultChecked:!0},{key:"Carrier (If app submitted)",label:"Carrier (If app submitted)",defaultChecked:!0},{key:"Quotes",label:"Quotes",defaultChecked:!0},{key:"Monthly Premium (If Quote Provided)",label:"Monthly Premium (If Quote Provided)",defaultChecked:!0},{key:"Carrier (If Quote Provided)",label:"Carrier (If Quote Provided)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],ACA:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],MEDICARE:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}]};var i=r(28314);async function o(e,t){let r=await i.x.post("/api/v1/recording-analysis/presign",{filename:e,contentType:t});if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from presign");return r.data}async function d(e,t){let r=await fetch(e,{method:"PUT",headers:{"Content-Type":t.type||"application/octet-stream"},body:t});if(!r.ok)throw Error("Upload failed: ".concat(r.status))}async function c(e){let t=await i.x.post("/api/v1/recording-analysis/analyze",e);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from analyze");return t.data}async function u(e){let t=await i.x.get("/api/v1/recording-analysis/batch/".concat(e));if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from batch");return t.data}async function f(e,t){let r=await i.x.post("/api/v1/recording-analysis/".concat(e,"/rerun"),t);if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from rerun");return r.data}async function m(e){let t="a1b2c3d4e5f67890",r={};t&&(r["x-api-key"]=t);{let e="true"===localStorage.getItem("demoMode"),t=localStorage.getItem("demoTenantId");e&&t&&(r["X-Demo-Tenant-Id"]=t)}let a=await fetch("".concat("http://45.32.213.201:3001","/api/v1/recording-analysis/batch/").concat(e,"/csv"),{headers:r});if(!a.ok)throw Error(await a.text());return await a.text()}var x=r(30999),h=r(76604),p=r(90747),g=r(66120),b=r(66801),v=r(55738),y=r(60044),j=r(86190),N=r(88151),w=r(78419);function k(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function C(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function R(e){let t=Math.round(100*C(e));return"".concat(t,"%")}function S(e){let{status:t}=e,r=(t||"").toLowerCase();return(0,a.jsx)(y.C,{variant:"done"===r?"default":"failed"===r?"destructive":"analyzing"===r||"transcribing"===r?"secondary":"outline",children:t})}function E(e){var t,r,s;let{extracted:n}=e,l=null!==(s=null!==(r=null!==(t=null==n?void 0:n.Billable)&&void 0!==t?t:null==n?void 0:n["Billable (Y/N)"])&&void 0!==r?r:null==n?void 0:n.billable)&&void 0!==s?s:null==n?void 0:n.isBillable,i="string"==typeof l?l.trim().toUpperCase():l;return"Y"===i||!0===i?(0,a.jsx)(y.C,{className:"bg-emerald-600 text-white",children:"Billable"}):"N"===i||!1===i?(0,a.jsx)(y.C,{variant:"destructive",children:"Non-billable"}):(0,a.jsx)(y.C,{variant:"outline",children:"Billable: —"})}function A(e){let{value:t}=e;return null==t?(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-muted",style:{width:"0%"}})}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:(0,a.jsx)("div",{className:"h-2 bg-foreground/70",style:{width:R(t)}})}),(0,a.jsxs)("div",{className:"text-[11px] text-muted-foreground",children:[R(t)," confidence"]})]})}function I(){let[e,t]=s.useState("ACA"),r=s.useMemo(()=>l[e],[e]),i=s.useMemo(()=>new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)),[r]),[R,I]=s.useState(i),[U,T]=s.useState(""),[z,F]=s.useState([]),[B,P]=s.useState(!1),[L,M]=s.useState(null),[O,V]=s.useState([]),[D,_]=s.useState(null),[Y,K]=s.useState(!1),[Z,q]=s.useState(null),[X,Q]=s.useState(!1),[H,J]=s.useState(null),[W,$]=s.useState(new Set),[G,ee]=s.useState(!1);async function et(e){let t=await u(e);return V(t.items),t.items.length>0&&t.items.every(e=>{let t=(e.status||"").toLowerCase();return"done"===t||"failed"===t})}async function er(e){K(!0);try{if(await et(e)){K(!1);return}}catch(e){K(!1),_((null==e?void 0:e.message)||"Failed to fetch batch");return}let t=setInterval(async()=>{try{await et(e)&&(clearInterval(t),K(!1))}catch(e){clearInterval(t),K(!1),_((null==e?void 0:e.message)||"Failed to fetch batch")}},1500)}async function ea(){_(null);let t=U.split(/\r?\n|,|\s+/g).map(e=>e.trim()).filter(Boolean).filter(e=>/^https?:\/\//i.test(e));if(0===t.length&&0===z.length){_("Add at least one recording URL or upload at least one audio file.");return}let r=Array.from(R);if(0===r.length){_("Select at least one stat/field to extract.");return}P(!0);try{let a=[];for(let e of z){let{storageKey:t,url:r}=await o(e.name,e.type||"application/octet-stream");await d(r,e),a.push({storageKey:t,filename:e.name})}let s=await c({vertical:e,selectedFields:r,urls:t,uploads:a});M(s.batchId),V([]),await er(s.batchId)}catch(e){_((null==e?void 0:e.message)||"Failed to start analysis")}finally{P(!1)}}async function es(){if(!H)return;let e=Array.from(W);if(!e.length){_("Select at least one field for re-run.");return}ee(!0),_(null);try{let t=await f(H.id,{selectedFields:e});Q(!1),J(null),M(t.batchId),V([]),await er(t.batchId)}catch(e){_((null==e?void 0:e.message)||"Failed to re-run")}finally{ee(!1)}}async function en(){if(!L){_("No batch to export yet.");return}try{let e=await m(L),t=new Blob([e],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="recording-analysis-".concat(L,".csv"),document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(r)}catch(e){_((null==e?void 0:e.message)||"CSV export failed")}}s.useEffect(()=>{I(new Set(i)),_(null),F([]),T(""),V([]),M(null),q(null)},[e,i]);let el=n.find(t=>t.key===e);return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Recording Analyzer"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paste recording URLs or upload audio, select a vertical and fields, and get structured results per recording."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,a.jsxs)(y.C,{variant:"outline",className:"font-mono",children:["Batch: ",L.slice(0,8),"…"]}),Y&&(0,a.jsx)(y.C,{variant:"secondary",children:"Live updating…"}),(0,a.jsx)(p.z,{variant:"outline",onClick:en,disabled:!L,children:"Export CSV"})]})]}),D&&(0,a.jsx)(w.bZ,{className:"border-destructive/50",children:(0,a.jsx)("div",{className:"text-sm text-destructive",children:D})}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsx)(x.Ol,{children:(0,a.jsx)(x.ll,{className:"text-base",children:"1) Select Vertical"})}),(0,a.jsx)(x.aY,{children:(0,a.jsxs)(h.mQ,{value:e,onValueChange:e=>t(e),children:[(0,a.jsxs)(h.dr,{className:"grid grid-cols-3 w-full",children:[(0,a.jsx)(h.SP,{value:"ACA",children:"ACA Health"}),(0,a.jsx)(h.SP,{value:"FINAL_EXPENSE",children:"Final Expense"}),(0,a.jsx)(h.SP,{value:"MEDICARE",children:"Medicare"})]}),(0,a.jsx)(h.nU,{value:e,className:"pt-4",children:(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"font-medium text-foreground",children:[null==el?void 0:el.label,":"]})," ",null==el?void 0:el.description]})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsx)(x.Ol,{children:(0,a.jsx)(x.ll,{className:"text-base",children:"2) Add Recordings"})}),(0,a.jsxs)(x.aY,{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b._,{children:"Recording URLs"}),(0,a.jsx)("textarea",{value:U,onChange:e=>T(e.target.value),placeholder:"Paste one URL per line (or space/comma separated)…",className:k("min-h-[140px] w-full rounded-md border bg-background px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Supports multiple URLs. We’ll process each URL as a separate recording."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b._,{children:"Upload audio (mp3/wav)"}),(0,a.jsx)(g.I,{type:"file",accept:".wav,.mp3,audio/wav,audio/mpeg",multiple:!0,onChange:e=>(function(e){if(!e)return;let t=[];for(let r of Array.from(e))(/audio\/(wav|mpeg|mp3|x-wav|ogg|opus)/i.test(r.type)||/\.(wav|mp3|ogg|opus)$/i.test(r.name))&&t.push(r);F(e=>[...e,...t].slice(0,20))})(e.target.files)}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Upload uses a presigned PUT URL (S3/Spaces). If presign isn’t wired up yet, URL paste still works."}),z.length>0&&(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"File"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Size"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Remove"})]})}),(0,a.jsx)(j.RM,{children:z.map((e,t)=>(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{className:"font-medium",children:e.name}),(0,a.jsx)(j.pj,{className:"text-right text-muted-foreground",children:function(e){if(!e&&0!==e)return"";let t=["B","KB","MB","GB"],r=e,a=0;for(;r>=1024&&a<t.length-1;)r/=1024,a++;return"".concat(r.toFixed(0===a?0:2)," ").concat(t[a])}(e.size)}),(0,a.jsx)(j.pj,{className:"text-right",children:(0,a.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>{F(e=>e.filter((e,r)=>r!==t))},children:"Remove"})})]},"".concat(e.name,"-").concat(t)))})]})})]})]})]}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between gap-3",children:[(0,a.jsx)(x.ll,{className:"text-base",children:"3) Choose Stats To Extract"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)))},children:"Defaults"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.map(e=>e.key)))},children:"All"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set)},children:"None"})]})]}),(0,a.jsxs)(x.aY,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,a.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",R.has(e.key)?"bg-muted/50":"bg-background"),children:[(0,a.jsx)(v.X,{checked:R.has(e.key),onCheckedChange:()=>{var t;return t=e.key,void I(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},e.key))}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 border-t pt-4",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Selected: ",(0,a.jsx)("span",{className:"font-mono",children:R.size})]}),(0,a.jsx)(p.z,{onClick:ea,disabled:B,className:"min-w-[180px]",children:B?"Starting…":"Analyze Recordings"})]})]})]})]}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(x.ll,{className:"text-base",children:"Results"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Click ",(0,a.jsx)("span",{className:"font-medium",children:"View"})," for details, audio playback, confidences, and re-run."]})]}),(0,a.jsx)(x.aY,{children:0===O.length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No results yet. Start an analysis to see per-recording results here."}):(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"Status"}),(0,a.jsx)(j.ss,{children:"Billable"}),(0,a.jsx)(j.ss,{children:"Source"}),(0,a.jsx)(j.ss,{children:"Vertical"}),(0,a.jsx)(j.ss,{children:"Extracted"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(j.RM,{children:O.map(e=>(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{children:(0,a.jsx)(S,{status:e.status})}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(E,{extracted:e.extracted})}),(0,a.jsx)(j.pj,{className:"max-w-[420px] truncate",children:"url"===e.sourceType?(0,a.jsx)("span",{className:"font-mono text-xs",children:e.sourceUrl}):(0,a.jsx)("span",{className:"text-sm",children:e.filename||e.storageKey})}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(y.C,{variant:"outline",children:e.vertical})}),(0,a.jsxs)(j.pj,{className:"text-muted-foreground text-sm",children:[e.extracted?"".concat(Object.keys(e.extracted).length," fields"):"—",e.error?(0,a.jsxs)("span",{className:"text-destructive",children:[" • ",e.error]}):null]}),(0,a.jsxs)(j.pj,{className:"text-right space-x-2",children:[(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:()=>q(e),children:"View"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:()=>(function(e){J(e);let t=Array.isArray(e.selectedFields)?e.selectedFields:[];$(new Set(t.length?t:Array.from(i))),Q(!0)})(e),children:"Re-run"})]})]},e.id))})]})})})]}),(0,a.jsx)(N.Vq,{open:!!Z,onOpenChange:e=>!e&&q(null),children:(0,a.jsxs)(N.cZ,{className:"max-w-4xl",children:[(0,a.jsx)(N.fK,{children:(0,a.jsx)(N.$N,{children:"Recording Result"})}),Z&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID"}),(0,a.jsx)("div",{className:"font-mono text-xs",children:Z.id})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{status:Z.status}),(0,a.jsx)(E,{extracted:Z.extracted})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Audio"}),"url"===Z.sourceType&&Z.sourceUrl?(0,a.jsx)("audio",{controls:!0,className:"w-full",children:(0,a.jsx)("source",{src:Z.sourceUrl})}):Z.playbackUrl?(0,a.jsx)("audio",{controls:!0,className:"w-full",children:(0,a.jsx)("source",{src:Z.playbackUrl})}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No playback URL available yet for uploads. (If you want, we can add an API endpoint that returns a signed GET URL for storageKey.)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Extracted Fields"}),Z.extracted?(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"Field"}),(0,a.jsx)(j.ss,{children:"Value"}),(0,a.jsx)(j.ss,{className:"w-[220px]",children:"Confidence"})]})}),(0,a.jsx)(j.RM,{children:Object.keys(Z.extracted).map(e=>{var t;let r=null===(t=Z.extracted)||void 0===t?void 0:t[e],s=function(e,t){var r,a;if(!e)return null;let s=String(t),n=s.toLowerCase(),l=null==e?void 0:null===(r=e._confidence)||void 0===r?void 0:r[s];if("number"==typeof l)return C(l);let i=null==e?void 0:null===(a=e.confidence)||void 0===a?void 0:a[s];if("number"==typeof i)return C(i);let o=null==e?void0:e["".concat(s,"_confidence")];if("number"==typeof o)return C(o);let d=null==e?void 0:e["".concat(n,"_confidence")];return"number"==typeof d?C(d):null}(Z.extracted,e);return(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{className:"font-medium",children:e}),(0,a.jsx)(j.pj,{className:"text-sm",children:"object"==typeof r?(0,a.jsx)("pre",{className:"text-xs bg-muted/30 border rounded p-2 overflow-auto max-h-[160px]",children:JSON.stringify(r,null,2)}):String(null!=r?r:"—")}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(A,{value:s})})]},e)})})]})}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No extracted JSON yet."})]}),Z.transcript&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Transcript"}),(0,a.jsx)("pre",{className:"max-h-[360px] overflow-auto rounded-md border bg-muted/30 p-3 text-xs whitespace-pre-wrap",children:Z.transcript})]})]})]})}),(0,a.jsx)(N.Vq,{open:X,onOpenChange:e=>!e&&Q(!1),children:(0,a.jsxs)(N.cZ,{className:"max-w-3xl",children:[(0,a.jsx)(N.fK,{children:(0,a.jsx)(N.$N,{children:"Re-run extraction with different fields"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"This will create a new batch using the same recording but different selected fields."}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,a.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",W.has(e.key)?"bg-muted/50":"bg-background"),children:[(0,a.jsx)(v.X,{checked:W.has(e.key),onCheckedChange:()=>$(t=>{let r=new Set(t);return r.has(e.key)?r.delete(e.key):r.add(e.key),r}),className:"mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},"rerun-".concat(e.key)))}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,a.jsx)(p.z,{variant:"outline",onClick:()=>Q(!1),disabled:G,children:"Cancel"}),(0,a.jsx)(p.z,{onClick:es,disabled:G,children:G?"Re-running…":"Re-run"})]})]})]})})]})}},78419:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return o}});var a=r(91674),s=r(47828),n=r(86655),l=r(33061);let i=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:s}),r),...n})});o.displayName="Alert",n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let d=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...s})});d.displayName="AlertDescription"},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(91674),s=r(47828);r(86655);var n=r(33061);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(91674),s=r(32814),n=r(47828),l=r(86655),i=r(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colorsfocus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},55738:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var a=r(91674),s=r(38598),n=r(72781),l=r(86655),i=r(33061);let o=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...l,children:(0,a.jsx)(s.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});o.displayName=s.fC.displayName},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),s=r(7472),n=r(77037),l=r(86655),i=r(33061);let o=s.fC;s.xz;let d=s.h_;s.x8;let c=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});c.displayName=s.aV.displayName;let u=l.forwardRef((e,t)=>{let{className:r,children:l,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[l,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let x=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});x.displayName=s.Dx.displayName;let h=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});h.displayName=s.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var a=r(91674),s=r(35974),n=r(86655),l=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});i.displayName=s.f.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},76604:function(e,t,r){"use strict";r.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return i},nU:function(){return c}});var a=r(91674),s=r(89258),n=r(86655),l=r(33061);let i=s.fC,o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...n})});o.displayName=s.aV.displayName;let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...n})});d.displayName=s.xz.displayName;let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})});c.displayName=s.VY.displayName},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),r=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=r.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=r.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return d},un:function(){return l},xG:function(){return i}});var a=r(44115),s=r(38352);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[7880,2546,802,8474,1906,1344,1293,9997,1744],function(){return e(e.s=70161)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/2904-e1d918175e83e296.js:"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2904],{60044:function(e,t,r){r.d(t,{C:function(){return l}});var n=r(91674),a=r(47828);r(86655);var o=r(33061);let s=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,o.cn)(s({variant:r}),t),...a})}},90747:function(e,t,r){r.d(t,{z:function(){return d}});var n=r(91674),a=r(32814),o=r(47828),s=r(86655),l=r(33061);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(i({variant:o,size:s,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},ll:function(){return i}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});s.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},55738:function(e,t,r){r.d(t,{X:function(){return i}});var n=r(91674),a=r(38598),o=r(72781),s=r(86655),l=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,n.jsx)(a.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})});i.displayName=a.fC.displayName},88151:function(e,t,r){r.d(t,{$N:function(){return p},Be:function(){return h},Vq:function(){return i},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var n=r(91674),a=r(7472),o=r(77037),s=r(86655),l=r(33061);let i=a.fC;a.xz;let d=a.h_;a.x8;let c=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});c.displayName=a.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(c,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i,children:[s,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=a.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...o})});p.displayName=a.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...o})});h.displayName=a.dk.displayName},66120:function(e,t,r){r.d(t,{I:function(){return s}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},66801:function(e,t,r){r.d(t,{_:function(){return l}});var n=r(91674),a=r(35974),o=r(86655),s=r(33061);let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...o})});l.displayName=a.f.displayName},86190:function(e,t,r){r.d(t,{RM:function(){return i},SC:function(){return d},iA:function(){return s},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",r),...a})})});s.displayName="Table";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",r),...a})});l.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",r),...a})});i.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});d.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},11597:function(e,t,r){r.d(t,{_:function(){return m}});var n=r(91674),a=r(54741),o=r(86655),s=r(90747),l=r(55738),i=r(88151),d=r(66120),c=r(66801),u=r(28314);let f=[{id:"call.*",label:"All Call Events"},{id:"call.initiated",label:"Call Initiated"},{id:"call.ringing",label:"Call Ringing"},{id:"call.answered",label:"Call Answered"},{id:"call.completed",label:"Call Completed"},{id:"call.failed",label:"Call Failed"},{id:"recording.ready",label:"Recording Ready"},{id:"conversion.confirmed",label:"Conversion Confirmed"}];function m(e){let{open:t,onOpenChange:r,onSuccess:m}=e,[p,h]=(0,o.useState)(!1),[x,b]=(0,o.useState)(null),[g,v]=(0,o.useState)({url:"",events:[],status:"ACTIVE"}),y=async()=>{if(!g.url.trim()){b("URL is required");return}if(0===g.events.length){b("At least one event must be selected");return}try{new URL(g.url)}catch(e){b("Invalid URL format");return}h(!0),b(null);try{let e=await u.x.post("/api/v1/webhooks",{url:g.url.trim(),events:g.events,status:g.status});if(e.error)throw Error(e.error.message||"Failed to create webhook");e.data&&(null==m||m(),r(!1),v({url:"",events:[],status:"ACTIVE"}))}catch(e){b(e instanceof Error?e.message:"Failed to create webhook")}finally{h(!1)}},N=e=>{if("call.*"===e)g.events.includes("call.*")?v({...g,events:g.events.filter(e=>!e.startsWith("call."))}):v({...g,events:["call.*",...g.events.filter(e=>!e.startsWith("call."))]});else{let t=g.events.includes(e)?g.events.filter(t=>t!==e):[...g.events.filter(e=>"call.*"!==e),e];v({...g,events:t})}};return(0,n.jsx)(i.Vq,{open:t,onOpenChange:r,children:(0,n.jsxs)(i.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,n.jsxs)(i.fK,{children:[(0,n.jsx)(i.$N,{children:"Add Webhook"}),(0,n.jsx)(i.Be,{children:"Configure a webhook endpoint to receive event notifications"})]}),(0,n.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"url",children:"Webhook URL *"}),(0,n.jsx)(d.I,{id:"url",type:"url",placeholder:"https://example.com/webhook",value:g.url,onChange:e=>v({...g,url:e.target.value}),disabled:p}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"The URL where webhook events will be sent"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{children:"Events *"}),(0,n.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-md p-3",children:f.map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(l.X,{id:"event-".concat(e.id),checked:g.events.includes(e.id),onCheckedChange:()=>N(e.id),disabled:p}),(0,n.jsx)(c._,{htmlFor:"event-".concat(e.id),className:"font-normal cursor-pointer text-sm",children:e.label})]},e.id))}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select the events you want to receive notifications for"})]}),x&&(0,n.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:x})]}),(0,n.jsxs)(i.cN,{children:[(0,n.jsx)(s.z,{variant:"outline",onClick:()=>r(!1),disabled:p,children:"Cancel"}),(0,n.jsxs)(s.z,{onClick:y,disabled:p||!g.url.trim()||0===g.events.length,children:[p&&(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Webhook"]})]})]})})}},28314:function(e,t,r){r.d(t,{x:function(){return a}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a="".concat(this.baseUrl).concat(e),o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization="Bearer ".concat(this.token)),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:o}),r=await e.json();if(!e.ok){var s,l;return{error:{code:(null===(s=r.error)||void 0===s?void 0:s.code)||"UNKNOWN_ERROR",message:(null===(l=r.error)||void 0===l?void 0:l.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let a=new n},33061:function(e,t,r){r.d(t,{LU:function(){return i},cn:function(){return o},p6:function(){return d},un:function(){return s},xG:function(){return l}});var n=r(44115),a=r(38352);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function s(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function i(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},72781:function(e,t,r){r.d(t,{Z:function(){return n}});/**
root@hoppwhistle:/opt/hopwhistle# docker run --rm docker-web sh -c "grep -r 'a1b2c3d4e5f67890' /app || echo 'Not found'"
docker run --rm docker-web sh -c "grep -r 'demo-key' /app/apps/web/.next/ | head -5 || echo 'Not found'"
/app/apps/web/.next/server/app/(dashboard)/campaigns/page.js: */let i=(0,s(67879).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var n=s(83810),d=s(81088),o=s(4283),c=s(84177),m=s(14887),p=s(57869),u=s(65944),h=s(39881);function x({open:e,onOpenChange:a,onSuccess:s}){let[r,l]=(0,n.useState)(!1),[i,x]=(0,n.useState)(null),[f,g]=(0,n.useState)([]),[b,j]=(0,n.useState)([]),[y,w]=(0,n.useState)(!1),[v,N]=(0,n.useState)({name:"",publisherId:"",flowId:"",status:"ACTIVE"});(0,n.useEffect)(()=>{e&&(N({name:"",publisherId:"",flowId:"",status:"ACTIVE"}),x(null),P())},[e]);let P=async()=>{w(!0);try{if("true"===localStorage.getItem("demoMode"))g([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]);else{let e=await h.x.get("/api/v1/publishers");e.data?.data?g(e.data.data):g([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}])}let e=await h.x.get("/api/v1/flows");e.data?.data?j(e.data.data):j([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}catch(e){console.warn("Failed to load initial data, using mock data:",e),g([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]),j([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}finally{w(!1)}},k=async()=>{if(!v.name.trim()){x("Campaign name is required");return}if(!v.publisherId){x("Publisher is required");return}l(!0),x(null);try{let e=await h.x.post("/api/v1/campaigns",{name:v.name.trim(),publisherId:v.publisherId,flowId:v.flowId||void 0,status:v.status});if(e.error){if("NETWORK_ERROR"===e.error.code||e.error.message?.includes("Failed to fetch"))throw Error("Unable to connect to the server. Please make sure the API server is running.");throw Error(e.error.message||"Failed to create campaign")}e.data&&(s?.(),a(!1))}catch(a){let e=a instanceof Error?a.message:"Failed to create campaign";x(e),(e.includes("connect to the server")||e.includes("Failed to fetch"))&&alert("Cannot connect to the API server. Please make sure the backend is running on port 3001.")}finally{l(!1)}};return t.jsx(c.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(c.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,t.jsxs)(c.fK,{children:[t.jsx(c.$N,{children:"Create New Campaign"}),t.jsx(c.Be,{children:"Create a new call campaign to manage your outbound calling operations."})]}),t.jsx("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:y?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(d.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"name",children:"Campaign Name *"}),t.jsx(m.I,{id:"name",placeholder:"e.g., Summer Campaign 2024",value:v.name,onChange:e=>N({...v,name:e.target.value}),disabled:r})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"publisher",children:"Publisher *"}),(0,t.jsxs)(u.Ph,{value:v.publisherId||void 0,onValueChange:e=>N({...v,publisherId:e}),disabled:r||y,children:[t.jsx(u.i4,{id:"publisher",children:t.jsx(u.ki,{placeholder:"Select a publisher"})}),t.jsx(u.Bw,{children:0===f.length?t.jsx(u.Ql,{value:"no-publishers",disabled:!0,children:"No publishers available"}):f.map(e=>(0,t.jsxs)(u.Ql,{value:e.id,children:[e.name," (",e.code,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"flow",children:"Flow (Optional)"}),(0,t.jsxs)(u.Ph,{value:v.flowId||void 0,onValueChange:e=>N({...v,flowId:e||""}),disabled:r||y,children:[t.jsx(u.i4,{id:"flow",children:t.jsx(u.ki,{placeholder:"Select a flow (optional)"})}),t.jsx(u.Bw,{children:0===b.length?t.jsx(u.Ql,{value:"no-flows",disabled:!0,children:"No flows available"}):b.map(e=>(0,t.jsxs)(u.Ql,{value:e.id,children:[e.name," (v",e.version,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(u.Ph,{value:v.status,onValueChange:e=>N({...v,status:e}),disabled:r,children:[t.jsx(u.i4,{id:"status",children:t.jsx(u.ki,{})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"ACTIVE",children:"Active"}),t.jsx(u.Ql,{value:"PAUSED",children:"Paused"})]})]})]}),i&&t.jsx("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:i})]})}),(0,t.jsxs)(c.cN,{children:[t.jsx(o.z,{variant:"outline",onClick:()=>a(!1),disabled:r||y,children:"Cancel"}),(0,t.jsxs)(o.z,{onClick:k,disabled:r||y||!v.name.trim()||!v.publisherId,children:[r&&t.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Campaign"]})]})]})})}var f=s(35090),g=s(3920),b=s(25277);let j=[{id:"1",name:"Summer Campaign",status:"active",flow:"Default Flow",calls:1234,asr:.65,createdAt:"2024-01-15"},{id:"2",name:"Winter Campaign",status:"paused",flow:"Holiday Flow",calls:567,asr:.58,createdAt:"2024-01-10"}];function y(){let[e,a]=(0,n.useState)(!1);return(0,t.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Campaigns"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your call campaigns and flows"})]}),(0,t.jsxs)(o.z,{onClick:()=>{a(!0)},children:[t.jsx(r.Z,{className:"mr-2 h-4 w-4"}),"New Campaign"]})]}),(0,t.jsxs)(g.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,t.jsxs)(g.Ol,{className:"flex-shrink-0",children:[t.jsx(g.ll,{children:"Campaigns"}),t.jsx(g.SZ,{children:"View and manage all campaigns"})]}),t.jsx(g.aY,{className:"flex-1 overflow-y-auto min-h-0",children:(0,t.jsxs)(b.iA,{children:[t.jsx(b.xD,{children:(0,t.jsxs)(b.SC,{children:[t.jsx(b.ss,{children:"Name"}),t.jsx(b.ss,{children:"Status"}),t.jsx(b.ss,{children:"Flow"}),t.jsx(b.ss,{children:"Calls"}),t.jsx(b.ss,{children:"ASR"}),t.jsx(b.ss,{children:"Created"}),t.jsx(b.ss,{className:"text-right",children:"Actions"})]})}),t.jsx(b.RM,{children:j.map(e=>(0,t.jsxs)(b.SC,{children:[t.jsx(b.pj,{className:"font-medium",children:e.name}),t.jsx(b.pj,{children:t.jsx(f.C,{variant:"active"===e.status?"success":"secondary",children:e.status})}),t.jsx(b.pj,{children:e.flow}),t.jsx(b.pj,{children:e.calls.toLocaleString()}),(0,t.jsxs)(b.pj,{children:[(100*e.asr).toFixed(1),"%"]}),t.jsx(b.pj,{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx(b.pj,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{variant:"ghost",size:"sm",children:t.jsx(l.Z,{className:"h-4 w-4"})}),t.jsx(o.z,{variant:"ghost",size:"sm",children:t.jsx(i,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),t.jsx(x,{open:e,onOpenChange:a,onSuccess:()=>{window.location.reload()}})]})}},35090:(e,a,s)=>{"use strict";s.d(a,{C:()=>n});var t=s(27685),r=s(31727);s(83810);var l=s(4120);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,...s}){return t.jsx("div",{className:(0,l.cn)(i({variant:a}),e),...s})}},84177:(e,a,s)=>{"use strict";s.d(a,{$N:()=>h,Be:()=>x,Vq:()=>d,cN:()=>u,cZ:()=>m,fK:()=>p});var t=s(27685),r=s(35639),l=s(54654),i=s(83810),n=s(4120);let d=r.fC;r.xz;let o=r.h_;r.x8;let c=i.forwardRef(({className:e,...a},s)=>t.jsx(r.aV,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=r.aV.displayName;let m=i.forwardRef(({className:e,children:a,...s},i)=>(0,t.jsxs)(o,{children:[t.jsx(c,{}),(0,t.jsxs)(r.VY,{ref:i,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[a,(0,t.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(l.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=r.VY.displayName;let p=({className:e,...a})=>t.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});p.displayName="DialogHeader";let u=({className:e,...a})=>t.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});u.displayName="DialogFooter";let h=i.forwardRef(({className:e,...a},s)=>t.jsx(r.Dx,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=r.Dx.displayName;let x=i.forwardRef(({className:e,...a},s)=>t.jsx(r.dk,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));x.displayName=r.dk.displayName},57869:(e,a,s)=>{"use strict";s.d(a,{_:()=>n});var t=s(27685),r=s(73891),l=s(83810),i=s(4120);let n=l.forwardRef(({className:e,...a},s)=>t.jsx(r.f,{ref:s,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...a}));n.displayName=r.f.displayName},65944:(e,a,s)=>{"use strict";s.d(a,{Bw:()=>x,Ph:()=>c,Ql:()=>f,i4:()=>p,ki:()=>m});var t=s(27685),r=s(66134),l=s(4610),i=s(24427),n=s(63197),d=s(83810),o=s(4120);let c=r.fC;r.ZA;let m=r.B4,p=d.forwardRef(({className:e,children:a,...s},i)=>(0,t.jsxs)(r.xz,{ref:i,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[a,t.jsx(r.JO,{asChild:!0,children:t.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=r.xz.displayName;let u=d.forwardRef(({className:e,...a},s)=>t.jsx(r.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(i.Z,{className:"h-4 w-4"})}));u.displayName=r.u_.displayName;let h=d.forwardRef(({className:e,...a},s)=>t.jsx(r.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(l.Z,{className:"h-4 w-4"})}));h.displayName=r.$G.displayName;let x=d.forwardRef(({className:e,children:a,position:s="popper",...l},i)=>t.jsx(r.h_,{children:(0,t.jsxs)(r.VY,{ref:i,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...l,children:[t.jsx(u,{}),t.jsx(r.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)]w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),t.jsx(h,{})]})}));x.displayName=r.VY.displayName,d.forwardRef(({className:e,...a},s)=>t.jsx(r.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=r.__.displayName;let f=d.forwardRef(({className:e,children:a,...s},l)=>(0,t.jsxs)(r.ck,{ref:l,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(r.wU,{children:t.jsx(n.Z,{className:"h-4 w-4"})})}),t.jsx(r.eT,{children:a})]}));f.displayName=r.ck.displayName,d.forwardRef(({className:e,...a},s)=>t.jsx(r.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=r.Z0.displayName},25277:(e,a,s)=>{"use strict";s.d(a,{RM:()=>d,SC:()=>o,iA:()=>i,pj:()=>m,ss:()=>c,xD:()=>n});var t=s(27685),r=s(83810),l=s(4120);let i=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",e),...a})}));i.displayName="Table";let n=r.forwardRef(({className:e,...a},s)=>t.jsx("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",e),...a}));n.displayName="TableHeader";let d=r.forwardRef(({className:e,...a},s)=>t.jsx("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...a}));d.displayName="TableBody",r.forwardRef(({className:e,...a},s)=>t.jsx("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let o=r.forwardRef(({className:e,...a},s)=>t.jsx("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));o.displayName="TableRow";let c=r.forwardRef(({className:e,...a},s)=>t.jsx("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));c.displayName="TableHead";let m=r.forwardRef(({className:e,...a},s)=>t.jsx("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));m.displayName="TableCell",r.forwardRef(({className:e,...a},s)=>t.jsx("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},39881:(e,a,s)=>{"use strict";s.d(a,{x:()=>r});class t{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,a={}){let s="true"===localStorage.getItem("demoMode"),t=localStorage.getItem("demoTenantId");s&&t&&(a.headers={...a.headers,"X-Demo-Tenant-Id":t});let r=`${this.baseUrl}${e}`,l={"Content-Type":"application/json",...a.headers};this.token&&(l.Authorization=`Bearer ${this.token}`),this.apiKey&&(l["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...a,headers:l}),s=await e.json();if(!e.ok)return{error:{code:s.error?.code||"UNKNOWN_ERROR",message:s.error?.message||"An error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,a){return this.request(e,{method:"POST",body:a?JSON.stringify(a):void 0})}async put(e,a){return this.request(e,{method:"PUT",body:a?JSON.stringify(a):void 0})}async patch(e,a){return this.request(e,{method:"PATCH",body:a?JSON.stringify(a):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let r=new t},81088:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});/**
/app/apps/web/.next/server/app/(dashboard)/billing/page.js:(()=>{var e={};e.id=921,e.ids=[921],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},21119:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(59441),a=s(1498),n=s(6580),i=s.n(n),l=s(15511),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(dashboard)",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,79824)),"/app/apps/web/src/app/(dashboard)/billing/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/billing/page.tsx"],x="/(dashboard)/billing/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/billing/page",pathname:"/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34303:(e,t,s)=>{Promise.resolve().then(s.bind(s,83482))},83482:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(27685),a=s(81088),n=s(6620),i=s(61198),l=s(33173),o=s(83810),d=s(35090),c=s(4283),x=s(3920),p=s(25277),u=s(39881),h=s(4120);function m(){let[e,t]=(0,o.useState)([]),[s,m]=(0,o.useState)(null),[b,f]=(0,o.useState)(!0),[g,j]=(0,o.useState)(null),y=(0,o.useCallback)(async()=>{f(!0),j(null);try{let[e,s]=await Promise.all([u.x.get("/api/v1/billing/invoices"),u.x.get("/api/v1/billing/balance")]);e.data&&t(e.data.data||[]),s.data&&m(s.data)}catch(e){j(e instanceof Error?e.message:"Failed to load billing data")}finally{f(!1)}},[]);return((0,o.useEffect)(()=>{y()},[y]),b)?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Billing"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(a.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Billing"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),g&&r.jsx(x.Zb,{children:r.jsx(x.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center text-destructive",children:["Error: ",g]})})}),s&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(x.ll,{className:"text-sm font-medium",children:"Available Balance"}),r.jsx(n.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(x.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:(0,h.xG)(parseFloat(s.available))})})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(x.ll,{className:"text-sm font-medium",children:"Pending"}),r.jsx(i.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(x.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:(0,h.xG)(parseFloat(s.pending))})})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(x.ll,{className:"text-sm font-medium",children:"Held"}),r.jsx(n.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(x.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:(0,h.xG)(parseFloat(s.held))})})]})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[r.jsx(x.ll,{children:"Invoices"}),r.jsx(x.SZ,{children:"View and download your invoices"})]}),r.jsx(x.aY,{children:0===e.length?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"}):(0,r.jsxs)(p.iA,{children:[r.jsx(p.xD,{children:(0,r.jsxs)(p.SC,{children:[r.jsx(p.ss,{children:"Invoice Number"}),r.jsx(p.ss,{children:"Period"}),r.jsx(p.ss,{children:"Amount"}),r.jsx(p.ss,{children:"Status"}),r.jsx(p.ss,{children:"Due Date"}),r.jsx(p.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(p.RM,{children:e.map(e=>(0,r.jsxs)(p.SC,{children:[r.jsx(p.pj,{className:"font-medium",children:e.invoiceNumber}),(0,r.jsxs)(p.pj,{children:[(0,h.p6)(e.period.start)," - ",(0,h.p6)(e.period.end)]}),r.jsx(p.pj,{children:(0,h.xG)(parseFloat(e.total))}),r.jsx(p.pj,{children:r.jsx(d.C,{variant:"paid"===e.status?"success":"warning",children:e.status})}),r.jsx(p.pj,{children:(0,h.p6)(e.dueDate)}),r.jsx(p.pj,{className:"text-right",children:r.jsx(c.z,{variant:"ghost",size:"sm",children:r.jsx(l.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},35090:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var r=s(27685),a=s(31727);s(83810);var n=s(4120);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return r.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},25277:(e,t,s)=>{"use strict";s.d(t,{RM:()=>o,SC:()=>d,iA:()=>i,pj:()=>x,ss:()=>c,xD:()=>l});var r=s(27685),a=s(83810),n=s(4120);let i=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,n.cn)("border-b transition-colorshover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let x=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));x.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let s="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");s&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let a=`${this.baseUrl}${e}`,n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:n}),s=await e.json();if(!e.ok)return{error:{code:s.error?.code||"UNKNOWN_ERROR",message:s.error?.message||"An error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new r},33173:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
/app/apps/web/.next/server/app/(dashboard)/settings/quotas/page.js: */let n=(0,r.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l=(0,r.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=a(77921),o=a(31087),d=a(6620),c=a(83810),u=a(71499),m=a(4283),x=a(3920),h=a(14887),p=a(57869),f=a(26442),g=a(74550),y=a(39881);function v(){let[e,t]=(0,c.useState)(""),[a,r]=(0,c.useState)(null),[v,b]=(0,c.useState)(!1),[N,j]=(0,c.useState)(null),[k,S]=(0,c.useState)(null),[C,w]=(0,c.useState)({maxConcurrentCalls:"",maxMinutesPerDay:"",maxRecordingRetentionDays:"",maxPhoneNumbers:"",maxStorageGB:"",enabled:!0}),[P,R]=(0,c.useState)({monthlyBudget:"",dailyBudget:"",alertThreshold:"80",alertEmails:"",alertSlackWebhook:"",hardStopEnabled:!0,enabled:!0}),[E,_]=(0,c.useState)(null),[M,T]=(0,c.useState)(null);(0,c.useEffect)(()=>{t("00000000-0000-0000-0000-000000000000")},[]);let O=async()=>{if(e)try{b(!0);let t=await y.x.get(`/admin/api/v1/tenants/${e}/quota/status`);t.data?r(t.data):t.error&&j(t.error.message||"Failed to load quota status")}catch(e){j("Failed to load quota status")}finally{b(!1)}},B=async()=>{if(e)try{let t=await y.x.get(`/admin/api/v1/tenants/${e}/quota`);t.data&&w({maxConcurrentCalls:t.data.maxConcurrentCalls?.toString()||"",maxMinutesPerDay:t.data.maxMinutesPerDay?.toString()||"",maxRecordingRetentionDays:t.data.maxRecordingRetentionDays?.toString()||"",maxPhoneNumbers:t.data.maxPhoneNumbers?.toString()||"",maxStorageGB:t.data.maxStorageGB?.toString()||"",enabled:t.data.enabled??!0})}catch(e){}},D=async()=>{if(e)try{let t=await y.x.get(`/admin/api/v1/tenants/${e}/budget`);t.data&&R({monthlyBudget:t.data.monthlyBudget?.toString()||"",dailyBudget:t.data.dailyBudget?.toString()||"",alertThreshold:t.data.alertThreshold?.toString()||"80",alertEmails:t.data.alertEmails?.join(", ")||"",alertSlackWebhook:t.data.alertSlackWebhook||"",hardStopEnabled:t.data.hardStopEnabled??!0,enabled:t.data.enabled??!0})}catch(e){}};(0,c.useEffect)(()=>{e&&(O(),B(),D())},[e]);let $=async()=>{if(e)try{b(!0),j(null),await y.x.patch(`/admin/api/v1/tenants/${e}/quota`,{maxConcurrentCalls:C.maxConcurrentCalls?parseInt(C.maxConcurrentCalls):null,maxMinutesPerDay:C.maxMinutesPerDay?parseInt(C.maxMinutesPerDay):null,maxRecordingRetentionDays:C.maxRecordingRetentionDays?parseInt(C.maxRecordingRetentionDays):null,maxPhoneNumbers:C.maxPhoneNumbers?parseInt(C.maxPhoneNumbers):null,maxStorageGB:C.maxStorageGB?parseFloat(C.maxStorageGB):null,enabled:C.enabled}),S("Quota settings saved"),O(),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to save quota settings")}finally{b(!1)}},q=async()=>{if(e)try{b(!0),j(null),await y.x.patch(`/admin/api/v1/tenants/${e}/budget`,{monthlyBudget:P.monthlyBudget?parseFloat(P.monthlyBudget):null,dailyBudget:P.dailyBudget?parseFloat(P.dailyBudget):null,alertThreshold:parseFloat(P.alertThreshold),alertEmails:P.alertEmails.split(",").map(e=>e.trim()).filter(Boolean),alertSlackWebhook:P.alertSlackWebhook||null,hardStopEnabled:P.hardStopEnabled,enabled:P.enabled}),S("Budget settings saved"),O(),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to save budget settings")}finally{b(!1)}},I=async()=>{if(e)try{b(!0),j(null);let t=await y.x.post(`/admin/api/v1/tenants/${e}/budget/override-token`,{expiresInHours:24});_(t.token),T(t.expiresAt),S("Override token generated"),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to generate override token")}finally{b(!1)}},A=async()=>{if(e)try{b(!0),j(null),await y.x.delete(`/admin/api/v1/tenants/${e}/budget/override-token`),_(null),T(null),S("Override token revoked"),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to revoke override token")}finally{b(!1)}};return(0,s.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex-shrink-0 mb-2",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Quotas & Budgets"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage tenant quotas and budget controls"})]}),N&&(0,s.jsxs)(u.bZ,{variant:"destructive",className:"flex-shrink-0 mb-2 py-2",children:[s.jsx(n,{className:"h-3 w-3"}),s.jsx(u.X,{className:"text-sm",children:N})]}),k&&(0,s.jsxs)(u.bZ,{className:"flex-shrink-0 mb-2 py-2",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx(u.X,{className:"text-sm",children:k})]}),a&&a.concurrentCalls&&(0,s.jsxs)(x.Zb,{className:"flex-shrink-0 mb-2",children:[s.jsx(x.Ol,{className:"pb-3",children:s.jsx(x.ll,{className:"text-base",children:"Current Usage"})}),s.jsx(x.aY,{className:"pt-0",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Concurrent Calls"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[a.concurrentCalls.current??0,a.concurrentCalls.limit&&` / ${a.concurrentCalls.limit}`]}),null!==a.concurrentCalls.remaining&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.concurrentCalls.remaining," remaining"]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(o.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Daily Minutes"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[a.dailyMinutes?.current??0,a.dailyMinutes?.limit&&` / ${a.dailyMinutes.limit}`]}),a.dailyMinutes?.remaining!==null&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.dailyMinutes.remaining," remaining"]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Phone Numbers"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[a.phoneNumbers?.current??0,a.phoneNumbers?.limit&&` / ${a.phoneNumbers.limit}`]}),a.phoneNumbers?.remaining!==null&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.phoneNumbers.remaining," remaining"]})]}),a.budget&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(d.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Monthly Budget"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:["$",(a.budget.monthly?.current??0).toFixed(2),a.budget.monthly?.limit&&` / $${a.budget.monthly.limit.toFixed(2)}`]}),a.budget.monthly?.percentage!==null&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.budget.monthly.percentage.toFixed(1),"% used"]})]})]})})]}),(0,s.jsxs)(g.mQ,{defaultValue:"quotas",className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,s.jsxs)(g.dr,{className:"flex-shrink-0 h-9",children:[s.jsx(g.SP,{value:"quotas",className:"text-sm",children:"Quotas"}),s.jsx(g.SP,{value:"budget",className:"text-sm",children:"Budget"}),s.jsx(g.SP,{value:"overrides",className:"text-sm",children:"Overrides"})]}),s.jsx(g.nU,{value:"quotas",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,s.jsxs)(x.Zb,{className:"h-full flex flex-col overflow-hidden",children:[s.jsx(x.Ol,{className:"pb-2 flex-shrink-0",children:s.jsx(x.ll,{className:"text-base",children:"Quota Settings"})}),(0,s.jsxs)(x.aY,{className:"flex-1 overflow-y-auto space-y-3 pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p._,{className:"text-sm",children:"Enable Quotas"})}),s.jsx(f.r,{checked:C.enabled,onCheckedChange:e=>w({...C,enabled:e})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxConcurrentCalls",className:"text-sm",children:"Max Concurrent Calls"}),s.jsx(h.I,{id:"maxConcurrentCalls",type:"number",value:C.maxConcurrentCalls,onChange:e=>w({...C,maxConcurrentCalls:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxMinutesPerDay",className:"text-sm",children:"Max Minutes Per Day"}),s.jsx(h.I,{id:"maxMinutesPerDay",type:"number",value:C.maxMinutesPerDay,onChange:e=>w({...C,maxMinutesPerDay:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxPhoneNumbers",className:"text-sm",children:"Max Phone Numbers"}),s.jsx(h.I,{id:"maxPhoneNumbers",type:"number",value:C.maxPhoneNumbers,onChange:e=>w({...C,maxPhoneNumbers:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxRecordingRetentionDays",className:"text-sm",children:"Max Recording Retention (Days)"}),s.jsx(h.I,{id:"maxRecordingRetentionDays",type:"number",value:C.maxRecordingRetentionDays,onChange:e=>w({...C,maxRecordingRetentionDays:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxStorageGB",className:"text-sm",children:"Max Storage (GB)"}),s.jsx(h.I,{id:"maxStorageGB",type:"number",step:"0.01",value:C.maxStorageGB,onChange:e=>w({...C,maxStorageGB:e.target.value}),placeholder:"Unlimited",className:"h-8"})]})]}),s.jsx(m.z,{onClick:$,disabled:v,size:"sm",className:"mt-2",children:"Save Quota Settings"})]})]})}),(0,s.jsxs)(g.nU,{value:"budget",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:[(0,s.jsxs)(x.Zb,{className:"h-full flex flex-col overflow-hidden",children:[s.jsx(x.Ol,{className:"pb-2 flex-shrink-0",children:s.jsx(x.ll,{className:"text-base",children:"Budget Settings"})}),(0,s.jsxs)(x.aY,{className:"flex-1 overflow-y-auto space-y-3 pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p._,{className:"text-sm",children:"Enable Budget"})}),s.jsx(f.r,{checked:P.enabled,onCheckedChange:e=>R({...P,enabled:e})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"monthlyBudget",className:"text-sm",children:"Monthly Budget ($)"}),s.jsx(h.I,{id:"monthlyBudget",type:"number",step:"0.01",value:P.monthlyBudget,onChange:e=>R({...P,monthlyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"dailyBudget",className:"text-sm",children:"Daily Budget ($)"}),s.jsx(h.I,{id:"dailyBudget",type:"number",step:"0.01",value:P.dailyBudget,onChange:e=>R({...P,dailyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"alertThreshold",className:"text-sm",children:"Alert Threshold (%)"}),s.jsx(h.I,{id:"alertThreshold",type:"number",value:P.alertThreshold,onChange:e=>R({...P,alertThreshold:e.target.value}),placeholder:"80",className:"h-8"})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"alertEmails",className:"text-sm",children:"Alert Email Addresses"}),s.jsx(h.I,{id:"alertEmails",value:P.alertEmails,onChange:e=>R({...P,alertEmails:e.target.value}),placeholder:"admin@example.com, finance@example.com",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"alertSlackWebhook",className:"text-sm",children:"Slack Webhook URL"}),s.jsx(h.I,{id:"alertSlackWebhook",value:P.alertSlackWebhook,onChange:e=>R({...P,alertSlackWebhook:e.target.value}),placeholder:"https://hooks.slack.com/services/...",className:"h-8"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p._,{className:"text-sm",children:"Hard Stop Enabled"})}),s.jsx(f.r,{checked:P.hardStopEnabled,onCheckedChange:e=>R({...P,hardStopEnabled:e})})]}),s.jsx(m.z,{onClick:q,disabled:v,size:"sm",className:"mt-2",children:"Save Budget Settings"})]})]}),(0,s.jsxs)(x.Zb,{className:"mt-2",children:[s.jsx(x.Ol,{className:"pb-2",children:s.jsx(x.ll,{className:"text-base",children:"Override Token"})}),s.jsx(x.aY,{className:"pt-0 space-y-2",children:E?(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(u.bZ,{className:"py-2",children:(0,s.jsxs)(u.X,{className:"text-sm",children:[s.jsx("div",{className:"font-mono text-xs break-all",children:E}),M&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",new Date(M).toLocaleString()]})]})}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Use this token in the ",s.jsx("code",{className:"text-xs",children:"X-Quota-Override"})," header to bypass quota limits."]}),s.jsx(m.z,{variant:"destructive",onClick:A,disabled:v,size:"sm",children:"Revoke Token"})]}):s.jsx(m.z,{onClick:I,disabled:v,size:"sm",children:"Generate Override Token"})})]})]}),s.jsx(g.nU,{value:"overrides",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{className:"pb-2",children:s.jsx(x.ll,{className:"text-base",children:"Quota Overrides"})}),s.jsx(x.aY,{className:"pt-0",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Quota overrides allow temporarily increasing limits for specific quota types. Use the API to create overrides programmatically."})})]})})]})]})}},71499:(e,t,a)=>{"use strict";a.d(t,{X:()=>d,bZ:()=>o});var s=a(27685),r=a(31727),n=a(83810),l=a(4120);let i=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef(({className:e,variant:t,...a},r)=>s.jsx("div",{ref:r,role:"alert",className:(0,l.cn)(i({variant:t}),e),...a}));o.displayName="Alert",n.forwardRef(({className:e,...t},a)=>s.jsx("h5",{ref:a,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=n.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},57869:(e,t,a)=>{"use strict";a.d(t,{_:()=>i});var s=a(27685),r=a(73891),n=a(83810),l=a(4120);let i=n.forwardRef(({className:e,...t},a)=>s.jsx(r.f,{ref:a,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));i.displayName=r.f.displayName},26442:(e,t,a)=>{"use strict";a.d(t,{r:()=>i});var s=a(27685),r=a(11842),n=a(83810),l=a(4120);let i=n.forwardRef(({className:e,...t},a)=>s.jsx(r.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:s.jsx(r.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i.displayName=r.fC.displayName},74550:(e,t,a)=>{"use strict";a.d(t,{SP:()=>d,dr:()=>o,mQ:()=>i,nU:()=>c});var s=a(27685),r=a(57045),n=a(83810),l=a(4120);let i=r.fC,o=n.forwardRef(({className:e,...t},a)=>s.jsx(r.aV,{ref:a,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=r.aV.displayName;let d=n.forwardRef(({className:e,...t},a)=>s.jsx(r.xz,{ref:a,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=r.xz.displayName;let c=n.forwardRef(({className:e,...t},a)=>s.jsx(r.VY,{ref:a,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=r.VY.displayName},39881:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});class s{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let a="true"===localStorage.getItem("demoMode"),s=localStorage.getItem("demoTenantId");a&&s&&(t.headers={...t.headers,"X-Demo-Tenant-Id":s});let r=`${this.baseUrl}${e}`,n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:n}),a=await e.json();if(!e.ok)return{error:{code:a.error?.code||"UNKNOWN_ERROR",message:a.error?.message||"An error occurred"}};return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let r=new s},39073:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let s=(0,a(30599).createProxy)(String.raw`/app/apps/web/src/app/(dashboard)/settings/quotas/page.tsx`),{__esModule:r,$$typeof:n}=s,l=s.default},2724:(e,t,a)=>{"use strict";function s(e,t,{checkForDefaultPrevented:a=!0}={}){return function(s){if(e?.(s),!1===a||!s.defaultPrevented)return t?.(s)}}a.d(t,{Mj:()=>s})},6872:(e,t,a)=>{"use strict";a.d(t,{b:()=>l,k:()=>n});var s=a(83810),r=a(27685);function n(e,t){let a=s.createContext(t),n=e=>{let{children:t,...n}=e,l=s.useMemo(()=>n,Object.values(n));return(0,r.jsx)(a.Provider,{value:l,children:t})};return n.displayName=e+"Provider",[n,function(r){let n=s.useContext(a);if(n)return n;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function l(e,t=[]){let a=[],n=()=>{let t=a.map(e=>s.createContext(e));return function(a){let r=a?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return n.scopeName=e,[function(t,n){let l=s.createContext(n),i=a.length;a=[...a,n];let o=t=>{let{scope:a,children:n,...o}=t,d=a?.[e]?.[i]||l,c=s.useMemo(()=>o,Object.values(o));return(0,r.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(a,r){let o=r?.[e]?.[i]||l,d=s.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}(n,...t)]}},99892:(e,t,a)=>{"use strict";a.d(t,{M:()=>o});var s,r=a(83810),n=a(7479),l=(s||(s=a.t(r,2)))[" useId ".trim().toString()]||(()=>void 0),i=0;function o(e){let[t,a]=r.useState(l());return(0,n.b)(()=>{e||a(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}},73891:(e,t,a)=>{"use strict";a.d(t,{f:()=>h});var s=a(83810),r=a.t(s,2);a(80914);var n=a(68118),l=a(27685),i=Symbol.for("react.lazy"),o=r[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"ine&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=Symbol("radix.slottable");function u(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var m=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:a,...r}=e;if(d(a)&&"function"==typeof o&&(a=o(a._payload)),s.isValidElement(a)){var l;let e,i;let o=(l=a,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),d=function(e,t){let a={...t};for(let s in t){let r=e[s],n=t[s];/^on[A-Z]/.test(s)?r&&n?a[s]=(...e)=>{let t=n(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...n}:"className"===s&&(a[s]=[r,n].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==s.Fragment&&(d.ref=t?(0,n.F)(t,o):o),s.cloneElement(a,d)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),a=s.forwardRef((e,a)=>{let{children:r,...n}=e;d(r)&&"function"==typeof o&&(r=o(r._payload));let i=s.Children.toArray(r),c=i.find(u);if(c){let e=c.props.children,r=i.map(t=>t!==c?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...n,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,l.jsx)(t,{...n,ref:a,children:r})});return a.displayName=`${e}.Slot`,a}(`Primitive.${t}`),r=s.forwardRef((e,s)=>{let{asChild:r,...n}=e,i=r?a:t;return(0,l.jsx)(i,{...n,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),x=s.forwardRef((e,t)=>(0,l.jsx)(m.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));x.displayName="Label";var h=x},1090:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var s=a(83810),r=a(68118),n=a(7479),l=e=>{let{present:t,children:a}=e,l=function(e){var t,a;let[r,l]=s.useState(),o=s.useRef(null),d=s.useRef(e),c=s.useRef("none"),[u,m]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},s.useReducer((e,t)=>a[e][t]??e,t));return s.useEffect(()=>{let e=i(o.current);c.current="mounted"===u?e:"none"},[u]),(0,n.b)(()=>{let t=o.current,a=d.current;if(a!==e){let s=c.current,r=i(t);e?m("MOUNT"):"none"===r||t?.display==="none"?m("UNMOUNT"):a&&s!==r?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,n.b)(()=>{if(r){let e;let t=r.ownerDocument.defaultView??window,a=a=>{let s=i(o.current).includes(CSS.escape(a.animationName));if(a.target===r&&s&&(m("ANIMATION_END"),!d.current)){let a=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=a)})}},s=e=>{e.target===r&&(c.current=i(o.current))};return r.addEventListener("animationstart",s),r.addEventListener("animationcancel",a),r.addEventListener("animationend",a),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",s),r.removeEventListener("animationcancel",a),r.removeEventListener("animationend",a)}}m("ANIMATION_END")},[r,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(e=>{o.current=e?getComputedStyle(e):null,l(e)},[])}}(t),o="function"==typeof a?a({present:l.isPresent}):s.Children.only(a),d=(0,r.e)(l.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(o));return"function"==typeof a||l.isPresent?s.cloneElement(o,{ref:d}):null};function i(e){return e?.animationName||"none"}l.displayName="Presence"},29548:(e,t,a)=>{"use strict";a.d(t,{WV:()=>i,jH:()=>o});var s=a(83810),r=a(80914),n=a(47870),l=a(27685),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,n.Z8)(`Primitive.${t}`),r=s.forwardRef((e,s)=>{let{asChild:r,...n}=e,i=r?a:t;return(0,l.jsx)(i,{...n,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function o(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}},47870:(e,t,a)=>{"use strict";a.d(t,{Z8:()=>l});var s=a(83810),r=a(68118),n=a(27685);function l(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:a,...n}=e;if(s.isValidElement(a)){let e,l;let i=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.props.ref:a.props.ref||a.ref,o=function(e,t){let a={...t};for(let s in t){let r=e[s],n=t[s];/^on[A-Z]/.test(s)?r&&n?a[s]=(...e)=>{let t=n(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...n}:"className"===s&&(a[s]=[r,n].filter(Boolean).join(" "))}return{...e,...a}}(n,a.props);return a.type!==s.Fragment&&(o.ref=t?(0,r.F)(t,i):i),s.cloneElement(a,o)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),a=s.forwardRef((e,a)=>{let{children:r,...l}=e,i=s.Children.toArray(r),d=i.find(o);if(d){let e=d.props.children,r=i.map(t=>t!==d?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...l,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,n.jsx)(t,{...l,ref:a,children:r})});return a.displayName=`${e}.Slot`,a}var i=Symbol("radix.slottable");function o(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}},82013:(e,t,a)=>{"use strict";a.d(t,{W:()=>r});var s=a(83810);function r(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}},39294:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var s,r=a(83810),n=a(7479),l=(s||(s=a.t(r,2)))[" useInsertionEffect ".trim().toString()]||n.b;function i({prop:e,defaultProp:t,onChange:a=()=>{},caller:s}){let[n,i,o]=function({defaultProp:e,onChange:t}){let[a,s]=r.useState(e),n=r.useRef(a),i=r.useRef(t);return l(()=>{i.current=t},[t]),r.useEffect(()=>{n.current!==a&&(i.current?.(a),n.current=a)},[a,n]),[a,s,i]}({defaultProp:t,onChange:a}),d=void 0!==e,c=d?e:n;{let t=r.useRef(void 0!==e);r.useEffect(()=>{let e=t.current;if(e!==d){let t=d?"controlled":"uncontrolled";console.warn(`${s} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=d},[d,s])}return[c,r.useCallback(t=>{if(d){let a="function"==typeof t?t(e):t;a!==e&&o.current?.(a)}else i(t)},[d,e,i,o])]}Symbol("RADIX:SYNC_STATE")},7479:(e,t,a)=>{"use strict";a.d(t,{b:()=>r});var s=a(83810),r=globalThis?.document?s.useLayoutEffect:()=>{}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[289,957,856,491,340,560],()=>a(72797));module.exports=s})();
/app/apps/web/.next/server/app/(dashboard)/settings/users/page.js:(Note: In production, this would be sent via email)`):alert("User invited successfully!"),t?.(),s(!1))}catch(e){d(e instanceof Error?e.message:"Failed to invite user")}finally{n(!1)}};return a.jsx(p.Vq,{open:e,onOpenChange:s,children:(0,a.jsxs)(p.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(p.fK,{children:[a.jsx(p.$N,{children:"Invite User"}),a.jsx(p.Be,{children:"Send an invitation to a new team member"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"email",children:"Email Address *"}),a.jsx(x.I,{id:"email",type:"email",placeholder:"user@example.com",value:m.email,onChange:e=>u({...m,email:e.target.value}),disabled:r})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"firstName",children:"First Name (Optional)"}),a.jsx(x.I,{id:"firstName",placeholder:"John",value:m.firstName,onChange:e=>u({...m,firstName:e.target.value}),disabled:r})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"lastName",children:"Last Name (Optional)"}),a.jsx(x.I,{id:"lastName",placeholder:"Doe",value:m.lastName,onChange:e=>u({...m,lastName:e.target.value}),disabled:r})]}),l&&a.jsx("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:l})]}),(0,a.jsxs)(p.cN,{children:[a.jsx(c.z,{variant:"outline",onClick:()=>s(!1),disabled:r,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:g,disabled:r||!m.email.trim(),children:[r&&a.jsx(i.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Invitation"]})]})]})})}function b(){let[e,s]=(0,o.useState)([]),[t,p]=(0,o.useState)(!0),[x,f]=(0,o.useState)(!1);(0,o.useEffect)(()=>{b()},[]);let b=async()=>{p(!0);try{let e=await h.x.get("/api/v1/users");e.data?.data&&s(e.data.data)}catch(e){console.error("Failed to load users:",e)}finally{p(!1)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Users"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage team members and permissions"})]}),(0,a.jsxs)(c.z,{onClick:()=>f(!0),children:[a.jsx(r.Z,{className:"mr-2 h-4 w-4"}),"Invite User"]})]}),(0,a.jsxs)(m.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,a.jsxs)(m.Ol,{className:"flex-shrink-0",children:[a.jsx(m.ll,{children:"Team Members"}),a.jsx(m.SZ,{children:"View and manage user access"})]}),a.jsx(m.aY,{className:"flex-1 overflow-y-auto min-h-0",children:t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(i.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No users found"}):(0,a.jsxs)(u.iA,{children:[a.jsx(u.xD,{children:(0,a.jsxs)(u.SC,{children:[a.jsx(u.ss,{children:"Email"}),a.jsx(u.ss,{children:"Role"}),a.jsx(u.ss,{children:"Status"}),a.jsx(u.ss,{children:"Invited"}),a.jsx(u.ss,{className:"text-right",children:"Actions"})]})}),a.jsx(u.RM,{children:e.map(e=>(0,a.jsxs)(u.SC,{children:[(0,a.jsxs)(u.pj,{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"h-4 w-4 text-muted-foreground"}),e.email]}),a.jsx(u.pj,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:e.roles.map(e=>(0,a.jsxs)(d.C,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[a.jsx(l.Z,{className:"h-3 w-3"}),e]},e))})}),a.jsx(u.pj,{children:a.jsx(d.C,{variant:"active"===e.status?"success":"warning",children:e.status})}),a.jsx(u.pj,{children:new Date(e.invitedAt).toLocaleDateString()}),a.jsx(u.pj,{className:"text-right",children:a.jsx(c.z,{variant:"ghost",size:"sm",children:"Edit"})})]},e.id))})]})})]}),a.jsx(g,{open:x,onOpenChange:f,onSuccess:b})]})}},35090:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var a=t(27685),r=t(31727);t(83810);var i=t(4120);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return a.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},84177:(e,s,t)=>{"use strict";t.d(s,{$N:()=>x,Be:()=>f,Vq:()=>o,cN:()=>p,cZ:()=>m,fK:()=>u});var a=t(27685),r=t(35639),i=t(54654),n=t(83810),l=t(4120);let o=r.fC;r.xz;let d=r.h_;r.x8;let c=n.forwardRef(({className:e,...s},t)=>a.jsx(r.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));c.displayName=r.aV.displayName;let m=n.forwardRef(({className:e,children:s,...t},n)=>(0,a.jsxs)(d,{children:[a.jsx(c,{}),(0,a.jsxs)(r.VY,{ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(i.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=r.VY.displayName;let u=({className:e,...s})=>a.jsx("div",{className:(0,l.cn)("flexflex-col space-y-1.5 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let p=({className:e,...s})=>a.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});p.displayName="DialogFooter";let x=n.forwardRef(({className:e,...s},t)=>a.jsx(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));x.displayName=r.Dx.displayName;let f=n.forwardRef(({className:e,...s},t)=>a.jsx(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));f.displayName=r.dk.displayName},57869:(e,s,t)=>{"use strict";t.d(s,{_:()=>l});var a=t(27685),r=t(73891),i=t(83810),n=t(4120);let l=i.forwardRef(({className:e,...s},t)=>a.jsx(r.f,{ref:t,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));l.displayName=r.f.displayName},25277:(e,s,t)=>{"use strict";t.d(s,{RM:()=>o,SC:()=>d,iA:()=>n,pj:()=>m,ss:()=>c,xD:()=>l});var a=t(27685),r=t(83810),i=t(4120);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let l=r.forwardRef(({className:e,...s},t)=>a.jsx("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...s}));o.displayName="TableBody",r.forwardRef(({className:e,...s},t)=>a.jsx("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));d.displayName="TableRow";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));c.displayName="TableHead";let m=r.forwardRef(({className:e,...s},t)=>a.jsx("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));m.displayName="TableCell",r.forwardRef(({className:e,...s},t)=>a.jsx("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},39881:(e,s,t)=>{"use strict";t.d(s,{x:()=>r});class a{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,s={}){let t="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");t&&a&&(s.headers={...s.headers,"X-Demo-Tenant-Id":a});letr=`${this.baseUrl}${e}`,i={"Content-Type":"application/json",...s.headers};this.token&&(i.Authorization=`Bearer ${this.token}`),this.apiKey&&(i["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...s,headers:i}),t=await e.json();if(!e.ok)return{error:{code:t.error?.code||"UNKNOWN_ERROR",message:t.error?.message||"An error occurred"}};return{data:t}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,s){return this.request(e,{method:"POST",body:s?JSON.stringify(s):void 0})}async put(e,s){return this.request(e,{method:"PUT",body:s?JSON.stringify(s):void 0})}async patch(e,s){return this.request(e,{method:"PATCH",body:s?JSON.stringify(s):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let r=new a},81088:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
/app/apps/web/.next/server/app/(dashboard)/settings/dnc/page.js:(()=>{var e={};e.id=807,e.ids=[807],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49364:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(59441),a=s(1498),n=s(6580),o=s.n(n),i=s(15511),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d=["",{children:["(dashboard)",{children:["settings",{children:["dnc",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,76497)),"/app/apps/web/src/app/(dashboard)/settings/dnc/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/settings/dnc/page.tsx"],p="/(dashboard)/settings/dnc/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/settings/dnc/page",pathname:"/settings/dnc",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},36618:(e,t,s)=>{Promise.resolve().then(s.bind(s,74389))},74389:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(27685),a=s(87109),n=s(81088),o=s(35943),i=s(83810),l=s(35090),d=s(4283),c=s(3920),p=s(25277),u=s(39881);function h(){let[e,t]=(0,i.useState)([]),[s,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{x()},[]);let x=async()=>{h(!0);try{let e=await u.x.get("/api/v1/compliance/dnc-lists");e.data?.data&&t(e.data.data)}catch(e){console.error("Failed to load DNC lists:",e)}finally{h(!1)}},m=async e=>{if(confirm("Are you sure you want to delete this DNC list? This action cannot be undone."))try{let t=await u.x.delete(`/api/v1/compliance/dnc-lists/${e}`);t.error?alert(`Failed to delete DNC list: ${t.error.message}`):x()}catch(e){alert(`Failed to delete DNC list: ${e instanceof Error?e.message:"Unknown error"}`)}};return(0,r.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Do Not Call Lists"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage DNC lists and compliance"})]}),(0,r.jsxs)(d.z,{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.txt",e.onchange=e=>{let t=e.target.files?.[0];t&&alert(`DNC list upload functionality coming soon. Selected file: ${t.name}`)},e.click()},children:[r.jsx(a.Z,{className:"mr-2 h-4 w-4"}),"Upload List"]})]}),(0,r.jsxs)(c.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,r.jsxs)(c.Ol,{className:"flex-shrink-0",children:[r.jsx(c.ll,{children:"DNC Lists"}),r.jsx(c.SZ,{children:"View and manage your Do Not Call lists"})]}),r.jsx(c.aY,{className:"flex-1 overflow-y-auto min-h-0",children:s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(n.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No DNC lists found"}):(0,r.jsxs)(p.iA,{children:[r.jsx(p.xD,{children:(0,r.jsxs)(p.SC,{children:[r.jsx(p.ss,{children:"Name"}),r.jsx(p.ss,{children:"Type"}),r.jsx(p.ss,{children:"Entries"}),r.jsx(p.ss,{children:"Status"}),r.jsx(p.ss,{children:"Created"}),r.jsx(p.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(p.RM,{children:e.map(e=>(0,r.jsxs)(p.SC,{children:[r.jsx(p.pj,{className:"font-medium",children:e.name}),r.jsx(p.pj,{children:r.jsx(l.C,{variant:"outline",children:e.type.toLowerCase()})}),r.jsx(p.pj,{children:e.entryCount.toLocaleString()}),r.jsx(p.pj,{children:r.jsx(l.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),r.jsx(p.pj,{children:new Date(e.createdAt).toLocaleDateString()}),r.jsx(p.pj,{className:"text-right",children:r.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>m(e.id),children:r.jsx(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},35090:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var r=s(27685),a=s(31727);s(83810);var n=s(4120);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...s}){return r.jsx("div",{className:(0,n.cn)(o({variant:t}),e),...s})}},25277:(e,t,s)=>{"use strict";s.d(t,{RM:()=>l,SC:()=>d,iA:()=>o,pj:()=>p,ss:()=>c,xD:()=>i});var r=s(27685),a=s(83810),n=s(4120);let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));o.displayName="Table";let i=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let p=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));p.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let s="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");s&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let a=`${this.baseUrl}${e}`,n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:n}),s=await e.json();if(!e.ok)return{error:{code:s.error?.code||"UNKNOWN_ERROR",message:s.error?.message||"An error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new r},81088:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
/app/apps/web/.next/server/app/(dashboard)/tools/recording-analyzer/page.js:(()=>{var e={};e.id=364,e.ids=[364],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},82589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(59441),a=r(1498),n=r(6580),l=r.n(n),i=r(15511),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(dashboard)",{children:["tools",{children:["recording-analyzer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25109)),"/app/apps/web/src/app/(dashboard)/tools/recording-analyzer/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/tools/recording-analyzer/page.tsx"],u="/(dashboard)/tools/recording-analyzer/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/tools/recording-analyzer/page",pathname:"/tools/recording-analyzer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12158:(e,t,r)=>{Promise.resolve().then(r.bind(r,8008))},8008:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RecordingAnalyzer:()=>I});var s=r(27685),a=r(83810);let n=[{key:"ACA",label:"ACA Health",description:"Enrollments, carrier, follow-ups, billable, transcript optional."},{key:"FINAL_EXPENSE",label:"Final Expense",description:"Apps, quotes, premium, carrier, follow-ups, billable, transcript optional."},{key:"MEDICARE",label:"Medicare",description:"Enrollments, carrier, follow-ups, billable, transcript optional."}],l={FINAL_EXPENSE:[{key:"Applications Submitted",label:"Applications Submitted",defaultChecked:!0},{key:"Monthly Premium (if app submitted)",label:"Monthly Premium (if app submitted)",defaultChecked:!0},{key:"Carrier (If app submitted)",label:"Carrier (If app submitted)",defaultChecked:!0},{key:"Quotes",label:"Quotes",defaultChecked:!0},{key:"Monthly Premium (If Quote Provided)",label:"Monthly Premium (If Quote Provided)",defaultChecked:!0},{key:"Carrier (If Quote Provided)",label:"Carrier (If Quote Provided)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],ACA:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],MEDICARE:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}]};var i=r(39881);async function o(e,t){let r=await i.x.post("/api/v1/recording-analysis/presign",{filename:e,contentType:t});if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from presign");return r.data}async function d(e,t){let r=await fetch(e,{method:"PUT",headers:{"Content-Type":t.type||"application/octet-stream"},body:t});if(!r.ok)throw Error(`Upload failed: ${r.status}`)}async function c(e){let t=await i.x.post("/api/v1/recording-analysis/analyze",e);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from analyze");return t.data}async function u(e){let t=await i.x.get(`/api/v1/recording-analysis/batch/${e}`);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from batch");return t.data}async function m(e,t){let r=await i.x.post(`/api/v1/recording-analysis/${e}/rerun`,t);if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from rerun");return r.data}async function x(e){let t="a1b2c3d4e5f67890",r={};t&&(r["x-api-key"]=t);let s=await fetch(`http://45.32.213.201:3001/api/v1/recording-analysis/batch/${e}/csv`,{headers:r});if(!s.ok)throw Error(await s.text());return await s.text()}var f=r(3920),p=r(74550),h=r(4283),g=r(14887),j=r(57869),b=r(44517),v=r(35090),y=r(25277),N=r(84177),w=r(71499);function k(...e){return e.filter(Boolean).join(" ")}function C(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function R(e){let t=Math.round(100*C(e));return`${t}%`}function S({status:e}){let t=(e||"").toLowerCase();return s.jsx(v.C,{variant:"done"===t?"default":"failed"===t?"destructive":"analyzing"===t||"transcribing"===t?"secondary":"outline",children:e})}function A({extracted:e}){let t=e?.Billable??e?.["Billable (Y/N)"]??e?.billable??e?.isBillable,r="string"==typeof t?t.trim().toUpperCase():t;return"Y"===r||!0===r?s.jsx(v.C,{className:"bg-emerald-600 text-white",children:"Billable"}):"N"===r||!1===r?s.jsx(v.C,{variant:"destructive",children:"Non-billable"}):s.jsx(v.C,{variant:"outline",children:"Billable: —"})}function E({value:e}){return null==e?s.jsx("div",{className:"h-2 w-full rounded-fullbg-muted",children:s.jsx("div",{className:"h-2 rounded-full bg-muted",style:{width:"0%"}})}):(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:s.jsx("div",{className:"h-2 bg-foreground/70",style:{width:R(e)}})}),(0,s.jsxs)("div",{className:"text-[11px] text-muted-foreground",children:[R(e)," confidence"]})]})}function I(){let[e,t]=a.useState("ACA"),r=a.useMemo(()=>l[e],[e]),i=a.useMemo(()=>new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)),[r]),[R,I]=a.useState(i),[P,z]=a.useState(""),[F,M]=a.useState([]),[U,T]=a.useState(!1),[L,_]=a.useState(null),[V,D]=a.useState([]),[B,$]=a.useState(null),[q,K]=a.useState(!1),[Y,O]=a.useState(null),[G,Q]=a.useState(!1),[W,Z]=a.useState(null),[X,H]=a.useState(new Set),[J,ee]=a.useState(!1);async function et(e){let t=await u(e);return D(t.items),t.items.length>0&&t.items.every(e=>{let t=(e.status||"").toLowerCase();return"done"===t||"failed"===t})}async function er(e){K(!0);try{if(await et(e)){K(!1);return}}catch(e){K(!1),$(e?.message||"Failed to fetch batch");return}let t=setInterval(async()=>{try{await et(e)&&(clearInterval(t),K(!1))}catch(e){clearInterval(t),K(!1),$(e?.message||"Failed to fetch batch")}},1500)}async function es(){$(null);let t=P.split(/\r?\n|,|\s+/g).map(e=>e.trim()).filter(Boolean).filter(e=>/^https?:\/\//i.test(e));if(0===t.length&&0===F.length){$("Add at least one recording URL or upload at least one audio file.");return}let r=Array.from(R);if(0===r.length){$("Select at least one stat/field to extract.");return}T(!0);try{let s=[];for(let e of F){let{storageKey:t,url:r}=await o(e.name,e.type||"application/octet-stream");await d(r,e),s.push({storageKey:t,filename:e.name})}let a=await c({vertical:e,selectedFields:r,urls:t,uploads:s});_(a.batchId),D([]),await er(a.batchId)}catch(e){$(e?.message||"Failed to start analysis")}finally{T(!1)}}async function ea(){if(!W)return;let e=Array.from(X);if(!e.length){$("Select at least one field for re-run.");return}ee(!0),$(null);try{let t=await m(W.id,{selectedFields:e});Q(!1),Z(null),_(t.batchId),D([]),await er(t.batchId)}catch(e){$(e?.message||"Failed to re-run")}finally{ee(!1)}}async function en(){if(!L){$("No batch to export yet.");return}try{let e=await x(L),t=new Blob([e],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`recording-analysis-${L}.csv`,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}catch(e){$(e?.message||"CSV export failed")}}a.useEffect(()=>{I(new Set(i)),$(null),M([]),z(""),D([]),_(null),O(null)},[e,i]);let el=n.find(t=>t.key===e);return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Recording Analyzer"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Paste recording URLs or upload audio, select a vertical and fields, and get structured results per recording."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,s.jsxs)(v.C,{variant:"outline",className:"font-mono",children:["Batch: ",L.slice(0,8),"…"]}),q&&s.jsx(v.C,{variant:"secondary",children:"Live updating…"}),s.jsx(h.z,{variant:"outline",onClick:en,disabled:!L,children:"Export CSV"})]})]}),B&&s.jsx(w.bZ,{className:"border-destructive/50",children:s.jsx("div",{className:"text-sm text-destructive",children:B})}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[s.jsx(f.Ol,{children:s.jsx(f.ll,{className:"text-base",children:"1) Select Vertical"})}),s.jsx(f.aY,{children:(0,s.jsxs)(p.mQ,{value:e,onValueChange:e=>t(e),children:[(0,s.jsxs)(p.dr,{className:"grid grid-cols-3 w-full",children:[s.jsx(p.SP,{value:"ACA",children:"ACA Health"}),s.jsx(p.SP,{value:"FINAL_EXPENSE",children:"Final Expense"}),s.jsx(p.SP,{value:"MEDICARE",children:"Medicare"})]}),s.jsx(p.nU,{value:e,className:"pt-4",children:(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{className:"font-medium text-foreground",children:[el?.label,":"]})," ",el?.description]})})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[s.jsx(f.Ol,{children:s.jsx(f.ll,{className:"text-base",children:"2) Add Recordings"})}),(0,s.jsxs)(f.aY,{className:"space-y-5",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(j._,{children:"Recording URLs"}),s.jsx("textarea",{value:P,onChange:e=>z(e.target.value),placeholder:"Paste one URL per line (or space/comma separated)…",className:k("min-h-[140px] w-full rounded-md border bg-background px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring")}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Supports multiple URLs. We’ll process each URL as a separate recording."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(j._,{children:"Upload audio (mp3/wav)"}),s.jsx(g.I,{type:"file",accept:".wav,.mp3,audio/wav,audio/mpeg",multiple:!0,onChange:e=>(function(e){if(!e)return;let t=[];for(let r of Array.from(e))(/audio\/(wav|mpeg|mp3|x-wav|ogg|opus)/i.test(r.type)||/\.(wav|mp3|ogg|opus)$/i.test(r.name))&&t.push(r);M(e=>[...e,...t].slice(0,20))})(e.target.files)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Upload uses a presigned PUT URL (S3/Spaces). If presign isn’t wired up yet, URL paste still works."}),F.length>0&&s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"File"}),s.jsx(y.ss,{className:"text-right",children:"Size"}),s.jsx(y.ss,{className:"text-right",children:"Remove"})]})}),s.jsx(y.RM,{children:F.map((e,t)=>(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{className:"font-medium",children:e.name}),s.jsx(y.pj,{className:"text-right text-muted-foreground",children:function(e){if(!e&&0!==e)return"";let t=["B","KB","MB","GB"],r=e,s=0;for(;r>=1024&&s<t.length-1;)r/=1024,s++;return`${r.toFixed(0===s?0:2)} ${t[s]}`}(e.size)}),s.jsx(y.pj,{className:"text-right",children:s.jsx(h.z,{variant:"ghost",size:"sm",onClick:()=>{M(e=>e.filter((e,r)=>r!==t))},children:"Remove"})})]},`${e.name}-${t}`))})]})})]})]})]}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[(0,s.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between gap-3",children:[s.jsx(f.ll,{className:"text-base",children:"3) Choose Stats To Extract"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)))},children:"Defaults"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.map(e=>e.key)))},children:"All"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set)},children:"None"})]})]}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,s.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",R.has(e.key)?"bg-muted/50":"bg-background"),children:[s.jsx(b.X,{checked:R.has(e.key),onCheckedChange:()=>{var t;return t=e.key,void I(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"text-sm font-medium",children:e.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},e.key))}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4 border-t pt-4",children:[(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Selected: ",s.jsx("span",{className:"font-mono",children:R.size})]}),s.jsx(h.z,{onClick:es,disabled:U,className:"min-w-[180px]",children:U?"Starting…":"Analyze Recordings"})]})]})]})]}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[(0,s.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(f.ll,{className:"text-base",children:"Results"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Click ",s.jsx("span",{className:"font-medium",children:"View"})," for details, audio playback, confidences, and re-run."]})]}),s.jsx(f.aY,{children:0===V.length?s.jsx("div",{className:"text-sm text-muted-foreground",children:"No results yet. Start an analysis to see per-recording results here."}):s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"Status"}),s.jsx(y.ss,{children:"Billable"}),s.jsx(y.ss,{children:"Source"}),s.jsx(y.ss,{children:"Vertical"}),s.jsx(y.ss,{children:"Extracted"}),s.jsx(y.ss,{className:"text-right",children:"Actions"})]})}),s.jsx(y.RM,{children:V.map(e=>(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{children:s.jsx(S,{status:e.status})}),s.jsx(y.pj,{children:s.jsx(A,{extracted:e.extracted})}),s.jsx(y.pj,{className:"max-w-[420px] truncate",children:"url"===e.sourceType?s.jsx("span",{className:"font-mono text-xs",children:e.sourceUrl}):s.jsx("span",{className:"text-sm",children:e.filename||e.storageKey})}),s.jsx(y.pj,{children:s.jsx(v.C,{variant:"outline",children:e.vertical})}),(0,s.jsxs)(y.pj,{className:"text-muted-foreground text-sm",children:[e.extracted?`${Object.keys(e.extracted).length} fields`:"—",e.error?(0,s.jsxs)("span",{className:"text-destructive",children:[" • ",e.error]}):null]}),(0,s.jsxs)(y.pj,{className:"text-right space-x-2",children:[s.jsx(h.z,{variant:"outline",size:"sm",onClick:()=>O(e),children:"View"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:()=>(function(e){Z(e);let t=Array.isArray(e.selectedFields)?e.selectedFields:[];H(new Set(t.length?t:Array.from(i))),Q(!0)})(e),children:"Re-run"})]})]},e.id))})]})})})]}),s.jsx(N.Vq,{open:!!Y,onOpenChange:e=>!e&&O(null),children:(0,s.jsxs)(N.cZ,{className:"max-w-4xl",children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Recording Result"})}),Y&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"ID"}),s.jsx("div",{className:"font-mono text-xs",children:Y.id})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(S,{status:Y.status}),s.jsx(A,{extracted:Y.extracted})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Audio"}),"url"===Y.sourceType&&Y.sourceUrl?s.jsx("audio",{controls:!0,className:"w-full",children:s.jsx("source",{src:Y.sourceUrl})}):Y.playbackUrl?s.jsx("audio",{controls:!0,className:"w-full",children:s.jsx("source",{src:Y.playbackUrl})}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No playback URL available yet for uploads. (If you want, we can add an API endpoint that returns a signed GET URL for storageKey.)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Extracted Fields"}),Y.extracted?s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"Field"}),s.jsx(y.ss,{children:"Value"}),s.jsx(y.ss,{className:"w-[220px]",children:"Confidence"})]})}),s.jsx(y.RM,{children:Object.keys(Y.extracted).map(e=>{let t=Y.extracted?.[e],r=function(e,t){if(!e)return null;let r=String(t),s=r.toLowerCase(),a=e?._confidence?.[r];if("number"==typeof a)return C(a);let n=e?.confidence?.[r];if("number"==typeof n)return C(n);let l=e?.[`${r}_confidence`];if("number"==typeof l)return C(l);let i=e?.[`${s}_confidence`];return"number"==typeof i?C(i):null}(Y.extracted,e);return(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{className:"font-medium",children:e}),s.jsx(y.pj,{className:"text-sm",children:"object"==typeof t?s.jsx("pre",{className:"text-xs bg-muted/30 border rounded p-2 overflow-auto max-h-[160px]",children:JSON.stringify(t,null,2)}):String(t??"—")}),s.jsx(y.pj,{children:s.jsx(E,{value:r})})]},e)})})]})}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No extracted JSON yet."})]}),Y.transcript&&(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transcript"}),s.jsx("pre",{className:"max-h-[360px] overflow-autorounded-md border bg-muted/30 p-3 text-xs whitespace-pre-wrap",children:Y.transcript})]})]})]})}),s.jsx(N.Vq,{open:G,onOpenChange:e=>!e&&Q(!1),children:(0,s.jsxs)(N.cZ,{className:"max-w-3xl",children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Re-run extraction with different fields"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"This will create a new batch using the same recording but different selected fields."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,s.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",X.has(e.key)?"bg-muted/50":"bg-background"),children:[s.jsx(b.X,{checked:X.has(e.key),onCheckedChange:()=>H(t=>{let r=new Set(t);return r.has(e.key)?r.delete(e.key):r.add(e.key),r}),className:"mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"text-sm font-medium",children:e.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},`rerun-${e.key}`))}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[s.jsx(h.z,{variant:"outline",onClick:()=>Q(!1),disabled:J,children:"Cancel"}),s.jsx(h.z,{onClick:ea,disabled:J,children:J?"Re-running…":"Re-run"})]})]})]})})]})}},71499:(e,t,r)=>{"use strict";r.d(t,{X:()=>d,bZ:()=>o});var s=r(27685),a=r(31727),n=r(83810),l=r(4120);let i=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,l.cn)(i({variant:t}),e),...r}));o.displayName="Alert",n.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=n.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},74550:(e,t,r)=>{"use strict";r.d(t,{SP:()=>d,dr:()=>o,mQ:()=>i,nU:()=>c});var s=r(27685),a=r(57045),n=r(83810),l=r(4120);let i=a.fC,o=n.forwardRef(({className:e,...t},r)=>s.jsx(a.aV,{ref:r,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=a.aV.displayName;let d=n.forwardRef(({className:e,...t},r)=>s.jsx(a.xz,{ref:r,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=a.xz.displayName;let c=n.forwardRef(({className:e,...t},r)=>s.jsx(a.VY,{ref:r,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-nonefocus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=a.VY.displayName},25109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(36491),a=r(30599);let n=(0,a.createProxy)(String.raw`/app/apps/web/src/components/recording-analyzer/RecordingAnalyzer.tsx`),{__esModule:l,$$typeof:i}=n;n.default;let o=(0,a.createProxy)(String.raw`/app/apps/web/src/components/recording-analyzer/RecordingAnalyzer.tsx#RecordingAnalyzer`);function d(){return s.jsx(o,{})}},57045:(e,t,r)=>{"use strict";r.d(t,{VY:()=>W,aV:()=>G,fC:()=>O,xz:()=>Q});var s=r(83810),a=r(2724),n=r(6872),l=r(75262),i=r(68118),o=r(99892),d=r(29548),c=r(82013),u=r(39294),m=r(7079),x=r(27685),f="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[g,j,b]=(0,l.B)(h),[v,y]=(0,n.b)(h,[b]),[N,w]=v(h),k=s.forwardRef((e,t)=>(0,x.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(C,{...e,ref:t})})}));k.displayName=h;var C=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:l=!1,dir:o,currentTabStopId:g,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:v,onEntryFocus:y,preventScrollOnEntryFocus:w=!1,...k}=e,C=s.useRef(null),R=(0,i.e)(t,C),S=(0,m.gm)(o),[A,I]=(0,u.T)({prop:g,defaultProp:b??null,onChange:v,caller:h}),[P,z]=s.useState(!1),F=(0,c.W)(y),M=j(r),U=s.useRef(!1),[T,L]=s.useState(0);return s.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(f,F),()=>e.removeEventListener(f,F)},[F]),(0,x.jsx)(N,{scope:r,orientation:n,dir:S,loop:l,currentTabStopId:A,onItemFocus:s.useCallback(e=>I(e),[I]),onItemShiftTab:s.useCallback(()=>z(!0),[]),onFocusableItemAdd:s.useCallback(()=>L(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>L(e=>e-1),[]),children:(0,x.jsx)(d.WV.div,{tabIndex:P||0===T?-1:0,"data-orientation":n,...k,ref:R,style:{outline:"none",...e.style},onMouseDown:(0,a.Mj)(e.onMouseDown,()=>{U.current=!0}),onFocus:(0,a.Mj)(e.onFocus,e=>{let t=!U.current;if(e.target===e.currentTarget&&t&&!P){let t=new CustomEvent(f,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=M().filter(e=>e.focusable);E([e.find(e=>e.active),e.find(e=>e.id===A),...e].filter(Boolean).map(e=>e.ref.current),w)}}U.current=!1}),onBlur:(0,a.Mj)(e.onBlur,()=>z(!1))})})}),R="RovingFocusGroupItem",S=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:l=!1,tabStopId:i,children:c,...u}=e,m=(0,o.M)(),f=i||m,p=w(R,r),h=p.currentTabStopId===f,b=j(r),{onFocusableItemAdd:v,onFocusableItemRemove:y,currentTabStopId:N}=p;return s.useEffect(()=>{if(n)return v(),()=>y()},[n,v,y]),(0,x.jsx)(g.ItemSlot,{scope:r,id:f,focusable:n,active:l,children:(0,x.jsx)(d.WV.span,{tabIndex:h?0:-1,"data-orientation":p.orientation,...u,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{n?p.onItemFocus(f):e.preventDefault()}),onFocus:(0,a.Mj)(e.onFocus,()=>p.onItemFocus(f)),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){p.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return A[a]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();letr=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=p.loop?function(e,t){return e.map((r,s)=>e[(t+s)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>E(r))}}),children:"function"==typeof c?c({isCurrentTabStop:h,hasTabStop:null!=N}):c})})});S.displayName=R;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function E(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var I=r(1090),P="Tabs",[z,F]=(0,n.b)(P,[y]),M=y(),[U,T]=z(P),L=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:a,defaultValue:n,orientation:l="horizontal",dir:i,activationMode:c="automatic",...f}=e,p=(0,m.gm)(i),[h,g]=(0,u.T)({prop:s,onChange:a,defaultProp:n??"",caller:P});return(0,x.jsx)(U,{scope:r,baseId:(0,o.M)(),value:h,onValueChange:g,orientation:l,dir:p,activationMode:c,children:(0,x.jsx)(d.WV.div,{dir:p,"data-orientation":l,...f,ref:t})})});L.displayName=P;var _="TabsList",V=s.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...a}=e,n=T(_,r),l=M(r);return(0,x.jsx)(k,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:s,children:(0,x.jsx)(d.WV.div,{role:"tablist","aria-orientation":n.orientation,...a,ref:t})})});V.displayName=_;var D="TabsTrigger",B=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,disabled:n=!1,...l}=e,i=T(D,r),o=M(r),c=K(i.baseId,s),u=Y(i.baseId,s),m=s===i.value;return(0,x.jsx)(S,{asChild:!0,...o,focusable:!n,active:m,children:(0,x.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...l,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:(0,a.Mj)(e.onFocus,()=>{let e="manual"!==i.activationMode;m||n||!e||i.onValueChange(s)})})})});B.displayName=D;var $="TabsContent",q=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,forceMount:n,children:l,...i}=e,o=T($,r),c=K(o.baseId,a),u=Y(o.baseId,a),m=a===o.value,f=s.useRef(m);return s.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(I.z,{present:n||m,children:({present:r})=>(0,x.jsx)(d.WV.div,{"data-state":m?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&l})})});function K(e,t){return`${e}-trigger-${t}`}function Y(e,t){return`${e}-content-${t}`}q.displayName=$;var O=L,G=V,Q=B,W=q}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[289,957,856,838,491,439,560,201],()=>r(82589));module.exports=s})();
/app/apps/web/.next/server/chunks/560.js:exports.id=560,exports.ids=[560],exports.modules={48802:(e,t,a)=>{Promise.resolve().then(a.bind(a,34208))},16278:(e,t,a)=>{Promise.resolve().then(a.bind(a,96500))},96373:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,49489,23)),Promise.resolve().then(a.t.bind(a,76225,23)),Promise.resolve().then(a.t.bind(a,85964,23)),Promise.resolve().then(a.t.bind(a,5804,23)),Promise.resolve().then(a.t.bind(a,27255,23)),Promise.resolve().then(a.t.bind(a,1021,23))},34208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var s=a(27685),l=a(61964),r=a(73972),n=a(3630),i=a(13161);function c(){let e=new Date().getFullYear();return s.jsx("footer",{className:"border-t bg-background",children:s.jsx("div",{className:"container mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["\xa9 ",e," Hopwhistle. All rights reserved."]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,s.jsxs)(i.default,{href:"/legal/privacy",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(l.Z,{className:"h-4 w-4"}),"Privacy Policy"]}),(0,s.jsxs)(i.default,{href:"/legal/terms",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Terms ofService"]}),(0,s.jsxs)(i.default,{href:"/legal/data-retention",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Data Retention"]}),(0,s.jsxs)(i.default,{href:"/legal/call-recording",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Call Recording"]}),(0,s.jsxs)(i.default,{href:"/legal/dpa",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(n.Z,{className:"h-4 w-4"}),"DPA"]})]})]})})})}var o=a(73045),d=a(72742),x=a(28369),m=a(99596),h=a(17563),u=a(88351),b=a(83810),g=a(4283);function f(){let{theme:e,setTheme:t}=(0,u.F)(),[a,l]=b.useState(!1);return(b.useEffect(()=>{l(!0)},[]),a)?(0,s.jsxs)(g.z,{variant:"ghost",size:"icon",onClick:()=>t("dark"===e?"light":"dark"),children:[s.jsx(m.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(h.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),s.jsx("span",{className:"sr-only",children:"Toggle theme"})]}):null}var p=a(14887);function w(){return(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-6",children:[s.jsx("div",{className:"flex flex-1 items-center gap-4",children:(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[s.jsx(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(p.I,{type:"search",id:"global-search",name:"global-search",placeholder:"Search calls, numbers, campaigns...",className:"pl-10"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(g.z,{variant:"ghost",size:"icon",children:s.jsx(d.Z,{className:"h-5 w-5"})}),s.jsx(f,{}),s.jsx(g.z,{variant:"ghost",size:"icon",children:s.jsx(x.Z,{className:"h-5 w-5"})})]})]})}var v=a(55165),j=a(53639),y=a(77921),N=a(75827),k=a(26072),C=a(87905),Z=a(90449),S=a(90584),z=a(92015),P=a(61099),T=a(6620),$=a(90157),I=a(35817),D=a(4120);let O=[{name:"Dashboard",href:"/dashboard",icon:v.Z},{name:"Conductor",href:"/bot",icon:j.Z,title:"Outbound calling & live transfer orchestration"},{name:"Phone",href:"/phone",icon:y.Z},{name:"Numbers",href:"/numbers",icon:N.Z},{name:"Campaigns",href:"/campaigns",icon:k.Z},{name:"Flows",href:"/flows",icon:C.Z},{name:"Calls",href:"/calls",icon:Z.Z},{name:"Billing",href:"/billing",icon:S.Z},{name:"Settings",href:"/settings",icon:z.Z}],E=[{name:"Recording Analyzer",href:"/tools/recording-analyzer",icon:Z.Z}],A=[{name:"Users",href:"/settings/users",icon:P.Z},{name:"Webhooks",href:"/settings/webhooks",icon:r.Z},{name:"DNC Lists",href:"/settings/dnc",icon:l.Z},{name:"Quotas & Budgets",href:"/settings/quotas",icon:T.Z}];function F(){let e=(0,I.usePathname)();return(0,s.jsxs)("div",{className:"flex h-full w-64 flex-col border-r bg-card",children:[s.jsx("div",{className:"flex h-16 items-center border-b px-6",children:s.jsx($.default,{src:"/hopwhistle.png",alt:"Hopwhistle",width:120,height:40,className:"h-8 w-auto",priority:!0})}),(0,s.jsxs)("nav",{className:"flex-1 space-y-1 overflow-y-auto p-4",children:[O.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,title:t.title,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)}),(0,s.jsxs)("div",{className:"pt-4",children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold uppercase text-muted-foreground",children:"Tools"}),E.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)})]}),(0,s.jsxs)("div",{className:"pt-4",children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold uppercase text-muted-foreground",children:"Admin"}),A.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)})]})]})]})}var M=a(64598);function H({children:e}){return s.jsx(M.ZB,{children:(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[s.jsx(F,{}),(0,s.jsxs)("div",{className:"flexflex-1 flex-col overflow-hidden",children:[s.jsx(w,{}),s.jsx("main",{className:"flex-1 overflow-auto bg-background p-6",children:s.jsx("div",{className:"h-full overflow-auto",children:e})}),s.jsx(c,{})]}),s.jsx(M.gw,{})]})})}},14208:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var s=a(27685),l=a(4610),r=a(83810),n=a(14581),i=a(4120);let c=[{value:"available",label:"Available",color:"text-emerald-400",bgColor:"bg-emerald-500",description:"Ready to receive calls"},{value:"away",label:"Away",color:"text-amber-400",bgColor:"bg-amber-500",description:"Temporarily unavailable"},{value:"dnd",label:"Do Not Disturb",color:"text-red-400",bgColor:"bg-red-500",description:"No calls or notifications"},{value:"offline",label:"Offline",color:"text-gray-400",bgColor:"bg-gray-500",description:"Not logged in"}];function o(){let{agentStatus:e,setAgentStatus:t,currentCall:a}=(0,n.zs)(),[o,d]=(0,r.useState)(!1),x=(0,r.useRef)(null),m=c.find(t=>t.value===e)??c[3];(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=(0,r.useCallback)(e=>{a&&"ended"!==a.state||(t(e),d(!1))},[a,t]),u=a&&"ended"!==a.state;return(0,s.jsxs)("div",{className:"relative",ref:x,children:[(0,s.jsxs)("button",{onClick:()=>d(!o),disabled:!!u,className:(0,i.cn)("flex items-center gap-2 px-2 py-1 rounded-lg","text-xs font-medium transition-all","hover:bg-white/5",u&&"opacity-50 cursor-not-allowed"),children:[s.jsx("span",{className:(0,i.cn)("w-2 h-2 rounded-full",m.bgColor)}),s.jsx("span",{className:m.color,children:u?"On Call":m.label}),!u&&s.jsx(l.Z,{className:(0,i.cn)("w-3 h-3 text-gray-400 transition-transform",o&&"rotate-180")})]}),o&&!u&&s.jsx("div",{className:(0,i.cn)("absolute top-full left-0 mt-2 w-56 z-50","bg-slate-900 border border-white/10 rounded-xl","shadow-xl shadow-black/50 overflow-hidden","animate-in fade-in-0 zoom-in-95 duration-150"),children:c.map(t=>(0,s.jsxs)("button",{onClick:()=>h(t.value),className:(0,i.cn)("w-full px-4 py-3 flex items-center gap-3 text-left","hover:bg-white/5 transition-colors",e===t.value&&"bg-white/5"),children:[s.jsx("span",{className:(0,i.cn)("w-2.5 h-2.5 rounded-full",t.bgColor)}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:(0,i.cn)("text-sm font-medium",t.color),children:t.label}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),e===t.value&&s.jsx("span",{className:"ml-auto text-cyan-400 text-xs",children:"✓"})]},t.value))})]})}},16340:(e,t,a)=>{"use strict";a.d(t,{c:()=>m});var s=a(27685),l=a(36168),r=a(77921),n=a(83810),i=a(14581),c=a(4283),o=a(4120);let d=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],x={1:[697,1209],2:[697,1336],3:[697,1477],4:[770,1209],5:[770,1336],6:[770,1477],7:[852,1209],8:[852,1336],9:[852,1477],"*":[941,1209],0:[941,1336],"#":[941,1477]};function m(){let{makeCall:e,sendDTMF:t,currentCall:a,isConnecting:m}=(0,i.zs)(),[h,u]=(0,n.useState)(""),b=(0,n.useRef)(null),g=(0,n.useCallback)(e=>{try{if(!b.current){let e=window.AudioContext||window.webkitAudioContext;e&&(b.current=new e)}let t=b.current;if(!t)return;let a=x[e];if(!a)return;let s=t.createOscillator(),l=t.createOscillator(),r=t.createGain();s.type="sine",l.type="sine",s.frequency.value=a[0],l.frequency.value=a[1],r.gain.value=.1,s.connect(r),l.connect(r),r.connect(t.destination),s.start(),l.start(),setTimeout(()=>{s.stop(),l.stop()},150)}catch{}},[]),f=(0,n.useCallback)(e=>{a&&"ended"!==a.state?t(e):u(t=>t+e),g(e)},[a,t,g]),p=(0,n.useCallback)(()=>{u(e=>e.slice(0,-1))},[]),w=(0,n.useCallback)(()=>{h&&!m&&(e(h),u(""))},[h,m,e]),v=(0,n.useCallback)(e=>{/^[0-9*#]$/.test(e.key)?f(e.key):"Backspace"===e.key?p():"Enter"===e.key&&h&&w()},[f,p,w,h]);return(0,s.jsxs)("div",{className:"space-y-4",onKeyDown:v,tabIndex:0,children:[(0,s.jsxs)("div",{className:(0,o.cn)("h-16 px-4 rounded-xl flexitems-center justify-between","bg-white/5 border border-white/10"),children:[s.jsx("input",{type:"text",value:h,onChange:e=>u(e.target.value.replace(/[^0-9+*#()-\s]/g,"")),placeholder:"Enter number...",className:(0,o.cn)("flex-1 bg-transparent text-2xl font-mono text-white","placeholder:text-gray-600 outline-none")}),h&&s.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white transition-colors",children:s.jsx(l.Z,{className:"w-5 h-5"})})]}),h&&s.jsx("p",{className:"text-center text-gray-400 text-sm",children:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`})(h)}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.map(({digit:e,letters:t})=>(0,s.jsxs)("button",{onClick:()=>f(e),className:(0,o.cn)("h-16 rounded-xl flex flex-col items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","border border-transparent hover:border-white/10","transition-all duration-150 ease-out","active:scale-95"),children:[s.jsx("span",{className:"text-2xl text-white font-medium",children:e}),t&&s.jsx("span",{className:"text-[10px] text-gray-500 tracking-widest -mt-0.5",children:t})]},e))}),(0,s.jsxs)(c.z,{onClick:w,disabled:!h||m,className:(0,o.cn)("w-full h-14 rounded-xl text-lg font-medium","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","disabled:opacity-50 disabled:cursor-not-allowed","shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30","transition-all duration-200"),children:[s.jsx(r.Z,{className:"w-5 h-5 mr-2"}),m?"Connecting...":"Call"]})]})}},64598:(e,t,a)=>{"use strict";a.d(t,{gw:()=>W,ZB:()=>N.ZB,zs:()=>N.zs});var s=a(27685),l=a(77921),r=a(92015),n=a(4610),i=a(24427),c=a(54654),o=a(28369),d=a(95101),x=a(22248),m=a(31087),h=a(48984),u=a(83810),b=a(14208),g=a(74854),f=a(85393),p=a(76500),w=a(43301),v=a(71459),j=a(61099),y=a(73045),N=a(14581),k=a(4283),C=a(14887),Z=a(4120);let S=[{id:"1",name:"John Smith",extension:"1001",status:"available"},{id:"2",name:"Jane Doe",extension:"1002",status:"busy"},{id:"3",name:"Bob Wilson",extension:"1003",status:"available"},{id:"4",name:"Alice Brown",extension:"1004",status:"offline"}],z=[{id:"q1",name:"Sales",waitingCalls:2,availableAgents:5},{id:"q2",name:"Support",waitingCalls:5,availableAgents:3},{id:"q3",name:"Billing",waitingCalls:0,availableAgents:2}];function P({onClose:e}){let{transferCall:t}=(0,N.zs)(),[a,r]=(0,u.useState)("agents"),[n,i]=(0,u.useState)(""),[d,x]=(0,u.useState)(""),[m,b]=(0,u.useState)("blind"),g=S.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.extension.includes(n)),f=z.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())),p=(0,u.useCallback)(a=>{t(a.extension,m),e()},[t,m,e]),w=(0,u.useCallback)(a=>{t(`queue:${a.id}`,m),e()},[t,m,e]),v=(0,u.useCallback)(()=>{d&&(t(d,m),e())},[t,d,m,e]),P=(0,u.useCallback)(e=>{i(e.target.value)},[]),T=(0,u.useCallback)(e=>{x(e.target.value)},[]),$=(0,u.useCallback)(t=>{t.target===t.currentTarget&&e()},[e]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:$,role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,Z.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:s.jsx(h.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-white text-lg font-semibold",children:"Transfer Call"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Select a destination"})]})]}),s.jsx(k.z,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-white",children:s.jsx(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>b("blind"),className:(0,Z.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","blind"===m?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Blind Transfer"}),s.jsx("button",{onClick:()=>b("warm"),className:(0,Z.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","warm"===m?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Warm Transfer"})]}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"blind"===m?"Call willbe transferred immediately":"You can speak to the recipient before transferring"})]}),s.jsx("div",{className:"px-6 pt-4",children:s.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["agents","queues","external"].map(e=>(0,s.jsxs)("button",{onClick:()=>r(e),className:(0,Z.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5",a===e?"bg-cyan-500 text-white":"text-gray-400 hover:text-white hover:bg-white/5"),children:["agents"===e&&s.jsx(o.Z,{className:"w-3.5 h-3.5"}),"queues"===e&&s.jsx(j.Z,{className:"w-3.5 h-3.5"}),"external"===e&&s.jsx(l.Z,{className:"w-3.5 h-3.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})}),(0,s.jsxs)("div",{className:"p-6",children:["external"!==a&&(0,s.jsxs)("div",{className:"relative mb-4",children:[s.jsx(y.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx(C.I,{value:n,onChange:P,placeholder:`Search ${a}...`,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),"agents"===a&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[g.map(e=>(0,s.jsxs)("button",{onClick:()=>p(e),disabled:"available"!==e.status,className:(0,Z.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all","available"===e.status?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[s.jsx("div",{className:(0,Z.cn)("w-10 h-10 rounded-full flex items-center justify-center","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:s.jsx(o.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ext. ",e.extension]})]}),s.jsx("span",{className:(0,Z.cn)("text-xs px-2 py-0.5 rounded-full","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:e.status})]},e.id)),0===g.length&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No agents found"})]}),"queues"===a&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[f.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e),disabled:0===e.availableAgents,className:(0,Z.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all",e.availableAgents>0?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center",children:s.jsx(j.Z,{className:"w-5 h-5 text-purple-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:[e.waitingCalls," waiting • ",e.availableAgents," available"]})]})]},e.id)),0===f.length&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No queues found"})]}),"external"===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Phone Number"}),s.jsx(C.I,{value:d,onChange:T,placeholder:"+1 (555) 000-0000",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),(0,s.jsxs)(k.z,{onClick:v,disabled:!d,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600",children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Transfer to ",d||"Number"]})]})]})]})]})}function T(){let{currentCall:e,toggleMute:t,toggleHold:a,hangupCall:l}=(0,N.zs)(),[r,n]=(0,u.useState)(!1),[i,c]=(0,u.useState)(!1),o=e?.isMuted??!1,x=e?.isOnHold??!1,m=(0,u.useCallback)(()=>{t()},[t]),b=(0,u.useCallback)(()=>{a()},[a]),j=(0,u.useCallback)(()=>{l()},[l]),y=(0,u.useCallback)(()=>{n(!0)},[]);return((0,u.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key.toLowerCase()){case"m":m();break;case"h":b();break;case"t":y()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,b,y]),e)?(0,s.jsxs)(s.Fragment,{children:[r&&s.jsx(P,{onClose:()=>n(!1)}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsxs)("button",{onClick:m,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",o?"bg-red-500/20 border-2 border-red-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:o?s.jsx(g.Z,{className:"w-6 h-6 text-red-400"}):s.jsx(f.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:o?"Unmute":"Mute"})]}),(0,s.jsxs)("button",{onClick:b,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",x?"bg-amber-500/20 border-2 border-amber-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:x?s.jsx(p.Z,{className:"w-6 h-6 text-amber-400"}):s.jsx(d.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:x?"Resume":"Hold"})]}),(0,s.jsxs)("button",{onClick:y,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","bg-white/10 border-2 border-transparent hover:bg-white/15","transition-all duration-200"),children:s.jsx(h.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:"Transfer"})]}),(0,s.jsxs)("button",{onClick:()=>c(!i),className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",i?"bg-cyan-500/20 border-2 border-cyan-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:s.jsx(w.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:"Keypad"})]})]}),i&&s.jsx($,{}),(0,s.jsxs)("button",{onClick:j,className:(0,Z.cn)("w-full py-4 rounded-xl flex items-center justify-center gap-3","bg-gradient-to-r from-red-500 to-red-600","hover:from-red-400 hover:to-red-500","shadow-lg shadow-red-500/25 hover:shadow-xl hover:shadow-red-500/30","transition-all duration-200","active:scale-98"),children:[s.jsx(v.Z,{className:"w-6 h-6 text-white"}),s.jsx("span",{className:"text-white font-semibold",children:"End Call"})]}),s.jsx("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"M"})," Mute"," ",s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"H"})," Hold"," ",s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"T"})," Transfer"]})})]})]}):s.jsx(s.Fragment,{})}function $(){let{sendDTMF:e}=(0,N.zs)();return s.jsx("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/5 rounded-xl",children:["1","2","3","4","5","6","7","8","9","*","0","#"].map(t=>s.jsx("button",{onClick:()=>e(t),className:(0,Z.cn)("h-12 rounded-lg flex items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","text-white text-lg font-medium","transition-all duration-150 active:scale-95"),children:t},t))})}var I=a(16340),D=a(10532),O=a(95239),E=a(98952),A=a(25897),F=a(73972),M=a(66802),H=a(1943);let R={fullName:o.Z,firstName:o.Z,lastName:o.Z,phoneNumber:l.Z,email:O.Z,company:E.Z,address:A.Z,city:A.Z,state:A.Z,zipCode:A.Z,leadSource:D.Z,campaignName:D.Z,notes:F.Z,createdAt:M.Z,website:H.Z};function L({data:e,variant:t="panel",className:a}){let{screenPopFields:l}=(0,N.zs)(),[r,c]=(0,u.useState)("modal"===t),d=l.filter(e=>e.enabled).sort((e,t)=>e.order-t.order),x=t=>{if(t in e){let a=e[t];return null==a?null:"object"==typeof a?JSON.stringify(a):String(a)}return e.customFields&&t in e.customFields?String(e.customFields[t]):null},m=()=>{let t=[e.address,e.city,e.state,e.zipCode].filter(Boolean);return t.length>0?t.join(", "):null},h=e=>{let a=x(e.key);if(["address","city","state","zipCode"].includes(e.key)&&"address"===e.key)a=m();else if(["city","state","zipCode"].includes(e.key)){let e=d.find(e=>"address"===e.key);if(e?.enabled)return null}if(!a)return null;let l=R[e.key]??F.Z;return(0,s.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[s.jsx("div",{className:(0,Z.cn)("w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0","modal"===t?"bg-white/10":"bg-cyan-500/10"),children:s.jsx(l,{className:(0,Z.cn)("w-4 h-4","modal"===t?"text-cyan-400":"text-cyan-500")})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-gray-500 text-xs mb-0.5",children:e.label}),s.jsx("p",{className:(0,Z.cn)("text-sm break-words","modal"===t?"text-white":"text-gray-200"),children:a})]})]},e.id)},b=d.map(e=>({field:e,value:x(e.key)})).filter(({value:e})=>null!==e);if(0===b.length)return(0,s.jsxs)("div",{className:(0,Z.cn)("p-4 rounded-xl text-center","modal"===t?"bg-white/5":"bg-slate-800/50",a),children:[s.jsx(F.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No prospect data available"})]});let g="modal"===t?5:3,f=b.length>g;return(0,s.jsxs)("div",{className:(0,Z.cn)("rounded-xl overflow-hidden","modal"===t?"bg-white/5border border-white/10":"bg-slate-800/30 border border-white/5",a),children:[(0,s.jsxs)("div",{className:(0,Z.cn)("px-4 py-3 flex items-center justify-between","modal"===t?"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-white/10":"bg-white/5 border-b border-white/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(o.Z,{className:"w-4 h-4 text-cyan-400"}),s.jsx("span",{className:(0,Z.cn)("font-medium text-sm","modal"===t?"text-white":"text-gray-200"),children:"Prospect Information"})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[b.length," field",1!==b.length?"s":""]})]}),s.jsx("div",{className:"px-4 divide-y divide-white/5",children:d.slice(0,r?void 0:g).map(e=>h(e))}),f&&s.jsx("button",{onClick:()=>c(!r),className:(0,Z.cn)("w-full px-4 py-2 flex items-center justify-center gap-2","text-xs text-gray-400 hover:text-white","border-t border-white/5 hover:bg-white/5","transition-colors"),children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{className:"w-4 h-4"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{className:"w-4 h-4"}),"Show ",b.length-g," More"]})})]})}function q({call:e}){let{answerCall:t,hangupCall:a}=(0,N.zs)(),[r,n]=(0,u.useState)(0);return(0,u.useEffect)(()=>{let e=setInterval(()=>{n(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,Z.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-3xl border border-white/10 shadow-2xl shadow-cyan-500/10","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-300"),children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 rounded-full bg-cyan-500/20 animate-ping"}),s.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-cyan-500/10 animate-pulse"})]}),(0,s.jsxs)("div",{className:"relative pt-8 pb-4 text-center",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-cyan-500/10 rounded-full border border-cyan-500/20 mb-4",children:[s.jsx(l.Z,{className:"w-4 h-4 text-cyan-400 animate-bounce"}),s.jsx("span",{className:"text-cyan-400 text-sm font-medium",children:"Incoming Call"})]}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ringing for ",`${Math.floor(r/60).toString().padStart(2,"0")}:${(r%60).toString().padStart(2,"0")}`]})]}),(0,s.jsxs)("div",{className:"relative px-6 pb-6 text-center",children:[s.jsx("div",{className:(0,Z.cn)("w-24 h-24 mx-auto mb-4 rounded-full","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border-2 border-cyan-500/30","flex items-center justify-center","shadow-lg shadow-cyan-500/20"),children:s.jsx(o.Z,{className:"w-12 h-12 text-cyan-400"})}),s.jsx("h2",{className:"text-white text-2xl font-bold mb-1",children:e.callerName||"Unknown Caller"}),s.jsx("p",{className:"text-gray-400 text-lg font-mono",children:e.phoneNumber}),e.queueName&&s.jsx("div",{className:"mt-3 flex items-center justify-center gap-2",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-500/10 rounded-full text-purple-400 text-xs",children:[s.jsx(D.Z,{className:"w-3 h-3"}),e.queueName]})})]}),e.prospectData&&Object.keys(e.prospectData).length>0&&s.jsx("div",{className:"px-6 pb-6",children:s.jsx(L,{data:e.prospectData,variant:"modal"})}),s.jsx("div",{className:"px-6 pb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,s.jsxs)("button",{onClick:()=>{a()},className:(0,Z.cn)("group relative flex flex-colitems-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-16 h-16 rounded-full","bg-gradient-to-br from-red-500 to-red-600","flex items-center justify-center","shadow-lg shadow-red-500/30","group-hover:shadow-xl group-hover:shadow-red-500/40","transition-all duration-200"),children:s.jsx(v.Z,{className:"w-7 h-7 text-white"})}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Decline"})]}),(0,s.jsxs)("button",{onClick:()=>{t()},className:(0,Z.cn)("group relative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-20 h-20 rounded-full","bg-gradient-to-br from-emerald-500 to-green-600","flex items-center justify-center","shadow-lg shadow-emerald-500/30","group-hover:shadow-xl group-hover:shadow-emerald-500/40","transition-allduration-200","animate-pulse"),children:s.jsx(l.Z,{className:"w-9 h-9 text-white"})}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Answer"})]})]})}),s.jsx("div",{className:"px-6 pb-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Press ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"A"})," to answer or ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"D"})," to decline"]})})]})]})}var B=a(26401),U=a(3920);function W(){var e;let{agentStatus:t,currentCall:a,isPhonePanelOpen:h,closePhonePanel:g,togglePhonePanel:f,error:p,clearError:w}=(0,N.zs)(),[v,j]=(0,u.useState)(!0),[y,C]=(0,u.useState)("dialpad"),[S,z]=(0,u.useState)(!1);return h?(0,s.jsxs)(s.Fragment,{children:[a?.state==="ringing"&&"inbound"===a.direction&&s.jsx(q,{call:a}),S&&s.jsx(B.h,{onClose:()=>z(!1)}),(0,s.jsxs)(U.Zb,{className:(0,Z.cn)("fixed bottom-6 right-6 z-40","w-[380px] overflow-hidden","bg-gradient-to-b from-slate-900/95 to-slate-950/95","backdrop-blur-xl border-white/10","shadow-2xl shadow-black/50","transition-all duration-300 ease-out",v?"h-auto":"h-[72px]"),children:[(0,s.jsxs)(U.Ol,{className:"p-4 pb-3 space-y-0 flex flex-row items-center justify-between border-b border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:(0,Z.cn)("w-10 h-10 rounded-xl flex items-center justify-center","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border border-cyan-500/30"),children:s.jsx(l.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-white text-sm",children:"Agent Phone"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(b.b,{})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[a?.state==="active"&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 rounded-full mr-2",children:[s.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-emerald-400 text-xs font-mono",children:(e=a.duration,`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`)})]}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>z(!0),children:s.jsx(r.Z,{className:"w-4 h-4"})}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>j(!v),children:v?s.jsx(n.Z,{className:"w-4 h-4"}):s.jsx(i.Z,{className:"w-4 h-4"})}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:g,children:s.jsx(c.Z,{className:"w-4 h-4"})})]})]}),p&&s.jsx("div",{className:"px-4 py-2 bg-red-500/10 border-b border-red-500/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-red-400 text-xs",children:p}),s.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-300",children:s.jsx(c.Z,{className:"w-3 h-3"})})]})}),v&&(0,s.jsxs)(U.aY,{className:"p-0",children:[a&&"ringing"!==a.state&&"ended"!==a.state&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[a.prospectData&&s.jsx(L,{data:a.prospectData}),(0,s.jsxs)("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center border border-cyan-500/30",children:s.jsx(o.Z,{className:"w-8 h-8 text-cyan-400"})}),s.jsx("h4",{className:"text-white font-semibold text-lg",children:a.callerName||"Unknown Caller"}),s.jsx("p",{className:"text-gray-400 text-sm",children:a.phoneNumber}),a.queueName&&(0,s.jsxs)("p",{className:"text-cyan-400 text-xs mt-1",children:["From: ",a.queueName]})]}),a.isOnHold&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 bg-amber-500/10 rounded-lg",children:[s.jsx(d.Z,{className:"w-4 h-4 text-amber-400"}),s.jsx("span",{className:"text-amber-400 text-sm",children:"Call On Hold"})]}),s.jsx(T,{})]}),(!a||"ended"===a.state)&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[s.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["dialpad","history","settings"].map(e=>(0,s.jsxs)("button",{onClick:()=>C(e),className:(0,Z.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all",y===e?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5"),children:["dialpad"===e&&s.jsx(x.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"history"===e&&s.jsx(m.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"settings"===e&&s.jsx(r.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),"dialpad"===y&&s.jsx(I.c,{}),"history"===y&&s.jsx(J,{}),"settings"===y&&s.jsx(Y,{})]})]})]})]}):(0,s.jsxs)("button",{onClick:f,className:(0,Z.cn)("fixed bottom-6 right-6 z-50","flex items-center gap-3 px-5 py-3 rounded-full","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","text-white font-medium shadow-2xl","transition-all duration-300 ease-out","hover:scale-105 hover:shadow-cyan-500/25","border border-white/10",a?.state==="ringing"&&"animate-pulse"),"aria-label":"Open phone",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(l.Z,{className:"w-5 h-5"}),a?.state==="ringing"&&s.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]}),s.jsx("span",{className:"capitalize",children:"on-call"===t?"On Call":t}),s.jsx("span",{className:(0,Z.cn)("w-2.5 h-2.5 rounded-full",(e=>{switch(e){case"available":return"bg-emerald-500";case"on-call":return"bg-amber-500";case"away":return"bg-red-500";case"dnd":return"bg-purple-500";default:return"bg-gray-500"}})(t))})]})}function J(){let{callHistory:e,makeCall:t}=(0,N.zs)(),a=e=>e?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",r=e=>{t(e)};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[s.jsx(m.Z,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No recent calls"})]}):s.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:e.map((e,t)=>s.jsx("button",{onClick:()=>r(e.phoneNumber),className:(0,Z.cn)("w-full p-3 rounded-lg text-left transition-all","bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:(0,Z.cn)("w-8 h-8 rounded-full flex items-center justify-center","inbound"===e.direction?"bg-cyan-500/20 text-cyan-400":"bg-blue-500/20 text-blue-400"),children:"inbound"===e.direction?s.jsx(l.Z,{className:"w-4 h-4"}):s.jsx(h.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.callerName||e.phoneNumber}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["inbound"===e.direction?"Incoming":"Outgoing",e.duration>0&&` • ${Math.floor(e.duration/60)}m ${e.duration%60}s`]})]})]}),s.jsx("span",{className:"text-gray-500 text-xs",children:a(e.startTime)})]})},`${e.callId}-${t}`))})}function Y(){let{audioDevices:e,selectedAudioInput:t,selectedAudioOutput:a,setAudioInput:l,setAudioOutput:n}=(0,N.zs)(),i=e.filter(e=>"audioinput"===e.kind),c=e.filter(e=>"audiooutput"===e.kind);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Microphone"}),s.jsx("select",{value:t??"",onChange:e=>l(e.target.value),className:(0,Z.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:i.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Speaker"}),s.jsx("select",{value:a??"",onChange:e=>n(e.target.value),className:(0,Z.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:c.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`Speaker ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Configure which prospect fields appear during incoming calls."}),(0,s.jsxs)(k.z,{variant:"outline",size:"sm",className:"w-full border-white/10 text-gray-300 hover:bg-white/5",children:[s.jsx(r.Z,{className:"w-4 h-4 mr-2"}),"Configure Screen Pop Fields"]})]})]})}},14581:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>c,zs:()=>i});var s=a(27685),l=a(83810);let r=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}],n=(0,l.createContext)(null);function i(){let e=(0,l.useContext)(n);if(!e)throw Error("usePhone must be used within a PhoneProvider");return e}function c({children:e,wsUrl:t="ws://45.32.213.201:3001",apiUrl:a="http://45.32.213.201:3001"}){let i=a.replace(/\/api\/v1\/?$/,""),c="a1b2c3d4e5f67890",o=(0,l.useCallback)((e=!0)=>{let t={};return e&&(t["Content-Type"]="application/json"),c&&(t["x-api-key"]=c),t},[c]),[d,x]=(0,l.useState)("offline"),[m,h]=(0,l.useState)(null),[u,b]=(0,l.useState)([]),[g,f]=(0,l.useState)(!1),[p,w]=(0,l.useState)(!1),[v,j]=(0,l.useState)([]),[y,N]=(0,l.useState)(null),[k,C]=(0,l.useState)(null),[Z,S]=(0,l.useState)(()=>r),[z,P]=(0,l.useState)(null);(0,l.useRef)(null);let T=(0,l.useRef)(null),$=(0,l.useRef)(null),I=(0,l.useCallback)(()=>{$.current?.play().catch(()=>{})},[]),D=(0,l.useCallback)(()=>{$.current&&($.current.pause(),$.current.currentTime=0)},[]),O=(0,l.useCallback)(()=>{T.current&&clearInterval(T.current),T.current=setInterval(()=>{h(e=>e&&e.answerTime?{...e,duration:Math.floor((Date.now()-e.answerTime.getTime())/1e3)}:e)},1e3)},[]),E=(0,l.useCallback)(()=>{T.current&&(clearInterval(T.current),T.current=null)},[]),A=(0,l.useCallback)(e=>{e&&(h({callId:e.callId??`call_${Date.now()}`,direction:"inbound",state:"ringing",phoneNumber:e.callerNumber??e.from??"",callerName:e.callerName,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0,prospectData:e.prospectData??e.screenPopData,queueName:e.queueName,campaignId:e.campaignId}),f(!0),I())},[I]),F=(0,l.useCallback)(()=>{h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),D(),O()},[D,O]),M=(0,l.useCallback)(()=>{h(e=>{if(e){let t={...e,state:"ended",endTime:new Date};b(e=>[t,...e].slice(0,50))}return null}),x("available"),D(),E()},[D,E]),H=(0,l.useCallback)(e=>{e&&h(t=>{if(!t)return t;let a=e.isOnHold??!t.isOnHold;return{...t,isOnHold:a,state:a?"hold":"active"}})},[]),R=(0,l.useCallback)(e=>{let{type:t,channel:a,payload:s}=e;if("event"===t)switch(a){case"agent.call.incoming":A(s);break;case"agent.call.answered":F();break;case"agent.call.ended":M();break;case"agent.call.hold":H(s)}},[A,F,M,H]);(0,l.useEffect)(()=>{},[t,R]),(0,l.useEffect)(()=>{},[y,k]);let L=(0,l.useCallback)(e=>{S(e)},[]),q=(0,l.useCallback)(e=>{fetch(`${i}/api/v1/agent/status`,{method:"PUT",headers:o(),body:JSON.stringify({status:e})}).catch(()=>{}),x(e)},[i,o]),B=(0,l.useCallback)(()=>f(!0),[]),U=(0,l.useCallback)(()=>f(!1),[]),W=(0,l.useCallback)(()=>f(e=>!e),[]),J=(0,l.useCallback)(async e=>{console.log("[Phone] Initiating call to:",e),w(!0),P(null);try{let t=`${i}/api/v1/agent/call/originate`;console.log("[Phone] Calling API:",t);let a=await fetch(t,{method:"POST",headers:o(),body:JSON.stringify({phoneNumber:e})}),s=await a.json();if(console.log("[Phone] API response:",a.status,s),!a.ok)throw Error(s.error?.message??"Failed to place call");let l={callId:s.callId??`call_${Date.now()}`,direction:"outbound",state:"connecting",phoneNumber:e,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0};console.log("[Phone] Call initiated successfully:",l),h(l),x("on-call"),f(!0),setTimeout(()=>{h(e=>e&&e.callId===l.callId?{...e,state:"active",answerTime:new Date}:e),O()},2e3)}catch(e){console.error("[Phone] Call failed:",e),P(e instanceof Error?e.message:"Failed to place call")}finally{w(!1)}},[i,o,O]),Y=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/answer`,{method:"POST",headers:o(!1)}),h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),D(),O()}catch(e){P(e instanceof Error?e.message:"Failed to answer call")}},[i,m,D,O,o]),_=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/hangup`,{method:"POST",headers:o(!1)});let e={...m,state:"ended",endTime:new Date};b(t=>[e,...t].slice(0,50)),h(null),x("available"),E()}catch(e){P(e instanceof Error?e.message:"Failed to hang up")}},[i,m,E,o]),G=(0,l.useCallback)(()=>{h(e=>e?{...e,isMuted:!e.isMuted}:e)},[]),K=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/hold`,{method:"POST",headers:o(!1)}),h(e=>e?{...e,isOnHold:!e.isOnHold,state:e.isOnHold?"active":"hold"}:e)}catch(e){P(e instanceof Error?e.message:"Failed to toggle hold")}},[i,m,o]),Q=(0,l.useCallback)(e=>{m&&console.log("[Phone] Sending DTMF:",e)},[m]),V=(0,l.useCallback)(async(e,t)=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/transfer`,{method:"POST",headers:o(),body:JSON.stringify({destination:e,type:t})}),"blind"===t&&(h(null),x("available"))}catch(e){P(e instanceof Error?e.message:"Failed to transfer call")}},[i,m,o]),X=(0,l.useCallback)(e=>{N(e)},[]),ee=(0,l.useCallback)(e=>{C(e)},[]),et=(0,l.useCallback)(()=>P(null),[]);return s.jsx(n.Provider,{value:{agentStatus:d,currentCall:m,callHistory:u,isPhonePanelOpen:g,isConnecting:p,audioDevices:v,selectedAudioInput:y,selectedAudioOutput:k,screenPopFields:Z,error:z,setAgentStatus:q,openPhonePanel:B,closePhonePanel:U,togglePhonePanel:W,makeCall:J,answerCall:Y,hangupCall:_,toggleMute:G,toggleHold:K,sendDTMF:Q,transferCall:V,setAudioInput:X,setAudioOutput:ee,updateScreenPopFields:L,clearError:et},children:e})}},26401:(e,t,a)=>{"use strict";a.d(t,{h:()=>j});var s=a(27685),l=a(28369),r=a(77921),n=a(95239),i=a(98952),c=a(25897),o=a(10532),d=a(73972),x=a(54654),m=a(70167),h=a(34748),u=a(63197),b=a(83810),g=a(14581),f=a(4283),p=a(4120);let w={fullName:l.Z,firstName:l.Z,lastName:l.Z,phoneNumber:r.Z,email:n.Z,company:i.Z,address:c.Z,city:c.Z,state:c.Z,zipCode:c.Z,leadSource:o.Z,campaignName:o.Z,notes:d.Z},v=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}];function j({onClose:e}){let{screenPopFields:t,updateScreenPopFields:a}=(0,g.zs)(),[l,r]=(0,b.useState)([...t]),[n,i]=(0,b.useState)(null),c=(0,b.useCallback)(e=>{r(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},[]),o=(0,b.useCallback)(e=>{i(e)},[]),j=(0,b.useCallback)(e=>{n&&n!==e&&r(t=>{let a=t.findIndex(e=>e.id===n),s=t.findIndex(t=>t.id===e);if(-1===a||-1===s)return t;let l=[...t],[r]=l.splice(a,1);return l.splice(s,0,r),l.map((e,t)=>({...e,order:t+1}))})},[n]),y=(0,b.useCallback)(()=>{i(null)},[]),N=(0,b.useCallback)(()=>{a(l),e()},[l,a,e]),k=(0,b.useCallback)(()=>{r([...v])},[]),C=(0,b.useCallback)(t=>{t.target===t.currentTarget&&e()},[e]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:C,role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,p.cn)("relative z-10 w-full max-w-lg mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-white text-lg font-semibold",children:"Screen Pop Settings"}),s.jsx("p",{className:"text-gray-500 text-sm mt-0.5",children:"Configure which fields appear during incoming calls"})]}),s.jsx(f.z,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-white",children:s.jsx(x.Z,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"px-6 py-4 max-h-[400px] overflow-y-auto",children:s.jsx("div",{className:"space-y-2",children:l.sort((e,t)=>e.order-t.order).map(e=>{let t=w[e.key]??d.Z;return(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>o(e.id),onDragOver:t=>{t.preventDefault(),j(e.id)},onDragEnd:y,className:(0,p.cn)("flex items-center gap-3 p-3 rounded-lg","bg-white/5 border border-transparent","hover:bg-white/10 hover:border-white/10","transition-all cursor-move",n===e.id&&"opacity-50 scale-95"),children:[s.jsx(m.Z,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),s.jsx("div",{className:(0,p.cn)("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",e.enabled?"bg-cyan-500/10 text-cyan-400":"bg-white/5 text-gray-500"),children:s.jsx(t,{className:"w-4 h-4"})}),s.jsx("span",{className:(0,p.cn)("flex-1 text-sm",e.enabled?"text-white":"text-gray-500"),children:e.label}),s.jsx("button",{onClick:()=>c(e.id),className:(0,p.cn)("w-10 h-6 rounded-full p-1 transition-colors",e.enabled?"bg-cyan-500":"bg-white/10"),children:s.jsx("div",{className:(0,p.cn)("w-4 h-4 rounded-full bg-white transition-transform",e.enabled?"translate-x-4":"translate-x-0")})})]},e.id)})})}),(0,s.jsxs)("div",{className:"px-6 py-3 bg-white/5 border-t border-white/10",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Preview:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.filter(e=>e.enabled).sort((e,t)=>e.order-t.order).map(e=>s.jsx("span",{className:"px-2 py-1 bg-cyan-500/10 text-cyan-400 text-xs rounded-full border border-cyan-500/20",children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex items-center justify-between",children:[(0,s.jsxs)(f.z,{variant:"ghost",onClick:k,className:"text-gray-400 hover:text-white gap-2",children:[s.jsx(h.Z,{className:"w-4 h-4"}),"Reset to Default"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(f.z,{variant:"outline",onClick:e,className:"border-white/10",children:"Cancel"}),(0,s.jsxs)(f.z,{onClick:N,className:"bg-gradient-to-r from-cyan-600 to-blue-600 gap-2",children:[s.jsx(u.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})]})]})}},96500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ThemeProvider:()=>r});var s=a(27685),l=a(88351);function r({children:e,...t}){return s.jsx(l.f,{...t,children:e})}a(83810)},4283:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var s=a(27685),l=a(40461),r=a(31727),n=a(83810),i=a(4120);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...n},o)=>{let d=r?l.g7:"button";return s.jsx(d,{className:(0,i.cn)(c({variant:t,size:a,className:e})),ref:o,...n})});o.displayName="Button"},3920:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>i,SZ:()=>o,Zb:()=>n,aY:()=>d,ll:()=>c});var s=a(27685),l=a(83810),r=a(4120);let n=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let c=l.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let o=l.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},14887:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(27685),l=a(83810),r=a(4120);let n=l.forwardRef(({className:e,type:t,...a},l)=>s.jsx("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a}));n.displayName="Input"},4120:(e,t,a)=>{"use strict";a.d(t,{LU:()=>c,cn:()=>r,p6:()=>o,un:()=>n,xG:()=>i});var s=a(91261),l=a(96510);function r(...e){return(0,l.m6)((0,s.W)(e))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`}return e}function i(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function c(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return t>0?`${t}:${String(a).padStart(2,"0")}:${String(s).padStart(2,"0")}`:`${a}:${String(s).padStart(2,"0")}`}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},41097:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>l,default:()=>n});let s=(0,a(30599).createProxy)(String.raw`/app/apps/web/src/app/(dashboard)/layout.tsx`),{__esModule:l,$$typeof:r}=s,n=s.default},47632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m,metadata:()=>x});var s=a(36491),l=a(51846),r=a.n(l);a(75556);var n=a(30599);let i=(0,n.createProxy)(String.raw`/app/apps/web/src/components/theme-provider.tsx`),{__esModule:c,$$typeof:o}=i;i.default;let d=(0,n.createProxy)(String.raw`/app/apps/web/src/components/theme-provider.tsx#ThemeProvider`),x={title:"Hopwhistle",description:"Production-grade telephony platform"};function m({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:r().className,children:s.jsx(d,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:e})})})}},75556:()=>{}};
/app/apps/web/.next/server/chunks/101.js:"use strict";exports.id=101,exports.ids=[101],exports.modules={65944:(e,t,r)=>{r.d(t,{Bw:()=>p,Ph:()=>c,Ql:()=>m,i4:()=>h,ki:()=>d});var n=r(27685),a=r(66134),i=r(4610),s=r(24427),o=r(63197),l=r(83810),u=r(4120);let c=a.fC;a.ZA;let d=a.B4,h=l.forwardRef(({className:e,children:t,...r},s)=>(0,n.jsxs)(a.xz,{ref:s,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(a.JO,{asChild:!0,children:n.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=a.xz.displayName;let f=l.forwardRef(({className:e,...t},r)=>n.jsx(a.u_,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(s.Z,{className:"h-4 w-4"})}));f.displayName=a.u_.displayName;let g=l.forwardRef(({className:e,...t},r)=>n.jsx(a.$G,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(i.Z,{className:"h-4 w-4"})}));g.displayName=a.$G.displayName;let p=l.forwardRef(({className:e,children:t,position:r="popper",...i},s)=>n.jsx(a.h_,{children:(0,n.jsxs)(a.VY,{ref:s,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[n.jsx(f,{}),n.jsx(a.l_,{className:(0,u.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(g,{})]})}));p.displayName=a.VY.displayName,l.forwardRef(({className:e,...t},r)=>n.jsx(a.__,{ref:r,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=a.__.displayName;let m=l.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsxs)(a.ck,{ref:i,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(a.wU,{children:n.jsx(o.Z,{className:"h-4 w-4"})})}),n.jsx(a.eT,{children:t})]}));m.displayName=a.ck.displayName,l.forwardRef(({className:e,...t},r)=>n.jsx(a.Z0,{ref:r,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=a.Z0.displayName},39881:(e,t,r)=>{r.d(t,{x:()=>a});class n{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a=`${this.baseUrl}${e}`,i={"Content-Type":"application/json",...t.headers};this.token&&(i.Authorization=`Bearer ${this.token}`),this.apiKey&&(i["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:i}),r=await e.json();if(!e.ok)return{error:{code:r.error?.code||"UNKNOWN_ERROR",message:r.error?.message||"An error occurred"}};return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new n},33173:(e,t,r)=>{r.d(t,{Z:()=>n});/**
/app/apps/web/.next/server/chunks/201.js:"use strict";exports.id=201,exports.ids=[201],exports.modules={35090:(e,t,a)=>{a.d(t,{C:()=>d});var r=a(27685),s=a(31727);a(83810);var o=a(4120);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...a}){return r.jsx("div",{className:(0,o.cn)(n({variant:t}),e),...a})}},44517:(e,t,a)=>{a.d(t,{X:()=>O});var r=a(27685),s=a(83810),o=a(68118),n=a(6872),d=a(2724),i=a(39294),l=a(39430),c=a(12518),f=a(1090),u=a(29548),m="Checkbox",[p,x]=(0,n.b)(m),[b,h]=p(m);function y(e){let{__scopeCheckbox:t,checked:a,children:o,defaultChecked:n,disabled:d,form:l,name:c,onCheckedChange:f,required:u,value:p="on",internal_do_not_use_render:x}=e,[h,y]=(0,i.T)({prop:a,defaultProp:n??!1,onChange:f,caller:m}),[g,N]=s.useState(null),[v,w]=s.useState(null),j=s.useRef(!1),k=!g||!!l||!!g.closest("form"),R={checked:h,disabled:d,setChecked:y,control:g,setControl:N,name:c,form:l,value:p,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:!T(n)&&n,isFormControl:k,bubbleInput:v,setBubbleInput:w};return(0,r.jsx)(b,{scope:t,...R,children:"function"==typeof x?x(R):o})}var g="CheckboxTrigger",N=s.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...n},i)=>{let{control:l,value:c,disabled:f,checked:m,required:p,setControl:x,setChecked:b,hasConsumerStoppedPropagationRef:y,isFormControl:N,bubbleInput:v}=h(g,e),w=(0,o.e)(i,x),j=s.useRef(m);return s.useEffect(()=>{let e=l?.form;if(e){let t=()=>b(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,b]),(0,r.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":T(m)?"mixed":m,"aria-required":p,"data-state":E(m),"data-disabled":f?"":void 0,disabled:f,value:c,...n,ref:w,onKeyDown:(0,d.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.Mj)(a,e=>{b(e=>!!T(e)||!e),v&&N&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});N.displayName=g;var v=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:s,checked:o,defaultChecked:n,required:d,disabled:i,value:l,onCheckedChange:c,form:f,...u}=e;return(0,r.jsx)(y,{__scopeCheckbox:a,checked:o,defaultChecked:n,disabled:i,required:d,onCheckedChange:c,name:s,form:f,value:l,internal_do_not_use_render:({isFormControl:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{...u,ref:t,__scopeCheckbox:a}),e&&(0,r.jsx)(R,{__scopeCheckbox:a})]})})});v.displayName=m;var w="CheckboxIndicator",j=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:s,...o}=e,n=h(w,a);return(0,r.jsx)(f.z,{present:s||T(n.checked)||!0===n.checked,children:(0,r.jsx)(u.WV.span,{"data-state":E(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});j.displayName=w;var k="CheckboxBubbleInput",R=s.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:n,hasConsumerStoppedPropagationRef:d,checked:i,defaultChecked:f,required:m,disabled:p,name:x,value:b,form:y,bubbleInput:g,setBubbleInput:N}=h(k,e),v=(0,o.e)(a,N),w=(0,l.D)(i),j=(0,c.t)(n);s.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(w!==i&&e){let a=new Event("click",{bubbles:t});g.indeterminate=T(i),e.call(g,!T(i)&&i),g.dispatchEvent(a)}},[g,w,i,d]);let R=s.useRef(!T(i)&&i);return(0,r.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??R.current,required:m,disabled:p,name:x,value:b,form:y,...t,tabIndex:-1,ref:v,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function T(e){return"indeterminate"===e}function E(e){return T(e)?"indeterminate":e?"checked":"unchecked"}R.displayName=k;var C=a(63197),D=a(4120);let O=s.forwardRef(({className:e,...t},a)=>r.jsx(v,{ref:a,className:(0,D.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(j,{className:(0,D.cn)("flex items-center justify-center text-current"),children:r.jsx(C.Z,{className:"h-4 w-4"})})}));O.displayName=v.displayName},84177:(e,t,a)=>{a.d(t,{$N:()=>p,Be:()=>x,Vq:()=>i,cN:()=>m,cZ:()=>f,fK:()=>u});var r=a(27685),s=a(35639),o=a(54654),n=a(83810),d=a(4120);let i=s.fC;s.xz;letl=s.h_;s.x8;let c=n.forwardRef(({className:e,...t},a)=>r.jsx(s.aV,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));c.displayName=s.aV.displayName;let f=n.forwardRef(({className:e,children:t,...a},n)=>(0,r.jsxs)(l,{children:[r.jsx(c,{}),(0,r.jsxs)(s.VY,{ref:n,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=s.VY.displayName;let u=({className:e,...t})=>r.jsx("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});u.displayName="DialogHeader";let m=({className:e,...t})=>r.jsx("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});m.displayName="DialogFooter";let p=n.forwardRef(({className:e,...t},a)=>r.jsx(s.Dx,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));p.displayName=s.Dx.displayName;let x=n.forwardRef(({className:e,...t},a)=>r.jsx(s.dk,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=s.dk.displayName},57869:(e,t,a)=>{a.d(t,{_:()=>d});var r=a(27685),s=a(73891),o=a(83810),n=a(4120);let d=o.forwardRef(({className:e,...t},a)=>r.jsx(s.f,{ref:a,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));d.displayName=s.f.displayName},25277:(e,t,a)=>{a.d(t,{RM:()=>i,SC:()=>l,iA:()=>n,pj:()=>f,ss:()=>c,xD:()=>d});var r=a(27685),s=a(83810),o=a(4120);let n=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));n.displayName="Table";let d=s.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:(0,o.cn)("[&_tr]:border-b",e),...t}));d.displayName="TableHeader";let i=s.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));i.displayName="TableBody",s.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let l=s.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));l.displayName="TableRow";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let f=s.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));f.displayName="TableCell",s.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,a)=>{a.d(t,{x:()=>s});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let s=`${this.baseUrl}${e}`,o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization=`Bearer ${this.token}`),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:o}),a=await e.json();if(!e.ok)return{error:{code:a.error?.code||"UNKNOWN_ERROR",message:a.error?.message||"An error occurred"}};return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){returnthis.request(e,{method:"DELETE"})}}let s=new r}};
/app/apps/web/.next/static/chunks/4748-f436e6451501f6eb.js:"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4748],{1506:function(e,t,a){a.d(t,{b:function(){return o}});var s=a(91674),l=a(50802),r=a(86655),n=a(88562),i=a(33061);let c=[{value:"available",label:"Available",color:"text-emerald-400",bgColor:"bg-emerald-500",description:"Ready to receive calls"},{value:"away",label:"Away",color:"text-amber-400",bgColor:"bg-amber-500",description:"Temporarily unavailable"},{value:"dnd",label:"Do Not Disturb",color:"text-red-400",bgColor:"bg-red-500",description:"No callsor notifications"},{value:"offline",label:"Offline",color:"text-gray-400",bgColor:"bg-gray-500",description:"Not logged in"}];function o(){var e;let{agentStatus:t,setAgentStatus:a,currentCall:o}=(0,n.zs)(),[d,u]=(0,r.useState)(!1),x=(0,r.useRef)(null),m=null!==(e=c.find(e=>e.value===t))&&void 0!==e?e:c[3];(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=(0,r.useCallback)(e=>{o&&"ended"!==o.state||(a(e),u(!1))},[o,a]),b=o&&"ended"!==o.state;return(0,s.jsxs)("div",{className:"relative",ref:x,children:[(0,s.jsxs)("button",{onClick:()=>u(!d),disabled:!!b,className:(0,i.cn)("flex items-center gap-2 px-2 py-1 rounded-lg","text-xs font-medium transition-all","hover:bg-white/5",b&&"opacity-50 cursor-not-allowed"),children:[(0,s.jsx)("span",{className:(0,i.cn)("w-2 h-2 rounded-full",m.bgColor)}),(0,s.jsx)("span",{className:m.color,children:b?"On Call":m.label}),!b&&(0,s.jsx)(l.Z,{className:(0,i.cn)("w-3 h-3 text-gray-400 transition-transform",d&&"rotate-180")})]}),d&&!b&&(0,s.jsx)("div",{className:(0,i.cn)("absolute top-full left-0 mt-2 w-56 z-50","bg-slate-900 border border-white/10 rounded-xl","shadow-xl shadow-black/50 overflow-hidden","animate-in fade-in-0 zoom-in-95 duration-150"),children:c.map(e=>(0,s.jsxs)("button",{onClick:()=>h(e.value),className:(0,i.cn)("w-full px-4 py-3 flex items-center gap-3 text-left","hover:bg-white/5 transition-colors",t===e.value&&"bg-white/5"),children:[(0,s.jsx)("span",{className:(0,i.cn)("w-2.5 h-2.5 rounded-full",e.bgColor)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:(0,i.cn)("text-sm font-medium",e.color),children:e.label}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),t===e.value&&(0,s.jsx)("span",{className:"ml-auto text-cyan-400 text-xs",children:"✓"})]},e.value))})]})}},54506:function(e,t,a){a.d(t,{c:function(){return x}});var s=a(91674),l=a(55756),r=a(4458),n=a(86655),i=a(88562),c=a(90747),o=a(33061);let d=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],u={1:[697,1209],2:[697,1336],3:[697,1477],4:[770,1209],5:[770,1336],6:[770,1477],7:[852,1209],8:[852,1336],9:[852,1477],"*":[941,1209],0:[941,1336],"#":[941,1477]};function x(){let{makeCall:e,sendDTMF:t,currentCall:a,isConnecting:x}=(0,i.zs)(),[m,h]=(0,n.useState)(""),b=(0,n.useRef)(null),g=(0,n.useCallback)(e=>{try{if(!b.current){let e=window.AudioContext||window.webkitAudioContext;e&&(b.current=new e)}let t=b.current;if(!t)return;let a=u[e];if(!a)return;let s=t.createOscillator(),l=t.createOscillator(),r=t.createGain();s.type="sine",l.type="sine",s.frequency.value=a[0],l.frequency.value=a[1],r.gain.value=.1,s.connect(r),l.connect(r),r.connect(t.destination),s.start(),l.start(),setTimeout(()=>{s.stop(),l.stop()},150)}catch(e){}},[]),f=(0,n.useCallback)(e=>{a&&"ended"!==a.state?t(e):h(t=>t+e),g(e)},[a,t,g]),p=(0,n.useCallback)(()=>{h(e=>e.slice(0,-1))},[]),v=(0,n.useCallback)(()=>{m&&!x&&(e(m),h(""))},[m,x,e]),w=(0,n.useCallback)(e=>{/^[0-9*#]$/.test(e.key)?f(e.key):"Backspace"===e.key?p():"Enter"===e.key&&m&&v()},[f,p,v,m]);return(0,s.jsxs)("div",{className:"space-y-4",onKeyDown:w,tabIndex:0,children:[(0,s.jsxs)("div",{className:(0,o.cn)("h-16 px-4 rounded-xl flex items-center justify-between","bg-white/5 border border-white/10"),children:[(0,s.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value.replace(/[^0-9+*#()-\s]/g,"")),placeholder:"Enter number...",className:(0,o.cn)("flex-1 bg-transparent text-2xl font-mono text-white","placeholder:text-gray-600 outline-none")}),m&&(0,s.jsx)("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(l.Z,{className:"w-5 h-5"})})]}),m&&(0,s.jsx)("p",{className:"text-center text-gray-400 text-sm",children:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))})(m)}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:d.map(e=>{let{digit:t,letters:a}=e;return(0,s.jsxs)("button",{onClick:()=>f(t),className:(0,o.cn)("h-16 rounded-xl flex flex-col items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","border border-transparent hover:border-white/10","transition-all duration-150 ease-out","active:scale-95"),children:[(0,s.jsx)("span",{className:"text-2xl text-white font-medium",children:t}),a&&(0,s.jsx)("span",{className:"text-[10px] text-gray-500 tracking-widest -mt-0.5",children:a})]},t)})}),(0,s.jsxs)(c.z,{onClick:v,disabled:!m||x,className:(0,o.cn)("w-full h-14 rounded-xl text-lg font-medium","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","disabled:opacity-50 disabled:cursor-not-allowed","shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30","transition-all duration-200"),children:[(0,s.jsx)(r.Z,{className:"w-5 h-5 mr-2"}),x?"Connecting...":"Call"]})]})}},54748:function(e,t,a){a.d(t,{gw:function(){return W},ZB:function(){return j.ZB},zs:function(){return j.zs}});var s=a(91674),l=a(4458),r=a(25390),n=a(50802),i=a(98371),c=a(77037),o=a(61082),d=a(96733),u=a(81124),x=a(80317),m=a(34173),h=a(86655),b=a(1506),g=a(86819),f=a(40100),p=a(95807),v=a(10015),w=a(95902),y=a(51436),N=a(89175),j=a(88562),k=a(90747),C=a(66120),S=a(33061);let Z=[{id:"1",name:"John Smith",extension:"1001",status:"available"},{id:"2",name:"Jane Doe",extension:"1002",status:"busy"},{id:"3",name:"Bob Wilson",extension:"1003",status:"available"},{id:"4",name:"Alice Brown",extension:"1004",status:"offline"}],z=[{id:"q1",name:"Sales",waitingCalls:2,availableAgents:5},{id:"q2",name:"Support",waitingCalls:5,availableAgents:3},{id:"q3",name:"Billing",waitingCalls:0,availableAgents:2}];function I(e){let{onClose:t}=e,{transferCall:a}=(0,j.zs)(),[r,n]=(0,h.useState)("agents"),[i,d]=(0,h.useState)(""),[u,x]=(0,h.useState)(""),[b,g]=(0,h.useState)("blind"),f=Z.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.extension.includes(i)),p=z.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),v=(0,h.useCallback)(e=>{a(e.extension,b),t()},[a,b,t]),w=(0,h.useCallback)(e=>{a("queue:".concat(e.id),b),t()},[a,b,t]),I=(0,h.useCallback)(()=>{u&&(a(u,b),t())},[a,u,b,t]),D=(0,h.useCallback)(e=>{d(e.target.value)},[]),T=(0,h.useCallback)(e=>{x(e.target.value)},[]),O=(0,h.useCallback)(e=>{e.target===e.currentTarget&&t()},[t]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:O,role:"dialog","aria-modal":"true",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,S.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-white text-lg font-semibold",children:"Transfer Call"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Select a destination"})]})]}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400hover:text-white",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>g("blind"),className:(0,S.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","blind"===b?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Blind Transfer"}),(0,s.jsx)("button",{onClick:()=>g("warm"),className:(0,S.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","warm"===b?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Warm Transfer"})]}),(0,s.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:"blind"===b?"Call will be transferred immediately":"You can speak to the recipient before transferring"})]}),(0,s.jsx)("div",{className:"px-6 pt-4",children:(0,s.jsx)("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["agents","queues","external"].map(e=>(0,s.jsxs)("button",{onClick:()=>n(e),className:(0,S.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5",r===e?"bg-cyan-500 text-white":"text-gray-400 hover:text-white hover:bg-white/5"),children:["agents"===e&&(0,s.jsx)(o.Z,{className:"w-3.5 h-3.5"}),"queues"===e&&(0,s.jsx)(y.Z,{className:"w-3.5 h-3.5"}),"external"===e&&(0,s.jsx)(l.Z,{className:"w-3.5 h-3.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})}),(0,s.jsxs)("div",{className:"p-6",children:["external"!==r&&(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,s.jsx)(C.I,{value:i,onChange:D,placeholder:"Search ".concat(r,"..."),className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),"agents"===r&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[f.map(e=>(0,s.jsxs)("button",{onClick:()=>v(e),disabled:"available"!==e.status,className:(0,S.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all","available"===e.status?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-10 h-10 rounded-full flex items-center justify-center","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:(0,s.jsx)(o.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ext. ",e.extension]})]}),(0,s.jsx)("span",{className:(0,S.cn)("text-xs px-2 py-0.5 rounded-full","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:e.status})]},e.id)),0===f.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No agents found"})]}),"queues"===r&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[p.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e),disabled:0===e.availableAgents,className:(0,S.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all",e.availableAgents>0?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center",children:(0,s.jsx)(y.Z,{className:"w-5 h-5 text-purple-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:[e.waitingCalls," waiting • ",e.availableAgents," available"]})]})]},e.id)),0===p.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No queues found"})]}),"external"===r&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Phone Number"}),(0,s.jsx)(C.I,{value:u,onChange:T,placeholder:"+1 (555) 000-0000",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),(0,s.jsxs)(k.z,{onClick:I,disabled:!u,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Transfer to ",u||"Number"]})]})]})]})]})}function D(){var e,t;let{currentCall:a,toggleMute:l,toggleHold:r,hangupCall:n}=(0,j.zs)(),[i,c]=(0,h.useState)(!1),[o,u]=(0,h.useState)(!1),x=null!==(e=null==a?void 0:a.isMuted)&&void 0!==e&&e,b=null!==(t=null==a?void 0:a.isOnHold)&&void 0!==t&&t,y=(0,h.useCallback)(()=>{l()},[l]),N=(0,h.useCallback)(()=>{r()},[r]),k=(0,h.useCallback)(()=>{n()},[n]),C=(0,h.useCallback)(()=>{c(!0)},[]);return((0,h.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key.toLowerCase()){case"m":y();break;case"h":N();break;case"t":C()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y,N,C]),a)?(0,s.jsxs)(s.Fragment,{children:[i&&(0,s.jsx)(I,{onClose:()=>c(!1)}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsxs)("button",{onClick:y,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",x?"bg-red-500/20 border-2 border-red-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:x?(0,s.jsx)(g.Z,{className:"w-6 h-6 text-red-400"}):(0,s.jsx)(f.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:x?"Unmute":"Mute"})]}),(0,s.jsxs)("button",{onClick:N,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-amber-500/20 border-2 border-amber-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:b?(0,s.jsx)(p.Z,{className:"w-6 h-6 text-amber-400"}):(0,s.jsx)(d.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:b?"Resume":"Hold"})]}),(0,s.jsxs)("button",{onClick:C,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","bg-white/10 border-2 border-transparent hover:bg-white/15","transition-all duration-200"),children:(0,s.jsx)(m.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Transfer"})]}),(0,s.jsxs)("button",{onClick:()=>u(!o),className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",o?"bg-cyan-500/20 border-2 border-cyan-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:(0,s.jsx)(v.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Keypad"})]})]}),o&&(0,s.jsx)(T,{}),(0,s.jsxs)("button",{onClick:k,className:(0,S.cn)("w-full py-4 rounded-xl flex items-center justify-center gap-3","bg-gradient-to-r from-red-500 to-red-600","hover:from-red-400 hover:to-red-500","shadow-lg shadow-red-500/25 hover:shadow-xl hover:shadow-red-500/30","transition-all duration-200","active:scale-98"),children:[(0,s.jsx)(w.Z,{className:"w-6 h-6 text-white"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:"End Call"})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:[(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"M"})," Mute"," ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"H"})," Hold"," ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"T"})," Transfer"]})})]})]}):(0,s.jsx)(s.Fragment,{})}function T(){let{sendDTMF:e}=(0,j.zs)();return(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/5 rounded-xl",children:["1","2","3","4","5","6","7","8","9","*","0","#"].map(t=>(0,s.jsx)("button",{onClick:()=>e(t),className:(0,S.cn)("h-12 rounded-lg flex items-centerjustify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","text-white text-lg font-medium","transition-all duration-150 active:scale-95"),children:t},t))})}var O=a(54506),P=a(57197),E=a(30250),A=a(29182),F=a(27604),M=a(68182),L=a(40646),R=a(54375);let H={fullName:o.Z,firstName:o.Z,lastName:o.Z,phoneNumber:l.Z,email:E.Z,company:A.Z,address:F.Z,city:F.Z,state:F.Z,zipCode:F.Z,leadSource:P.Z,campaignName:P.Z,notes:M.Z,createdAt:L.Z,website:R.Z};function q(e){let{data:t,variant:a="panel",className:l}=e,{screenPopFields:r}=(0,j.zs)(),[c,d]=(0,h.useState)("modal"===a),u=r.filter(e=>e.enabled).sort((e,t)=>e.order-t.order),x=e=>{if(e in t){let a=t[e];return null==a?null:"object"==typeof a?JSON.stringify(a):String(a)}return t.customFields&&e in t.customFields?String(t.customFields[e]):null},m=()=>{let e=[t.address,t.city,t.state,t.zipCode].filter(Boolean);return e.length>0?e.join(", "):null},b=e=>{var t;let l=x(e.key);if(["address","city","state","zipCode"].includes(e.key)&&"address"===e.key)l=m();else if(["city","state","zipCode"].includes(e.key)){let e=u.find(e=>"address"===e.key);if(null==e?void 0:e.enabled)return null}if(!l)return null;let r=null!==(t=H[e.key])&&void 0!==t?t:M.Z;return(0,s.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0","modal"===a?"bg-white/10":"bg-cyan-500/10"),children:(0,s.jsx)(r,{className:(0,S.cn)("w-4 h-4","modal"===a?"text-cyan-400":"text-cyan-500")})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-gray-500 text-xsmb-0.5",children:e.label}),(0,s.jsx)("p",{className:(0,S.cn)("text-sm break-words","modal"===a?"text-white":"text-gray-200"),children:l})]})]},e.id)},g=u.map(e=>({field:e,value:x(e.key)})).filter(e=>{let{value:t}=e;return null!==t});if(0===g.length)return(0,s.jsxs)("div",{className:(0,S.cn)("p-4 rounded-xl text-center","modal"===a?"bg-white/5":"bg-slate-800/50",l),children:[(0,s.jsx)(M.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No prospect data available"})]});let f="modal"===a?5:3,p=g.length>f;return(0,s.jsxs)("div",{className:(0,S.cn)("rounded-xl overflow-hidden","modal"===a?"bg-white/5 border border-white/10":"bg-slate-800/30 border border-white/5",l),children:[(0,s.jsxs)("div",{className:(0,S.cn)("px-4 py-3 flex items-center justify-between","modal"===a?"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-white/10":"bg-white/5 border-b border-white/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 text-cyan-400"}),(0,s.jsx)("span",{className:(0,S.cn)("font-medium text-sm","modal"===a?"text-white":"text-gray-200"),children:"Prospect Information"})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[g.length," field",1!==g.length?"s":""]})]}),(0,s.jsx)("div",{className:"px-4 divide-y divide-white/5",children:u.slice(0,c?void 0:f).map(e=>b(e))}),p&&(0,s.jsx)("button",{onClick:()=>d(!c),className:(0,S.cn)("w-full px-4 py-2 flex items-center justify-center gap-2","text-xs text-gray-400 hover:text-white","border-t border-white/5 hover:bg-white/5","transition-colors"),children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{className:"w-4 h-4"}),"Show ",g.length-f," More"]})})]})}function U(e){let{call:t}=e,{answerCall:a,hangupCall:r}=(0,j.zs)(),[n,i]=(0,h.useState)(0);return(0,h.useEffect)(()=>{let e=setInterval(()=>{i(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"fixedinset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,S.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-3xl border border-white/10 shadow-2xl shadow-cyan-500/10","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-300"),children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 rounded-full bg-cyan-500/20 animate-ping"}),(0,s.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-cyan-500/10 animate-pulse"})]}),(0,s.jsxs)("div",{className:"relative pt-8 pb-4 text-center",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-cyan-500/10 rounded-full border border-cyan-500/20 mb-4",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4 text-cyan-400 animate-bounce"}),(0,s.jsx)("span",{className:"text-cyan-400 text-sm font-medium",children:"Incoming Call"})]}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ringing for ","".concat(Math.floor(n/60).toString().padStart(2,"0"),":").concat((n%60).toString().padStart(2,"0"))]})]}),(0,s.jsxs)("div",{className:"relative px-6 pb-6 text-center",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-24 h-24 mx-auto mb-4 rounded-full","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border-2 border-cyan-500/30","flex items-center justify-center","shadow-lg shadow-cyan-500/20"),children:(0,s.jsx)(o.Z,{className:"w-12 h-12 text-cyan-400"})}),(0,s.jsx)("h2",{className:"text-white text-2xl font-bold mb-1",children:t.callerName||"Unknown Caller"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg font-mono",children:t.phoneNumber}),t.queueName&&(0,s.jsx)("div",{className:"mt-3 flex items-center justify-center gap-2",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-500/10 rounded-full text-purple-400 text-xs",children:[(0,s.jsx)(P.Z,{className:"w-3 h-3"}),t.queueName]})})]}),t.prospectData&&Object.keys(t.prospectData).length>0&&(0,s.jsx)("div",{className:"px-6 pb-6",children:(0,s.jsx)(q,{data:t.prospectData,variant:"modal"})}),(0,s.jsx)("div",{className:"px-6 pb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,s.jsxs)("button",{onClick:()=>{r()},className:(0,S.cn)("grouprelative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-16 h-16 rounded-full","bg-gradient-to-br from-red-500 to-red-600","flex items-center justify-center","shadow-lg shadow-red-500/30","group-hover:shadow-xl group-hover:shadow-red-500/40","transition-all duration-200"),children:(0,s.jsx)(w.Z,{className:"w-7 h-7 text-white"})}),(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Decline"})]}),(0,s.jsxs)("button",{onClick:()=>{a()},className:(0,S.cn)("group relative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-20 h-20 rounded-full","bg-gradient-to-br from-emerald-500 to-green-600","flex items-center justify-center","shadow-lg shadow-emerald-500/30","group-hover:shadow-xl group-hover:shadow-emerald-500/40","transition-all duration-200","animate-pulse"),children:(0,s.jsx)(l.Z,{className:"w-9 h-9 text-white"})}),(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Answer"})]})]})}),(0,s.jsx)("div",{className:"px-6 pb-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Press ",(0,s.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"A"})," to answer or",(0,s.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"D"})," to decline"]})})]})]})}var B=a(1560),J=a(30999);function W(){var e;let{agentStatus:t,currentCall:a,isPhonePanelOpen:m,closePhonePanel:g,togglePhonePanel:f,error:p,clearError:v}=(0,j.zs)(),[w,y]=(0,h.useState)(!0),[N,C]=(0,h.useState)("dialpad"),[Z,z]=(0,h.useState)(!1);return m?(0,s.jsxs)(s.Fragment,{children:[(null==a?void 0:a.state)==="ringing"&&"inbound"===a.direction&&(0,s.jsx)(U,{call:a}),Z&&(0,s.jsx)(B.h,{onClose:()=>z(!1)}),(0,s.jsxs)(J.Zb,{className:(0,S.cn)("fixed bottom-6 right-6 z-40","w-[380px] overflow-hidden","bg-gradient-to-b from-slate-900/95 to-slate-950/95","backdrop-blur-xl border-white/10","shadow-2xl shadow-black/50","transition-all duration-300 ease-out",w?"h-auto":"h-[72px]"),children:[(0,s.jsxs)(J.Ol,{className:"p-4 pb-3 space-y-0 flex flex-row items-center justify-between border-b border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-10 h-10 rounded-xl flex items-center justify-center","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border border-cyan-500/30"),children:(0,s.jsx)(l.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Agent Phone"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(b.b,{})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(null==a?void 0:a.state)==="active"&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 rounded-full mr-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-emerald-400 text-xs font-mono",children:(e=a.duration,"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")))})]}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>z(!0),children:(0,s.jsx)(r.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>y(!w),children:w?(0,s.jsx)(n.Z,{className:"w-4 h-4"}):(0,s.jsx)(i.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:g,children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),p&&(0,s.jsx)("div",{className:"px-4 py-2 bg-red-500/10 border-b border-red-500/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-red-400 text-xs",children:p}),(0,s.jsx)("button",{onClick:v,className:"text-red-400 hover:text-red-300",children:(0,s.jsx)(c.Z,{className:"w-3 h-3"})})]})}),w&&(0,s.jsxs)(J.aY,{className:"p-0",children:[a&&"ringing"!==a.state&&"ended"!==a.state&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[a.prospectData&&(0,s.jsx)(q,{data:a.prospectData}),(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center border border-cyan-500/30",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 text-cyan-400"})}),(0,s.jsx)("h4",{className:"text-white font-semibold text-lg",children:a.callerName||"Unknown Caller"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:a.phoneNumber}),a.queueName&&(0,s.jsxs)("p",{className:"text-cyan-400 text-xs mt-1",children:["From:",a.queueName]})]}),a.isOnHold&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 bg-amber-500/10 rounded-lg",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-amber-400"}),(0,s.jsx)("span",{className:"text-amber-400 text-sm",children:"Call On Hold"})]}),(0,s.jsx)(D,{})]}),(!a||"ended"===a.state)&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsx)("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["dialpad","history","settings"].map(e=>(0,s.jsxs)("button",{onClick:()=>C(e),className:(0,S.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all",N===e?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5"),children:["dialpad"===e&&(0,s.jsx)(u.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"history"===e&&(0,s.jsx)(x.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"settings"===e&&(0,s.jsx)(r.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),"dialpad"===N&&(0,s.jsx)(O.c,{}),"history"===N&&(0,s.jsx)(_,{}),"settings"===N&&(0,s.jsx)(K,{})]})]})]})]}):(0,s.jsxs)("button",{onClick:f,className:(0,S.cn)("fixed bottom-6 right-6 z-50","flex items-center gap-3 px-5 py-3 rounded-full","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","text-white font-medium shadow-2xl","transition-all duration-300 ease-out","hover:scale-105 hover:shadow-cyan-500/25","border border-white/10",(null==a?void0:a.state)==="ringing"&&"animate-pulse"),"aria-label":"Open phone",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5"}),(null==a?void 0:a.state)==="ringing"&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]}),(0,s.jsx)("span",{className:"capitalize",children:"on-call"===t?"On Call":t}),(0,s.jsx)("span",{className:(0,S.cn)("w-2.5 h-2.5 rounded-full",(e=>{switch(e){case"available":return"bg-emerald-500";case"on-call":return"bg-amber-500";case"away":return"bg-red-500";case"dnd":return"bg-purple-500";default:return"bg-gray-500"}})(t))})]})}function _(){let{callHistory:e,makeCall:t}=(0,j.zs)(),a=e=>e?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",r=e=>{t(e)};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(x.Z,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent calls"})]}):(0,s.jsx)("div",{className:"space-y-2max-h-[300px] overflow-y-auto",children:e.map((e,t)=>(0,s.jsx)("button",{onClick:()=>r(e.phoneNumber),className:(0,S.cn)("w-full p-3 rounded-lg text-left transition-all","bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-8 h-8 rounded-full flex items-center justify-center","inbound"===e.direction?"bg-cyan-500/20 text-cyan-400":"bg-blue-500/20 text-blue-400"),children:"inbound"===e.direction?(0,s.jsx)(l.Z,{className:"w-4 h-4"}):(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.callerName||e.phoneNumber}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["inbound"===e.direction?"Incoming":"Outgoing",e.duration>0&&" • ".concat(Math.floor(e.duration/60),"m ").concat(e.duration%60,"s")]})]})]}),(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:a(e.startTime)})]})},"".concat(e.callId,"-").concat(t)))})}function K(){let{audioDevices:e,selectedAudioInput:t,selectedAudioOutput:a,setAudioInput:l,setAudioOutput:n}=(0,j.zs)(),i=e.filter(e=>"audioinput"===e.kind),c=e.filter(e=>"audiooutput"===e.kind);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Microphone"}),(0,s.jsx)("select",{value:null!=t?t:"",onChange:e=>l(e.target.value),className:(0,S.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:i.map(e=>(0,s.jsx)("option",{value:e.deviceId,children:e.label||"Microphone ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Speaker"}),(0,s.jsx)("select",{value:null!=a?a:"",onChange:e=>n(e.target.value),className:(0,S.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:c.map(e=>(0,s.jsx)("option",{value:e.deviceId,children:e.label||"Speaker ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Configure which prospect fields appear during incoming calls."}),(0,s.jsxs)(k.z,{variant:"outline",size:"sm",className:"w-full border-white/10 text-gray-300 hover:bg-white/5",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Configure Screen Pop Fields"]})]})]})}},88562:function(e,t,a){a.d(t,{ZB:function(){return c},zs:function(){return i}});var s=a(91674),l=a(86655);let r=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}],n=(0,l.createContext)(null);function i(){let e=(0,l.useContext)(n);if(!e)throw Error("usePhone must be used within a PhoneProvider");return e}function c(e){let{children:t,wsUrl:a="ws://45.32.213.201:3001",apiUrl:i="http://45.32.213.201:3001"}=e,c=i.replace(/\/api\/v1\/?$/,""),o="a1b2c3d4e5f67890",d=(0,l.useCallback)(function(){let e=!(arguments.length>0)||void0===arguments[0]||arguments[0],t={};return e&&(t["Content-Type"]="application/json"),o&&(t["x-api-key"]=o),t},[o]),[u,x]=(0,l.useState)("offline"),[m,h]=(0,l.useState)(null),[b,g]=(0,l.useState)([]),[f,p]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[y,N]=(0,l.useState)([]),[j,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(null),[Z,z]=(0,l.useState)(()=>{{let e=localStorage.getItem("screenPopFields");if(e)try{return JSON.parse(e)}catch(e){}}return r}),[I,D]=(0,l.useState)(null),T=(0,l.useRef)(null),O=(0,l.useRef)(null),P=(0,l.useRef)(null),E=(0,l.useCallback)(()=>{var e;P.current||(P.current=new Audio("/sounds/ringtone.mp3"),P.current.loop=!0),null===(e=P.current)||void 0===e||e.play().catch(()=>{})},[]),A=(0,l.useCallback)(()=>{P.current&&(P.current.pause(),P.current.currentTime=0)},[]),F=(0,l.useCallback)(()=>{O.current&&clearInterval(O.current),O.current=setInterval(()=>{h(e=>e&&e.answerTime?{...e,duration:Math.floor((Date.now()-e.answerTime.getTime())/1e3)}:e)},1e3)},[]),M=(0,l.useCallback)(()=>{O.current&&(clearInterval(O.current),O.current=null)},[]),L=(0,l.useCallback)(e=>{var t,a,s,l;e&&(h({callId:null!==(t=e.callId)&&void 0!==t?t:"call_".concat(Date.now()),direction:"inbound",state:"ringing",phoneNumber:null!==(s=null!==(a=e.callerNumber)&&void 0!==a?a:e.from)&&void 0!==s?s:"",callerName:e.callerName,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0,prospectData:null!==(l=e.prospectData)&&void 0!==l?l:e.screenPopData,queueName:e.queueName,campaignId:e.campaignId}),p(!0),E())},[E]),R=(0,l.useCallback)(()=>{h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),A(),F()},[A,F]),H=(0,l.useCallback)(()=>{h(e=>{if(e){let t={...e,state:"ended",endTime:new Date};g(e=>[t,...e].slice(0,50))}return null}),x("available"),A(),M()},[A,M]),q=(0,l.useCallback)(e=>{e&&h(t=>{var a;if(!t)return t;let s=null!==(a=e.isOnHold)&&void 0!==a?a:!t.isOnHold;return{...t,isOnHold:s,state:s?"hold":"active"}})},[]),U=(0,l.useCallback)(e=>{let{type:t,channel:a,payload:s}=e;if("event"===t)switch(a){case"agent.call.incoming":L(s);break;case"agent.call.answered":R();break;case"agent.call.ended":H();break;case"agent.call.hold":q(s)}},[L,R,H,q]);(0,l.useEffect)(()=>{let e=()=>{try{let t=new WebSocket("".concat(a,"/ws/events?apiKey=").concat("a1b2c3d4e5f67890"));t.onopen=()=>{t.send(JSON.stringify({type:"subscribe",channels:["agent.call.*","agent.status.*"]}))},t.onmessage=e=>{try{let t=JSON.parse(e.data);U(t)}catch(e){}},t.onclose=()=>{setTimeout(e,3e3)},T.current=t}catch(t){setTimeout(e,3e3)}};return e(),()=>{T.current&&T.current.close()}},[a,U]),(0,l.useEffect)(()=>{if(!navigator.mediaDevices)return;let e=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0});let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind||"audiooutput"===e.kind);N(e);let t=e.find(e=>"audioinput"===e.kind),a=e.find(e=>"audiooutput"===e.kind);t&&!j&&k(t.deviceId),a&&!C&&S(a.deviceId)}catch(e){}};e();let t=()=>{e()};return navigator.mediaDevices.addEventListener("devicechange",t),()=>{navigator.mediaDevices.removeEventListener("devicechange",t)}},[j,C]);let B=(0,l.useCallback)(e=>{z(e),localStorage.setItem("screenPopFields",JSON.stringify(e))},[]),J=(0,l.useCallback)(e=>{fetch("".concat(c,"/api/v1/agent/status"),{method:"PUT",headers:d(),body:JSON.stringify({status:e})}).catch(()=>{}),x(e)},[c,d]),W=(0,l.useCallback)(()=>p(!0),[]),_=(0,l.useCallback)(()=>p(!1),[]),K=(0,l.useCallback)(()=>p(e=>!e),[]),Y=(0,l.useCallback)(async e=>{console.log("[Phone] Initiating call to:",e),w(!0),D(null);try{var t,a,s;let l="".concat(c,"/api/v1/agent/call/originate");console.log("[Phone] Calling API:",l);let r=await fetch(l,{method:"POST",headers:d(),body:JSON.stringify({phoneNumber:e})}),n=await r.json();if(console.log("[Phone] API response:",r.status,n),!r.ok)throw Error(null!==(a=null===(t=n.error)||void 0===t?void 0:t.message)&&void 0!==a?a:"Failed to place call");let i={callId:null!==(s=n.callId)&&void 0!==s?s:"call_".concat(Date.now()),direction:"outbound",state:"connecting",phoneNumber:e,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0};console.log("[Phone] Call initiated successfully:",i),h(i),x("on-call"),p(!0),setTimeout(()=>{h(e=>e&&e.callId===i.callId?{...e,state:"active",answerTime:new Date}:e),F()},2e3)}catch(e){console.error("[Phone] Call failed:",e),D(e instanceof Error?e.message:"Failed to place call")}finally{w(!1)}},[c,d,F]),G=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/answer"),{method:"POST",headers:d(!1)}),h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),A(),F()}catch(e){D(e instanceof Error?e.message:"Failed to answer call")}},[c,m,A,F,d]),V=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/hangup"),{method:"POST",headers:d(!1)});let e={...m,state:"ended",endTime:new Date};g(t=>[e,...t].slice(0,50)),h(null),x("available"),M()}catch(e){D(e instanceof Error?e.message:"Failed to hang up")}},[c,m,M,d]),$=(0,l.useCallback)(()=>{h(e=>e?{...e,isMuted:!e.isMuted}:e)},[]),Q=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/hold"),{method:"POST",headers:d(!1)}),h(e=>e?{...e,isOnHold:!e.isOnHold,state:e.isOnHold?"active":"hold"}:e)}catch(e){D(e instanceof Error?e.message:"Failed to toggle hold")}},[c,m,d]),X=(0,l.useCallback)(e=>{m&&console.log("[Phone] Sending DTMF:",e)},[m]),ee=(0,l.useCallback)(async(e,t)=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/transfer"),{method:"POST",headers:d(),body:JSON.stringify({destination:e,type:t})}),"blind"===t&&(h(null),x("available"))}catch(e){D(e instanceof Error?e.message:"Failed to transfer call")}},[c,m,d]),et=(0,l.useCallback)(e=>{k(e)},[]),ea=(0,l.useCallback)(e=>{S(e)},[]),es=(0,l.useCallback)(()=>D(null),[]);return(0,s.jsx)(n.Provider,{value:{agentStatus:u,currentCall:m,callHistory:b,isPhonePanelOpen:f,isConnecting:v,audioDevices:y,selectedAudioInput:j,selectedAudioOutput:C,screenPopFields:Z,error:I,setAgentStatus:J,openPhonePanel:W,closePhonePanel:_,togglePhonePanel:K,makeCall:Y,answerCall:G,hangupCall:V,toggleMute:$,toggleHold:Q,sendDTMF:X,transferCall:ee,setAudioInput:et,setAudioOutput:ea,updateScreenPopFields:B,clearError:es},children:t})}},1560:function(e,t,a){a.d(t,{h:function(){return y}});var s=a(91674),l=a(61082),r=a(4458),n=a(30250),i=a(29182),c=a(27604),o=a(57197),d=a(68182),u=a(77037),x=a(55491),m=a(47791),h=a(72781),b=a(86655),g=a(88562),f=a(90747),p=a(33061);let v={fullName:l.Z,firstName:l.Z,lastName:l.Z,phoneNumber:r.Z,email:n.Z,company:i.Z,address:c.Z,city:c.Z,state:c.Z,zipCode:c.Z,leadSource:o.Z,campaignName:o.Z,notes:d.Z},w=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}];function y(e){let{onClose:t}=e,{screenPopFields:a,updateScreenPopFields:l}=(0,g.zs)(),[r,n]=(0,b.useState)([...a]),[i,c]=(0,b.useState)(null),o=(0,b.useCallback)(e=>{n(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},[]),y=(0,b.useCallback)(e=>{c(e)},[]),N=(0,b.useCallback)(e=>{i&&i!==e&&n(t=>{let a=t.findIndex(e=>e.id===i),s=t.findIndex(t=>t.id===e);if(-1===a||-1===s)return t;let l=[...t],[r]=l.splice(a,1);return l.splice(s,0,r),l.map((e,t)=>({...e,order:t+1}))})},[i]),j=(0,b.useCallback)(()=>{c(null)},[]),k=(0,b.useCallback)(()=>{l(r),t()},[r,l,t]),C=(0,b.useCallback)(()=>{n([...w])},[]),S=(0,b.useCallback)(e=>{e.target===e.currentTarget&&t()},[t]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:S,role:"dialog","aria-modal":"true",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,p.cn)("relative z-10 w-full max-w-lg mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-white text-lg font-semibold",children:"Screen Pop Settings"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-0.5",children:"Configure which fields appear during incoming calls"})]}),(0,s.jsx)(f.z,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400 hover:text-white",children:(0,s.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"px-6 py-4 max-h-[400px] overflow-y-auto",children:(0,s.jsx)("div",{className:"space-y-2",children:r.sort((e,t)=>e.order-t.order).map(e=>{var t;let a=null!==(t=v[e.key])&&void 0!==t?t:d.Z;return(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>y(e.id),onDragOver:t=>{t.preventDefault(),N(e.id)},onDragEnd:j,className:(0,p.cn)("flex items-center gap-3 p-3 rounded-lg","bg-white/5 border border-transparent","hover:bg-white/10 hover:border-white/10","transition-all cursor-move",i===e.id&&"opacity-50 scale-95"),children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),(0,s.jsx)("div",{className:(0,p.cn)("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",e.enabled?"bg-cyan-500/10 text-cyan-400":"bg-white/5 text-gray-500"),children:(0,s.jsx)(a,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:(0,p.cn)("flex-1 text-sm",e.enabled?"text-white":"text-gray-500"),children:e.label}),(0,s.jsx)("button",{onClick:()=>o(e.id),className:(0,p.cn)("w-10 h-6 rounded-full p-1 transition-colors",e.enabled?"bg-cyan-500":"bg-white/10"),children:(0,s.jsx)("div",{className:(0,p.cn)("w-4 h-4 rounded-full bg-white transition-transform",e.enabled?"translate-x-4":"translate-x-0")})})]},e.id)})})}),(0,s.jsxs)("div",{className:"px-6 py-3 bg-white/5 border-t border-white/10",children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Preview:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:r.filter(e=>e.enabled).sort((e,t)=>e.order-t.order).map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-cyan-500/10 text-cyan-400 text-xs rounded-full border border-cyan-500/20",children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex items-center justify-between",children:[(0,s.jsxs)(f.z,{variant:"ghost",onClick:C,className:"text-gray-400 hover:text-white gap-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Reset to Default"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(f.z,{variant:"outline",onClick:t,className:"border-white/10",children:"Cancel"}),(0,s.jsxs)(f.z,{onClick:k,className:"bg-gradient-to-r from-cyan-600 to-blue-600 gap-2",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})]})]})}},90747:function(e,t,a){a.d(t,{z:function(){return o}});var s=a(91674),l=a(32814),r=a(47828),n=a(86655),i=a(33061);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:o=!1,...d}=e,u=o?l.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:r,size:n,className:a})),ref:t,...d})});o.displayName="Button"},30999:function(e,t,a){a.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},ll:function(){return c}});var s=a(91674),l=a(86655),r=a(33061);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});c.displayName="CardTitle";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});o.displayName="CardDescription";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...l})});d.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},66120:function(e,t,a){a.d(t,{I:function(){return n}});var s=a(91674),l=a(86655),r=a(33061);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-inputbg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},33061:function(e,t,a){a.d(t,{LU:function(){return c},cn:function(){return r},p6:function(){return o},un:function(){return n},xG:function(){return i}});var s=a(44115),l=a(38352);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.m6)((0,s.W)(t))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function c(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(s).padStart(2,"0")):"".concat(a,":").concat(String(s).padStart(2,"0"))}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/campaigns/page-082ed12c46fcb478.js: */let l=(0,a(19596).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 00 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var i=a(86655),o=a(54741),d=a(90747),c=a(88151),u=a(66120),f=a(66801),m=a(38137),h=a(28314);function p(e){let{open:t,onOpenChange:a,onSuccess:s}=e,[n,l]=(0,i.useState)(!1),[p,x]=(0,i.useState)(null),[g,b]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[j,w]=(0,i.useState)(!1),[N,k]=(0,i.useState)({name:"",publisherId:"",flowId:"",status:"ACTIVE"});(0,i.useEffect)(()=>{t&&(k({name:"",publisherId:"",flowId:"",status:"ACTIVE"}),x(null),C())},[t]);letC=async()=>{w(!0);try{var e,t;if("true"===localStorage.getItem("demoMode"))b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]);else{let e=await h.x.get("/api/v1/publishers");(null===(t=e.data)||void 0===t?void 0:t.data)?b(e.data.data):b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}])}let a=await h.x.get("/api/v1/flows");(null===(e=a.data)||void 0===e?void 0:e.data)?y(a.data.data):y([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}catch(e){console.warn("Failedto load initial data, using mock data:",e),b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]),y([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}finally{w(!1)}},R=async()=>{if(!N.name.trim()){x("Campaign name isrequired");return}if(!N.publisherId){x("Publisher is required");return}l(!0),x(null);try{let t=await h.x.post("/api/v1/campaigns",{name:N.name.trim(),publisherId:N.publisherId,flowId:N.flowId||void 0,status:N.status});if(t.error){var e;if("NETWORK_ERROR"===t.error.code||(null===(e=t.error.message)||void 0===e?void 0:e.includes("Failed to fetch")))throw Error("Unable to connect to the server. Please make sure the API server is running.");throw Error(t.error.message||"Failed to create campaign")}t.data&&(null==s||s(),a(!1))}catch(t){let e=t instanceof Error?t.message:"Failed to create campaign";x(e),(e.includes("connect to the server")||e.includes("Failed to fetch"))&&alert("Cannot connect to the API server. Please make sure the backend is running on port 3001.")}finally{l(!1)}};return(0,r.jsx)(c.Vq,{open:t,onOpenChange:a,children:(0,r.jsxs)(c.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,r.jsxs)(c.fK,{children:[(0,r.jsx)(c.$N,{children:"Create New Campaign"}),(0,r.jsx)(c.Be,{children:"Create a new call campaign to manage your outbound calling operations."})]}),(0,r.jsx)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:j?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(o.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"name",children:"Campaign Name *"}),(0,r.jsx)(u.I,{id:"name",placeholder:"e.g., Summer Campaign 2024",value:N.name,onChange:e=>k({...N,name:e.target.value}),disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"publisher",children:"Publisher *"}),(0,r.jsxs)(m.Ph,{value:N.publisherId||void 0,onValueChange:e=>k({...N,publisherId:e}),disabled:n||j,children:[(0,r.jsx)(m.i4,{id:"publisher",children:(0,r.jsx)(m.ki,{placeholder:"Select a publisher"})}),(0,r.jsx)(m.Bw,{children:0===g.length?(0,r.jsx)(m.Ql,{value:"no-publishers",disabled:!0,children:"No publishers available"}):g.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.name," (",e.code,")"]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"flow",children:"Flow (Optional)"}),(0,r.jsxs)(m.Ph,{value:N.flowId||void 0,onValueChange:e=>k({...N,flowId:e||""}),disabled:n||j,children:[(0,r.jsx)(m.i4,{id:"flow",children:(0,r.jsx)(m.ki,{placeholder:"Select a flow (optional)"})}),(0,r.jsx)(m.Bw,{children:0===v.length?(0,r.jsx)(m.Ql,{value:"no-flows",disabled:!0,children:"No flows available"}):v.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.name," (v",e.version,")"]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,r.jsxs)(m.Ph,{value:N.status,onValueChange:e=>k({...N,status:e}),disabled:n,children:[(0,r.jsx)(m.i4,{id:"status",children:(0,r.jsx)(m.ki,{})}),(0,r.jsxs)(m.Bw,{children:[(0,r.jsx)(m.Ql,{value:"ACTIVE",children:"Active"}),(0,r.jsx)(m.Ql,{value:"PAUSED",children:"Paused"})]})]})]}),p&&(0,r.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:p})]})}),(0,r.jsxs)(c.cN,{children:[(0,r.jsx)(d.z,{variant:"outline",onClick:()=>a(!1),disabled:n||j,children:"Cancel"}),(0,r.jsxs)(d.z,{onClick:R,disabled:n||j||!N.name.trim()||!N.publisherId,children:[n&&(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Campaign"]})]})]})})}var x=a(60044),g=a(30999),b=a(86190);let v=[{id:"1",name:"Summer Campaign",status:"active",flow:"Default Flow",calls:1234,asr:.65,createdAt:"2024-01-15"},{id:"2",name:"Winter Campaign",status:"paused",flow:"Holiday Flow",calls:567,asr:.58,createdAt:"2024-01-10"}];function y(){let[e,t]=(0,i.useState)(!1);return(0,r.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Campaigns"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your call campaigns and flows"})]}),(0,r.jsxs)(d.z,{onClick:()=>{t(!0)},children:[(0,r.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),"New Campaign"]})]}),(0,r.jsxs)(g.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,r.jsxs)(g.Ol,{className:"flex-shrink-0",children:[(0,r.jsx)(g.ll,{children:"Campaigns"}),(0,r.jsx)(g.SZ,{children:"View and manageall campaigns"})]}),(0,r.jsx)(g.aY,{className:"flex-1 overflow-y-auto min-h-0",children:(0,r.jsxs)(b.iA,{children:[(0,r.jsx)(b.xD,{children:(0,r.jsxs)(b.SC,{children:[(0,r.jsx)(b.ss,{children:"Name"}),(0,r.jsx)(b.ss,{children:"Status"}),(0,r.jsx)(b.ss,{children:"Flow"}),(0,r.jsx)(b.ss,{children:"Calls"}),(0,r.jsx)(b.ss,{children:"ASR"}),(0,r.jsx)(b.ss,{children:"Created"}),(0,r.jsx)(b.ss,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(b.RM,{children:v.map(e=>(0,r.jsxs)(b.SC,{children:[(0,r.jsx)(b.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(b.pj,{children:(0,r.jsx)(x.C,{variant:"active"===e.status?"success":"secondary",children:e.status})}),(0,r.jsx)(b.pj,{children:e.flow}),(0,r.jsx)(b.pj,{children:e.calls.toLocaleString()}),(0,r.jsxs)(b.pj,{children:[(100*e.asr).toFixed(1),"%"]}),(0,r.jsx)(b.pj,{children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)(b.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})}),(0,r.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(l,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,r.jsx)(p,{open:e,onOpenChange:t,onSuccess:()=>{window.location.reload()}})]})}},60044:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var r=a(91674),s=a(47828);a(86655);var n=a(33061);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(91674),s=a(32814),n=a(47828),l=a(86655),i=a(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},88151:function(e,t,a){"use strict";a.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var r=a(91674),s=a(7472),n=a(77037),l=a(86655),i=a(33061);let o=s.fC;s.xz;let d=s.h_;s.x8;let c=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});c.displayName=s.aV.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[l,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let h=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});h.displayName=s.Dx.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});p.displayName=s.dk.displayName},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var r=a(91674),s=a(35974),n=a(86655),l=a(33061);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n})});i.displayName=s.f.displayName},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return x},i4:function(){return f},ki:function(){return u}});var r=a(91674),s=a(65485),n=a(50802),l=a(98371),i=a(72781),o=a(86655),d=a(33061);let c=s.fC;s.ZA;let u=s.B4,f=o.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,r.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,r.jsx)(s.JO,{asChild:!0,children:(0,r.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let m=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let h=o.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:n,position:l="popper",...i}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(m,{}),(0,r.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(h,{})]})})});p.displayName=s.VY.displayName,o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=s.__.displayName;let x=o.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,r.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(s.eT,{children:n})]})});x.displayName=s.ck.displayName,o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=s.Z0.displayName},86190:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return s}});class r{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),a=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new r},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return d},un:function(){return l},xG:function(){return i}});var r=a(44115),s=a(38352);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(a,":").concat(String(r).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},54741:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/flows/page-30b598e10845117f.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7416],{51235:function(e,t,a){Promise.resolve().then(a.bind(a,4550))},4550:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var r=a(91674),n=a(28814),o=a(16728),l=a(54741),s=a(24341),i=a(30588),d=a(86655);a(10026);var c=a(95807),u=a(4458),m=a(77914),p=a(51436),f=a(6481),h=a(40100),g=a(57197),x=a(4608),v=a(80317),y=a(47791),b=a(95902),w=a(33061);let N={entry:c.Z,ivr:u.Z,if:m.Z,queue:p.Z,buyer:f.Z,record:h.Z,tag:g.Z,whisper:x.Z,timeout:v.Z,fallback:y.Z,hangup:b.Z},j={entry:"bg-[#00D084]",ivr:"bg-[#1E3A5F]",if:"bg-[#FF6B35]",queue:"bg-[#1E3A5F]",buyer:"bg-[#FF6B35]",record:"bg-[#00D084]",tag:"bg-[#1E3A5F]",whisper:"bg-[#00D084]",timeout:"bg-gray-500",fallback:"bg-[#FF6B35]",hangup:"bg-slate-500"};function k(e){let{data:t,selected:a}=e,l=t.nodeType||"entry",s=N[l]||c.Z,i=j[l]||"bg-gray-500";return(0,r.jsxs)("div",{className:(0,w.cn)("rounded-lg border-2 bg-card p-4shadow-md transition-all",a?"border-primary shadow-lg":"border-border"),children:[(0,r.jsx)(n.HH,{type:"target",position:o.Ly.Top,className:"!bg-primary"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:(0,w.cn)("flex h-10 w-10 items-center justify-center rounded",i),children:(0,r.jsx)(s,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:t.label}),t.config&&Object.keys(t.config).length>0&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:function(e,t){switch(e){case"entry":return t.target?"→ ".concat(t.target):"No target";case"ivr":return t.prompt?"Prompt: ".concat(String(t.prompt).substring(0,20),"..."):"No prompt";case"if":return t.condition?"If: ".concat(String(t.condition).substring(0,20),"..."):"No condition";case"queue":return t.queueId?"Queue:".concat(t.queueId):"No queue";case"buyer":return t.strategy?"Strategy: ".concat(t.strategy):"No strategy";case"record":return t.format?"Format: ".concat(t.format):"No format";case"tag":return t.tags?"".concat(Object.keys(t.tags).length," tags"):"No tags";case"whisper":return t.callerPrompt?"Whisper configured":"No prompts";case"timeout":return t.duration?"".concat(t.duration,"s"):"0s";case"fallback":return t.targets?"".concat(t.targets.length," targets"):"No targets";case"hangup":return t.reason?"Reason: ".concat(t.reason):"Normal";default:return""}}(l,t.config)})]})]}),(0,r.jsx)(n.HH,{type:"source",position:o.Ly.Bottom,className:"!bg-primary"})]})}var C=a(5814),E=a(90747);function F(e){var t,a,n;let{edge:o,onUpdate:l,onDelete:s}=e,i=(null===(t=o.data)||void 0===t?void 0:t.condition)||"",d=null!==(n=null===(a=o.data)||void 0===a?void 0:a.weight)&&void 0!==n?n:void 0;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Edge Configuration"}),s&&(0,r.jsx)(E.z,{onClick:()=>s(o.id),variant:"destructive",size:"sm",children:(0,r.jsx)(C.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["From: ",o.source," → To: ",o.target]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Condition"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>l(o.id,{...o.data,condition:e.target.value}),className:"w-full rounded border px-2 py-1",placeholder:"e.g., '1' for IVR choice, 'true' for if-then, 'connected' for queue"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Condition expression for routing (e.g., DTMF digit, event type, or boolean)"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Weight (Priority)"}),(0,r.jsx)("input",{type:"number",value:null!=d?d:"",onChange:e=>l(o.id,{...o.data,weight:e.target.value?parseInt(e.target.value):void 0}),className:"w-full rounded border px-2 py-1",placeholder:"Higher weight = higher priority"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used for weighted routing and priority ordering"})]})]})}class Z{serializeToFlow(e,t,a,r,n){var o,l,s;let i=e.find(e=>"entry"===e.type);if(!i)throw Error("Flow must have an entry node");let d=new Map;e.forEach(e=>{d.set(e.id,e)});let c=new Map;t.forEach(e=>{var t,a;c.has(e.source)||c.set(e.source,[]),c.get(e.source).push({target:e.target,condition:null===(t=e.data)||void 0===t?void 0:t.condition,weight:null===(a=e.data)||void 0===a?void 0:a.weight})});let u=e.filter(e=>"entry"!==e.type).map(e=>this.convertNodeToFlowNode(e,c)),m=null===(o=i.data.config)||void 0===o?void 0:o.target,p=c.get(i.id)||[],f=m||(null===(l=p[0])||void 0===l?void 0:l.target)||(null===(s=u[0])||void 0===s?void 0:s.id)||"",h={id:i.id,type:"entry",target:f};return{id:n||"flow-".concat(Date.now()),name:a,version:r,entry:h,nodes:u}}convertNodeToFlowNode(e,t){var a,r,n,o,l;let s=e.data.config||{},i=t.get(e.id)||[],d=null===(a=i[0])||void 0===a?void 0:a.target;switch(e.type){case"ivr":{let t=i.filter(e=>e.condition).map(e=>({digits:e.condition||"",target:e.target}));return{id:e.id,type:"ivr",prompt:s.prompt||"",timeout:s.timeout||void 0,maxDigits:s.maxDigits||void 0,finishOnKey:s.finishOnKey||void 0,choices:t,default:(null===(r=i.find(e=>!e.condition))||void 0===r?void 0:r.target)||s.default,...d?{next:d}:{}}}case"if":{let t=i.find(e=>"true"===e.condition||1===e.weight),a=i.find(e=>"false"===e.condition||0===e.weight);return{id:e.id,type:"if",condition:s.condition||"",then:(null==t?void 0:t.target)||s.then||"",else:(null==a?void 0:a.target)||s.else||void 0}}case"queue":{let t=i.find(e=>"connected"===e.condition),a=i.find(e=>"timeout"===e.condition),r=i.find(e=>"full"===e.condition);return{id:e.id,type:"queue",queueId:s.queueId||"",waitUrl:s.waitUrl||void 0,timeout:s.timeout||void 0,maxSize:s.maxSize||void 0,onTimeout:(null==a?void 0:a.target)||s.onTimeout||void 0,onFull:(null==r?void 0:r.target)||s.onFull||void 0,onConnect:(null==t?void 0:t.target)||s.onConnect||void 0}}case"buyer":return{id:e.id,type:"buyer",buyers:s.buyers||[],strategy:s.strategy||"round-robin",onNoBuyers:(null===(n=i.find(e=>"no-buyers"===e.condition))||void 0===n?void 0:n.target)||s.onNoBuyers||void 0,onAllBusy:(null===(o=i.find(e=>"all-busy"===e.condition))||void 0===o?void 0:o.target)||s.onAllBusy||void 0,...d?{next:d}:{}};case"record":{let t=i.find(e=>"complete"===e.condition),a=i.find(e=>"error"===e.condition);return{id:e.id,type:"record",format:s.format||"wav",channels:s.channels||"dual",beep:s.beep||!1,onComplete:(null==t?void 0:t.target)||s.onComplete||void 0,onError:(null==a?void 0:a.target)||s.onError||void 0}}case"tag":return{id:e.id,type:"tag",tags:s.tags||{},...d?{next:d}:{}};case"whisper":{let t=i.find(e=>"accept"===e.condition),a=i.find(e=>"reject"===e.condition);return{id:e.id,type:"whisper",callerPrompt:s.callerPrompt||void 0,calleePrompt:s.calleePrompt||void 0,onAccept:(null==t?void 0:t.target)||s.onAccept||void 0,onReject:(null==a?void 0:a.target)||s.onReject||void 0,timeout:s.timeout||void 0}}case"timeout":return{id:e.id,type:"timeout",duration:s.duration||0,...d?{next:d}:{}};case"fallback":{let t=i.map(e=>e.target);return{id:e.id,type:"fallback",targets:t.length>0?t:s.targets||[],onAllFailed:(null===(l=i.find(e=>"all-failed"===e.condition))||void 0===l?void 0:l.target)||s.onAllFailed||void 0}}case"hangup":return{id:e.id,type:"hangup",reason:s.reason||"normal"};default:throw Error("Unknown node type: ".concat(e.type))}}deserializeFromFlow(e){let t=[],a=[],r={id:e.entry.id,type:"entry",position:{x:250,y:100},data:{label:"Entry",nodeType:"entry",config:{target:e.entry.target}}};t.push(r),e.entry.target&&a.push({id:"edge-".concat(e.entry.id,"-").concat(e.entry.target),source:e.entry.id,target:e.entry.target,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});let n=new Map;return e.nodes.forEach((e,r)=>{let o={x:250+r%3*300,y:200+150*Math.floor(r/3)};n.set(e.id,o);let l=this.convertFlowNodeToNode(e,o);t.push(l),this.createEdgesFromFlowNode(e,a)}),{nodes:t,edges:a}}convertFlowNodeToNode(e,t){let a={id:e.id,type:e.type,position:t,data:{label:e.type.charAt(0).toUpperCase()+e.type.slice(1),nodeType:e.type,config:{}}};switch(e.type){case"ivr":a.data.config={prompt:e.prompt,timeout:e.timeout,maxDigits:e.maxDigits,finishOnKey:e.finishOnKey,default:e.default};break;case"if":a.data.config={condition:e.condition,then:e.then,else:e.else};break;case"queue":a.data.config={queueId:e.queueId,waitUrl:e.waitUrl,timeout:e.timeout,maxSize:e.maxSize,onTimeout:e.onTimeout,onFull:e.onFull,onConnect:e.onConnect};break;case"buyer":a.data.config={buyers:e.buyers,strategy:e.strategy,onNoBuyers:e.onNoBuyers,onAllBusy:e.onAllBusy};break;case"record":a.data.config={format:e.format,channels:e.channels,beep:e.beep,onComplete:e.onComplete,onError:e.onError};break;case"tag":a.data.config={tags:e.tags};break;case"whisper":a.data.config={callerPrompt:e.callerPrompt,calleePrompt:e.calleePrompt,onAccept:e.onAccept,onReject:e.onReject,timeout:e.timeout};break;case"timeout":a.data.config={duration:e.duration};break;case"fallback":a.data.config={targets:e.targets,onAllFailed:e.onAllFailed};break;case"hangup":a.data.config={reason:e.reason}}return a}createEdgesFromFlowNode(e,t){switch(e.type){case"ivr":e.choices&&e.choices.forEach((a,r)=>{t.push({id:"edge-".concat(e.id,"-").concat(a.target,"-").concat(r),source:e.id,target:a.target,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:a.digits}})}),e.default&&t.push({id:"edge-".concat(e.id,"-").concat(e.default,"-default"),source:e.id,target:e.default,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}}),"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});break;case"if":e.then&&t.push({id:"edge-".concat(e.id,"-").concat(e.then,"-then"),source:e.id,target:e.then,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"true"}}),e.else&&t.push({id:"edge-".concat(e.id,"-").concat(e.else,"-else"),source:e.id,target:e.else,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"false"}});break;case"queue":e.onConnect&&t.push({id:"edge-".concat(e.id,"-").concat(e.onConnect,"-connect"),source:e.id,target:e.onConnect,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"connected"}}),e.onTimeout&&t.push({id:"edge-".concat(e.id,"-").concat(e.onTimeout,"-timeout"),source:e.id,target:e.onTimeout,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"timeout"}}),e.onFull&&t.push({id:"edge-".concat(e.id,"-").concat(e.onFull,"-full"),source:e.id,target:e.onFull,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"full"}});break;case"buyer":"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}}),e.onNoBuyers&&t.push({id:"edge-".concat(e.id,"-").concat(e.onNoBuyers,"-no-buyers"),source:e.id,target:e.onNoBuyers,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"no-buyers"}}),e.onAllBusy&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAllBusy,"-all-busy"),source:e.id,target:e.onAllBusy,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"all-busy"}});break;case"record":e.onComplete&&t.push({id:"edge-".concat(e.id,"-").concat(e.onComplete,"-complete"),source:e.id,target:e.onComplete,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"complete"}}),e.onError&&t.push({id:"edge-".concat(e.id,"-").concat(e.onError,"-error"),source:e.id,target:e.onError,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"error"}});break;case"tag":case"timeout":"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});break;case"whisper":e.onAccept&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAccept,"-accept"),source:e.id,target:e.onAccept,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"accept"}}),e.onReject&&t.push({id:"edge-".concat(e.id,"-").concat(e.onReject,"-reject"),source:e.id,target:e.onReject,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"reject"}});break;case"fallback":e.targets&&e.targets.forEach((a,r)=>{t.push({id:"edge-".concat(e.id,"-").concat(a,"-").concat(r),source:e.id,target:a,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}})}),e.onAllFailed&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAllFailed,"-all-failed"),source:e.id,target:e.onAllFailed,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"all-failed"}})}}}var A=a(77037),S=a(30999);function T(e){let{nodes:t,edges:a,onClose:n}=e,[o,l]=(0,d.useState)(!1),[s,i]=(0,d.useState)({currentNodeId:null,path:[],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[]}),u=(0,d.useMemo)(()=>t.find(e=>"entry"===e.type),[t]),m=(0,d.useMemo)(()=>{let e=new Map;return t.forEach(t=>e.set(t.id,t)),e},[t]),p=(0,d.useMemo)(()=>{let e=new Map;returna.forEach(t=>{e.has(t.source)||e.set(t.source,[]),e.get(t.source).push(t)}),e},[a]),f=(0,d.useCallback)(()=>{var e,t;if(!u){alert("No entry node found");return}let r=(null===(e=u.data.config)||void 0===e?void 0:e.target)||(null===(t=a.find(e=>e.source===u.id))||void 0===t?void 0:t.target);if(!r){alert("No target node found from entry");return}l(!0),i({currentNodeId:r,path:[u.id,r],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[{type:"call.started",timestamp:new Date().toISOString(),data:{from:"+1234567890",to:"+0987654321"}}]})},[u,a]),h=(0,d.useCallback)((e,t)=>{if(!s.currentNodeId)return;let a=m.get(s.currentNodeId);if(!a)return;let r=[...s.events,{type:e,timestamp:newDate().toISOString(),data:t}],n=function(e,t,a,r,n){var o,l,s,i,d,c;let u=r.get(e.id)||[],m=e.data.config||{};switch(e.type){case"ivr":if("dtmf.received"===t){let e=(null==a?void 0:a.digits)||"",t=u.find(t=>{var a;return(null===(a=t.data)||void 0===a?void 0:a.condition)===e});return(null==t?void 0:t.target)||m.default||null}break;case"if":{let e=function(e,t){try{let a=e;if((a=(a=a.replace(/\$\{caller\.number\}/g,"'+1234567890'")).replace(/\$\{hour\}/g,String(t.hour||12))).includes("==")){let[e,t]=a.split("==").map(e=>e.trim());return e===t}if(a.includes(">=")){let[e,t]=a.split(">=").map(e=>parseInt(e.trim()));return e>=t}return!1}catch(e){return!1}}(m.condition||"",n),t=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="true"}),a=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="false"});return e?(null==t?void 0:t.target)||m.then||null:(null==a?void 0:a.target)||m.else||null}case"queue":if("queue.connected"===t)return m.onConnect||(null===(o=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="connected"}))||void 0===o?void 0:o.target)||null;if("queue.timeout"===t)return m.onTimeout||(null===(l=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="timeout"}))||void 0===l?void 0:l.target)||null;break;case"whisper":if("whisper.accepted"===t)return m.onAccept||(null===(s=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="accept"}))||void 0===s?void 0:s.target)||null;if("whisper.rejected"===t)return m.onReject||(null===(i=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void0:t.condition)==="reject"}))||void 0===i?void 0:i.target)||null;break;case"record":if("recording.completed"===t)return m.onComplete||(null===(d=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="complete"}))||void 0===d?void 0:d.target)||null;break;default:return(null===(c=u[0])||void 0===c?void 0:c.target)||m.next||null}return null}(a,e,t,p,s.variables);n?i({...s,currentNodeId:n,path:[...s.path,n],events:r}):i({...s,events:r})},[s,m,p]),g=(0,d.useCallback)(()=>{l(!1),i({currentNodeId:null,path:[],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[]})},[]),x=s.currentNodeId?m.get(s.currentNodeId):null;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,r.jsxs)(S.Zb,{className:"w-full max-w-4xl p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Flow Simulator"}),(0,r.jsx)(E.z,{variant:"ghost",size:"sm",onClick:n,children:(0,r.jsx)(A.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(E.z,{onClick:f,disabled:o,children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Start Simulation"]}),(0,r.jsxs)(E.z,{onClick:g,variant:"outline",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Reset"]})]}),x&&(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsxs)("div",{className:"font-semibold",children:["Current Node: ",x.data.label]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",x.id]}),(0,r.jsxs)("div",{className:"mt-2 text-sm",children:["Type: ",x.type]})]}),(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Execution Path"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.path.map((e,t)=>{let a=m.get(e);return(0,r.jsxs)("div",{className:"rounded px-2 py-1 text-xs ".concat(e===s.currentNodeId?"bg-primary text-primary-foreground":"bg-background"),children:[(null==a?void 0:a.data.label)||e,t<s.path.length-1&&(0,r.jsx)("span",{className:"ml-2",children:"→"})]},t)})})]}),x&&(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Inject Event"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(function(e){switch(e){case"ivr":return["dtmf.received","call.ended"];case"queue":return["queue.connected","queue.timeout","call.ended"];case"whisper":return["whisper.accepted","whisper.rejected","call.ended"];case"record":return["recording.completed","call.ended"];default:return["call.answered","call.ended"]}})(x.type).map(e=>(0,r.jsx)(E.z,{size:"sm",variant:"outline",onClick:()=>h(e),children:e},e))})]}),(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Events"}),(0,r.jsx)("div",{className:"max-h-48 space-y-1 overflow-y-auto",children:s.events.map((e,t)=>(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsx)("span",{className:"font-mono text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()}),": ",(0,r.jsx)("span",{className:"font-semibold",children:e.type}),e.data&&(0,r.jsx)("span",{className:"ml-2 text-muted-foreground",children:JSON.stringify(e.data)})]},t))})]})]})]})})}let R=[{type:"entry",label:"Entry",icon:c.Z,color:"bg-[#00D084]"},{type:"ivr",label:"IVR",icon:u.Z,color:"bg-[#1E3A5F]"},{type:"if",label:"If",icon:m.Z,color:"bg-[#FF6B35]"},{type:"queue",label:"Queue",icon:p.Z,color:"bg-[#1E3A5F]"},{type:"buyer",label:"Buyer",icon:f.Z,color:"bg-[#FF6B35]"},{type:"record",label:"Record",icon:h.Z,color:"bg-[#00D084]"},{type:"tag",label:"Tag",icon:g.Z,color:"bg-[#1E3A5F]"},{type:"whisper",label:"Whisper",icon:x.Z,color:"bg-[#00D084]"},{type:"timeout",label:"Timeout",icon:v.Z,color:"bg-gray-500"},{type:"fallback",label:"Fallback",icon:y.Z,color:"bg-[#FF6B35]"},{type:"hangup",label:"Hangup",icon:b.Z,color:"bg-slate-500"}];function D(e){let{onAddNode:t}=e,a=(0,d.useCallback)((e,t)=>{e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"},[]);return(0,r.jsxs)("div",{className:"w-64 border-r bg-card flex flex-col overflow-hidden flex-shrink-0 h-full",children:[(0,r.jsx)("div",{className:"p-4 flex-shrink-0",children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Node Palette"})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4 pt-0",children:(0,r.jsx)("div",{className:"space-y-2",children:R.map(e=>(0,r.jsxs)("div",{draggable:!0,onDragStart:t=>a(t,e.type),className:(0,w.cn)("flex cursor-grab items-center gap-3 rounded-lg border p-3 transition-colors hover:bg-accent","active:cursor-grabbing"),children:[(0,r.jsx)("div",{className:(0,w.cn)("flex h-8 w-8 items-center justify-center rounded",e.color),children:(0,r.jsx)(e.icon,{className:"h-4 w-4 text-white"})}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.type))})})]})}var I=a(66801),q=a(38137),z=a(28314);let B={entry:k,ivr:k,if:k,queue:k,buyer:k,record:k,tag:k,whisper:k,timeout:k,fallback:k,hangup:k},P=[{id:"entry-1",type:"entry",position:{x:250,y:100},data:{label:"Entry",nodeType:"entry",config:{}}}],O=[];function Q(){let e=(0,d.useRef)(null),[t,a,c]=(0,n.Rr)(P),[u,m,p]=(0,n.ll)(O),[f,h]=(0,d.useState)(null),[g,x]=(0,d.useState)(null),[v,y]=(0,d.useState)("New Flow"),[b,w]=(0,d.useState)("1.0.0"),[N,j]=(0,d.useState)(null),[k,C]=(0,d.useState)(!1),[A,S]=(0,d.useState)([]),[R,Q]=(0,d.useState)(null),[_,M]=(0,d.useState)(!1),[V,H]=(0,d.useState)(!1),K=(0,d.useCallback)(e=>{m(t=>(0,o.Z_)({...e,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}},t))},[m]),L=(0,d.useCallback)((e,t)=>{h(t),x(null)},[]),J=(0,d.useCallback)((e,t)=>{x(t),h(null)},[]),W=(0,d.useCallback)(()=>{h(null),x(null)},[]),$=(0,d.useCallback)((e,t)=>{let r={id:"".concat(e,"-").concat(Date.now()),type:e,position:t,data:{label:e.charAt(0).toUpperCase()+e.slice(1),nodeType:e,config:function(e){switch(e){case"entry":return{target:""};case"ivr":return{prompt:"",timeout:10,maxDigits:1,choices:[],default:""};case"if":return{condition:"",then:"",else:""};case"queue":return{queueId:"",timeout:60};case"buyer":return{buyers:[],strategy:"round-robin"};case"record":return{format:"wav",channels:"dual",beep:!1};case"tag":return{tags:{}};case"whisper":return{callerPrompt:"",calleePrompt:"",timeout:10};case"timeout":return{duration:0};case"fallback":return{targets:[]};case"hangup":return{reason:"normal"};default:return{}}}(e)}};a(e=>[...e,r])},[a]),G=(0,d.useCallback)(t=>{t.preventDefault();let a=t.dataTransfer.getData("application/reactflow");if(!a||!e.current)return;let r=e.current.getBoundingClientRect();$(a,{x:t.clientX-r.left,y:t.clientY-r.top})},[$]),Y=(0,d.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),X=(0,d.useCallback)((e,t)=>{a(a=>a.map(a=>a.id===e?{...a,data:{...a.data,config:t}}:a))},[a]),ee=(0,d.useCallback)((e,t)=>{m(a=>a.map(a=>a.id===e?{...a,data:{...a.data,...t}}:a))},[m]),et=(0,d.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e)),m(t=>t.filter(t=>t.source!==e&&t.target!==e)),(null==f?void 0:f.id)===e&&h(null)},[a,m,f]),ea=(0,d.useCallback)(e=>{m(t=>t.filter(t=>t.id!==e)),(null==g?void 0:g.id)===e&&x(null)},[m,g]);(0,d.useEffect)(()=>{er()},[]);let er=async()=>{M(!0);try{var e;let t=await z.x.get("/api/v1/flows");(null===(e=t.data)||void 0===e?void 0:e.data)&&S(t.data.data)}catch(e){console.error("Failed to load flows:",e)}finally{M(!1)}},en=async(e,t)=>{M(!0);try{var r,n;let o=t?"/api/v1/flows/".concat(e,"/versions/").concat(t):"/api/v1/flows/".concat(e),l=await z.x.get(o);if(null===(r=l.data)||void 0===r?void 0:r.flow){let{nodes:t,edges:r}=new Z().deserializeFromFlow(l.data.flow);a(t),m(r),j(l.data.flowId),y(l.data.flow.name||"Unnamed Flow"),w(l.data.version),Q(e)}else alert("Error: ".concat((null===(n=l.error)||void 0===n?void 0:n.message)||"Failed to load flow"))}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to load flow"))}finally{M(!1)}},eo=()=>{a(P),m([]),j(null),y("New Flow"),w("1.0.0"),Q(null)},el=(0,d.useCallback)(async()=>{if(!v.trim()){alert("Please enter a flow name");return}H(!0);let e=new Z().serializeToFlow(t,u,v,b,N);try{let t=await z.x.post("/api/v1/flows",e);if(t.data)j(t.data.flowId),Q(t.data.flowId),await er(),alert("Flow saved successfully!");else{var a;alert("Error: ".concat((null===(a=t.error)||void 0===a?void 0:a.message)||"Failed to save flow"))}}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to save flow"))}finally{H(!1)}},[t,u,v,b,N]),es=(0,d.useCallback)(()=>{let e=new Z().serializeToFlow(t,u,v,b,N),a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="".concat(v,"-").concat(b,".json"),n.click(),URL.revokeObjectURL(r)},[t,u,v,b,N]);return(0,r.jsx)(n.tV,{children:(0,r.jsxs)("div",{className:"flex h-full w-full flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b bg-card px-3 py-2 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-lg font-bold whitespace-nowrap",children:"Flow Builder"}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(I._,{htmlFor:"flow-select",className:"text-xs whitespace-nowrap",children:"Flow:"}),(0,r.jsxs)(q.Ph,{value:R||"new",onValueChange:e=>{"new"===e?eo():en(e)},disabled:_,children:[(0,r.jsx)(q.i4,{id:"flow-select",className:"w-48 h-8 text-sm",children:(0,r.jsx)(q.ki,{placeholder:"Select a flow"})}),(0,r.jsxs)(q.Bw,{children:[(0,r.jsx)(q.Ql,{value:"new",children:"+ New Flow"}),A.map(e=>(0,r.jsxs)(q.Ql,{value:e.id,children:[e.name||e.id," ",e.publishedVersion?"(v".concat(e.publishedVersion,")"):""]},e.id))]})]})]}),(0,r.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),className:"rounded border px-2 py-1 h-8 text-sm w-40",placeholder:"Flow Name"}),(0,r.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),className:"rounded border px-2 py-1 h-8 w-20 text-sm",placeholder:"Version"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(0,r.jsxs)(E.z,{onClick:el,variant:"default",disabled:V||_,size:"sm",className:"h-8",children:[V?(0,r.jsx)(l.Z,{className:"mr-1.5 h-3.5 w-3.5 animate-spin"}):(0,r.jsx)(s.Z,{className:"mr-1.5 h-3.5 w-3.5"}),"Save"]}),(0,r.jsxs)(E.z,{onClick:es,variant:"outline",disabled:_,size:"sm",className:"h-8",children:[(0,r.jsx)(i.Z,{className:"mr-1.5 h-3.5 w-3.5"}),"Export"]}),(0,r.jsx)(E.z,{onClick:()=>C(!k),variant:"outline",size:"sm",className:"h-8",children:"Simulator"})]})]}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden min-h-0",children:[(0,r.jsx)(D,{onAddNode:$}),(0,r.jsx)("div",{className:"relative flex-1 min-w-0 h-full",ref:e,onDrop:G,onDragOver:Y,children:(0,r.jsxs)(n.x$,{nodes:t,edges:u,onNodesChange:c,onEdgesChange:p,onConnect:K,onNodeClick:L,onEdgeClick:J,onPaneClick:W,nodeTypes:B,fitView:!0,className:"h-full w-full",children:[(0,r.jsx)(n.Aq,{}),(0,r.jsx)(n.ZX,{}),(0,r.jsx)(n.a9,{})]})}),(0,r.jsx)("div",{className:"w-80 border-l bg-card p-4 overflow-y-auto flex-shrink-0 h-full",children:f?(0,r.jsx)(U,{node:f,onUpdate:X,onDelete:et}):g?(0,r.jsx)(F,{edge:g,onUpdate:ee,onDelete:ea}):(0,r.jsx)("div",{className:"text-muted-foreground",children:"Select a node or edge to configure"})})]}),k&&(0,r.jsx)(T,{nodes:t,edges:u,onClose:()=>C(!1)})]})})}function U(e){let{node:t,onUpdate:a,onDelete:n}=e,o=t.data.config||{};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:t.data.label}),(0,r.jsx)(E.z,{onClick:()=>n(t.id),variant:"destructive",size:"sm",children:"Delete"})]}),(0,r.jsx)(_,{nodeType:t.data.nodeType,config:o,onChange:(e,r)=>{a(t.id,{...o,[e]:r})}})]})}function _(e){let{nodeType:t,config:a,onChange:n}=e;switch(t){case"entry":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Target Node ID"}),(0,r.jsx)("input",{type:"text",value:a.target||"",onChange:e=>n("target",e.target.value),className:"w-full rounded border px-2 py-1"})]});case"ivr":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Prompt"}),(0,r.jsx)("input",{type:"text",value:a.prompt||"",onChange:e=>n("prompt",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Audio URL or text"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.timeout||10,onChange:e=>n("timeout",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Max Digits"}),(0,r.jsx)("input",{type:"number",value:a.maxDigits||1,onChange:e=>n("maxDigits",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"if":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Condition"}),(0,r.jsx)("textarea",{value:a.condition||"",onChange:e=>n("condition",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:'e.g., ${caller.number == "+1234567890"}',rows:3})]});case"queue":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Queue ID"}),(0,r.jsx)("input",{type:"text",value:a.queueId||"",onChange:e=>n("queueId",e.target.value),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.timeout||60,onChange:e=>n("timeout",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"buyer":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Strategy"}),(0,r.jsxs)("select",{value:a.strategy||"round-robin",onChange:e=>n("strategy",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"round-robin",children:"Round Robin"}),(0,r.jsx)("option",{value:"weighted",children:"Weighted"}),(0,r.jsx)("option",{value:"least-calls",children:"Least Calls"})]})]});case"record":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Format"}),(0,r.jsxs)("select",{value:a.format||"wav",onChange:e=>n("format",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"wav",children:"WAV"}),(0,r.jsx)("option",{value:"mp3",children:"MP3"})]})]});case"tag":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Tags (JSON)"}),(0,r.jsx)("textarea",{value:JSON.stringify(a.tags||{},null,2),onChange:e=>{try{n("tags",JSON.parse(e.target.value))}catch(e){}},className:"w-full rounded border px-2 py-1 font-mono text-xs",rows:5})]});case"whisper":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Caller Prompt"}),(0,r.jsx)("input",{type:"text",value:a.callerPrompt||"",onChange:e=>n("callerPrompt",e.target.value),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Callee Prompt"}),(0,r.jsx)("input",{type:"text",value:a.calleePrompt||"",onChange:e=>n("calleePrompt",e.target.value),className:"w-full rounded border px-2 py-1"})]});case"timeout":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Duration (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.duration||0,onChange:e=>n("duration",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"fallback":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Target Node IDs (comma-separated)"}),(0,r.jsx)("input",{type:"text",value:(a.targets||[]).join(", "),onChange:e=>n("targets",e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),className:"w-full rounded border px-2 py-1"})]});case"hangup":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Reason"}),(0,r.jsxs)("select",{value:a.reason||"normal",onChange:e=>n("reason",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"normal",children:"Normal"}),(0,r.jsx)("option",{value:"busy",children:"Busy"}),(0,r.jsx)("option",{value:"rejected",children:"Rejected"}),(0,r.jsx)("option",{value:"timeout",children:"Timeout"}),(0,r.jsx)("option",{value:"error",children:"Error"})]})]});default:return(0,r.jsx)("div",{children:"No configuration available"})}}function M(){return(0,r.jsx)("div",{className:"h-full w-full -m-6",children:(0,r.jsx)(Q,{})})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(91674),n=a(32814),o=a(47828),l=a(86655),s=a(33061);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:o,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,s.cn)(i({variant:o,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return i}});var r=a(91674),n=a(86655),o=a(33061);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...n})});s.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){returns}});var r=a(91674),n=a(35974),o=a(86655),l=a(33061);let s=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...o})});s.displayName=n.f.displayName},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return g},i4:function(){return m},ki:function(){return u}});var r=a(91674),n=a(65485),o=a(50802),l=a(98371),s=a(72781),i=a(86655),d=a(33061);let c=n.fC;n.ZA;let u=n.B4,m=i.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[l,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let p=i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=n.u_.displayName;let f=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let h=i.forwardRef((e,t)=>{let{className:a,children:o,position:l="popper",...s}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...s,children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,r.jsx)(f,{})]})})});h.displayName=n.VY.displayName,i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...o})}).displayName=n.__.displayName;let g=i.forwardRef((e,t)=>{let{className:a,children:o,...l}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(s.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:o})]})});g.displayName=n.ck.displayName,i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...o})}).displayName=n.Z0.displayName},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return n}});class r{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){lett=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let n="".concat(this.baseUrl).concat(e),o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization="Bearer ".concat(this.token)),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(n,{...t,headers:o}),a=await e.json();if(!e.ok){var l,s;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(s=a.error)||void 0===s?void 0:s.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let n=new r},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return i},cn:function(){return o},p6:function(){return d},un:function(){return l},xG:function(){return s}});var r=a(44115),n=a(38352);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function i(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(a,":").concat(String(r).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[130,1856,7880,2546,802,8474,4395,4623,8700,1293,9997,1744],function(){return e(e.s=51235)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/billing/page-a0900e5c34202e7d.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8921],{8121:function(e,t,r){Promise.resolve().then(r.bind(r,88825))},88825:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(91674),s=r(54741),a=r(92277),i=r(92794),o=r(30588),l=r(86655),c=r(60044),d=r(90747),u=r(30999),f=r(86190),m=r(28314),x=r(33061);function h(){let[e,t]=(0,l.useState)([]),[r,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(!0),[b,y]=(0,l.useState)(null),v=(0,l.useCallback)(async()=>{g(!0),y(null);try{let[e,r]=await Promise.all([m.x.get("/api/v1/billing/invoices"),m.x.get("/api/v1/billing/balance")]);e.data&&t(e.data.data||[]),r.data&&h(r.data)}catch(e){y(e instanceof Error?e.message:"Failed to load billing data")}finally{g(!1)}},[]);return((0,l.useEffect)(()=>{v()},[v]),p)?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Billing"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Billing"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),b&&(0,n.jsx)(u.Zb,{children:(0,n.jsx)(u.aY,{className:"pt-6",children:(0,n.jsxs)("div",{className:"text-center text-destructive",children:["Error: ",b]})})}),r&&(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Available Balance"}),(0,n.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.available))})})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Pending"}),(0,n.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.pending))})})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Held"}),(0,n.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.held))})})]})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{children:"Invoices"}),(0,n.jsx)(u.SZ,{children:"View and download your invoices"})]}),(0,n.jsx)(u.aY,{children:0===e.length?(0,n.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"}):(0,n.jsxs)(f.iA,{children:[(0,n.jsx)(f.xD,{children:(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.ss,{children:"Invoice Number"}),(0,n.jsx)(f.ss,{children:"Period"}),(0,n.jsx)(f.ss,{children:"Amount"}),(0,n.jsx)(f.ss,{children:"Status"}),(0,n.jsx)(f.ss,{children:"Due Date"}),(0,n.jsx)(f.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(f.RM,{children:e.map(e=>(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.pj,{className:"font-medium",children:e.invoiceNumber}),(0,n.jsxs)(f.pj,{children:[(0,x.p6)(e.period.start)," -",(0,x.p6)(e.period.end)]}),(0,n.jsx)(f.pj,{children:(0,x.xG)(parseFloat(e.total))}),(0,n.jsx)(f.pj,{children:(0,n.jsx)(c.C,{variant:"paid"===e.status?"success":"warning",children:e.status})}),(0,n.jsx)(f.pj,{children:(0,x.p6)(e.dueDate)}),(0,n.jsx)(f.pj,{className:"text-right",children:(0,n.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(91674),s=r(47828);r(86655);var a=r(33061);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(91674),s=r(32814),a=r(47828),i=r(86655),o=r(33061);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var n=r(91674),s=r(86655),a=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-smtext-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return o}});var n=r(91674),s=r(86655),a=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...s})});o.displayName="TableHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...s})});l.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let s="".concat(this.baseUrl).concat(e),a={"Content-Type":"application/json",...t.headers};this.token&&(a.Authorization="Bearer ".concat(this.token)),this.apiKey&&(a["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:a}),r=await e.json();if(!e.ok){var i,o;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(o=r.error)||void 0===o?void 0:o.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){returnthis.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new n},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return a},p6:function(){return c},un:function(){return i},xG:function(){return o}});var n=r(44115),s=r(38352);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},19596:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(86655),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
/app/apps/web/.next/static/chunks/app/(dashboard)/numbers/page-f56fc061f4b4f3b5.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{93410:function(e,t,r){Promise.resolve().then(r.bind(r,9443))},9443:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(91674),s=r(30588),n=r(98548),i=r(89175),l=r(54741),o=r(86655),c=r(90747),d=r(55738),u=r(88151),f=r(66801),m=r(38137),h=r(28314);function x(e){var t,r,s,n;let{open:i,onOpenChange:x,numberId:p,number:v,currentStatus:g,currentCampaignId:j,currentCapabilities:b={},onSuccess:y}=e,[N,w]=(0,o.useState)(!1),[C,k]=(0,o.useState)(!1),[S,R]=(0,o.useState)(null),[_,E]=(0,o.useState)([]),[T,I]=(0,o.useState)({status:g.toUpperCase(),campaignId:j||"",capabilities:{voice:null===(t=b.voice)||void 0===t||t,sms:null!==(r=b.sms)&&void 0!==r&&r,mms:null!==(s=b.mms)&&void 0!==s&&s,fax:null!==(n=b.fax)&&void0!==n&&n}});(0,o.useEffect)(()=>{if(i){var e,t,r,a;I({status:g.toUpperCase(),campaignId:j||"",capabilities:{voice:null===(e=b.voice)||void 0===e||e,sms:null!==(t=b.sms)&&void 0!==t&&t,mms:null!==(r=b.mms)&&void 0!==r&&r,fax:null!==(a=b.fax)&&void 0!==a&&a}}),Z()}},[i,g,j,b]);let Z=async()=>{k(!0);try{var e;let t=await h.x.get("/api/v1/campaigns");(null===(e=t.data)||void 0===e?void 0:e.data)&&E(t.data.data)}catch(e){console.error("Failed to load campaigns:",e)}finally{k(!1)}},F=async()=>{w(!0),R(null);try{let e=await h.x.patch("/api/v1/numbers/".concat(p),{status:T.status,campaignId:T.campaignId||null,capabilities:T.capabilities});if(e.error)throw Error(e.error.message||"Failed to update number");e.data&&(null==y||y(),x(!1))}catch(e){R(e instanceof Error?e.message:"Failed to update number")}finally{w(!1)}};return(0,a.jsx)(u.Vq,{open:i,onOpenChange:x,children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(u.fK,{children:[(0,a.jsx)(u.$N,{children:"Edit Phone Number"}),(0,a.jsxs)(u.Be,{children:["Update settings for ",v]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(m.Ph,{value:T.status,onValueChange:e=>I({...T,status:e}),disabled:N,children:[(0,a.jsx)(m.i4,{id:"status",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"ACTIVE",children:"Active"}),(0,a.jsx)(m.Ql,{value:"INACTIVE",children:"Inactive"}),(0,a.jsx)(m.Ql,{value:"SUSPENDED",children:"Suspended"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"campaign",children:"Campaign (Optional)"}),(0,a.jsxs)(m.Ph,{value:T.campaignId||void 0,onValueChange:e=>I({...T,campaignId:e||""}),disabled:N||C,children:[(0,a.jsx)(m.i4,{id:"campaign",children:(0,a.jsx)(m.ki,{placeholder:"Selecta campaign (optional)"})}),(0,a.jsx)(m.Bw,{children:_.map(e=>(0,a.jsx)(m.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(f._,{children:"Capabilities"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-voice",checked:T.capabilities.voice,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,voice:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-voice",className:"font-normal cursor-pointer",children:"Voice"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-sms",checked:T.capabilities.sms,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,sms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-sms",className:"font-normal cursor-pointer",children:"SMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-mms",checked:T.capabilities.mms,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,mms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-mms",className:"font-normal cursor-pointer",children:"MMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-fax",checked:T.capabilities.fax,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,fax:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-fax",className:"font-normal cursor-pointer",children:"Fax"})]})]})]}),S&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:S})]}),(0,a.jsxs)(u.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>x(!1),disabled:N,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:F,disabled:N,children:[N&&(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})}var p=r(66120);function v(e){let{open:t,onOpenChange:r,onSuccess:s}=e,[n,i]=(0,o.useState)(!1),[x,v]=(0,o.useState)(null),[g,j]=(0,o.useState)({areaCode:"",country:"US",region:"",provider:"local",features:{voice:!0,sms:!1,mms:!1,fax:!1}}),b=async()=>{i(!0),v(null);try{let e=await h.x.post("/api/v1/numbers",{areaCode:g.areaCode||void 0,country:g.country,region:g.region||void 0,provider:g.provider,features:g.features});if(e.error)throw Error(e.error.message||"Failed to purchase number");e.data&&(null==s||s(),r(!1),j({areaCode:"",country:"US",region:"",provider:"local",features:{voice:!0,sms:!1,mms:!1,fax:!1}}))}catch(e){v(e instanceof Error?e.message:"Failed to purchase number")}finally{i(!1)}};return(0,a.jsx)(u.Vq,{open:t,onOpenChange:r,children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(u.fK,{children:[(0,a.jsx)(u.$N,{children:"Purchase Phone Number"}),(0,a.jsx)(u.Be,{children:"Search and purchase a new phone number for your account."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"provider",children:"Provider"}),(0,a.jsxs)(m.Ph,{value:g.provider,onValueChange:e=>j({...g,provider:e}),children:[(0,a.jsx)(m.i4,{id:"provider",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"local",children:"Local (Test)"}),(0,a.jsx)(m.Ql,{value:"signalwire",children:"SignalWire"}),(0,a.jsx)(m.Ql,{value:"telnyx",children:"Telnyx"}),(0,a.jsx)(m.Ql,{value:"bandwidth",children:"Bandwidth"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"country",children:"Country"}),(0,a.jsxs)(m.Ph,{value:g.country,onValueChange:e=>j({...g,country:e}),children:[(0,a.jsx)(m.i4,{id:"country",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"US",children:"United States"}),(0,a.jsx)(m.Ql,{value:"CA",children:"Canada"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"areaCode",children:"Area Code (Optional)"}),(0,a.jsx)(p.I,{id:"areaCode",placeholder:"e.g., 212, 310, 415",value:g.areaCode,onChange:e=>j({...g,areaCode:e.target.value}),maxLength:3,pattern:"[0-9]{3}"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty to get any available number"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"region",children:"Region/State (Optional)"}),(0,a.jsx)(p.I,{id:"region",placeholder:"e.g., CA, NY, TX",value:g.region,onChange:e=>j({...g,region:e.target.value}),maxLength:2})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(f._,{children:"Capabilities"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-centerspace-x-2",children:[(0,a.jsx)(d.X,{id:"voice",checked:g.features.voice,onCheckedChange:e=>j({...g,features:{...g.features,voice:!!e}})}),(0,a.jsx)(f._,{htmlFor:"voice",className:"font-normal cursor-pointer",children:"Voice"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"sms",checked:g.features.sms,onCheckedChange:e=>j({...g,features:{...g.features,sms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"sms",className:"font-normal cursor-pointer",children:"SMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"mms",checked:g.features.mms,onCheckedChange:e=>j({...g,features:{...g.features,mms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"mms",className:"font-normal cursor-pointer",children:"MMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"fax",checked:g.features.fax,onCheckedChange:e=>j({...g,features:{...g.features,fax:!!e}})}),(0,a.jsx)(f._,{htmlFor:"fax",className:"font-normal cursor-pointer",children:"Fax"})]})]})]}),x&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:x})]}),(0,a.jsxs)(u.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>r(!1),disabled:n,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:b,disabled:n,children:[n&&(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Purchase Number"]})]})]})})}var g=r(60044),j=r(30999),b=r(86190),y=r(33061);function N(){var e;let[t,r]=(0,o.useState)(""),[d,u]=(0,o.useState)(!1),[f,m]=(0,o.useState)(!1),[N,w]=(0,o.useState)(null),[C,k]=(0,o.useState)([]),[S,R]=(0,o.useState)(!0);(0,o.useEffect)(()=>{_()},[]);let _=async()=>{R(!0);try{var e;let t=await h.x.get("/api/v1/numbers");(null===(e=t.data)||void 0===e?void 0:e.data)&&k(t.data.data)}catch(e){console.error("Failed to load numbers:",e)}finally{R(!1)}},E=C.filter(e=>{var r;return e.number.includes(t)||(null===(r=e.campaign)||void 0===r?void 0:r.name.toLowerCase().includes(t.toLowerCase()))}),T=e=>{w(e),m(!0)};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Numbers"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your phone numbers and assignments"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.z,{variant:"outline",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.xlsx,.xls",e.onchange=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&alert("Import functionality coming soon. Selected file: ".concat(r.name))},e.click()},children:[(0,a.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),"Import"]}),(0,a.jsxs)(c.z,{onClick:()=>{u(!0)},children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Buy Number"]})]})]}),(0,a.jsxs)(j.Zb,{className:"flex-1 flex flex-col overflow-hiddenmin-h-0",children:[(0,a.jsx)(j.Ol,{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.ll,{children:"Phone Numbers"}),(0,a.jsx)(j.SZ,{children:"Search and manage your numbers"})]}),(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(p.I,{id:"numbers-search",name:"numbers-search",placeholder:"Search numbers...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]})]})}),(0,a.jsx)(j.aY,{className:"flex-1 overflow-y-auto min-h-0",children:S?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===E.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No phone numbers found"}):(0,a.jsxs)(b.iA,{children:[(0,a.jsx)(b.xD,{children:(0,a.jsxs)(b.SC,{children:[(0,a.jsx)(b.ss,{children:"Number"}),(0,a.jsx)(b.ss,{children:"Status"}),(0,a.jsx)(b.ss,{children:"Campaign"}),(0,a.jsx)(b.ss,{children:"Purchased"}),(0,a.jsx)(b.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(b.RM,{children:E.map(e=>{var t;return(0,a.jsxs)(b.SC,{children:[(0,a.jsx)(b.pj,{className:"font-mono",children:(0,y.un)(e.number)}),(0,a.jsx)(b.pj,{children:(0,a.jsx)(g.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),(0,a.jsx)(b.pj,{children:(null===(t=e.campaign)||void 0===t?void 0:t.name)||"-"}),(0,a.jsx)(b.pj,{children:e.purchasedAt?new Date(e.purchasedAt).toLocaleDateString():"-"}),(0,a.jsx)(b.pj,{className:"text-right",children:(0,a.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>T(e),children:"Edit"})})]},e.id)})})]})})]}),(0,a.jsx)(v,{open:d,onOpenChange:u,onSuccess:()=>{_()}}),N&&(0,a.jsx)(x,{open:f,onOpenChange:m,numberId:N.id,number:N.number,currentStatus:N.status,currentCampaignId:null===(e=N.campaign)||void 0===e?void 0:e.id,currentCapabilities:N.capabilities,onSuccess:()=>{_()}})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(91674),s=r(47828);r(86655);var n=r(33061);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(91674),s=r(32814),n=r(47828),i=r(86655),l=r(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-nonedisabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},55738:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var a=r(91674),s=r(38598),n=r(72781),i=r(86655),l=r(33061);let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:(0,a.jsx)(s.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});o.displayName=s.fC.displayName},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return h},Be:function(){return x},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),s=r(7472),n=r(77037),i=r(86655),l=r(33061);let o=s.fC;s.xz;let c=s.h_;s.x8;let d=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});d.displayName=s.aV.displayName;let u=i.forwardRef((e,t)=>{let{className:r,children:i,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[i,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let h=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});h.displayName=s.Dx.displayName;letx=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});x.displayName=s.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(91674),s=r(35974),n=r(86655),i=r(33061);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});l.displayName=s.f.displayName},38137:function(e,t,r){"use strict";r.d(t,{Bw:function(){return x},Ph:function(){return d},Ql:function(){return p},i4:function(){return f},ki:function(){return u}});var a=r(91674),s=r(65485),n=r(50802),i=r(98371),l=r(72781),o=r(86655),c=r(33061);let d=s.fC;s.ZA;let u=s.B4,f=o.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,a.jsxs)(s.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[i,(0,a.jsx)(s.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let h=o.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(s.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...i,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let x=o.forwardRef((e,t)=>{let{className:r,children:n,position:i="popper",...l}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsxs)(s.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,a.jsx)(m,{}),(0,a.jsx)(s.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(h,{})]})})});x.displayName=s.VY.displayName,o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...n})}).displayName=s.__.displayName;let p=o.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,a.jsxs)(s.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(s.eT,{children:n})]})});p.displayName=s.ck.displayName,o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=s.Z0.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});l.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),r=await e.json();if(!e.ok){var i,l;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(l=r.error)||void 0===l?void 0:l.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return c},un:function(){return i},xG:function(){return l}});var a=r(44115),s=r(38352);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},30588:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/quotas/page-3b8b6b5431f63b41.js: */let s=(0,r.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l=(0,r.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=a(4458),o=a(80317),d=a(92277),c=a(86655),u=a(78419),m=a(90747),f=a(30999),x=a(66120),h=a(66801),g=a(81317),v=a(76604),p=a(28314);function y(){var e,t,a,r,y,b,N,j,k,S,w,C,R;let[E,M]=(0,c.useState)(""),[T,B]=(0,c.useState)(null),[D,O]=(0,c.useState)(!1),[P,I]=(0,c.useState)(null),[_,U]=(0,c.useState)(null),[F,A]=(0,c.useState)({maxConcurrentCalls:"",maxMinutesPerDay:"",maxRecordingRetentionDays:"",maxPhoneNumbers:"",maxStorageGB:"",enabled:!0}),[Z,q]=(0,c.useState)({monthlyBudget:"",dailyBudget:"",alertThreshold:"80",alertEmails:"",alertSlackWebhook:"",hardStopEnabled:!0,enabled:!0}),[W,z]=(0,c.useState)(null),[G,L]=(0,c.useState)(null);(0,c.useEffect)(()=>{M("00000000-0000-0000-0000-000000000000")},[]);let V=async()=>{if(E)try{O(!0);let e=await p.x.get("/admin/api/v1/tenants/".concat(E,"/quota/status"));e.data?B(e.data):e.error&&I(e.error.message||"Failed to load quota status")}catch(e){I("Failed to load quota status")}finally{O(!1)}},Q=async()=>{if(E)try{let l=await p.x.get("/admin/api/v1/tenants/".concat(E,"/quota"));if(l.data){var e,t,a,n,r,s;A({maxConcurrentCalls:(null===(e=l.data.maxConcurrentCalls)||void 0===e?void 0:e.toString())||"",maxMinutesPerDay:(null===(t=l.data.maxMinutesPerDay)||void 0===t?void 0:t.toString())||"",maxRecordingRetentionDays:(null===(a=l.data.maxRecordingRetentionDays)||void 0===a?void 0:a.toString())||"",maxPhoneNumbers:(null===(n=l.data.maxPhoneNumbers)||void 0===n?void 0:n.toString())||"",maxStorageGB:(null===(r=l.data.maxStorageGB)||void 0===r?void 0:r.toString())||"",enabled:null===(s=l.data.enabled)||void 0===s||s})}}catch(e){}},Y=async()=>{if(E)try{let l=await p.x.get("/admin/api/v1/tenants/".concat(E,"/budget"));if(l.data){var e,t,a,n,r,s;q({monthlyBudget:(null===(e=l.data.monthlyBudget)||void 0===e?void 0:e.toString())||"",dailyBudget:(null===(t=l.data.dailyBudget)||void 0===t?void 0:t.toString())||"",alertThreshold:(null===(a=l.data.alertThreshold)||void 0===a?void 0:a.toString())||"80",alertEmails:(null===(n=l.data.alertEmails)||void 0===n?void 0:n.join(", "))||"",alertSlackWebhook:l.data.alertSlackWebhook||"",hardStopEnabled:null===(r=l.data.hardStopEnabled)||void 0===r||r,enabled:null===(s=l.data.enabled)||void 0===s||s})}}catch(e){}};(0,c.useEffect)(()=>{E&&(V(),Q(),Y())},[E]);let $=async()=>{if(E)try{O(!0),I(null),await p.x.patch("/admin/api/v1/tenants/".concat(E,"/quota"),{maxConcurrentCalls:F.maxConcurrentCalls?parseInt(F.maxConcurrentCalls):null,maxMinutesPerDay:F.maxMinutesPerDay?parseInt(F.maxMinutesPerDay):null,maxRecordingRetentionDays:F.maxRecordingRetentionDays?parseInt(F.maxRecordingRetentionDays):null,maxPhoneNumbers:F.maxPhoneNumbers?parseInt(F.maxPhoneNumbers):null,maxStorageGB:F.maxStorageGB?parseFloat(F.maxStorageGB):null,enabled:F.enabled}),U("Quota settings saved"),V(),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to save quota settings")}finally{O(!1)}},K=async()=>{if(E)try{O(!0),I(null),await p.x.patch("/admin/api/v1/tenants/".concat(E,"/budget"),{monthlyBudget:Z.monthlyBudget?parseFloat(Z.monthlyBudget):null,dailyBudget:Z.dailyBudget?parseFloat(Z.dailyBudget):null,alertThreshold:parseFloat(Z.alertThreshold),alertEmails:Z.alertEmails.split(",").map(e=>e.trim()).filter(Boolean),alertSlackWebhook:Z.alertSlackWebhook||null,hardStopEnabled:Z.hardStopEnabled,enabled:Z.enabled}),U("Budget settings saved"),V(),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to save budget settings")}finally{O(!1)}},H=async()=>{if(E)try{O(!0),I(null);let e=await p.x.post("/admin/api/v1/tenants/".concat(E,"/budget/override-token"),{expiresInHours:24});z(e.token),L(e.expiresAt),U("Override token generated"),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to generate override token")}finally{O(!1)}},X=async()=>{if(E)try{O(!0),I(null),await p.x.delete("/admin/api/v1/tenants/".concat(E,"/budget/override-token")),z(null),L(null),U("Override token revoked"),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to revoke override token")}finally{O(!1)}};return(0,n.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex-shrink-0 mb-2",children:[(0,n.jsx)("h1",{className:"text-xl font-bold",children:"Quotas & Budgets"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage tenant quotas and budget controls"})]}),P&&(0,n.jsxs)(u.bZ,{variant:"destructive",className:"flex-shrink-0 mb-2 py-2",children:[(0,n.jsx)(s,{className:"h-3 w-3"}),(0,n.jsx)(u.X,{className:"text-sm",children:P})]}),_&&(0,n.jsxs)(u.bZ,{className:"flex-shrink-0 mb-2 py-2",children:[(0,n.jsx)(l,{className:"h-3 w-3"}),(0,n.jsx)(u.X,{className:"text-sm",children:_})]}),T&&T.concurrentCalls&&(0,n.jsxs)(f.Zb,{className:"flex-shrink-0 mb-2",children:[(0,n.jsx)(f.Ol,{className:"pb-3",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Current Usage"})}),(0,n.jsx)(f.aY,{className:"pt-0",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Concurrent Calls"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(S=T.concurrentCalls.current)&&void 0!==S?S:0,T.concurrentCalls.limit&&" / ".concat(T.concurrentCalls.limit)]}),null!==T.concurrentCalls.remaining&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.concurrentCalls.remaining," remaining"]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(o.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Daily Minutes"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(w=null===(e=T.dailyMinutes)||void 0===e?void 0:e.current)&&void 0!==w?w:0,(null===(t=T.dailyMinutes)||void 0===t?void 0:t.limit)&&" / ".concat(T.dailyMinutes.limit)]}),(null===(a=T.dailyMinutes)||void 0===a?void 0:a.remaining)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.dailyMinutes.remaining," remaining"]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Phone Numbers"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(C=null===(r=T.phoneNumbers)||void 0===r?void 0:r.current)&&void 0!==C?C:0,(null===(y=T.phoneNumbers)||void 0===y?void 0:y.limit)&&" / ".concat(T.phoneNumbers.limit)]}),(null===(b=T.phoneNumbers)||void 0===b?void 0:b.remaining)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.phoneNumbers.remaining," remaining"]})]}),T.budget&&(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(d.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Monthly Budget"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:["$",(null!==(R=null===(N=T.budget.monthly)||void 0===N?void 0:N.current)&&void 0!==R?R:0).toFixed(2),(null===(j=T.budget.monthly)||void 0===j?void 0:j.limit)&&" / $".concat(T.budget.monthly.limit.toFixed(2))]}),(null===(k=T.budget.monthly)||void 0===k?void 0:k.percentage)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.budget.monthly.percentage.toFixed(1),"% used"]})]})]})})]}),(0,n.jsxs)(v.mQ,{defaultValue:"quotas",className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,n.jsxs)(v.dr,{className:"flex-shrink-0 h-9",children:[(0,n.jsx)(v.SP,{value:"quotas",className:"text-sm",children:"Quotas"}),(0,n.jsx)(v.SP,{value:"budget",className:"text-sm",children:"Budget"}),(0,n.jsx)(v.SP,{value:"overrides",className:"text-sm",children:"Overrides"})]}),(0,n.jsx)(v.nU,{value:"quotas",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,n.jsxs)(f.Zb,{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsx)(f.Ol,{className:"pb-2 flex-shrink-0",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Quota Settings"})}),(0,n.jsxs)(f.aY,{className:"flex-1overflow-y-auto space-y-3 pt-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Enable Quotas"})}),(0,n.jsx)(g.r,{checked:F.enabled,onCheckedChange:e=>A({...F,enabled:e})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxConcurrentCalls",className:"text-sm",children:"Max Concurrent Calls"}),(0,n.jsx)(x.I,{id:"maxConcurrentCalls",type:"number",value:F.maxConcurrentCalls,onChange:e=>A({...F,maxConcurrentCalls:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxMinutesPerDay",className:"text-sm",children:"Max Minutes Per Day"}),(0,n.jsx)(x.I,{id:"maxMinutesPerDay",type:"number",value:F.maxMinutesPerDay,onChange:e=>A({...F,maxMinutesPerDay:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxPhoneNumbers",className:"text-sm",children:"Max Phone Numbers"}),(0,n.jsx)(x.I,{id:"maxPhoneNumbers",type:"number",value:F.maxPhoneNumbers,onChange:e=>A({...F,maxPhoneNumbers:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxRecordingRetentionDays",className:"text-sm",children:"Max Recording Retention (Days)"}),(0,n.jsx)(x.I,{id:"maxRecordingRetentionDays",type:"number",value:F.maxRecordingRetentionDays,onChange:e=>A({...F,maxRecordingRetentionDays:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxStorageGB",className:"text-sm",children:"Max Storage (GB)"}),(0,n.jsx)(x.I,{id:"maxStorageGB",type:"number",step:"0.01",value:F.maxStorageGB,onChange:e=>A({...F,maxStorageGB:e.target.value}),placeholder:"Unlimited",className:"h-8"})]})]}),(0,n.jsx)(m.z,{onClick:$,disabled:D,size:"sm",className:"mt-2",children:"Save Quota Settings"})]})]})}),(0,n.jsxs)(v.nU,{value:"budget",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:[(0,n.jsxs)(f.Zb,{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsx)(f.Ol,{className:"pb-2 flex-shrink-0",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Budget Settings"})}),(0,n.jsxs)(f.aY,{className:"flex-1 overflow-y-auto space-y-3 pt-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Enable Budget"})}),(0,n.jsx)(g.r,{checked:Z.enabled,onCheckedChange:e=>q({...Z,enabled:e})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"monthlyBudget",className:"text-sm",children:"Monthly Budget ($)"}),(0,n.jsx)(x.I,{id:"monthlyBudget",type:"number",step:"0.01",value:Z.monthlyBudget,onChange:e=>q({...Z,monthlyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"dailyBudget",className:"text-sm",children:"Daily Budget ($)"}),(0,n.jsx)(x.I,{id:"dailyBudget",type:"number",step:"0.01",value:Z.dailyBudget,onChange:e=>q({...Z,dailyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertThreshold",className:"text-sm",children:"Alert Threshold (%)"}),(0,n.jsx)(x.I,{id:"alertThreshold",type:"number",value:Z.alertThreshold,onChange:e=>q({...Z,alertThreshold:e.target.value}),placeholder:"80",className:"h-8"})]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertEmails",className:"text-sm",children:"Alert Email Addresses"}),(0,n.jsx)(x.I,{id:"alertEmails",value:Z.alertEmails,onChange:e=>q({...Z,alertEmails:e.target.value}),placeholder:"admin@example.com, finance@example.com",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertSlackWebhook",className:"text-sm",children:"Slack Webhook URL"}),(0,n.jsx)(x.I,{id:"alertSlackWebhook",value:Z.alertSlackWebhook,onChange:e=>q({...Z,alertSlackWebhook:e.target.value}),placeholder:"https://hooks.slack.com/services/...",className:"h-8"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Hard Stop Enabled"})}),(0,n.jsx)(g.r,{checked:Z.hardStopEnabled,onCheckedChange:e=>q({...Z,hardStopEnabled:e})})]}),(0,n.jsx)(m.z,{onClick:K,disabled:D,size:"sm",className:"mt-2",children:"Save Budget Settings"})]})]}),(0,n.jsxs)(f.Zb,{className:"mt-2",children:[(0,n.jsx)(f.Ol,{className:"pb-2",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Override Token"})}),(0,n.jsx)(f.aY,{className:"pt-0 space-y-2",children:W?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u.bZ,{className:"py-2",children:(0,n.jsxs)(u.X,{className:"text-sm",children:[(0,n.jsx)("div",{className:"font-mono text-xs break-all",children:W}),G&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",new Date(G).toLocaleString()]})]})}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Use this token in the ",(0,n.jsx)("code",{className:"text-xs",children:"X-Quota-Override"})," header to bypass quota limits."]}),(0,n.jsx)(m.z,{variant:"destructive",onClick:X,disabled:D,size:"sm",children:"Revoke Token"})]}):(0,n.jsx)(m.z,{onClick:H,disabled:D,size:"sm",children:"Generate Override Token"})})]})]}),(0,n.jsx)(v.nU,{value:"overrides",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,n.jsxs)(f.Zb,{children:[(0,n.jsx)(f.Ol,{className:"pb-2",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Quota Overrides"})}),(0,n.jsx)(f.aY,{className:"pt-0",children:(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quota overrides allow temporarily increasing limits for specific quota types. Use the API to create overrides programmatically."})})]})})]})]})}},78419:function(e,t,a){"use strict";a.d(t,{X:function(){return d},bZ:function(){return o}});var n=a(91674),r=a(47828),s=a(86655),l=a(33061);let i=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:r,...s}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:r}),a),...s})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...r})});d.displayName="AlertDescription"},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var n=a(91674),r=a(32814),s=a(47828),l=a(86655),i=a(33061);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var n=a(91674),r=a(86655),s=a(33061);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flexflex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var n=a(91674),r=a(86655),s=a(33061);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,n.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var n=a(91674),r=a(35974),s=a(86655),l=a(33061);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...s})});i.displayName=r.f.displayName},81317:function(e,t,a){"use strict";a.d(t,{r:function(){return i}});var n=a(91674),r=a(47650),s=a(86655),l=a(33061);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:(0,n.jsx)(r.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=r.fC.displayName},76604:function(e,t,a){"use strict";a.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return i},nU:function(){return c}});var n=a(91674),r=a(89258),s=a(86655),l=a(33061);let i=r.fC,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});o.displayName=r.aV.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-centerwhitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});d.displayName=r.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});c.displayName=r.VY.displayName},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");a&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:s}),a=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let r=new n},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return s},p6:function(){return d},un:function(){return l},xG:function(){return i}});var n=a(44115),r=a(38352);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}returne}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(a,":").concat(String(n).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},80317:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/users/page-2a3b2c32045129bb.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1456],{13326:function(e,t,r){Promise.resolve().then(r.bind(r,5699))},5699:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(91674),n=r(98548),s=r(54741),i=r(30250),o=r(32353),l=r(86655),d=r(60044),c=r(90747),u=r(30999),f=r(86190),m=r(88151),x=r(66120),h=r(66801),p=r(28314);function g(e){let{open:t,onOpenChange:r,onSuccess:n}=e,[i,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[f,g]=(0,l.useState)({email:"",firstName:"",lastName:""});(0,l.useEffect)(()=>{t&&(g({email:"",firstName:"",lastName:""}),u(null))},[t]);let v=async()=>{if(!f.email.trim()){u("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)){u("Invalid email format");return}o(!0),u(null);try{let e=await p.x.post("/api/v1/users/invite",{email:f.email.trim(),firstName:f.firstName.trim()||void 0,lastName:f.lastName.trim()||void 0});if(e.error)throw Error(e.error.message||"Failed to invite user");e.data&&(e.data.tempPassword?alert("User invited successfully!\n\nTemporary password: ".concat(e.data.tempPassword,"\n\n(Note: In production, this would be sent via email)")):alert("User invited successfully!"),null==n||n(),r(!1))}catch(e){u(e instanceof Error?e.message:"Failed to invite user")}finally{o(!1)}};return(0,a.jsx)(m.Vq,{open:t,onOpenChange:r,children:(0,a.jsxs)(m.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsx)(m.$N,{children:"Invite User"}),(0,a.jsx)(m.Be,{children:"Send an invitationto a new team member"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"email",children:"Email Address *"}),(0,a.jsx)(x.I,{id:"email",type:"email",placeholder:"user@example.com",value:f.email,onChange:e=>g({...f,email:e.target.value}),disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"firstName",children:"First Name (Optional)"}),(0,a.jsx)(x.I,{id:"firstName",placeholder:"John",value:f.firstName,onChange:e=>g({...f,firstName:e.target.value}),disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"lastName",children:"Last Name (Optional)"}),(0,a.jsx)(x.I,{id:"lastName",placeholder:"Doe",value:f.lastName,onChange:e=>g({...f,lastName:e.target.value}),disabled:i})]}),d&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:d})]}),(0,a.jsxs)(m.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>r(!1),disabled:i,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:v,disabled:i||!f.email.trim(),children:[i&&(0,a.jsx)(s.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Invitation"]})]})]})})}function v(){let[e,t]=(0,l.useState)([]),[r,m]=(0,l.useState)(!0),[x,h]=(0,l.useState)(!1);(0,l.useEffect)(()=>{v()},[]);let v=async()=>{m(!0);try{var e;let r=await p.x.get("/api/v1/users");(null===(e=r.data)||void 0===e?void 0:e.data)&&t(r.data.data)}catch(e){console.error("Failed to load users:",e)}finally{m(!1)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Users"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage team members and permissions"})]}),(0,a.jsxs)(c.z,{onClick:()=>h(!0),children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Invite User"]})]}),(0,a.jsxs)(u.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,a.jsxs)(u.Ol,{className:"flex-shrink-0",children:[(0,a.jsx)(u.ll,{children:"Team Members"}),(0,a.jsx)(u.SZ,{children:"View and manage user access"})]}),(0,a.jsx)(u.aY,{className:"flex-1 overflow-y-auto min-h-0",children:r?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No users found"}):(0,a.jsxs)(f.iA,{children:[(0,a.jsx)(f.xD,{children:(0,a.jsxs)(f.SC,{children:[(0,a.jsx)(f.ss,{children:"Email"}),(0,a.jsx)(f.ss,{children:"Role"}),(0,a.jsx)(f.ss,{children:"Status"}),(0,a.jsx)(f.ss,{children:"Invited"}),(0,a.jsx)(f.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(f.RM,{children:e.map(e=>(0,a.jsxs)(f.SC,{children:[(0,a.jsxs)(f.pj,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"}),e.email]}),(0,a.jsx)(f.pj,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.roles.map(e=>(0,a.jsxs)(d.C,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3"}),e]},e))})}),(0,a.jsx)(f.pj,{children:(0,a.jsx)(d.C,{variant:"active"===e.status?"success":"warning",children:e.status})}),(0,a.jsx)(f.pj,{children:new Date(e.invitedAt).toLocaleDateString()}),(0,a.jsx)(f.pj,{className:"text-right",children:(0,a.jsx)(c.z,{variant:"ghost",size:"sm",children:"Edit"})})]},e.id))})]})})]}),(0,a.jsx)(g,{open:x,onOpenChange:h,onSuccess:v})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(91674),n=r(47828);r(86655);var s=r(33061);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(i({variant:r}),t),...n})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(91674),n=r(32814),s=r(47828),i=r(86655),o=r(33061);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return l},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),n=r(7472),s=r(77037),i=r(86655),o=r(33061);let l=n.fC;n.xz;let d=n.h_;n.x8;let c=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});c.displayName=n.aV.displayName;let u=i.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[i,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(s.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let x=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=n.Dx.displayName;let h=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=n.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var a=r(91674),n=r(35974),s=r(86655),i=r(33061);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...s})});o.displayName=n.f.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...n})});o.displayName="TableHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...n})});l.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});d.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let n="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(n,{...t,headers:s}),r=await e.json();if(!e.ok){var i,o;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(o=r.error)||void 0===o?void 0:o.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let n=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return s},p6:function(){return d},un:function(){return i},xG:function(){return o}});var a=r(44115),n=r(38352);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},54741:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/dnc/page-8d7c3f369bc18f0d.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2807],{43175:function(e,t,r){Promise.resolve().then(r.bind(r,76696))},76696:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(91674),a=r(48929),s=r(54741),o=r(5814),i=r(86655),l=r(60044),c=r(90747),d=r(30999),u=r(86190),f=r(28314);function h(){let[e,t]=(0,i.useState)([]),[r,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{m()},[]);let m=async()=>{h(!0);try{var e;let r=await f.x.get("/api/v1/compliance/dnc-lists");(null===(e=r.data)||void 0===e?void 0:e.data)&&t(r.data.data)}catch(e){console.error("Failed to load DNC lists:",e)}finally{h(!1)}},x=async e=>{if(confirm("Are you sure you want to delete this DNC list? This action cannot be undone."))try{let t=await f.x.delete("/api/v1/compliance/dnc-lists/".concat(e));t.error?alert("Failed to delete DNC list: ".concat(t.error.message)):m()}catch(e){alert("Failed to delete DNC list: ".concat(e instanceof Error?e.message:"Unknown error"))}};return(0,n.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"flexitems-center justify-between flex-shrink-0 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Do Not Call Lists"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage DNC lists and compliance"})]}),(0,n.jsxs)(c.z,{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.txt",e.onchange=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&alert("DNC list upload functionality coming soon. Selected file: ".concat(r.name))},e.click()},children:[(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4"}),"Upload List"]})]}),(0,n.jsxs)(d.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,n.jsxs)(d.Ol,{className:"flex-shrink-0",children:[(0,n.jsx)(d.ll,{children:"DNC Lists"}),(0,n.jsx)(d.SZ,{children:"View and manage your Do Not Call lists"})]}),(0,n.jsx)(d.aY,{className:"flex-1 overflow-y-auto min-h-0",children:r?(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?(0,n.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No DNC listsfound"}):(0,n.jsxs)(u.iA,{children:[(0,n.jsx)(u.xD,{children:(0,n.jsxs)(u.SC,{children:[(0,n.jsx)(u.ss,{children:"Name"}),(0,n.jsx)(u.ss,{children:"Type"}),(0,n.jsx)(u.ss,{children:"Entries"}),(0,n.jsx)(u.ss,{children:"Status"}),(0,n.jsx)(u.ss,{children:"Created"}),(0,n.jsx)(u.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(u.RM,{children:e.map(e=>(0,n.jsxs)(u.SC,{children:[(0,n.jsx)(u.pj,{className:"font-medium",children:e.name}),(0,n.jsx)(u.pj,{children:(0,n.jsx)(l.C,{variant:"outline",children:e.type.toLowerCase()})}),(0,n.jsx)(u.pj,{children:e.entryCount.toLocaleString()}),(0,n.jsx)(u.pj,{children:(0,n.jsx)(l.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),(0,n.jsx)(u.pj,{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsx)(u.pj,{className:"text-right",children:(0,n.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>x(e.id),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(91674),a=r(47828);r(86655);var s=r(33061);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparentbg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...a})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(91674),a=r(32814),s=r(47828),o=r(86655),i=r(33061);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return l}});var n=r(91674),a=r(86655),s=r(33061);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return o},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var n=r(91674),a=r(86655),s=r(33061);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...a})})});o.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...a})});i.displayName="TableHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...a})});l.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});c.displayName="TableRow";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});d.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});classn{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:s}),r=await e.json();if(!e.ok){var o,i;return{error:{code:(null===(o=r.error)||void 0===o?void 0:o.code)||"UNKNOWN_ERROR",message:(null===(i=r.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let a=new n},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return s},p6:function(){return c},un:function(){return o},xG:function(){return i}});var n=r(44115),a=r(38352);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function o(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},19596:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(86655),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
/app/apps/web/.next/static/chunks/app/(dashboard)/dashboard/page-45925c94347a6319.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6903],{14887:function(e,t,a){Promise.resolve().then(a.bind(a,24617))},24617:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $}});varl=a(91674),r=a(86655),s=a(40646),n=a(64936),i=a(4458),o=a(89648),d=a(36963),c=a(92794),u=a(99659),m=a(92277),x=a(76283),f=a(69057),h=a(67359),p=a(50450),g=a(33061);function b(e){let{title:t,value:a,unit:r,trend:s,trendLabel:n,icon:i,onClick:o,className:d,loading:c,variant:u="default"}=e,m=s&&s>0,x=s&&s<0,b=!s||0===s;return(0,l.jsxs)("div",{role:o?"button":void 0,tabIndex:o?0:void 0,onClick:o,onKeyDown:e=>{o&&("Enter"===e.key||" "===e.key)&&o()},className:(0,g.cn)("relative overflow-hidden rounded-xl border p-5 transition-all duration-200",{default:"bg-card border-border",revenue:"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20",conversion:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20",warning:"bg-gradient-to-br from-amber-500/10 to-amber-600/5 border-amber-500/20"}[u],o&&"cursor-pointer hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]",d),children:[i&&(0,l.jsx)("div",{className:"absolute -right-4 -top-4 opacity-5",children:(0,l.jsx)(i,{className:"h-24 w-24"})}),(0,l.jsxs)("div",{className:"relative z-10 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:t}),i&&(0,l.jsx)(i,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)("div",{className:"flex items-baseline gap-1.5",children:c?(0,l.jsx)("div",{className:"h-9 w-24 animate-pulse rounded bg-muted"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-3xl font-bold tracking-tight text-foreground",children:"number"==typeof a?a.toLocaleString():a}),r&&(0,l.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:r})]})}),void 0!==s&&!c&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:(0,g.cn)("flex items-center gap-0.5 rounded-full px-2 py-0.5 text-xs font-medium",m&&"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",x&&"bg-rose-500/10 text-rose-600 dark:text-rose-400",b&&"bg-muted text-muted-foreground"),children:[m&&(0,l.jsx)(f.Z,{className:"h-3 w-3"}),x&&(0,l.jsx)(h.Z,{className:"h-3 w-3"}),b&&(0,l.jsx)(p.Z,{className:"h-3 w-3"}),(0,l.jsxs)("span",{children:[Math.abs(s).toFixed(1),"%"]})]}),n&&(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:n})]})]})]})}var v=a(28314);function j(e){vart,a,s,n,f,h,p;let{dateRange:g,onFilterChange:j}=e,[N,y]=(0,r.useState)(null),[w,C]=(0,r.useState)(!0),[S,k]=(0,r.useState)(null),R=(0,r.useCallback)(async()=>{C(!0),k(null);try{var e,t;let a=new Date,l=(null==g?void 0:g.start)||new Date(a.getTime()-864e5),r=(null==g?void 0:g.end)||a,s=r.getTime()-l.getTime(),n=new Date(l.getTime()-s),i=new URLSearchParams({startDate:l.toISOString(),endDate:r.toISOString(),granularity:"hour"}),o=new URLSearchParams({startDate:n.toISOString(),endDate:l.toISOString(),granularity:"hour"}),[d,c]=await Promise.all([v.x.get("/api/v1/reporting/metrics?".concat(i)),v.x.get("/api/v1/reporting/metrics?".concat(o))]);if(d.error)throw Error(d.error.message);let u=null===(e=d.data)||void 0===e?void 0:e.metrics,m=null===(t=c.data)||void 0===t?void 0:t.metrics;if(!u)throw Error("No metrics data received");let x=u.completedCalls||0,f=u.totalCalls-x,h=Math.floor(x*(u.conversionRate||.15)),p=x>0?h/x*100:0,b=u.totalCost||0,j=u.totalCalls>0?b/u.totalCalls:0,N=(null==m?void 0:m.completedCalls)||0,w=Math.floor(N*((null==m?void 0:m.conversionRate)||.15)),C=(null==m?void 0:m.totalCost)||0,S=(e,t)=>0===t?e>0?100:0:(e-t)/t*100;y({totalCalls:u.totalCalls||0,billableCalls:x,nonBillableCalls:f,salesClosed:h,conversionRate:p,revenue:b,revenuePerCall:j,trends:{calls:S(u.totalCalls||0,(null==m?void 0:m.totalCalls)||0),billable:S(x,N),sales:S(h,w),revenue:S(b,C)}})}catch(e){k(e instanceof Error?e.message:"Failed to fetch metrics"),y({totalCalls:0,billableCalls:0,nonBillableCalls:0,salesClosed:0,conversionRate:0,revenue:0,revenuePerCall:0,trends:{calls:0,billable:0,sales:0,revenue:0}})}finally{C(!1)}},[g]);(0,r.useEffect)(()=>{R();let e=setInterval(R,3e4);return()=>clearInterval(e)},[R]);let T=e=>e>=1e6?"$".concat((e/1e6).toFixed(2),"M"):e>=1e3?"$".concat((e/1e3).toFixed(1),"K"):"$".concat(e.toFixed(2));return(0,l.jsxs)("div",{className:"space-y-4",children:[S&&(0,l.jsxs)("div",{className:"rounded-lg border border-amber-500/20 bg-amber-500/10 p-3 text-sm text-amber-600 dark:text-amber-400",children:[S," - Showing default values"]}),(0,l.jsxs)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4 xl:grid-cols-7",children:[(0,l.jsx)(b,{title:"Total Calls",value:null!==(t=null==N?void 0:N.totalCalls)&&void 0!==t?t:0,icon:i.Z,trend:null==N?void 0:N.trends.calls,trendLabel:"vs prev period",loading:w,onClick:()=>null==j?void 0:j({type:"status",value:"all"})}),(0,l.jsx)(b,{title:"Billable Calls",value:null!==(a=null==N?void 0:N.billableCalls)&&void 0!==a?a:0,icon:o.Z,trend:null==N?void 0:N.trends.billable,trendLabel:"vs prev period",variant:"revenue",loading:w,onClick:()=>null==j?void 0:j({type:"billable",value:"true"})}),(0,l.jsx)(b,{title:"Non-Billable",value:null!==(s=null==N?void 0:N.nonBillableCalls)&&void 0!==s?s:0,icon:d.Z,variant:"warning",loading:w,onClick:()=>null==j?void 0:j({type:"billable",value:"false"})}),(0,l.jsx)(b,{title:"Sales Closed",value:null!==(n=null==N?void 0:N.salesClosed)&&void 0!==n?n:0,icon:c.Z,trend:null==N?void 0:N.trends.sales,trendLabel:"vs prev period",variant:"conversion",loading:w,onClick:()=>null==j?void 0:j({type:"sale",value:"true"})}),(0,l.jsx)(b,{title:"Conversion Rate",value:"".concat((null!==(f=null==N?void 0:N.conversionRate)&&void 0!==f?f:0).toFixed(1),"%"),icon:u.Z,variant:"conversion",loading:w}),(0,l.jsx)(b,{title:"Revenue",value:T(null!==(h=null==N?void 0:N.revenue)&&void 0!==h?h:0),icon:m.Z,trend:null==N?void 0:N.trends.revenue,trendLabel:"vs prev period",variant:"revenue",loading:w}),(0,l.jsx)(b,{title:"RPC",value:T(null!==(p=null==N?void 0:N.revenuePerCall)&&void 0!==p?p:0),icon:x.Z,loading:w})]})]})}var N=a(13015),y=a(54255),w=a(19011),C=a(34174),S=a(68947),k=a(11480),R=a(81758),T=a(32784),D=a(30999),O=a(90747);function Z(e){let{onPeriodSelect:t}=e,[a,s]=(0,r.useState)("day"),[n,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),m=(0,r.useCallback)(e=>{let t,a;let l=new Date;switch(e){case"day":t=new Date(l.getTime()-864e5),a="hour";break;case"week":t=new Date(l.getTime()-6048e5),a="day";break;case"month":t=new Date(l.getTime()-2592e6),a="day"}return{start:t,end:l,granularity:a}},[]),x=(0,r.useCallback)(async()=>{d(!0),u(null);try{var e;let{start:t,end:l,granularity:r}=m(a),s=new URLSearchParams({startDate:t.toISOString(),endDate:l.toISOString(),granularity:r}),n=await v.x.get("/api/v1/reporting/metrics?".concat(s));if(n.error)throw Error(n.error.message);let o=((null===(e=n.data)||void 0===e?void 0:e.breakdown)||[]).map(e=>{let t=new Date(e.timestamp),l=Math.floor(.7*e.answeredCalls),r=e.totalCalls-l;return{time:"day"===a?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),billable:l,nonBillable:r,total:e.totalCalls}});i(o)}catch(e){u(e instanceof Error?e.message:"Failed to fetch data"),i([])}finally{d(!1)}},[a,m]);return(0,r.useEffect)(()=>{x()},[x]),(0,l.jsxs)(D.Zb,{className:"col-span-full lg:col-span-2",children:[(0,l.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Calls Over Time"}),(0,l.jsx)("div",{className:"flex items-center gap-1",children:["day","week","month"].map(e=>(0,l.jsx)(O.z,{variant:a===e?"default":"ghost",size:"sm",onClick:()=>s(e),className:(0,g.cn)("h-7 px-3 text-xs",a===e&&"bg-primary text-primary-foreground"),children:"day"===e?"24H":"week"===e?"7D":"30D"},e))})]}),(0,l.jsxs)(D.aY,{children:[c&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:c}),o?(0,l.jsx)("div",{className:"flex h-[280px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):0===n.length?(0,l.jsx)("div",{className:"flex h-[280px] items-center justify-center text-muted-foreground",children:"No call data available"}):(0,l.jsx)(N.h,{width:"100%",height:280,children:(0,l.jsxs)(y.T,{data:n,margin:{top:10,right:10,left:0,bottom:0},children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"billableGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"hsl(160 100% 41%)",stopOpacity:.3}),(0,l.jsx)("stop",{offset:"95%",stopColor:"hsl(160 100% 41%)",stopOpacity:0})]}),(0,l.jsxs)("linearGradient",{id:"nonBillableGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"hsl(45 100% 51%)",stopOpacity:.3}),(0,l.jsx)("stop",{offset:"95%",stopColor:"hsl(45 100% 51%)",stopOpacity:0})]})]}),(0,l.jsx)(w.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,l.jsx)(C.K,{dataKey:"time",tick:{fontSize:11},tickLine:!1,axisLine:!1,className:"fill-muted-foreground"}),(0,l.jsx)(S.B,{tick:{fontSize:11},tickLine:!1,axisLine:!1,className:"fill-muted-foreground"}),(0,l.jsx)(k.u,{content:(0,l.jsx)(e=>{let{active:t,payload:a,label:r}=e;return t&&a?(0,l.jsxs)("div",{className:"rounded-lg border bg-popover p-3 shadow-lg",children:[(0,l.jsx)("p",{className:"mb-2 font-medium text-foreground",children:r}),a.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:e.color}}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:[e.name,":"]}),(0,l.jsx)("span",{className:"font-medium",children:e.value})]},t))]}):null},{})}),(0,l.jsx)(R.D,{wrapperStyle:{paddingTop:"16px"},formatter:e=>(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:e})}),(0,l.jsx)(T.u,{type:"monotone",dataKey:"billable",name:"Billable",stackId:"1",stroke:"hsl(160 100% 41%)",fill:"url(#billableGradient)",strokeWidth:2}),(0,l.jsx)(T.u,{type:"monotone",dataKey:"nonBillable",name:"Non-Billable",stackId:"1",stroke:"hsl(45 100% 51%)",fill:"url(#nonBillableGradient)",strokeWidth:2})]})})]})]})}var E=a(20220);function z(e){let{onStageClick:t}=e,[a,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{i(!0),d(null);try{var e;let t=new Date,a=new Date(t.getTime()-6048e5),l=new URLSearchParams({startDate:a.toISOString(),endDate:t.toISOString(),granularity:"day"}),r=await v.x.get("/api/v1/reporting/metrics?".concat(l));if(r.error)throw Error(r.error.message);let n=null===(e=r.data)||void 0===e?void 0:e.metrics;if(!n)throw Error("No metrics data");let i=n.totalCalls||0,o=n.answeredCalls||Math.floor(.75*i),d=n.completedCalls||Math.floor(.6*o),c=Math.floor(d*(n.conversionRate||.15)),u=i||1;s([{label:"Total Calls",value:i,percentage:100,color:"bg-slate-500"},{label:"Qualified",value:o,percentage:o/u*100,color:"bg-blue-500"},{label:"Billable",value:d,percentage:d/u*100,color:"bg-emerald-500"},{label:"Sold",value:c,percentage:c/u*100,color:"bg-violet-500"}])}catch(e){d(e instanceof Error?e.message:"Failed to fetch funnel data"),s([{label:"Total Calls",value:0,percentage:100,color:"bg-slate-500"},{label:"Qualified",value:0,percentage:0,color:"bg-blue-500"},{label:"Billable",value:0,percentage:0,color:"bg-emerald-500"},{label:"Sold",value:0,percentage:0,color:"bg-violet-500"}])}finally{i(!1)}},[]);(0,r.useEffect)(()=>{c()},[c]);let u=e=>{if(0===e||a.length<2)return null;let t=a[e-1].value,l=a[e].value;return 0===t?null:((t-l)/t*100).toFixed(0)};return(0,l.jsxs)(D.Zb,{children:[(0,l.jsx)(D.Ol,{className:"pb-2",children:(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Sales Funnel"})}),(0,l.jsxs)(D.aY,{children:[o&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:o}),n?(0,l.jsx)("div",{className:"flex h-[200px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):(0,l.jsx)("div",{className:"space-y-3",children:a.map((e,a)=>(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:e.label}),u(a)&&(0,l.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,l.jsx)(E.Z,{className:"h-3 w-3"}),(0,l.jsxs)("span",{className:"text-rose-500",children:["-",u(a),"%"]})]})]}),(0,l.jsx)("span",{className:"text-sm font-bold",children:e.value.toLocaleString()})]}),(0,l.jsx)("div",{role:t?"button":void 0,tabIndex:t?0:void 0,onClick:()=>null==t?void 0:t(e.label.toLowerCase().replace(" ","_")),className:(0,g.cn)("h-8 rounded-lg transition-all duration-300",e.color,t&&"cursor-pointer hover:opacity-80"),style:{width:"".concat(Math.max(e.percentage,5),"%")}})]},e.label))}),(0,l.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t pt-4",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Overall Conversion"}),(0,l.jsx)("span",{className:"text-lg font-bold text-violet-600",children:a.length>0&&a[0].value>0?"".concat((a[a.length-1].value/a[0].value*100).toFixed(1),"%"):"0%"})]})]})]})}var P=a(80317),B=a(73129),L=a(8552),I=a(60044);function F(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{s(!0),i(null);try{var e,a,l;let r=await v.x.get("/api/v1/campaigns?limit=5");if(r.error)throw Error(r.error.message);let s=(null===(e=r.data)||void 0===e?void 0:e.data)||[],n=[{label:"Best Time Window",value:"Tue-Thu 2-4pm",metric:"42% conversion",icon:"clock"},{label:"Top Campaign",value:(null===(a=s[0])||void 0===a?void 0:a.name)||"Summer Promo",metric:"$12.50 RPC",icon:"target"},{label:"Highest ASR",value:(null===(l=s[1])||void 0===l?void 0:l.name)||"Retention Flow",metric:"78% answer rate",icon:"star"}];t(n)}catch(e){i(e instanceof Error?e.message:"Failed to fetch data"),t([{label:"Best Time Window",value:"Tue-Thu 2-4pm",metric:"42% conversion",icon:"clock"},{label:"Top Campaign",value:"Default Campaign",metric:"$0.00 RPC",icon:"target"},{label:"Highest ASR",value:"N/A",metric:"0% answer rate",icon:"star"}])}finally{s(!1)}},[]);(0,r.useEffect)(()=>{o()},[o]);let d=e=>{switch(e){case"clock":return(0,l.jsx)(P.Z,{className:"h-4 w-4 text-blue-500"});case"target":return(0,l.jsx)(B.Z,{className:"h-4 w-4 text-emerald-500"});case"star":return(0,l.jsx)(L.Z,{className:"h-4 w-4 text-amber-500"});default:return null}};return(0,l.jsxs)(D.Zb,{children:[(0,l.jsx)(D.Ol,{className:"pb-2",children:(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Top Performers"})}),(0,l.jsxs)(D.aY,{children:[n&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:n}),a?(0,l.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"h-8 w-8 animate-pulse rounded-lg bg-muted"}),(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)("div",{className:"h-3 w-24 animate-pulse rounded bg-muted"}),(0,l.jsx)("div",{className:"h-4 w-32 animate-pulse rounded bg-muted"})]})]},e))}):(0,l.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-muted/50",children:d(e.icon)}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:e.label}),(0,l.jsx)("p",{className:"font-medium truncate",children:e.value}),(0,l.jsx)(I.C,{variant:"outline",className:"mt-1 text-xs",children:e.metric})]})]},t))})]})]})}var U=a(89175),M=a(51490),_=a(96733),A=a(95807),K=a(30588),G=a(68182),Q=a(90543),Y=a(78565),H=a(66120),W=a(86190),q=a(38137);function V(e){var t,a;let{filters:s}=e,[n,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(1),[f,h]=(0,r.useState)(1),[p,b]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[y,w]=(0,r.useState)({billable:null!==(t=null==s?void 0:s.billable)&&void 0!==t?t:"all",sold:null!==(a=null==s?void 0:s.sold)&&void 0!==a?a:"all"}),[C,S]=(0,r.useState)(null),k=(0,r.useRef)(null),R=(0,r.useCallback)(async()=>{d(!0),u(null);try{var e,t;let a=new URLSearchParams({page:m.toString(),limit:"15"}),l=await v.x.get("/api/v1/calls?".concat(a));if(l.error)throw Error(l.error.message);let r=(null===(e=l.data)||void 0===e?void 0:e.data)||[],s=null===(t=l.data)||void 0===t?void 0:t.meta,n=r.map(e=>{var t,a,l,r;let s=(e.billableDuration||0)>0||"COMPLETED"===e.status,n="COMPLETED"===e.status&&s?Math.random()>.7?"sold":"not_sold":"pending";return{id:e.id,timestamp:new Date(e.createdAt),duration:e.duration||0,isBillable:s,saleOutcome:n,campaign:(null===(t=e.campaign)||void 0===t?void 0:t.name)||"Direct",source:e.direction||"inbound",recordingUrl:(null===(l=e.recordings)||void 0===l?void 0:null===(a=l[0])||void 0===a?void 0:a.url)||"/sample.wav",transcriptAvailable:Math.random()>.5,from:null===(r=e.fromNumber)||void 0===r?void 0:r.number,to:e.toNumber,status:e.status}});if("all"!==y.billable&&(n=n.filter(e=>e.isBillable===("true"===y.billable))),"all"!==y.sold&&(n=n.filter(e=>"sold"===e.saleOutcome==("true"===y.sold))),p){let e=p.toLowerCase();n=n.filter(t=>{var a,l;return t.id.toLowerCase().includes(e)||t.campaign.toLowerCase().includes(e)||(null===(a=t.from)||void 0===a?void 0:a.includes(e))||(null===(l=t.to)||void 0===l?void 0:l.includes(e))})}i(n),h((null==s?void 0:s.totalPages)||1)}catch(e){u(e instanceof Error?e.message:"Failed to fetch calls"),i([])}finally{d(!1)}},[m,y,p]);(0,r.useEffect)(()=>{R()},[R]);let T=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),Z=e=>e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=e=>{if(C===e.id){var t;null===(t=k.current)||void 0===t||t.pause(),S(null)}else k.current&&k.current.pause(),k.current=new Audio(e.recordingUrl||"/sample.wav"),k.current.play(),k.current.onended=()=>S(null),S(e.id)},z=e=>{let t=document.createElement("a");t.href=e.recordingUrl||"/sample.wav",t.download="call-".concat(e.id,".wav"),t.click()};return(0,l.jsxs)(D.Zb,{className:"col-span-full",children:[(0,l.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between pb-4",children:[(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Call Intelligence"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(U.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,l.jsx)(H.I,{placeholder:"Search calls...",value:p,onChange:e=>b(e.target.value),className:"h-9 w-[200px] pl-9"})]}),(0,l.jsxs)(O.z,{variant:j?"default":"outline",size:"sm",onClick:()=>N(!j),className:"h-9",children:[(0,l.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"Filters"]})]})]}),j&&(0,l.jsx)("div",{className:"border-t px-6 py-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Billable:"}),(0,l.jsxs)(q.Ph,{value:String(y.billable),onValueChange:e=>w(t=>({...t,billable:e})),children:[(0,l.jsx)(q.i4,{className:"h-8 w-[100px]",children:(0,l.jsx)(q.ki,{})}),(0,l.jsxs)(q.Bw,{children:[(0,l.jsx)(q.Ql,{value:"all",children:"All"}),(0,l.jsx)(q.Ql,{value:"true",children:"Yes"}),(0,l.jsx)(q.Ql,{value:"false",children:"No"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Sale:"}),(0,l.jsxs)(q.Ph,{value:String(y.sold),onValueChange:e=>w(t=>({...t,sold:e})),children:[(0,l.jsx)(q.i4,{className:"h-8 w-[100px]",children:(0,l.jsx)(q.ki,{})}),(0,l.jsxs)(q.Bw,{children:[(0,l.jsx)(q.Ql,{value:"all",children:"All"}),(0,l.jsx)(q.Ql,{value:"true",children:"Sold"}),(0,l.jsx)(q.Ql,{value:"false",children:"Not Sold"})]})]})]})]})}),(0,l.jsxs)(D.aY,{className:"pt-0",children:[c&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:c}),o?(0,l.jsx)("div",{className:"flex h-[300px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):0===n.length?(0,l.jsx)("div",{className:"flex h-[300px] items-center justify-center text-muted-foreground",children:"No calls found"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"rounded-lg border",children:(0,l.jsxs)(W.iA,{children:[(0,l.jsx)(W.xD,{children:(0,l.jsxs)(W.SC,{className:"hover:bg-transparent",children:[(0,l.jsx)(W.ss,{className:"w-[140px]",children:"Time"}),(0,l.jsx)(W.ss,{className:"w-[80px]",children:"Duration"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Billable"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Sale"}),(0,l.jsx)(W.ss,{children:"Campaign"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Source"}),(0,l.jsx)(W.ss,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(W.RM,{children:n.map(e=>(0,l.jsxs)(W.SC,{className:"group",children:[(0,l.jsx)(W.pj,{className:"font-medium",children:Z(e.timestamp)}),(0,l.jsx)(W.pj,{className:"font-mono text-sm",children:T(e.duration)}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:(0,g.cn)(e.isBillable?"border-emerald-500/30 bg-emerald-500/10text-emerald-600":"border-amber-500/30 bg-amber-500/10 text-amber-600"),children:e.isBillable?"Yes":"No"})}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:(0,g.cn)("sold"===e.saleOutcome?"border-blue-500/30 bg-blue-500/10 text-blue-600":"pending"===e.saleOutcome?"border-gray-500/30 bg-gray-500/10 text-gray-600":"border-rose-500/30 bg-rose-500/10 text-rose-600"),children:"sold"===e.saleOutcome?"Sold":"pending"===e.saleOutcome?"Pending":"No Sale"})}),(0,l.jsx)(W.pj,{className:"text-muted-foreground",children:e.campaign}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:"capitalize",children:e.source})}),(0,l.jsx)(W.pj,{className:"text-right",children:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[e.recordingUrl&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>E(e),title:C===e.id?"Pause":"Play",children:C===e.id?(0,l.jsx)(_.Z,{className:"h-4 w-4"}):(0,l.jsx)(A.Z,{className:"h-4 w-4"})}),(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>z(e),title:"Download",children:(0,l.jsx)(K.Z,{className:"h-4 w-4"})})]}),e.transcriptAvailable&&(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"View Transcript",children:(0,l.jsx)(G.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",m," of ",f]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(O.z,{variant:"outline",size:"sm",onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===m,children:(0,l.jsx)(Q.Z,{className:"h-4 w-4"})}),(0,l.jsx)(O.z,{variant:"outline",size:"sm",onClick:()=>x(e=>Math.min(f,e+1)),disabled:m===f,children:(0,l.jsx)(Y.Z,{className:"h-4 w-4"})})]})]})]})]})]})}function $(){let[e,t]=(0,r.useState)("today"),[a,i]=(0,r.useState)({});return(0,l.jsxs)("div",{className:"h-full flex flex-col overflow-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Command Center"}),(0,l.jsx)("p",{className:"text-muted-foreground mt-1",children:"Real-time call analytics and revenue insights"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border bg-muted/30 p-1",children:[["today","7d","30d"].map(a=>(0,l.jsx)(O.z,{variant:e===a?"default":"ghost",size:"sm",onClick:()=>t(a),className:(0,g.cn)("h-8 px-3",e===a&&"bg-primary text-primary-foreground shadow-sm"),children:"today"===a?"Today":a.toUpperCase()},a)),(0,l.jsx)(O.z,{variant:"custom"===e?"default":"ghost",size:"sm",onClick:()=>t("custom"),className:"h-8 px-3",children:(0,l.jsx)(s.Z,{className:"h-4 w-4"})})]}),(0,l.jsx)(O.z,{variant:"outline",size:"icon",onClick:()=>{window.location.reload()},children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsx)("section",{className:"flex-shrink-0 mb-6",children:(0,l.jsx)(j,{dateRange:(()=>{let t=new Date;switch(e){case"today":return{start:new Date(t.setHours(0,0,0,0)),end:new Date};case"7d":return{start:new Date(t.getTime()-6048e5),end:new Date};case"30d":return{start:new Date(t.getTime()-2592e6),end:new Date};default:return{start:new Date(t.getTime()-864e5),end:new Date}}})(),onFilterChange:e=>{switch(e.type){case"billable":i(t=>({...t,billable:"true"===e.value}));break;case"sale":i(t=>({...t,sold:"true"===e.value}));break;case"status":i({})}}})}),(0,l.jsxs)("section",{className:"grid gap-6 lg:grid-cols-3 mb-6 flex-shrink-0",children:[(0,l.jsx)(Z,{}),(0,l.jsx)(z,{onStageClick:e=>console.log("Stage clicked:",e)}),(0,l.jsx)(F,{})]}),(0,l.jsx)("section",{className:"flex-1 min-h-0",children:(0,l.jsx)(V,{filters:a})})]})}},60044:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var l=a(91674),r=a(47828);a(86655);var s=a(33061);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,l.jsx)("div",{className:(0,s.cn)(n({variant:a}),t),...r})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var l=a(91674),r=a(32814),s=a(47828),n=a(86655),i=a(33061);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"borderborder-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,l.jsx)(u,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,l.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var l=a(91674),r=a(65485),s=a(50802),n=a(98371),i=a(72781),o=a(86655),d=a(33061);let c=r.fC;r.ZA;let u=r.B4,m=o.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,l.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[n,(0,l.jsx)(r.JO,{asChild:!0,children:(0,l.jsx)(s.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let f=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,l.jsx)(s.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let h=o.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,l.jsx)(r.h_,{children:(0,l.jsxs)(r.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,l.jsx)(x,{}),(0,l.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,l.jsx)(f,{})]})})});h.displayName=r.VY.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=r.__.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,l.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.wU,{children:(0,l.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(r.eT,{children:s})]})});p.displayName=r.ck.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=r.Z0.displayName},86190:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return n},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...r})});o.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});c.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});class l{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),l=localStorage.getItem("demoTenantId");a&&l&&(t.headers={...t.headers,"X-Demo-Tenant-Id":l});let r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:s}),a=await e.json();if(!e.ok){var n,i;return{error:{code:(null===(n=a.error)||void 0===n?void 0:n.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let r=new l},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return s},p6:function(){return d},un:function(){return n},xG:function(){return i}});var l=a(44115),r=a(38352);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,l.W)(t))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),l=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(l).padStart(2,"0")):"".concat(a,":").concat(String(l).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[7880,2546,802,8474,4395,4623,3162,1293,9997,1744],function(){return e(e.s=14887)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/tools/recording-analyzer/page-4e3517d5f8d98606.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4364],{70161:function(e,t,r){Promise.resolve().then(r.bind(r,78800))},78800:function(e,t,r){"use strict";r.r(t),r.d(t,{RecordingAnalyzer:function(){return I}});var a=r(91674),s=r(86655);let n=[{key:"ACA",label:"ACA Health",description:"Enrollments, carrier, follow-ups, billable, transcript optional."},{key:"FINAL_EXPENSE",label:"Final Expense",description:"Apps, quotes, premium, carrier, follow-ups, billable, transcript optional."},{key:"MEDICARE",label:"Medicare",description:"Enrollments, carrier, follow-ups, billable, transcript optional."}],l={FINAL_EXPENSE:[{key:"Applications Submitted",label:"Applications Submitted",defaultChecked:!0},{key:"Monthly Premium (if app submitted)",label:"Monthly Premium (if app submitted)",defaultChecked:!0},{key:"Carrier (If app submitted)",label:"Carrier (If app submitted)",defaultChecked:!0},{key:"Quotes",label:"Quotes",defaultChecked:!0},{key:"Monthly Premium (If Quote Provided)",label:"Monthly Premium (If Quote Provided)",defaultChecked:!0},{key:"Carrier (If Quote Provided)",label:"Carrier (If Quote Provided)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],ACA:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],MEDICARE:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}]};var i=r(28314);async function o(e,t){let r=await i.x.post("/api/v1/recording-analysis/presign",{filename:e,contentType:t});if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from presign");return r.data}async function d(e,t){let r=await fetch(e,{method:"PUT",headers:{"Content-Type":t.type||"application/octet-stream"},body:t});if(!r.ok)throw Error("Upload failed: ".concat(r.status))}async function c(e){let t=await i.x.post("/api/v1/recording-analysis/analyze",e);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from analyze");return t.data}async function u(e){let t=await i.x.get("/api/v1/recording-analysis/batch/".concat(e));if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from batch");return t.data}async function f(e,t){let r=await i.x.post("/api/v1/recording-analysis/".concat(e,"/rerun"),t);if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from rerun");return r.data}async function m(e){let t="a1b2c3d4e5f67890",r={};t&&(r["x-api-key"]=t);{let e="true"===localStorage.getItem("demoMode"),t=localStorage.getItem("demoTenantId");e&&t&&(r["X-Demo-Tenant-Id"]=t)}let a=await fetch("".concat("http://45.32.213.201:3001","/api/v1/recording-analysis/batch/").concat(e,"/csv"),{headers:r});if(!a.ok)throw Error(await a.text());return await a.text()}var x=r(30999),h=r(76604),p=r(90747),g=r(66120),b=r(66801),v=r(55738),y=r(60044),j=r(86190),N=r(88151),w=r(78419);function k(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function C(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function R(e){let t=Math.round(100*C(e));return"".concat(t,"%")}function S(e){let{status:t}=e,r=(t||"").toLowerCase();return(0,a.jsx)(y.C,{variant:"done"===r?"default":"failed"===r?"destructive":"analyzing"===r||"transcribing"===r?"secondary":"outline",children:t})}function E(e){var t,r,s;let{extracted:n}=e,l=null!==(s=null!==(r=null!==(t=null==n?void 0:n.Billable)&&void 0!==t?t:null==n?void 0:n["Billable (Y/N)"])&&void 0!==r?r:null==n?void 0:n.billable)&&void 0!==s?s:null==n?void 0:n.isBillable,i="string"==typeof l?l.trim().toUpperCase():l;return"Y"===i||!0===i?(0,a.jsx)(y.C,{className:"bg-emerald-600 text-white",children:"Billable"}):"N"===i||!1===i?(0,a.jsx)(y.C,{variant:"destructive",children:"Non-billable"}):(0,a.jsx)(y.C,{variant:"outline",children:"Billable: —"})}function A(e){let{value:t}=e;return null==t?(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-muted",style:{width:"0%"}})}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:(0,a.jsx)("div",{className:"h-2 bg-foreground/70",style:{width:R(t)}})}),(0,a.jsxs)("div",{className:"text-[11px] text-muted-foreground",children:[R(t)," confidence"]})]})}function I(){let[e,t]=s.useState("ACA"),r=s.useMemo(()=>l[e],[e]),i=s.useMemo(()=>new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)),[r]),[R,I]=s.useState(i),[U,T]=s.useState(""),[z,F]=s.useState([]),[B,P]=s.useState(!1),[L,M]=s.useState(null),[O,V]=s.useState([]),[D,_]=s.useState(null),[Y,K]=s.useState(!1),[Z,q]=s.useState(null),[X,Q]=s.useState(!1),[H,J]=s.useState(null),[W,$]=s.useState(new Set),[G,ee]=s.useState(!1);async function et(e){let t=await u(e);return V(t.items),t.items.length>0&&t.items.every(e=>{let t=(e.status||"").toLowerCase();return"done"===t||"failed"===t})}async function er(e){K(!0);try{if(await et(e)){K(!1);return}}catch(e){K(!1),_((null==e?void 0:e.message)||"Failed to fetch batch");return}let t=setInterval(async()=>{try{await et(e)&&(clearInterval(t),K(!1))}catch(e){clearInterval(t),K(!1),_((null==e?void 0:e.message)||"Failed to fetch batch")}},1500)}async function ea(){_(null);let t=U.split(/\r?\n|,|\s+/g).map(e=>e.trim()).filter(Boolean).filter(e=>/^https?:\/\//i.test(e));if(0===t.length&&0===z.length){_("Add at least one recording URL or upload at least one audio file.");return}let r=Array.from(R);if(0===r.length){_("Select at least one stat/field to extract.");return}P(!0);try{let a=[];for(let e of z){let{storageKey:t,url:r}=await o(e.name,e.type||"application/octet-stream");await d(r,e),a.push({storageKey:t,filename:e.name})}let s=await c({vertical:e,selectedFields:r,urls:t,uploads:a});M(s.batchId),V([]),await er(s.batchId)}catch(e){_((null==e?void 0:e.message)||"Failed to start analysis")}finally{P(!1)}}async function es(){if(!H)return;let e=Array.from(W);if(!e.length){_("Select at least one field for re-run.");return}ee(!0),_(null);try{let t=await f(H.id,{selectedFields:e});Q(!1),J(null),M(t.batchId),V([]),await er(t.batchId)}catch(e){_((null==e?void 0:e.message)||"Failed to re-run")}finally{ee(!1)}}async function en(){if(!L){_("No batch to export yet.");return}try{let e=await m(L),t=new Blob([e],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="recording-analysis-".concat(L,".csv"),document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(r)}catch(e){_((null==e?void 0:e.message)||"CSV export failed")}}s.useEffect(()=>{I(new Set(i)),_(null),F([]),T(""),V([]),M(null),q(null)},[e,i]);let el=n.find(t=>t.key===e);return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Recording Analyzer"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paste recording URLs or upload audio, select a vertical and fields, and get structured results per recording."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,a.jsxs)(y.C,{variant:"outline",className:"font-mono",children:["Batch: ",L.slice(0,8),"…"]}),Y&&(0,a.jsx)(y.C,{variant:"secondary",children:"Live updating…"}),(0,a.jsx)(p.z,{variant:"outline",onClick:en,disabled:!L,children:"Export CSV"})]})]}),D&&(0,a.jsx)(w.bZ,{className:"border-destructive/50",children:(0,a.jsx)("div",{className:"text-sm text-destructive",children:D})}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsx)(x.Ol,{children:(0,a.jsx)(x.ll,{className:"text-base",children:"1) Select Vertical"})}),(0,a.jsx)(x.aY,{children:(0,a.jsxs)(h.mQ,{value:e,onValueChange:e=>t(e),children:[(0,a.jsxs)(h.dr,{className:"grid grid-cols-3 w-full",children:[(0,a.jsx)(h.SP,{value:"ACA",children:"ACA Health"}),(0,a.jsx)(h.SP,{value:"FINAL_EXPENSE",children:"Final Expense"}),(0,a.jsx)(h.SP,{value:"MEDICARE",children:"Medicare"})]}),(0,a.jsx)(h.nU,{value:e,className:"pt-4",children:(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"font-medium text-foreground",children:[null==el?void 0:el.label,":"]})," ",null==el?void 0:el.description]})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsx)(x.Ol,{children:(0,a.jsx)(x.ll,{className:"text-base",children:"2) Add Recordings"})}),(0,a.jsxs)(x.aY,{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b._,{children:"Recording URLs"}),(0,a.jsx)("textarea",{value:U,onChange:e=>T(e.target.value),placeholder:"Paste one URL per line (or space/comma separated)…",className:k("min-h-[140px] w-full rounded-md border bg-background px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Supports multiple URLs. We’ll process each URL as a separate recording."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b._,{children:"Upload audio (mp3/wav)"}),(0,a.jsx)(g.I,{type:"file",accept:".wav,.mp3,audio/wav,audio/mpeg",multiple:!0,onChange:e=>(function(e){if(!e)return;let t=[];for(let r of Array.from(e))(/audio\/(wav|mpeg|mp3|x-wav|ogg|opus)/i.test(r.type)||/\.(wav|mp3|ogg|opus)$/i.test(r.name))&&t.push(r);F(e=>[...e,...t].slice(0,20))})(e.target.files)}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Upload uses a presigned PUT URL (S3/Spaces). If presign isn’t wired up yet, URL paste still works."}),z.length>0&&(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"File"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Size"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Remove"})]})}),(0,a.jsx)(j.RM,{children:z.map((e,t)=>(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{className:"font-medium",children:e.name}),(0,a.jsx)(j.pj,{className:"text-right text-muted-foreground",children:function(e){if(!e&&0!==e)return"";let t=["B","KB","MB","GB"],r=e,a=0;for(;r>=1024&&a<t.length-1;)r/=1024,a++;return"".concat(r.toFixed(0===a?0:2)," ").concat(t[a])}(e.size)}),(0,a.jsx)(j.pj,{className:"text-right",children:(0,a.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>{F(e=>e.filter((e,r)=>r!==t))},children:"Remove"})})]},"".concat(e.name,"-").concat(t)))})]})})]})]})]}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between gap-3",children:[(0,a.jsx)(x.ll,{className:"text-base",children:"3) Choose Stats To Extract"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)))},children:"Defaults"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.map(e=>e.key)))},children:"All"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set)},children:"None"})]})]}),(0,a.jsxs)(x.aY,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,a.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",R.has(e.key)?"bg-muted/50":"bg-background"),children:[(0,a.jsx)(v.X,{checked:R.has(e.key),onCheckedChange:()=>{var t;return t=e.key,void I(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},e.key))}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 border-t pt-4",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Selected: ",(0,a.jsx)("span",{className:"font-mono",children:R.size})]}),(0,a.jsx)(p.z,{onClick:ea,disabled:B,className:"min-w-[180px]",children:B?"Starting…":"Analyze Recordings"})]})]})]})]}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(x.ll,{className:"text-base",children:"Results"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Click ",(0,a.jsx)("span",{className:"font-medium",children:"View"})," for details, audio playback, confidences, and re-run."]})]}),(0,a.jsx)(x.aY,{children:0===O.length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No results yet. Start an analysis to see per-recording results here."}):(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"Status"}),(0,a.jsx)(j.ss,{children:"Billable"}),(0,a.jsx)(j.ss,{children:"Source"}),(0,a.jsx)(j.ss,{children:"Vertical"}),(0,a.jsx)(j.ss,{children:"Extracted"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(j.RM,{children:O.map(e=>(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{children:(0,a.jsx)(S,{status:e.status})}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(E,{extracted:e.extracted})}),(0,a.jsx)(j.pj,{className:"max-w-[420px] truncate",children:"url"===e.sourceType?(0,a.jsx)("span",{className:"font-mono text-xs",children:e.sourceUrl}):(0,a.jsx)("span",{className:"text-sm",children:e.filename||e.storageKey})}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(y.C,{variant:"outline",children:e.vertical})}),(0,a.jsxs)(j.pj,{className:"text-muted-foreground text-sm",children:[e.extracted?"".concat(Object.keys(e.extracted).length," fields"):"—",e.error?(0,a.jsxs)("span",{className:"text-destructive",children:[" • ",e.error]}):null]}),(0,a.jsxs)(j.pj,{className:"text-right space-x-2",children:[(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:()=>q(e),children:"View"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:()=>(function(e){J(e);let t=Array.isArray(e.selectedFields)?e.selectedFields:[];$(new Set(t.length?t:Array.from(i))),Q(!0)})(e),children:"Re-run"})]})]},e.id))})]})})})]}),(0,a.jsx)(N.Vq,{open:!!Z,onOpenChange:e=>!e&&q(null),children:(0,a.jsxs)(N.cZ,{className:"max-w-4xl",children:[(0,a.jsx)(N.fK,{children:(0,a.jsx)(N.$N,{children:"Recording Result"})}),Z&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID"}),(0,a.jsx)("div",{className:"font-mono text-xs",children:Z.id})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{status:Z.status}),(0,a.jsx)(E,{extracted:Z.extracted})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Audio"}),"url"===Z.sourceType&&Z.sourceUrl?(0,a.jsx)("audio",{controls:!0,className:"w-full",children:(0,a.jsx)("source",{src:Z.sourceUrl})}):Z.playbackUrl?(0,a.jsx)("audio",{controls:!0,className:"w-full",children:(0,a.jsx)("source",{src:Z.playbackUrl})}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No playback URL available yet for uploads. (If you want, we can add an API endpoint that returns a signed GET URL for storageKey.)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Extracted Fields"}),Z.extracted?(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"Field"}),(0,a.jsx)(j.ss,{children:"Value"}),(0,a.jsx)(j.ss,{className:"w-[220px]",children:"Confidence"})]})}),(0,a.jsx)(j.RM,{children:Object.keys(Z.extracted).map(e=>{var t;let r=null===(t=Z.extracted)||void 0===t?void 0:t[e],s=function(e,t){var r,a;if(!e)return null;let s=String(t),n=s.toLowerCase(),l=null==e?void 0:null===(r=e._confidence)||void 0===r?void 0:r[s];if("number"==typeof l)return C(l);let i=null==e?void 0:null===(a=e.confidence)||void 0===a?void 0:a[s];if("number"==typeof i)return C(i);let o=null==e?void0:e["".concat(s,"_confidence")];if("number"==typeof o)return C(o);let d=null==e?void 0:e["".concat(n,"_confidence")];return"number"==typeof d?C(d):null}(Z.extracted,e);return(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{className:"font-medium",children:e}),(0,a.jsx)(j.pj,{className:"text-sm",children:"object"==typeof r?(0,a.jsx)("pre",{className:"text-xs bg-muted/30 border rounded p-2 overflow-auto max-h-[160px]",children:JSON.stringify(r,null,2)}):String(null!=r?r:"—")}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(A,{value:s})})]},e)})})]})}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No extracted JSON yet."})]}),Z.transcript&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Transcript"}),(0,a.jsx)("pre",{className:"max-h-[360px] overflow-auto rounded-md border bg-muted/30 p-3 text-xs whitespace-pre-wrap",children:Z.transcript})]})]})]})}),(0,a.jsx)(N.Vq,{open:X,onOpenChange:e=>!e&&Q(!1),children:(0,a.jsxs)(N.cZ,{className:"max-w-3xl",children:[(0,a.jsx)(N.fK,{children:(0,a.jsx)(N.$N,{children:"Re-run extraction with different fields"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"This will create a new batch using the same recording but different selected fields."}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,a.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",W.has(e.key)?"bg-muted/50":"bg-background"),children:[(0,a.jsx)(v.X,{checked:W.has(e.key),onCheckedChange:()=>$(t=>{let r=new Set(t);return r.has(e.key)?r.delete(e.key):r.add(e.key),r}),className:"mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},"rerun-".concat(e.key)))}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,a.jsx)(p.z,{variant:"outline",onClick:()=>Q(!1),disabled:G,children:"Cancel"}),(0,a.jsx)(p.z,{onClick:es,disabled:G,children:G?"Re-running…":"Re-run"})]})]})]})})]})}},78419:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return o}});var a=r(91674),s=r(47828),n=r(86655),l=r(33061);let i=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:s}),r),...n})});o.displayName="Alert",n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let d=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...s})});d.displayName="AlertDescription"},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(91674),s=r(47828);r(86655);var n=r(33061);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(91674),s=r(32814),n=r(47828),l=r(86655),i=r(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colorsfocus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},55738:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var a=r(91674),s=r(38598),n=r(72781),l=r(86655),i=r(33061);let o=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...l,children:(0,a.jsx)(s.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});o.displayName=s.fC.displayName},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),s=r(7472),n=r(77037),l=r(86655),i=r(33061);let o=s.fC;s.xz;let d=s.h_;s.x8;let c=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});c.displayName=s.aV.displayName;let u=l.forwardRef((e,t)=>{let{className:r,children:l,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[l,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let x=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});x.displayName=s.Dx.displayName;let h=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});h.displayName=s.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var a=r(91674),s=r(35974),n=r(86655),l=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});i.displayName=s.f.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},76604:function(e,t,r){"use strict";r.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return i},nU:function(){return c}});var a=r(91674),s=r(89258),n=r(86655),l=r(33061);let i=s.fC,o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...n})});o.displayName=s.aV.displayName;let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...n})});d.displayName=s.xz.displayName;let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})});c.displayName=s.VY.displayName},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),r=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=r.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=r.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return d},un:function(){return l},xG:function(){return i}});var a=r(44115),s=r(38352);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[7880,2546,802,8474,1906,1344,1293,9997,1744],function(){return e(e.s=70161)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/2904-e1d918175e83e296.js:"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2904],{60044:function(e,t,r){r.d(t,{C:function(){return l}});var n=r(91674),a=r(47828);r(86655);var o=r(33061);let s=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,o.cn)(s({variant:r}),t),...a})}},90747:function(e,t,r){r.d(t,{z:function(){return d}});var n=r(91674),a=r(32814),o=r(47828),s=r(86655),l=r(33061);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(i({variant:o,size:s,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},ll:function(){return i}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});s.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},55738:function(e,t,r){r.d(t,{X:function(){return i}});var n=r(91674),a=r(38598),o=r(72781),s=r(86655),l=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,n.jsx)(a.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})});i.displayName=a.fC.displayName},88151:function(e,t,r){r.d(t,{$N:function(){return p},Be:function(){return h},Vq:function(){return i},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var n=r(91674),a=r(7472),o=r(77037),s=r(86655),l=r(33061);let i=a.fC;a.xz;let d=a.h_;a.x8;let c=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});c.displayName=a.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(c,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i,children:[s,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=a.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...o})});p.displayName=a.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...o})});h.displayName=a.dk.displayName},66120:function(e,t,r){r.d(t,{I:function(){return s}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},66801:function(e,t,r){r.d(t,{_:function(){return l}});var n=r(91674),a=r(35974),o=r(86655),s=r(33061);let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...o})});l.displayName=a.f.displayName},86190:function(e,t,r){r.d(t,{RM:function(){return i},SC:function(){return d},iA:function(){return s},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",r),...a})})});s.displayName="Table";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",r),...a})});l.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",r),...a})});i.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});d.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},11597:function(e,t,r){r.d(t,{_:function(){return m}});var n=r(91674),a=r(54741),o=r(86655),s=r(90747),l=r(55738),i=r(88151),d=r(66120),c=r(66801),u=r(28314);let f=[{id:"call.*",label:"All Call Events"},{id:"call.initiated",label:"Call Initiated"},{id:"call.ringing",label:"Call Ringing"},{id:"call.answered",label:"Call Answered"},{id:"call.completed",label:"Call Completed"},{id:"call.failed",label:"Call Failed"},{id:"recording.ready",label:"Recording Ready"},{id:"conversion.confirmed",label:"Conversion Confirmed"}];function m(e){let{open:t,onOpenChange:r,onSuccess:m}=e,[p,h]=(0,o.useState)(!1),[x,b]=(0,o.useState)(null),[g,v]=(0,o.useState)({url:"",events:[],status:"ACTIVE"}),y=async()=>{if(!g.url.trim()){b("URL is required");return}if(0===g.events.length){b("At least one event must be selected");return}try{new URL(g.url)}catch(e){b("Invalid URL format");return}h(!0),b(null);try{let e=await u.x.post("/api/v1/webhooks",{url:g.url.trim(),events:g.events,status:g.status});if(e.error)throw Error(e.error.message||"Failed to create webhook");e.data&&(null==m||m(),r(!1),v({url:"",events:[],status:"ACTIVE"}))}catch(e){b(e instanceof Error?e.message:"Failed to create webhook")}finally{h(!1)}},N=e=>{if("call.*"===e)g.events.includes("call.*")?v({...g,events:g.events.filter(e=>!e.startsWith("call."))}):v({...g,events:["call.*",...g.events.filter(e=>!e.startsWith("call."))]});else{let t=g.events.includes(e)?g.events.filter(t=>t!==e):[...g.events.filter(e=>"call.*"!==e),e];v({...g,events:t})}};return(0,n.jsx)(i.Vq,{open:t,onOpenChange:r,children:(0,n.jsxs)(i.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,n.jsxs)(i.fK,{children:[(0,n.jsx)(i.$N,{children:"Add Webhook"}),(0,n.jsx)(i.Be,{children:"Configure a webhook endpoint to receive event notifications"})]}),(0,n.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"url",children:"Webhook URL *"}),(0,n.jsx)(d.I,{id:"url",type:"url",placeholder:"https://example.com/webhook",value:g.url,onChange:e=>v({...g,url:e.target.value}),disabled:p}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"The URL where webhook events will be sent"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{children:"Events *"}),(0,n.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-md p-3",children:f.map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(l.X,{id:"event-".concat(e.id),checked:g.events.includes(e.id),onCheckedChange:()=>N(e.id),disabled:p}),(0,n.jsx)(c._,{htmlFor:"event-".concat(e.id),className:"font-normal cursor-pointer text-sm",children:e.label})]},e.id))}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select the events you want to receive notifications for"})]}),x&&(0,n.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:x})]}),(0,n.jsxs)(i.cN,{children:[(0,n.jsx)(s.z,{variant:"outline",onClick:()=>r(!1),disabled:p,children:"Cancel"}),(0,n.jsxs)(s.z,{onClick:y,disabled:p||!g.url.trim()||0===g.events.length,children:[p&&(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Webhook"]})]})]})})}},28314:function(e,t,r){r.d(t,{x:function(){return a}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a="".concat(this.baseUrl).concat(e),o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization="Bearer ".concat(this.token)),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:o}),r=await e.json();if(!e.ok){var s,l;return{error:{code:(null===(s=r.error)||void 0===s?void 0:s.code)||"UNKNOWN_ERROR",message:(null===(l=r.error)||void 0===l?void 0:l.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let a=new n},33061:function(e,t,r){r.d(t,{LU:function(){return i},cn:function(){return o},p6:function(){return d},un:function(){return s},xG:function(){return l}});var n=r(44115),a=r(38352);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function s(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function i(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},72781:function(e,t,r){r.d(t,{Z:function(){return n}});/**
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle#
root@hoppwhistle:/opt/hopwhistle# docker run --rm docker-web sh -c "grep -r 'a1b2c3d4e5f67890' /app || echo 'Not found'"
docker run --rm docker-web sh -c "grep -r 'demo-key' /app/apps/web/.next/ | head -5 || echo 'Not found'"
/app/apps/web/.next/server/app/(dashboard)/campaigns/page.js: */let i=(0,s(67879).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var n=s(83810),d=s(81088),o=s(4283),c=s(84177),m=s(14887),p=s(57869),u=s(65944),h=s(39881);function x({open:e,onOpenChange:a,onSuccess:s}){let[r,l]=(0,n.useState)(!1),[i,x]=(0,n.useState)(null),[f,g]=(0,n.useState)([]),[b,j]=(0,n.useState)([]),[y,w]=(0,n.useState)(!1),[v,N]=(0,n.useState)({name:"",publisherId:"",flowId:"",status:"ACTIVE"});(0,n.useEffect)(()=>{e&&(N({name:"",publisherId:"",flowId:"",status:"ACTIVE"}),x(null),P())},[e]);let P=async()=>{w(!0);try{if("true"===localStorage.getItem("demoMode"))g([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]);else{let e=await h.x.get("/api/v1/publishers");e.data?.data?g(e.data.data):g([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}])}let e=await h.x.get("/api/v1/flows");e.data?.data?j(e.data.data):j([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}catch(e){console.warn("Failed to load initial data, using mock data:",e),g([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]),j([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}finally{w(!1)}},k=async()=>{if(!v.name.trim()){x("Campaign name is required");return}if(!v.publisherId){x("Publisher is required");return}l(!0),x(null);try{let e=await h.x.post("/api/v1/campaigns",{name:v.name.trim(),publisherId:v.publisherId,flowId:v.flowId||void 0,status:v.status});if(e.error){if("NETWORK_ERROR"===e.error.code||e.error.message?.includes("Failed to fetch"))throw Error("Unable to connect to the server. Please make sure the API server is running.");throw Error(e.error.message||"Failed to create campaign")}e.data&&(s?.(),a(!1))}catch(a){let e=a instanceof Error?a.message:"Failed to create campaign";x(e),(e.includes("connect to the server")||e.includes("Failed to fetch"))&&alert("Cannot connect to the API server. Please make sure the backend is running on port 3001.")}finally{l(!1)}};return t.jsx(c.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(c.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,t.jsxs)(c.fK,{children:[t.jsx(c.$N,{children:"Create New Campaign"}),t.jsx(c.Be,{children:"Create a new call campaign to manage your outbound calling operations."})]}),t.jsx("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:y?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx(d.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"name",children:"Campaign Name *"}),t.jsx(m.I,{id:"name",placeholder:"e.g., Summer Campaign 2024",value:v.name,onChange:e=>N({...v,name:e.target.value}),disabled:r})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"publisher",children:"Publisher *"}),(0,t.jsxs)(u.Ph,{value:v.publisherId||void 0,onValueChange:e=>N({...v,publisherId:e}),disabled:r||y,children:[t.jsx(u.i4,{id:"publisher",children:t.jsx(u.ki,{placeholder:"Select a publisher"})}),t.jsx(u.Bw,{children:0===f.length?t.jsx(u.Ql,{value:"no-publishers",disabled:!0,children:"No publishers available"}):f.map(e=>(0,t.jsxs)(u.Ql,{value:e.id,children:[e.name," (",e.code,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"flow",children:"Flow (Optional)"}),(0,t.jsxs)(u.Ph,{value:v.flowId||void 0,onValueChange:e=>N({...v,flowId:e||""}),disabled:r||y,children:[t.jsx(u.i4,{id:"flow",children:t.jsx(u.ki,{placeholder:"Select a flow (optional)"})}),t.jsx(u.Bw,{children:0===b.length?t.jsx(u.Ql,{value:"no-flows",disabled:!0,children:"No flows available"}):b.map(e=>(0,t.jsxs)(u.Ql,{value:e.id,children:[e.name," (v",e.version,")"]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(u.Ph,{value:v.status,onValueChange:e=>N({...v,status:e}),disabled:r,children:[t.jsx(u.i4,{id:"status",children:t.jsx(u.ki,{})}),(0,t.jsxs)(u.Bw,{children:[t.jsx(u.Ql,{value:"ACTIVE",children:"Active"}),t.jsx(u.Ql,{value:"PAUSED",children:"Paused"})]})]})]}),i&&t.jsx("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:i})]})}),(0,t.jsxs)(c.cN,{children:[t.jsx(o.z,{variant:"outline",onClick:()=>a(!1),disabled:r||y,children:"Cancel"}),(0,t.jsxs)(o.z,{onClick:k,disabled:r||y||!v.name.trim()||!v.publisherId,children:[r&&t.jsx(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Campaign"]})]})]})})}var f=s(35090),g=s(3920),b=s(25277);let j=[{id:"1",name:"Summer Campaign",status:"active",flow:"Default Flow",calls:1234,asr:.65,createdAt:"2024-01-15"},{id:"2",name:"Winter Campaign",status:"paused",flow:"Holiday Flow",calls:567,asr:.58,createdAt:"2024-01-10"}];function y(){let[e,a]=(0,n.useState)(!1);return(0,t.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Campaigns"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your call campaigns and flows"})]}),(0,t.jsxs)(o.z,{onClick:()=>{a(!0)},children:[t.jsx(r.Z,{className:"mr-2 h-4 w-4"}),"New Campaign"]})]}),(0,t.jsxs)(g.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,t.jsxs)(g.Ol,{className:"flex-shrink-0",children:[t.jsx(g.ll,{children:"Campaigns"}),t.jsx(g.SZ,{children:"View and manage all campaigns"})]}),t.jsx(g.aY,{className:"flex-1 overflow-y-auto min-h-0",children:(0,t.jsxs)(b.iA,{children:[t.jsx(b.xD,{children:(0,t.jsxs)(b.SC,{children:[t.jsx(b.ss,{children:"Name"}),t.jsx(b.ss,{children:"Status"}),t.jsx(b.ss,{children:"Flow"}),t.jsx(b.ss,{children:"Calls"}),t.jsx(b.ss,{children:"ASR"}),t.jsx(b.ss,{children:"Created"}),t.jsx(b.ss,{className:"text-right",children:"Actions"})]})}),t.jsx(b.RM,{children:j.map(e=>(0,t.jsxs)(b.SC,{children:[t.jsx(b.pj,{className:"font-medium",children:e.name}),t.jsx(b.pj,{children:t.jsx(f.C,{variant:"active"===e.status?"success":"secondary",children:e.status})}),t.jsx(b.pj,{children:e.flow}),t.jsx(b.pj,{children:e.calls.toLocaleString()}),(0,t.jsxs)(b.pj,{children:[(100*e.asr).toFixed(1),"%"]}),t.jsx(b.pj,{children:new Date(e.createdAt).toLocaleDateString()}),t.jsx(b.pj,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[t.jsx(o.z,{variant:"ghost",size:"sm",children:t.jsx(l.Z,{className:"h-4 w-4"})}),t.jsx(o.z,{variant:"ghost",size:"sm",children:t.jsx(i,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),t.jsx(x,{open:e,onOpenChange:a,onSuccess:()=>{window.location.reload()}})]})}},35090:(e,a,s)=>{"use strict";s.d(a,{C:()=>n});var t=s(27685),r=s(31727);s(83810);var l=s(4120);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function n({className:e,variant:a,...s}){return t.jsx("div",{className:(0,l.cn)(i({variant:a}),e),...s})}},84177:(e,a,s)=>{"use strict";s.d(a,{$N:()=>h,Be:()=>x,Vq:()=>d,cN:()=>u,cZ:()=>m,fK:()=>p});var t=s(27685),r=s(35639),l=s(54654),i=s(83810),n=s(4120);let d=r.fC;r.xz;let o=r.h_;r.x8;let c=i.forwardRef(({className:e,...a},s)=>t.jsx(r.aV,{ref:s,className:(0,n.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));c.displayName=r.aV.displayName;let m=i.forwardRef(({className:e,children:a,...s},i)=>(0,t.jsxs)(o,{children:[t.jsx(c,{}),(0,t.jsxs)(r.VY,{ref:i,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[a,(0,t.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[t.jsx(l.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=r.VY.displayName;let p=({className:e,...a})=>t.jsx("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});p.displayName="DialogHeader";let u=({className:e,...a})=>t.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});u.displayName="DialogFooter";let h=i.forwardRef(({className:e,...a},s)=>t.jsx(r.Dx,{ref:s,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));h.displayName=r.Dx.displayName;let x=i.forwardRef(({className:e,...a},s)=>t.jsx(r.dk,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));x.displayName=r.dk.displayName},57869:(e,a,s)=>{"use strict";s.d(a,{_:()=>n});var t=s(27685),r=s(73891),l=s(83810),i=s(4120);let n=l.forwardRef(({className:e,...a},s)=>t.jsx(r.f,{ref:s,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...a}));n.displayName=r.f.displayName},65944:(e,a,s)=>{"use strict";s.d(a,{Bw:()=>x,Ph:()=>c,Ql:()=>f,i4:()=>p,ki:()=>m});var t=s(27685),r=s(66134),l=s(4610),i=s(24427),n=s(63197),d=s(83810),o=s(4120);let c=r.fC;r.ZA;let m=r.B4,p=d.forwardRef(({className:e,children:a,...s},i)=>(0,t.jsxs)(r.xz,{ref:i,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[a,t.jsx(r.JO,{asChild:!0,children:t.jsx(l.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=r.xz.displayName;let u=d.forwardRef(({className:e,...a},s)=>t.jsx(r.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(i.Z,{className:"h-4 w-4"})}));u.displayName=r.u_.displayName;let h=d.forwardRef(({className:e,...a},s)=>t.jsx(r.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:t.jsx(l.Z,{className:"h-4 w-4"})}));h.displayName=r.$G.displayName;let x=d.forwardRef(({className:e,children:a,position:s="popper",...l},i)=>t.jsx(r.h_,{children:(0,t.jsxs)(r.VY,{ref:i,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...l,children:[t.jsx(u,{}),t.jsx(r.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)]w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),t.jsx(h,{})]})}));x.displayName=r.VY.displayName,d.forwardRef(({className:e,...a},s)=>t.jsx(r.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=r.__.displayName;let f=d.forwardRef(({className:e,children:a,...s},l)=>(0,t.jsxs)(r.ck,{ref:l,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(r.wU,{children:t.jsx(n.Z,{className:"h-4 w-4"})})}),t.jsx(r.eT,{children:a})]}));f.displayName=r.ck.displayName,d.forwardRef(({className:e,...a},s)=>t.jsx(r.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=r.Z0.displayName},25277:(e,a,s)=>{"use strict";s.d(a,{RM:()=>d,SC:()=>o,iA:()=>i,pj:()=>m,ss:()=>c,xD:()=>n});var t=s(27685),r=s(83810),l=s(4120);let i=r.forwardRef(({className:e,...a},s)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:s,className:(0,l.cn)("w-full caption-bottom text-sm",e),...a})}));i.displayName="Table";let n=r.forwardRef(({className:e,...a},s)=>t.jsx("thead",{ref:s,className:(0,l.cn)("[&_tr]:border-b",e),...a}));n.displayName="TableHeader";let d=r.forwardRef(({className:e,...a},s)=>t.jsx("tbody",{ref:s,className:(0,l.cn)("[&_tr:last-child]:border-0",e),...a}));d.displayName="TableBody",r.forwardRef(({className:e,...a},s)=>t.jsx("tfoot",{ref:s,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...a})).displayName="TableFooter";let o=r.forwardRef(({className:e,...a},s)=>t.jsx("tr",{ref:s,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...a}));o.displayName="TableRow";let c=r.forwardRef(({className:e,...a},s)=>t.jsx("th",{ref:s,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...a}));c.displayName="TableHead";let m=r.forwardRef(({className:e,...a},s)=>t.jsx("td",{ref:s,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...a}));m.displayName="TableCell",r.forwardRef(({className:e,...a},s)=>t.jsx("caption",{ref:s,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",e),...a})).displayName="TableCaption"},39881:(e,a,s)=>{"use strict";s.d(a,{x:()=>r});class t{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,a={}){let s="true"===localStorage.getItem("demoMode"),t=localStorage.getItem("demoTenantId");s&&t&&(a.headers={...a.headers,"X-Demo-Tenant-Id":t});let r=`${this.baseUrl}${e}`,l={"Content-Type":"application/json",...a.headers};this.token&&(l.Authorization=`Bearer ${this.token}`),this.apiKey&&(l["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...a,headers:l}),s=await e.json();if(!e.ok)return{error:{code:s.error?.code||"UNKNOWN_ERROR",message:s.error?.message||"An error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,a){return this.request(e,{method:"POST",body:a?JSON.stringify(a):void 0})}async put(e,a){return this.request(e,{method:"PUT",body:a?JSON.stringify(a):void 0})}async patch(e,a){return this.request(e,{method:"PATCH",body:a?JSON.stringify(a):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let r=new t},81088:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});/**
/app/apps/web/.next/server/app/(dashboard)/billing/page.js:(()=>{var e={};e.id=921,e.ids=[921],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},21119:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(59441),a=s(1498),n=s(6580),i=s.n(n),l=s(15511),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["(dashboard)",{children:["billing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,79824)),"/app/apps/web/src/app/(dashboard)/billing/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/billing/page.tsx"],x="/(dashboard)/billing/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/billing/page",pathname:"/billing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},34303:(e,t,s)=>{Promise.resolve().then(s.bind(s,83482))},83482:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(27685),a=s(81088),n=s(6620),i=s(61198),l=s(33173),o=s(83810),d=s(35090),c=s(4283),x=s(3920),p=s(25277),u=s(39881),h=s(4120);function m(){let[e,t]=(0,o.useState)([]),[s,m]=(0,o.useState)(null),[b,f]=(0,o.useState)(!0),[g,j]=(0,o.useState)(null),y=(0,o.useCallback)(async()=>{f(!0),j(null);try{let[e,s]=await Promise.all([u.x.get("/api/v1/billing/invoices"),u.x.get("/api/v1/billing/balance")]);e.data&&t(e.data.data||[]),s.data&&m(s.data)}catch(e){j(e instanceof Error?e.message:"Failed to load billing data")}finally{f(!1)}},[]);return((0,o.useEffect)(()=>{y()},[y]),b)?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Billing"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(a.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Billing"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),g&&r.jsx(x.Zb,{children:r.jsx(x.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"text-center text-destructive",children:["Error: ",g]})})}),s&&(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(x.ll,{className:"text-sm font-medium",children:"Available Balance"}),r.jsx(n.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(x.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:(0,h.xG)(parseFloat(s.available))})})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(x.ll,{className:"text-sm font-medium",children:"Pending"}),r.jsx(i.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(x.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:(0,h.xG)(parseFloat(s.pending))})})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(x.ll,{className:"text-sm font-medium",children:"Held"}),r.jsx(n.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(x.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:(0,h.xG)(parseFloat(s.held))})})]})]}),(0,r.jsxs)(x.Zb,{children:[(0,r.jsxs)(x.Ol,{children:[r.jsx(x.ll,{children:"Invoices"}),r.jsx(x.SZ,{children:"View and download your invoices"})]}),r.jsx(x.aY,{children:0===e.length?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"}):(0,r.jsxs)(p.iA,{children:[r.jsx(p.xD,{children:(0,r.jsxs)(p.SC,{children:[r.jsx(p.ss,{children:"Invoice Number"}),r.jsx(p.ss,{children:"Period"}),r.jsx(p.ss,{children:"Amount"}),r.jsx(p.ss,{children:"Status"}),r.jsx(p.ss,{children:"Due Date"}),r.jsx(p.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(p.RM,{children:e.map(e=>(0,r.jsxs)(p.SC,{children:[r.jsx(p.pj,{className:"font-medium",children:e.invoiceNumber}),(0,r.jsxs)(p.pj,{children:[(0,h.p6)(e.period.start)," - ",(0,h.p6)(e.period.end)]}),r.jsx(p.pj,{children:(0,h.xG)(parseFloat(e.total))}),r.jsx(p.pj,{children:r.jsx(d.C,{variant:"paid"===e.status?"success":"warning",children:e.status})}),r.jsx(p.pj,{children:(0,h.p6)(e.dueDate)}),r.jsx(p.pj,{className:"text-right",children:r.jsx(c.z,{variant:"ghost",size:"sm",children:r.jsx(l.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},35090:(e,t,s)=>{"use strict";s.d(t,{C:()=>l});var r=s(27685),a=s(31727);s(83810);var n=s(4120);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...s}){return r.jsx("div",{className:(0,n.cn)(i({variant:t}),e),...s})}},25277:(e,t,s)=>{"use strict";s.d(t,{RM:()=>o,SC:()=>d,iA:()=>i,pj:()=>x,ss:()=>c,xD:()=>l});var r=s(27685),a=s(83810),n=s(4120);let i=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,n.cn)("border-b transition-colorshover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let x=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));x.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let s="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");s&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let a=`${this.baseUrl}${e}`,n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:n}),s=await e.json();if(!e.ok)return{error:{code:s.error?.code||"UNKNOWN_ERROR",message:s.error?.message||"An error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new r},33173:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
/app/apps/web/.next/server/app/(dashboard)/settings/quotas/page.js: */let n=(0,r.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l=(0,r.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=a(77921),o=a(31087),d=a(6620),c=a(83810),u=a(71499),m=a(4283),x=a(3920),h=a(14887),p=a(57869),f=a(26442),g=a(74550),y=a(39881);function v(){let[e,t]=(0,c.useState)(""),[a,r]=(0,c.useState)(null),[v,b]=(0,c.useState)(!1),[N,j]=(0,c.useState)(null),[k,S]=(0,c.useState)(null),[C,w]=(0,c.useState)({maxConcurrentCalls:"",maxMinutesPerDay:"",maxRecordingRetentionDays:"",maxPhoneNumbers:"",maxStorageGB:"",enabled:!0}),[P,R]=(0,c.useState)({monthlyBudget:"",dailyBudget:"",alertThreshold:"80",alertEmails:"",alertSlackWebhook:"",hardStopEnabled:!0,enabled:!0}),[E,_]=(0,c.useState)(null),[M,T]=(0,c.useState)(null);(0,c.useEffect)(()=>{t("00000000-0000-0000-0000-000000000000")},[]);let O=async()=>{if(e)try{b(!0);let t=await y.x.get(`/admin/api/v1/tenants/${e}/quota/status`);t.data?r(t.data):t.error&&j(t.error.message||"Failed to load quota status")}catch(e){j("Failed to load quota status")}finally{b(!1)}},B=async()=>{if(e)try{let t=await y.x.get(`/admin/api/v1/tenants/${e}/quota`);t.data&&w({maxConcurrentCalls:t.data.maxConcurrentCalls?.toString()||"",maxMinutesPerDay:t.data.maxMinutesPerDay?.toString()||"",maxRecordingRetentionDays:t.data.maxRecordingRetentionDays?.toString()||"",maxPhoneNumbers:t.data.maxPhoneNumbers?.toString()||"",maxStorageGB:t.data.maxStorageGB?.toString()||"",enabled:t.data.enabled??!0})}catch(e){}},D=async()=>{if(e)try{let t=await y.x.get(`/admin/api/v1/tenants/${e}/budget`);t.data&&R({monthlyBudget:t.data.monthlyBudget?.toString()||"",dailyBudget:t.data.dailyBudget?.toString()||"",alertThreshold:t.data.alertThreshold?.toString()||"80",alertEmails:t.data.alertEmails?.join(", ")||"",alertSlackWebhook:t.data.alertSlackWebhook||"",hardStopEnabled:t.data.hardStopEnabled??!0,enabled:t.data.enabled??!0})}catch(e){}};(0,c.useEffect)(()=>{e&&(O(),B(),D())},[e]);let $=async()=>{if(e)try{b(!0),j(null),await y.x.patch(`/admin/api/v1/tenants/${e}/quota`,{maxConcurrentCalls:C.maxConcurrentCalls?parseInt(C.maxConcurrentCalls):null,maxMinutesPerDay:C.maxMinutesPerDay?parseInt(C.maxMinutesPerDay):null,maxRecordingRetentionDays:C.maxRecordingRetentionDays?parseInt(C.maxRecordingRetentionDays):null,maxPhoneNumbers:C.maxPhoneNumbers?parseInt(C.maxPhoneNumbers):null,maxStorageGB:C.maxStorageGB?parseFloat(C.maxStorageGB):null,enabled:C.enabled}),S("Quota settings saved"),O(),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to save quota settings")}finally{b(!1)}},q=async()=>{if(e)try{b(!0),j(null),await y.x.patch(`/admin/api/v1/tenants/${e}/budget`,{monthlyBudget:P.monthlyBudget?parseFloat(P.monthlyBudget):null,dailyBudget:P.dailyBudget?parseFloat(P.dailyBudget):null,alertThreshold:parseFloat(P.alertThreshold),alertEmails:P.alertEmails.split(",").map(e=>e.trim()).filter(Boolean),alertSlackWebhook:P.alertSlackWebhook||null,hardStopEnabled:P.hardStopEnabled,enabled:P.enabled}),S("Budget settings saved"),O(),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to save budget settings")}finally{b(!1)}},I=async()=>{if(e)try{b(!0),j(null);let t=await y.x.post(`/admin/api/v1/tenants/${e}/budget/override-token`,{expiresInHours:24});_(t.token),T(t.expiresAt),S("Override token generated"),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to generate override token")}finally{b(!1)}},A=async()=>{if(e)try{b(!0),j(null),await y.x.delete(`/admin/api/v1/tenants/${e}/budget/override-token`),_(null),T(null),S("Override token revoked"),setTimeout(()=>S(null),3e3)}catch(e){j("Failed to revoke override token")}finally{b(!1)}};return(0,s.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex-shrink-0 mb-2",children:[s.jsx("h1",{className:"text-xl font-bold",children:"Quotas & Budgets"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage tenant quotas and budget controls"})]}),N&&(0,s.jsxs)(u.bZ,{variant:"destructive",className:"flex-shrink-0 mb-2 py-2",children:[s.jsx(n,{className:"h-3 w-3"}),s.jsx(u.X,{className:"text-sm",children:N})]}),k&&(0,s.jsxs)(u.bZ,{className:"flex-shrink-0 mb-2 py-2",children:[s.jsx(l,{className:"h-3 w-3"}),s.jsx(u.X,{className:"text-sm",children:k})]}),a&&a.concurrentCalls&&(0,s.jsxs)(x.Zb,{className:"flex-shrink-0 mb-2",children:[s.jsx(x.Ol,{className:"pb-3",children:s.jsx(x.ll,{className:"text-base",children:"Current Usage"})}),s.jsx(x.aY,{className:"pt-0",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Concurrent Calls"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[a.concurrentCalls.current??0,a.concurrentCalls.limit&&` / ${a.concurrentCalls.limit}`]}),null!==a.concurrentCalls.remaining&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.concurrentCalls.remaining," remaining"]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(o.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Daily Minutes"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[a.dailyMinutes?.current??0,a.dailyMinutes?.limit&&` / ${a.dailyMinutes.limit}`]}),a.dailyMinutes?.remaining!==null&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.dailyMinutes.remaining," remaining"]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Phone Numbers"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:[a.phoneNumbers?.current??0,a.phoneNumbers?.limit&&` / ${a.phoneNumbers.limit}`]}),a.phoneNumbers?.remaining!==null&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.phoneNumbers.remaining," remaining"]})]}),a.budget&&(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.jsx(d.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),s.jsx("span",{className:"text-xs font-medium",children:"Monthly Budget"})]}),(0,s.jsxs)("div",{className:"text-lg font-bold",children:["$",(a.budget.monthly?.current??0).toFixed(2),a.budget.monthly?.limit&&` / $${a.budget.monthly.limit.toFixed(2)}`]}),a.budget.monthly?.percentage!==null&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:[a.budget.monthly.percentage.toFixed(1),"% used"]})]})]})})]}),(0,s.jsxs)(g.mQ,{defaultValue:"quotas",className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,s.jsxs)(g.dr,{className:"flex-shrink-0 h-9",children:[s.jsx(g.SP,{value:"quotas",className:"text-sm",children:"Quotas"}),s.jsx(g.SP,{value:"budget",className:"text-sm",children:"Budget"}),s.jsx(g.SP,{value:"overrides",className:"text-sm",children:"Overrides"})]}),s.jsx(g.nU,{value:"quotas",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,s.jsxs)(x.Zb,{className:"h-full flex flex-col overflow-hidden",children:[s.jsx(x.Ol,{className:"pb-2 flex-shrink-0",children:s.jsx(x.ll,{className:"text-base",children:"Quota Settings"})}),(0,s.jsxs)(x.aY,{className:"flex-1 overflow-y-auto space-y-3 pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p._,{className:"text-sm",children:"Enable Quotas"})}),s.jsx(f.r,{checked:C.enabled,onCheckedChange:e=>w({...C,enabled:e})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxConcurrentCalls",className:"text-sm",children:"Max Concurrent Calls"}),s.jsx(h.I,{id:"maxConcurrentCalls",type:"number",value:C.maxConcurrentCalls,onChange:e=>w({...C,maxConcurrentCalls:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxMinutesPerDay",className:"text-sm",children:"Max Minutes Per Day"}),s.jsx(h.I,{id:"maxMinutesPerDay",type:"number",value:C.maxMinutesPerDay,onChange:e=>w({...C,maxMinutesPerDay:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxPhoneNumbers",className:"text-sm",children:"Max Phone Numbers"}),s.jsx(h.I,{id:"maxPhoneNumbers",type:"number",value:C.maxPhoneNumbers,onChange:e=>w({...C,maxPhoneNumbers:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxRecordingRetentionDays",className:"text-sm",children:"Max Recording Retention (Days)"}),s.jsx(h.I,{id:"maxRecordingRetentionDays",type:"number",value:C.maxRecordingRetentionDays,onChange:e=>w({...C,maxRecordingRetentionDays:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"maxStorageGB",className:"text-sm",children:"Max Storage (GB)"}),s.jsx(h.I,{id:"maxStorageGB",type:"number",step:"0.01",value:C.maxStorageGB,onChange:e=>w({...C,maxStorageGB:e.target.value}),placeholder:"Unlimited",className:"h-8"})]})]}),s.jsx(m.z,{onClick:$,disabled:v,size:"sm",className:"mt-2",children:"Save Quota Settings"})]})]})}),(0,s.jsxs)(g.nU,{value:"budget",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:[(0,s.jsxs)(x.Zb,{className:"h-full flex flex-col overflow-hidden",children:[s.jsx(x.Ol,{className:"pb-2 flex-shrink-0",children:s.jsx(x.ll,{className:"text-base",children:"Budget Settings"})}),(0,s.jsxs)(x.aY,{className:"flex-1 overflow-y-auto space-y-3 pt-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p._,{className:"text-sm",children:"Enable Budget"})}),s.jsx(f.r,{checked:P.enabled,onCheckedChange:e=>R({...P,enabled:e})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"monthlyBudget",className:"text-sm",children:"Monthly Budget ($)"}),s.jsx(h.I,{id:"monthlyBudget",type:"number",step:"0.01",value:P.monthlyBudget,onChange:e=>R({...P,monthlyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"dailyBudget",className:"text-sm",children:"Daily Budget ($)"}),s.jsx(h.I,{id:"dailyBudget",type:"number",step:"0.01",value:P.dailyBudget,onChange:e=>R({...P,dailyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"alertThreshold",className:"text-sm",children:"Alert Threshold (%)"}),s.jsx(h.I,{id:"alertThreshold",type:"number",value:P.alertThreshold,onChange:e=>R({...P,alertThreshold:e.target.value}),placeholder:"80",className:"h-8"})]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"alertEmails",className:"text-sm",children:"Alert Email Addresses"}),s.jsx(h.I,{id:"alertEmails",value:P.alertEmails,onChange:e=>R({...P,alertEmails:e.target.value}),placeholder:"admin@example.com, finance@example.com",className:"h-8"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx(p._,{htmlFor:"alertSlackWebhook",className:"text-sm",children:"Slack Webhook URL"}),s.jsx(h.I,{id:"alertSlackWebhook",value:P.alertSlackWebhook,onChange:e=>R({...P,alertSlackWebhook:e.target.value}),placeholder:"https://hooks.slack.com/services/...",className:"h-8"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(p._,{className:"text-sm",children:"Hard Stop Enabled"})}),s.jsx(f.r,{checked:P.hardStopEnabled,onCheckedChange:e=>R({...P,hardStopEnabled:e})})]}),s.jsx(m.z,{onClick:q,disabled:v,size:"sm",className:"mt-2",children:"Save Budget Settings"})]})]}),(0,s.jsxs)(x.Zb,{className:"mt-2",children:[s.jsx(x.Ol,{className:"pb-2",children:s.jsx(x.ll,{className:"text-base",children:"Override Token"})}),s.jsx(x.aY,{className:"pt-0 space-y-2",children:E?(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(u.bZ,{className:"py-2",children:(0,s.jsxs)(u.X,{className:"text-sm",children:[s.jsx("div",{className:"font-mono text-xs break-all",children:E}),M&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",new Date(M).toLocaleString()]})]})}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Use this token in the ",s.jsx("code",{className:"text-xs",children:"X-Quota-Override"})," header to bypass quota limits."]}),s.jsx(m.z,{variant:"destructive",onClick:A,disabled:v,size:"sm",children:"Revoke Token"})]}):s.jsx(m.z,{onClick:I,disabled:v,size:"sm",children:"Generate Override Token"})})]})]}),s.jsx(g.nU,{value:"overrides",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,s.jsxs)(x.Zb,{children:[s.jsx(x.Ol,{className:"pb-2",children:s.jsx(x.ll,{className:"text-base",children:"Quota Overrides"})}),s.jsx(x.aY,{className:"pt-0",children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Quota overrides allow temporarily increasing limits for specific quota types. Use the API to create overrides programmatically."})})]})})]})]})}},71499:(e,t,a)=>{"use strict";a.d(t,{X:()=>d,bZ:()=>o});var s=a(27685),r=a(31727),n=a(83810),l=a(4120);let i=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef(({className:e,variant:t,...a},r)=>s.jsx("div",{ref:r,role:"alert",className:(0,l.cn)(i({variant:t}),e),...a}));o.displayName="Alert",n.forwardRef(({className:e,...t},a)=>s.jsx("h5",{ref:a,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=n.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},57869:(e,t,a)=>{"use strict";a.d(t,{_:()=>i});var s=a(27685),r=a(73891),n=a(83810),l=a(4120);let i=n.forwardRef(({className:e,...t},a)=>s.jsx(r.f,{ref:a,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));i.displayName=r.f.displayName},26442:(e,t,a)=>{"use strict";a.d(t,{r:()=>i});var s=a(27685),r=a(11842),n=a(83810),l=a(4120);let i=n.forwardRef(({className:e,...t},a)=>s.jsx(r.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:s.jsx(r.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i.displayName=r.fC.displayName},74550:(e,t,a)=>{"use strict";a.d(t,{SP:()=>d,dr:()=>o,mQ:()=>i,nU:()=>c});var s=a(27685),r=a(57045),n=a(83810),l=a(4120);let i=r.fC,o=n.forwardRef(({className:e,...t},a)=>s.jsx(r.aV,{ref:a,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=r.aV.displayName;let d=n.forwardRef(({className:e,...t},a)=>s.jsx(r.xz,{ref:a,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=r.xz.displayName;let c=n.forwardRef(({className:e,...t},a)=>s.jsx(r.VY,{ref:a,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=r.VY.displayName},39881:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});class s{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let a="true"===localStorage.getItem("demoMode"),s=localStorage.getItem("demoTenantId");a&&s&&(t.headers={...t.headers,"X-Demo-Tenant-Id":s});let r=`${this.baseUrl}${e}`,n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:n}),a=await e.json();if(!e.ok)return{error:{code:a.error?.code||"UNKNOWN_ERROR",message:a.error?.message||"An error occurred"}};return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let r=new s},39073:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>l});let s=(0,a(30599).createProxy)(String.raw`/app/apps/web/src/app/(dashboard)/settings/quotas/page.tsx`),{__esModule:r,$$typeof:n}=s,l=s.default},2724:(e,t,a)=>{"use strict";function s(e,t,{checkForDefaultPrevented:a=!0}={}){return function(s){if(e?.(s),!1===a||!s.defaultPrevented)return t?.(s)}}a.d(t,{Mj:()=>s})},6872:(e,t,a)=>{"use strict";a.d(t,{b:()=>l,k:()=>n});var s=a(83810),r=a(27685);function n(e,t){let a=s.createContext(t),n=e=>{let{children:t,...n}=e,l=s.useMemo(()=>n,Object.values(n));return(0,r.jsx)(a.Provider,{value:l,children:t})};return n.displayName=e+"Provider",[n,function(r){let n=s.useContext(a);if(n)return n;if(void 0!==t)return t;throw Error(`\`${r}\` must be used within \`${e}\``)}]}function l(e,t=[]){let a=[],n=()=>{let t=a.map(e=>s.createContext(e));return function(a){let r=a?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...a,[e]:r}}),[a,r])}};return n.scopeName=e,[function(t,n){let l=s.createContext(n),i=a.length;a=[...a,n];let o=t=>{let{scope:a,children:n,...o}=t,d=a?.[e]?.[i]||l,c=s.useMemo(()=>o,Object.values(o));return(0,r.jsx)(d.Provider,{value:c,children:n})};return o.displayName=t+"Provider",[o,function(a,r){let o=r?.[e]?.[i]||l,d=s.useContext(o);if(d)return d;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let r=a.reduce((t,{useScope:a,scopeName:s})=>{let r=a(e)[`__scope${s}`];return{...t,...r}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return a.scopeName=t.scopeName,a}(n,...t)]}},99892:(e,t,a)=>{"use strict";a.d(t,{M:()=>o});var s,r=a(83810),n=a(7479),l=(s||(s=a.t(r,2)))[" useId ".trim().toString()]||(()=>void 0),i=0;function o(e){let[t,a]=r.useState(l());return(0,n.b)(()=>{e||a(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}},73891:(e,t,a)=>{"use strict";a.d(t,{f:()=>h});var s=a(83810),r=a.t(s,2);a(80914);var n=a(68118),l=a(27685),i=Symbol.for("react.lazy"),o=r[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"ine&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var c=Symbol("radix.slottable");function u(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}var m=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=function(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:a,...r}=e;if(d(a)&&"function"==typeof o&&(a=o(a._payload)),s.isValidElement(a)){var l;let e,i;let o=(l=a,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),d=function(e,t){let a={...t};for(let s in t){let r=e[s],n=t[s];/^on[A-Z]/.test(s)?r&&n?a[s]=(...e)=>{let t=n(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...n}:"className"===s&&(a[s]=[r,n].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==s.Fragment&&(d.ref=t?(0,n.F)(t,o):o),s.cloneElement(a,d)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),a=s.forwardRef((e,a)=>{let{children:r,...n}=e;d(r)&&"function"==typeof o&&(r=o(r._payload));let i=s.Children.toArray(r),c=i.find(u);if(c){let e=c.props.children,r=i.map(t=>t!==c?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...n,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,l.jsx)(t,{...n,ref:a,children:r})});return a.displayName=`${e}.Slot`,a}(`Primitive.${t}`),r=s.forwardRef((e,s)=>{let{asChild:r,...n}=e,i=r?a:t;return(0,l.jsx)(i,{...n,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),x=s.forwardRef((e,t)=>(0,l.jsx)(m.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));x.displayName="Label";var h=x},1090:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var s=a(83810),r=a(68118),n=a(7479),l=e=>{let{present:t,children:a}=e,l=function(e){var t,a;let[r,l]=s.useState(),o=s.useRef(null),d=s.useRef(e),c=s.useRef("none"),[u,m]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},s.useReducer((e,t)=>a[e][t]??e,t));return s.useEffect(()=>{let e=i(o.current);c.current="mounted"===u?e:"none"},[u]),(0,n.b)(()=>{let t=o.current,a=d.current;if(a!==e){let s=c.current,r=i(t);e?m("MOUNT"):"none"===r||t?.display==="none"?m("UNMOUNT"):a&&s!==r?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,n.b)(()=>{if(r){let e;let t=r.ownerDocument.defaultView??window,a=a=>{let s=i(o.current).includes(CSS.escape(a.animationName));if(a.target===r&&s&&(m("ANIMATION_END"),!d.current)){let a=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=a)})}},s=e=>{e.target===r&&(c.current=i(o.current))};return r.addEventListener("animationstart",s),r.addEventListener("animationcancel",a),r.addEventListener("animationend",a),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",s),r.removeEventListener("animationcancel",a),r.removeEventListener("animationend",a)}}m("ANIMATION_END")},[r,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(e=>{o.current=e?getComputedStyle(e):null,l(e)},[])}}(t),o="function"==typeof a?a({present:l.isPresent}):s.Children.only(a),d=(0,r.e)(l.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(o));return"function"==typeof a||l.isPresent?s.cloneElement(o,{ref:d}):null};function i(e){return e?.animationName||"none"}l.displayName="Presence"},29548:(e,t,a)=>{"use strict";a.d(t,{WV:()=>i,jH:()=>o});var s=a(83810),r=a(80914),n=a(47870),l=a(27685),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,n.Z8)(`Primitive.${t}`),r=s.forwardRef((e,s)=>{let{asChild:r,...n}=e,i=r?a:t;return(0,l.jsx)(i,{...n,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function o(e,t){e&&r.flushSync(()=>e.dispatchEvent(t))}},47870:(e,t,a)=>{"use strict";a.d(t,{Z8:()=>l});var s=a(83810),r=a(68118),n=a(27685);function l(e){let t=function(e){let t=s.forwardRef((e,t)=>{let{children:a,...n}=e;if(s.isValidElement(a)){let e,l;let i=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.ref:(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?a.props.ref:a.props.ref||a.ref,o=function(e,t){let a={...t};for(let s in t){let r=e[s],n=t[s];/^on[A-Z]/.test(s)?r&&n?a[s]=(...e)=>{let t=n(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...n}:"className"===s&&(a[s]=[r,n].filter(Boolean).join(" "))}return{...e,...a}}(n,a.props);return a.type!==s.Fragment&&(o.ref=t?(0,r.F)(t,i):i),s.cloneElement(a,o)}return s.Children.count(a)>1?s.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),a=s.forwardRef((e,a)=>{let{children:r,...l}=e,i=s.Children.toArray(r),d=i.find(o);if(d){let e=d.props.children,r=i.map(t=>t!==d?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...l,ref:a,children:s.isValidElement(e)?s.cloneElement(e,void 0,r):null})}return(0,n.jsx)(t,{...l,ref:a,children:r})});return a.displayName=`${e}.Slot`,a}var i=Symbol("radix.slottable");function o(e){return s.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===i}},82013:(e,t,a)=>{"use strict";a.d(t,{W:()=>r});var s=a(83810);function r(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}},39294:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var s,r=a(83810),n=a(7479),l=(s||(s=a.t(r,2)))[" useInsertionEffect ".trim().toString()]||n.b;function i({prop:e,defaultProp:t,onChange:a=()=>{},caller:s}){let[n,i,o]=function({defaultProp:e,onChange:t}){let[a,s]=r.useState(e),n=r.useRef(a),i=r.useRef(t);return l(()=>{i.current=t},[t]),r.useEffect(()=>{n.current!==a&&(i.current?.(a),n.current=a)},[a,n]),[a,s,i]}({defaultProp:t,onChange:a}),d=void 0!==e,c=d?e:n;{let t=r.useRef(void 0!==e);r.useEffect(()=>{let e=t.current;if(e!==d){let t=d?"controlled":"uncontrolled";console.warn(`${s} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=d},[d,s])}return[c,r.useCallback(t=>{if(d){let a="function"==typeof t?t(e):t;a!==e&&o.current?.(a)}else i(t)},[d,e,i,o])]}Symbol("RADIX:SYNC_STATE")},7479:(e,t,a)=>{"use strict";a.d(t,{b:()=>r});var s=a(83810),r=globalThis?.document?s.useLayoutEffect:()=>{}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[289,957,856,491,340,560],()=>a(72797));module.exports=s})();
/app/apps/web/.next/server/app/(dashboard)/settings/users/page.js:(Note: In production, this would be sent via email)`):alert("User invited successfully!"),t?.(),s(!1))}catch(e){d(e instanceof Error?e.message:"Failed to invite user")}finally{n(!1)}};return a.jsx(p.Vq,{open:e,onOpenChange:s,children:(0,a.jsxs)(p.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(p.fK,{children:[a.jsx(p.$N,{children:"Invite User"}),a.jsx(p.Be,{children:"Send an invitation to a new team member"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"email",children:"Email Address *"}),a.jsx(x.I,{id:"email",type:"email",placeholder:"user@example.com",value:m.email,onChange:e=>u({...m,email:e.target.value}),disabled:r})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"firstName",children:"First Name (Optional)"}),a.jsx(x.I,{id:"firstName",placeholder:"John",value:m.firstName,onChange:e=>u({...m,firstName:e.target.value}),disabled:r})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(f._,{htmlFor:"lastName",children:"Last Name (Optional)"}),a.jsx(x.I,{id:"lastName",placeholder:"Doe",value:m.lastName,onChange:e=>u({...m,lastName:e.target.value}),disabled:r})]}),l&&a.jsx("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:l})]}),(0,a.jsxs)(p.cN,{children:[a.jsx(c.z,{variant:"outline",onClick:()=>s(!1),disabled:r,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:g,disabled:r||!m.email.trim(),children:[r&&a.jsx(i.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Invitation"]})]})]})})}function b(){let[e,s]=(0,o.useState)([]),[t,p]=(0,o.useState)(!0),[x,f]=(0,o.useState)(!1);(0,o.useEffect)(()=>{b()},[]);let b=async()=>{p(!0);try{let e=await h.x.get("/api/v1/users");e.data?.data&&s(e.data.data)}catch(e){console.error("Failed to load users:",e)}finally{p(!1)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Users"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage team members and permissions"})]}),(0,a.jsxs)(c.z,{onClick:()=>f(!0),children:[a.jsx(r.Z,{className:"mr-2 h-4 w-4"}),"Invite User"]})]}),(0,a.jsxs)(m.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,a.jsxs)(m.Ol,{className:"flex-shrink-0",children:[a.jsx(m.ll,{children:"Team Members"}),a.jsx(m.SZ,{children:"View and manage user access"})]}),a.jsx(m.aY,{className:"flex-1 overflow-y-auto min-h-0",children:t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(i.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?a.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No users found"}):(0,a.jsxs)(u.iA,{children:[a.jsx(u.xD,{children:(0,a.jsxs)(u.SC,{children:[a.jsx(u.ss,{children:"Email"}),a.jsx(u.ss,{children:"Role"}),a.jsx(u.ss,{children:"Status"}),a.jsx(u.ss,{children:"Invited"}),a.jsx(u.ss,{className:"text-right",children:"Actions"})]})}),a.jsx(u.RM,{children:e.map(e=>(0,a.jsxs)(u.SC,{children:[(0,a.jsxs)(u.pj,{className:"flex items-center gap-2",children:[a.jsx(n.Z,{className:"h-4 w-4 text-muted-foreground"}),e.email]}),a.jsx(u.pj,{children:a.jsx("div",{className:"flex flex-wrap gap-1",children:e.roles.map(e=>(0,a.jsxs)(d.C,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[a.jsx(l.Z,{className:"h-3 w-3"}),e]},e))})}),a.jsx(u.pj,{children:a.jsx(d.C,{variant:"active"===e.status?"success":"warning",children:e.status})}),a.jsx(u.pj,{children:new Date(e.invitedAt).toLocaleDateString()}),a.jsx(u.pj,{className:"text-right",children:a.jsx(c.z,{variant:"ghost",size:"sm",children:"Edit"})})]},e.id))})]})})]}),a.jsx(g,{open:x,onOpenChange:f,onSuccess:b})]})}},35090:(e,s,t)=>{"use strict";t.d(s,{C:()=>l});var a=t(27685),r=t(31727);t(83810);var i=t(4120);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return a.jsx("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},84177:(e,s,t)=>{"use strict";t.d(s,{$N:()=>x,Be:()=>f,Vq:()=>o,cN:()=>p,cZ:()=>m,fK:()=>u});var a=t(27685),r=t(35639),i=t(54654),n=t(83810),l=t(4120);let o=r.fC;r.xz;let d=r.h_;r.x8;let c=n.forwardRef(({className:e,...s},t)=>a.jsx(r.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));c.displayName=r.aV.displayName;let m=n.forwardRef(({className:e,children:s,...t},n)=>(0,a.jsxs)(d,{children:[a.jsx(c,{}),(0,a.jsxs)(r.VY,{ref:n,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(i.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=r.VY.displayName;let u=({className:e,...s})=>a.jsx("div",{className:(0,l.cn)("flexflex-col space-y-1.5 text-center sm:text-left",e),...s});u.displayName="DialogHeader";let p=({className:e,...s})=>a.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});p.displayName="DialogFooter";let x=n.forwardRef(({className:e,...s},t)=>a.jsx(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));x.displayName=r.Dx.displayName;let f=n.forwardRef(({className:e,...s},t)=>a.jsx(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));f.displayName=r.dk.displayName},57869:(e,s,t)=>{"use strict";t.d(s,{_:()=>l});var a=t(27685),r=t(73891),i=t(83810),n=t(4120);let l=i.forwardRef(({className:e,...s},t)=>a.jsx(r.f,{ref:t,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));l.displayName=r.f.displayName},25277:(e,s,t)=>{"use strict";t.d(s,{RM:()=>o,SC:()=>d,iA:()=>n,pj:()=>m,ss:()=>c,xD:()=>l});var a=t(27685),r=t(83810),i=t(4120);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{className:"relative w-full overflow-auto",children:a.jsx("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let l=r.forwardRef(({className:e,...s},t)=>a.jsx("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",e),...s}));l.displayName="TableHeader";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",e),...s}));o.displayName="TableBody",r.forwardRef(({className:e,...s},t)=>a.jsx("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));d.displayName="TableRow";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));c.displayName="TableHead";let m=r.forwardRef(({className:e,...s},t)=>a.jsx("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));m.displayName="TableCell",r.forwardRef(({className:e,...s},t)=>a.jsx("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption"},39881:(e,s,t)=>{"use strict";t.d(s,{x:()=>r});class a{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,s={}){let t="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");t&&a&&(s.headers={...s.headers,"X-Demo-Tenant-Id":a});letr=`${this.baseUrl}${e}`,i={"Content-Type":"application/json",...s.headers};this.token&&(i.Authorization=`Bearer ${this.token}`),this.apiKey&&(i["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...s,headers:i}),t=await e.json();if(!e.ok)return{error:{code:t.error?.code||"UNKNOWN_ERROR",message:t.error?.message||"An error occurred"}};return{data:t}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,s){return this.request(e,{method:"POST",body:s?JSON.stringify(s):void 0})}async put(e,s){return this.request(e,{method:"PUT",body:s?JSON.stringify(s):void 0})}async patch(e,s){return this.request(e,{method:"PATCH",body:s?JSON.stringify(s):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let r=new a},81088:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});/**
/app/apps/web/.next/server/app/(dashboard)/settings/dnc/page.js:(()=>{var e={};e.id=807,e.ids=[807],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},49364:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(59441),a=s(1498),n=s(6580),o=s.n(n),i=s(15511),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let d=["",{children:["(dashboard)",{children:["settings",{children:["dnc",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,76497)),"/app/apps/web/src/app/(dashboard)/settings/dnc/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/settings/dnc/page.tsx"],p="/(dashboard)/settings/dnc/page",u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/settings/dnc/page",pathname:"/settings/dnc",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},36618:(e,t,s)=>{Promise.resolve().then(s.bind(s,74389))},74389:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(27685),a=s(87109),n=s(81088),o=s(35943),i=s(83810),l=s(35090),d=s(4283),c=s(3920),p=s(25277),u=s(39881);function h(){let[e,t]=(0,i.useState)([]),[s,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{x()},[]);let x=async()=>{h(!0);try{let e=await u.x.get("/api/v1/compliance/dnc-lists");e.data?.data&&t(e.data.data)}catch(e){console.error("Failed to load DNC lists:",e)}finally{h(!1)}},m=async e=>{if(confirm("Are you sure you want to delete this DNC list? This action cannot be undone."))try{let t=await u.x.delete(`/api/v1/compliance/dnc-lists/${e}`);t.error?alert(`Failed to delete DNC list: ${t.error.message}`):x()}catch(e){alert(`Failed to delete DNC list: ${e instanceof Error?e.message:"Unknown error"}`)}};return(0,r.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Do Not Call Lists"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage DNC lists and compliance"})]}),(0,r.jsxs)(d.z,{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.txt",e.onchange=e=>{let t=e.target.files?.[0];t&&alert(`DNC list upload functionality coming soon. Selected file: ${t.name}`)},e.click()},children:[r.jsx(a.Z,{className:"mr-2 h-4 w-4"}),"Upload List"]})]}),(0,r.jsxs)(c.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,r.jsxs)(c.Ol,{className:"flex-shrink-0",children:[r.jsx(c.ll,{children:"DNC Lists"}),r.jsx(c.SZ,{children:"View and manage your Do Not Call lists"})]}),r.jsx(c.aY,{className:"flex-1 overflow-y-auto min-h-0",children:s?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(n.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?r.jsx("div",{className:"text-center py-12 text-muted-foreground",children:"No DNC lists found"}):(0,r.jsxs)(p.iA,{children:[r.jsx(p.xD,{children:(0,r.jsxs)(p.SC,{children:[r.jsx(p.ss,{children:"Name"}),r.jsx(p.ss,{children:"Type"}),r.jsx(p.ss,{children:"Entries"}),r.jsx(p.ss,{children:"Status"}),r.jsx(p.ss,{children:"Created"}),r.jsx(p.ss,{className:"text-right",children:"Actions"})]})}),r.jsx(p.RM,{children:e.map(e=>(0,r.jsxs)(p.SC,{children:[r.jsx(p.pj,{className:"font-medium",children:e.name}),r.jsx(p.pj,{children:r.jsx(l.C,{variant:"outline",children:e.type.toLowerCase()})}),r.jsx(p.pj,{children:e.entryCount.toLocaleString()}),r.jsx(p.pj,{children:r.jsx(l.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),r.jsx(p.pj,{children:new Date(e.createdAt).toLocaleDateString()}),r.jsx(p.pj,{className:"text-right",children:r.jsx(d.z,{variant:"ghost",size:"sm",onClick:()=>m(e.id),children:r.jsx(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},35090:(e,t,s)=>{"use strict";s.d(t,{C:()=>i});var r=s(27685),a=s(31727);s(83810);var n=s(4120);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...s}){return r.jsx("div",{className:(0,n.cn)(o({variant:t}),e),...s})}},25277:(e,t,s)=>{"use strict";s.d(t,{RM:()=>l,SC:()=>d,iA:()=>o,pj:()=>p,ss:()=>c,xD:()=>i});var r=s(27685),a=s(83810),n=s(4120);let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));o.displayName="Table";let i=a.forwardRef(({className:e,...t},s)=>r.jsx("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));l.displayName="TableBody",a.forwardRef(({className:e,...t},s)=>r.jsx("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let p=a.forwardRef(({className:e,...t},s)=>r.jsx("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));p.displayName="TableCell",a.forwardRef(({className:e,...t},s)=>r.jsx("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,s)=>{"use strict";s.d(t,{x:()=>a});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let s="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");s&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let a=`${this.baseUrl}${e}`,n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:n}),s=await e.json();if(!e.ok)return{error:{code:s.error?.code||"UNKNOWN_ERROR",message:s.error?.message||"An error occurred"}};return{data:s}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new r},81088:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
/app/apps/web/.next/server/app/(dashboard)/tools/recording-analyzer/page.js:(()=>{var e={};e.id=364,e.ids=[364],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},82589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(59441),a=r(1498),n=r(6580),l=r.n(n),i=r(15511),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["(dashboard)",{children:["tools",{children:["recording-analyzer",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,25109)),"/app/apps/web/src/app/(dashboard)/tools/recording-analyzer/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,41097)),"/app/apps/web/src/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,33250,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,47632)),"/app/apps/web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,33250,23)),"next/dist/client/components/not-found-error"]}],c=["/app/apps/web/src/app/(dashboard)/tools/recording-analyzer/page.tsx"],u="/(dashboard)/tools/recording-analyzer/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/tools/recording-analyzer/page",pathname:"/tools/recording-analyzer",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},12158:(e,t,r)=>{Promise.resolve().then(r.bind(r,8008))},8008:(e,t,r)=>{"use strict";r.r(t),r.d(t,{RecordingAnalyzer:()=>I});var s=r(27685),a=r(83810);let n=[{key:"ACA",label:"ACA Health",description:"Enrollments, carrier, follow-ups, billable, transcript optional."},{key:"FINAL_EXPENSE",label:"Final Expense",description:"Apps, quotes, premium, carrier, follow-ups, billable, transcript optional."},{key:"MEDICARE",label:"Medicare",description:"Enrollments, carrier, follow-ups, billable, transcript optional."}],l={FINAL_EXPENSE:[{key:"Applications Submitted",label:"Applications Submitted",defaultChecked:!0},{key:"Monthly Premium (if app submitted)",label:"Monthly Premium (if app submitted)",defaultChecked:!0},{key:"Carrier (If app submitted)",label:"Carrier (If app submitted)",defaultChecked:!0},{key:"Quotes",label:"Quotes",defaultChecked:!0},{key:"Monthly Premium (If Quote Provided)",label:"Monthly Premium (If Quote Provided)",defaultChecked:!0},{key:"Carrier (If Quote Provided)",label:"Carrier (If Quote Provided)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],ACA:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],MEDICARE:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}]};var i=r(39881);async function o(e,t){let r=await i.x.post("/api/v1/recording-analysis/presign",{filename:e,contentType:t});if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from presign");return r.data}async function d(e,t){let r=await fetch(e,{method:"PUT",headers:{"Content-Type":t.type||"application/octet-stream"},body:t});if(!r.ok)throw Error(`Upload failed: ${r.status}`)}async function c(e){let t=await i.x.post("/api/v1/recording-analysis/analyze",e);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from analyze");return t.data}async function u(e){let t=await i.x.get(`/api/v1/recording-analysis/batch/${e}`);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from batch");return t.data}async function m(e,t){let r=await i.x.post(`/api/v1/recording-analysis/${e}/rerun`,t);if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from rerun");return r.data}async function x(e){let t="a1b2c3d4e5f67890",r={};t&&(r["x-api-key"]=t);let s=await fetch(`http://45.32.213.201:3001/api/v1/recording-analysis/batch/${e}/csv`,{headers:r});if(!s.ok)throw Error(await s.text());return await s.text()}var f=r(3920),p=r(74550),h=r(4283),g=r(14887),j=r(57869),b=r(44517),v=r(35090),y=r(25277),N=r(84177),w=r(71499);function k(...e){return e.filter(Boolean).join(" ")}function C(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function R(e){let t=Math.round(100*C(e));return`${t}%`}function S({status:e}){let t=(e||"").toLowerCase();return s.jsx(v.C,{variant:"done"===t?"default":"failed"===t?"destructive":"analyzing"===t||"transcribing"===t?"secondary":"outline",children:e})}function A({extracted:e}){let t=e?.Billable??e?.["Billable (Y/N)"]??e?.billable??e?.isBillable,r="string"==typeof t?t.trim().toUpperCase():t;return"Y"===r||!0===r?s.jsx(v.C,{className:"bg-emerald-600 text-white",children:"Billable"}):"N"===r||!1===r?s.jsx(v.C,{variant:"destructive",children:"Non-billable"}):s.jsx(v.C,{variant:"outline",children:"Billable: —"})}function E({value:e}){return null==e?s.jsx("div",{className:"h-2 w-full rounded-fullbg-muted",children:s.jsx("div",{className:"h-2 rounded-full bg-muted",style:{width:"0%"}})}):(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:s.jsx("div",{className:"h-2 bg-foreground/70",style:{width:R(e)}})}),(0,s.jsxs)("div",{className:"text-[11px] text-muted-foreground",children:[R(e)," confidence"]})]})}function I(){let[e,t]=a.useState("ACA"),r=a.useMemo(()=>l[e],[e]),i=a.useMemo(()=>new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)),[r]),[R,I]=a.useState(i),[P,z]=a.useState(""),[F,M]=a.useState([]),[U,T]=a.useState(!1),[L,_]=a.useState(null),[V,D]=a.useState([]),[B,$]=a.useState(null),[q,K]=a.useState(!1),[Y,O]=a.useState(null),[G,Q]=a.useState(!1),[W,Z]=a.useState(null),[X,H]=a.useState(new Set),[J,ee]=a.useState(!1);async function et(e){let t=await u(e);return D(t.items),t.items.length>0&&t.items.every(e=>{let t=(e.status||"").toLowerCase();return"done"===t||"failed"===t})}async function er(e){K(!0);try{if(await et(e)){K(!1);return}}catch(e){K(!1),$(e?.message||"Failed to fetch batch");return}let t=setInterval(async()=>{try{await et(e)&&(clearInterval(t),K(!1))}catch(e){clearInterval(t),K(!1),$(e?.message||"Failed to fetch batch")}},1500)}async function es(){$(null);let t=P.split(/\r?\n|,|\s+/g).map(e=>e.trim()).filter(Boolean).filter(e=>/^https?:\/\//i.test(e));if(0===t.length&&0===F.length){$("Add at least one recording URL or upload at least one audio file.");return}let r=Array.from(R);if(0===r.length){$("Select at least one stat/field to extract.");return}T(!0);try{let s=[];for(let e of F){let{storageKey:t,url:r}=await o(e.name,e.type||"application/octet-stream");await d(r,e),s.push({storageKey:t,filename:e.name})}let a=await c({vertical:e,selectedFields:r,urls:t,uploads:s});_(a.batchId),D([]),await er(a.batchId)}catch(e){$(e?.message||"Failed to start analysis")}finally{T(!1)}}async function ea(){if(!W)return;let e=Array.from(X);if(!e.length){$("Select at least one field for re-run.");return}ee(!0),$(null);try{let t=await m(W.id,{selectedFields:e});Q(!1),Z(null),_(t.batchId),D([]),await er(t.batchId)}catch(e){$(e?.message||"Failed to re-run")}finally{ee(!1)}}async function en(){if(!L){$("No batch to export yet.");return}try{let e=await x(L),t=new Blob([e],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`recording-analysis-${L}.csv`,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}catch(e){$(e?.message||"CSV export failed")}}a.useEffect(()=>{I(new Set(i)),$(null),M([]),z(""),D([]),_(null),O(null)},[e,i]);let el=n.find(t=>t.key===e);return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Recording Analyzer"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Paste recording URLs or upload audio, select a vertical and fields, and get structured results per recording."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,s.jsxs)(v.C,{variant:"outline",className:"font-mono",children:["Batch: ",L.slice(0,8),"…"]}),q&&s.jsx(v.C,{variant:"secondary",children:"Live updating…"}),s.jsx(h.z,{variant:"outline",onClick:en,disabled:!L,children:"Export CSV"})]})]}),B&&s.jsx(w.bZ,{className:"border-destructive/50",children:s.jsx("div",{className:"text-sm text-destructive",children:B})}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[s.jsx(f.Ol,{children:s.jsx(f.ll,{className:"text-base",children:"1) Select Vertical"})}),s.jsx(f.aY,{children:(0,s.jsxs)(p.mQ,{value:e,onValueChange:e=>t(e),children:[(0,s.jsxs)(p.dr,{className:"grid grid-cols-3 w-full",children:[s.jsx(p.SP,{value:"ACA",children:"ACA Health"}),s.jsx(p.SP,{value:"FINAL_EXPENSE",children:"Final Expense"}),s.jsx(p.SP,{value:"MEDICARE",children:"Medicare"})]}),s.jsx(p.nU,{value:e,className:"pt-4",children:(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,s.jsxs)("span",{className:"font-medium text-foreground",children:[el?.label,":"]})," ",el?.description]})})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[s.jsx(f.Ol,{children:s.jsx(f.ll,{className:"text-base",children:"2) Add Recordings"})}),(0,s.jsxs)(f.aY,{className:"space-y-5",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(j._,{children:"Recording URLs"}),s.jsx("textarea",{value:P,onChange:e=>z(e.target.value),placeholder:"Paste one URL per line (or space/comma separated)…",className:k("min-h-[140px] w-full rounded-md border bg-background px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring")}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Supports multiple URLs. We’ll process each URL as a separate recording."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(j._,{children:"Upload audio (mp3/wav)"}),s.jsx(g.I,{type:"file",accept:".wav,.mp3,audio/wav,audio/mpeg",multiple:!0,onChange:e=>(function(e){if(!e)return;let t=[];for(let r of Array.from(e))(/audio\/(wav|mpeg|mp3|x-wav|ogg|opus)/i.test(r.type)||/\.(wav|mp3|ogg|opus)$/i.test(r.name))&&t.push(r);M(e=>[...e,...t].slice(0,20))})(e.target.files)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Upload uses a presigned PUT URL (S3/Spaces). If presign isn’t wired up yet, URL paste still works."}),F.length>0&&s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"File"}),s.jsx(y.ss,{className:"text-right",children:"Size"}),s.jsx(y.ss,{className:"text-right",children:"Remove"})]})}),s.jsx(y.RM,{children:F.map((e,t)=>(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{className:"font-medium",children:e.name}),s.jsx(y.pj,{className:"text-right text-muted-foreground",children:function(e){if(!e&&0!==e)return"";let t=["B","KB","MB","GB"],r=e,s=0;for(;r>=1024&&s<t.length-1;)r/=1024,s++;return`${r.toFixed(0===s?0:2)} ${t[s]}`}(e.size)}),s.jsx(y.pj,{className:"text-right",children:s.jsx(h.z,{variant:"ghost",size:"sm",onClick:()=>{M(e=>e.filter((e,r)=>r!==t))},children:"Remove"})})]},`${e.name}-${t}`))})]})})]})]})]}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[(0,s.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between gap-3",children:[s.jsx(f.ll,{className:"text-base",children:"3) Choose Stats To Extract"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)))},children:"Defaults"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.map(e=>e.key)))},children:"All"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:function(){I(new Set)},children:"None"})]})]}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,s.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",R.has(e.key)?"bg-muted/50":"bg-background"),children:[s.jsx(b.X,{checked:R.has(e.key),onCheckedChange:()=>{var t;return t=e.key,void I(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"text-sm font-medium",children:e.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},e.key))}),(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4 border-t pt-4",children:[(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Selected: ",s.jsx("span",{className:"font-mono",children:R.size})]}),s.jsx(h.z,{onClick:es,disabled:U,className:"min-w-[180px]",children:U?"Starting…":"Analyze Recordings"})]})]})]})]}),(0,s.jsxs)(f.Zb,{className:"shadow-sm",children:[(0,s.jsxs)(f.Ol,{className:"flex flex-row items-center justify-between",children:[s.jsx(f.ll,{className:"text-base",children:"Results"}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Click ",s.jsx("span",{className:"font-medium",children:"View"})," for details, audio playback, confidences, and re-run."]})]}),s.jsx(f.aY,{children:0===V.length?s.jsx("div",{className:"text-sm text-muted-foreground",children:"No results yet. Start an analysis to see per-recording results here."}):s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"Status"}),s.jsx(y.ss,{children:"Billable"}),s.jsx(y.ss,{children:"Source"}),s.jsx(y.ss,{children:"Vertical"}),s.jsx(y.ss,{children:"Extracted"}),s.jsx(y.ss,{className:"text-right",children:"Actions"})]})}),s.jsx(y.RM,{children:V.map(e=>(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{children:s.jsx(S,{status:e.status})}),s.jsx(y.pj,{children:s.jsx(A,{extracted:e.extracted})}),s.jsx(y.pj,{className:"max-w-[420px] truncate",children:"url"===e.sourceType?s.jsx("span",{className:"font-mono text-xs",children:e.sourceUrl}):s.jsx("span",{className:"text-sm",children:e.filename||e.storageKey})}),s.jsx(y.pj,{children:s.jsx(v.C,{variant:"outline",children:e.vertical})}),(0,s.jsxs)(y.pj,{className:"text-muted-foreground text-sm",children:[e.extracted?`${Object.keys(e.extracted).length} fields`:"—",e.error?(0,s.jsxs)("span",{className:"text-destructive",children:[" • ",e.error]}):null]}),(0,s.jsxs)(y.pj,{className:"text-right space-x-2",children:[s.jsx(h.z,{variant:"outline",size:"sm",onClick:()=>O(e),children:"View"}),s.jsx(h.z,{variant:"outline",size:"sm",onClick:()=>(function(e){Z(e);let t=Array.isArray(e.selectedFields)?e.selectedFields:[];H(new Set(t.length?t:Array.from(i))),Q(!0)})(e),children:"Re-run"})]})]},e.id))})]})})})]}),s.jsx(N.Vq,{open:!!Y,onOpenChange:e=>!e&&O(null),children:(0,s.jsxs)(N.cZ,{className:"max-w-4xl",children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Recording Result"})}),Y&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"ID"}),s.jsx("div",{className:"font-mono text-xs",children:Y.id})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(S,{status:Y.status}),s.jsx(A,{extracted:Y.extracted})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Audio"}),"url"===Y.sourceType&&Y.sourceUrl?s.jsx("audio",{controls:!0,className:"w-full",children:s.jsx("source",{src:Y.sourceUrl})}):Y.playbackUrl?s.jsx("audio",{controls:!0,className:"w-full",children:s.jsx("source",{src:Y.playbackUrl})}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No playback URL available yet for uploads. (If you want, we can add an API endpoint that returns a signed GET URL for storageKey.)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Extracted Fields"}),Y.extracted?s.jsx("div",{className:"border rounded-md overflow-hidden",children:(0,s.jsxs)(y.iA,{children:[s.jsx(y.xD,{children:(0,s.jsxs)(y.SC,{children:[s.jsx(y.ss,{children:"Field"}),s.jsx(y.ss,{children:"Value"}),s.jsx(y.ss,{className:"w-[220px]",children:"Confidence"})]})}),s.jsx(y.RM,{children:Object.keys(Y.extracted).map(e=>{let t=Y.extracted?.[e],r=function(e,t){if(!e)return null;let r=String(t),s=r.toLowerCase(),a=e?._confidence?.[r];if("number"==typeof a)return C(a);let n=e?.confidence?.[r];if("number"==typeof n)return C(n);let l=e?.[`${r}_confidence`];if("number"==typeof l)return C(l);let i=e?.[`${s}_confidence`];return"number"==typeof i?C(i):null}(Y.extracted,e);return(0,s.jsxs)(y.SC,{children:[s.jsx(y.pj,{className:"font-medium",children:e}),s.jsx(y.pj,{className:"text-sm",children:"object"==typeof t?s.jsx("pre",{className:"text-xs bg-muted/30 border rounded p-2 overflow-auto max-h-[160px]",children:JSON.stringify(t,null,2)}):String(t??"—")}),s.jsx(y.pj,{children:s.jsx(E,{value:r})})]},e)})})]})}):s.jsx("div",{className:"text-sm text-muted-foreground",children:"No extracted JSON yet."})]}),Y.transcript&&(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Transcript"}),s.jsx("pre",{className:"max-h-[360px] overflow-autorounded-md border bg-muted/30 p-3 text-xs whitespace-pre-wrap",children:Y.transcript})]})]})]})}),s.jsx(N.Vq,{open:G,onOpenChange:e=>!e&&Q(!1),children:(0,s.jsxs)(N.cZ,{className:"max-w-3xl",children:[s.jsx(N.fK,{children:s.jsx(N.$N,{children:"Re-run extraction with different fields"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"This will create a new batch using the same recording but different selected fields."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,s.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",X.has(e.key)?"bg-muted/50":"bg-background"),children:[s.jsx(b.X,{checked:X.has(e.key),onCheckedChange:()=>H(t=>{let r=new Set(t);return r.has(e.key)?r.delete(e.key):r.add(e.key),r}),className:"mt-0.5"}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"text-sm font-medium",children:e.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},`rerun-${e.key}`))}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[s.jsx(h.z,{variant:"outline",onClick:()=>Q(!1),disabled:J,children:"Cancel"}),s.jsx(h.z,{onClick:ea,disabled:J,children:J?"Re-running…":"Re-run"})]})]})]})})]})}},71499:(e,t,r)=>{"use strict";r.d(t,{X:()=>d,bZ:()=>o});var s=r(27685),a=r(31727),n=r(83810),l=r(4120);let i=(0,a.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,l.cn)(i({variant:t}),e),...r}));o.displayName="Alert",n.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let d=n.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...t}));d.displayName="AlertDescription"},74550:(e,t,r)=>{"use strict";r.d(t,{SP:()=>d,dr:()=>o,mQ:()=>i,nU:()=>c});var s=r(27685),a=r(57045),n=r(83810),l=r(4120);let i=a.fC,o=n.forwardRef(({className:e,...t},r)=>s.jsx(a.aV,{ref:r,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));o.displayName=a.aV.displayName;let d=n.forwardRef(({className:e,...t},r)=>s.jsx(a.xz,{ref:r,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));d.displayName=a.xz.displayName;let c=n.forwardRef(({className:e,...t},r)=>s.jsx(a.VY,{ref:r,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-nonefocus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));c.displayName=a.VY.displayName},25109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(36491),a=r(30599);let n=(0,a.createProxy)(String.raw`/app/apps/web/src/components/recording-analyzer/RecordingAnalyzer.tsx`),{__esModule:l,$$typeof:i}=n;n.default;let o=(0,a.createProxy)(String.raw`/app/apps/web/src/components/recording-analyzer/RecordingAnalyzer.tsx#RecordingAnalyzer`);function d(){return s.jsx(o,{})}},57045:(e,t,r)=>{"use strict";r.d(t,{VY:()=>W,aV:()=>G,fC:()=>O,xz:()=>Q});var s=r(83810),a=r(2724),n=r(6872),l=r(75262),i=r(68118),o=r(99892),d=r(29548),c=r(82013),u=r(39294),m=r(7079),x=r(27685),f="rovingFocusGroup.onEntryFocus",p={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[g,j,b]=(0,l.B)(h),[v,y]=(0,n.b)(h,[b]),[N,w]=v(h),k=s.forwardRef((e,t)=>(0,x.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,x.jsx)(C,{...e,ref:t})})}));k.displayName=h;var C=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:l=!1,dir:o,currentTabStopId:g,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:v,onEntryFocus:y,preventScrollOnEntryFocus:w=!1,...k}=e,C=s.useRef(null),R=(0,i.e)(t,C),S=(0,m.gm)(o),[A,I]=(0,u.T)({prop:g,defaultProp:b??null,onChange:v,caller:h}),[P,z]=s.useState(!1),F=(0,c.W)(y),M=j(r),U=s.useRef(!1),[T,L]=s.useState(0);return s.useEffect(()=>{let e=C.current;if(e)return e.addEventListener(f,F),()=>e.removeEventListener(f,F)},[F]),(0,x.jsx)(N,{scope:r,orientation:n,dir:S,loop:l,currentTabStopId:A,onItemFocus:s.useCallback(e=>I(e),[I]),onItemShiftTab:s.useCallback(()=>z(!0),[]),onFocusableItemAdd:s.useCallback(()=>L(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>L(e=>e-1),[]),children:(0,x.jsx)(d.WV.div,{tabIndex:P||0===T?-1:0,"data-orientation":n,...k,ref:R,style:{outline:"none",...e.style},onMouseDown:(0,a.Mj)(e.onMouseDown,()=>{U.current=!0}),onFocus:(0,a.Mj)(e.onFocus,e=>{let t=!U.current;if(e.target===e.currentTarget&&t&&!P){let t=new CustomEvent(f,p);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=M().filter(e=>e.focusable);E([e.find(e=>e.active),e.find(e=>e.id===A),...e].filter(Boolean).map(e=>e.ref.current),w)}}U.current=!1}),onBlur:(0,a.Mj)(e.onBlur,()=>z(!1))})})}),R="RovingFocusGroupItem",S=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:l=!1,tabStopId:i,children:c,...u}=e,m=(0,o.M)(),f=i||m,p=w(R,r),h=p.currentTabStopId===f,b=j(r),{onFocusableItemAdd:v,onFocusableItemRemove:y,currentTabStopId:N}=p;return s.useEffect(()=>{if(n)return v(),()=>y()},[n,v,y]),(0,x.jsx)(g.ItemSlot,{scope:r,id:f,focusable:n,active:l,children:(0,x.jsx)(d.WV.span,{tabIndex:h?0:-1,"data-orientation":p.orientation,...u,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{n?p.onItemFocus(f):e.preventDefault()}),onFocus:(0,a.Mj)(e.onFocus,()=>p.onItemFocus(f)),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){p.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return A[a]}(e,p.orientation,p.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();letr=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=p.loop?function(e,t){return e.map((r,s)=>e[(t+s)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>E(r))}}),children:"function"==typeof c?c({isCurrentTabStop:h,hasTabStop:null!=N}):c})})});S.displayName=R;var A={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function E(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var I=r(1090),P="Tabs",[z,F]=(0,n.b)(P,[y]),M=y(),[U,T]=z(P),L=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,onValueChange:a,defaultValue:n,orientation:l="horizontal",dir:i,activationMode:c="automatic",...f}=e,p=(0,m.gm)(i),[h,g]=(0,u.T)({prop:s,onChange:a,defaultProp:n??"",caller:P});return(0,x.jsx)(U,{scope:r,baseId:(0,o.M)(),value:h,onValueChange:g,orientation:l,dir:p,activationMode:c,children:(0,x.jsx)(d.WV.div,{dir:p,"data-orientation":l,...f,ref:t})})});L.displayName=P;var _="TabsList",V=s.forwardRef((e,t)=>{let{__scopeTabs:r,loop:s=!0,...a}=e,n=T(_,r),l=M(r);return(0,x.jsx)(k,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:s,children:(0,x.jsx)(d.WV.div,{role:"tablist","aria-orientation":n.orientation,...a,ref:t})})});V.displayName=_;var D="TabsTrigger",B=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,disabled:n=!1,...l}=e,i=T(D,r),o=M(r),c=K(i.baseId,s),u=Y(i.baseId,s),m=s===i.value;return(0,x.jsx)(S,{asChild:!0,...o,focusable:!n,active:m,children:(0,x.jsx)(d.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":u,"data-state":m?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:c,...l,ref:t,onMouseDown:(0,a.Mj)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():i.onValueChange(s)}),onKeyDown:(0,a.Mj)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&i.onValueChange(s)}),onFocus:(0,a.Mj)(e.onFocus,()=>{let e="manual"!==i.activationMode;m||n||!e||i.onValueChange(s)})})})});B.displayName=D;var $="TabsContent",q=s.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,forceMount:n,children:l,...i}=e,o=T($,r),c=K(o.baseId,a),u=Y(o.baseId,a),m=a===o.value,f=s.useRef(m);return s.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(I.z,{present:n||m,children:({present:r})=>(0,x.jsx)(d.WV.div,{"data-state":m?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&l})})});function K(e,t){return`${e}-trigger-${t}`}function Y(e,t){return`${e}-content-${t}`}q.displayName=$;var O=L,G=V,Q=B,W=q}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[289,957,856,838,491,439,560,201],()=>r(82589));module.exports=s})();
/app/apps/web/.next/server/chunks/560.js:exports.id=560,exports.ids=[560],exports.modules={48802:(e,t,a)=>{Promise.resolve().then(a.bind(a,34208))},16278:(e,t,a)=>{Promise.resolve().then(a.bind(a,96500))},96373:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,49489,23)),Promise.resolve().then(a.t.bind(a,76225,23)),Promise.resolve().then(a.t.bind(a,85964,23)),Promise.resolve().then(a.t.bind(a,5804,23)),Promise.resolve().then(a.t.bind(a,27255,23)),Promise.resolve().then(a.t.bind(a,1021,23))},34208:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var s=a(27685),l=a(61964),r=a(73972),n=a(3630),i=a(13161);function c(){let e=new Date().getFullYear();return s.jsx("footer",{className:"border-t bg-background",children:s.jsx("div",{className:"container mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["\xa9 ",e," Hopwhistle. All rights reserved."]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[(0,s.jsxs)(i.default,{href:"/legal/privacy",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(l.Z,{className:"h-4 w-4"}),"Privacy Policy"]}),(0,s.jsxs)(i.default,{href:"/legal/terms",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Terms ofService"]}),(0,s.jsxs)(i.default,{href:"/legal/data-retention",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Data Retention"]}),(0,s.jsxs)(i.default,{href:"/legal/call-recording",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(r.Z,{className:"h-4 w-4"}),"Call Recording"]}),(0,s.jsxs)(i.default,{href:"/legal/dpa",className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(n.Z,{className:"h-4 w-4"}),"DPA"]})]})]})})})}var o=a(73045),d=a(72742),x=a(28369),m=a(99596),h=a(17563),u=a(88351),b=a(83810),g=a(4283);function f(){let{theme:e,setTheme:t}=(0,u.F)(),[a,l]=b.useState(!1);return(b.useEffect(()=>{l(!0)},[]),a)?(0,s.jsxs)(g.z,{variant:"ghost",size:"icon",onClick:()=>t("dark"===e?"light":"dark"),children:[s.jsx(m.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),s.jsx(h.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),s.jsx("span",{className:"sr-only",children:"Toggle theme"})]}):null}var p=a(14887);function w(){return(0,s.jsxs)("header",{className:"flex h-16 items-center justify-between border-b bg-card px-6",children:[s.jsx("div",{className:"flex flex-1 items-center gap-4",children:(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[s.jsx(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s.jsx(p.I,{type:"search",id:"global-search",name:"global-search",placeholder:"Search calls, numbers, campaigns...",className:"pl-10"})]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(g.z,{variant:"ghost",size:"icon",children:s.jsx(d.Z,{className:"h-5 w-5"})}),s.jsx(f,{}),s.jsx(g.z,{variant:"ghost",size:"icon",children:s.jsx(x.Z,{className:"h-5 w-5"})})]})]})}var v=a(55165),j=a(53639),y=a(77921),N=a(75827),k=a(26072),C=a(87905),Z=a(90449),S=a(90584),z=a(92015),P=a(61099),T=a(6620),$=a(90157),I=a(35817),D=a(4120);let O=[{name:"Dashboard",href:"/dashboard",icon:v.Z},{name:"Conductor",href:"/bot",icon:j.Z,title:"Outbound calling & live transfer orchestration"},{name:"Phone",href:"/phone",icon:y.Z},{name:"Numbers",href:"/numbers",icon:N.Z},{name:"Campaigns",href:"/campaigns",icon:k.Z},{name:"Flows",href:"/flows",icon:C.Z},{name:"Calls",href:"/calls",icon:Z.Z},{name:"Billing",href:"/billing",icon:S.Z},{name:"Settings",href:"/settings",icon:z.Z}],E=[{name:"Recording Analyzer",href:"/tools/recording-analyzer",icon:Z.Z}],A=[{name:"Users",href:"/settings/users",icon:P.Z},{name:"Webhooks",href:"/settings/webhooks",icon:r.Z},{name:"DNC Lists",href:"/settings/dnc",icon:l.Z},{name:"Quotas & Budgets",href:"/settings/quotas",icon:T.Z}];function F(){let e=(0,I.usePathname)();return(0,s.jsxs)("div",{className:"flex h-full w-64 flex-col border-r bg-card",children:[s.jsx("div",{className:"flex h-16 items-center border-b px-6",children:s.jsx($.default,{src:"/hopwhistle.png",alt:"Hopwhistle",width:120,height:40,className:"h-8 w-auto",priority:!0})}),(0,s.jsxs)("nav",{className:"flex-1 space-y-1 overflow-y-auto p-4",children:[O.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,title:t.title,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)}),(0,s.jsxs)("div",{className:"pt-4",children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold uppercase text-muted-foreground",children:"Tools"}),E.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)})]}),(0,s.jsxs)("div",{className:"pt-4",children:[s.jsx("div",{className:"px-3 py-2 text-xs font-semibold uppercase text-muted-foreground",children:"Admin"}),A.map(t=>{let a=e===t.href||e?.startsWith(`${t.href}/`);return(0,s.jsxs)(i.default,{href:t.href,className:(0,D.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",a?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[s.jsx(t.icon,{className:"h-5 w-5"}),t.name]},t.name)})]})]})]})}var M=a(64598);function H({children:e}){return s.jsx(M.ZB,{children:(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden",children:[s.jsx(F,{}),(0,s.jsxs)("div",{className:"flexflex-1 flex-col overflow-hidden",children:[s.jsx(w,{}),s.jsx("main",{className:"flex-1 overflow-auto bg-background p-6",children:s.jsx("div",{className:"h-full overflow-auto",children:e})}),s.jsx(c,{})]}),s.jsx(M.gw,{})]})})}},14208:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var s=a(27685),l=a(4610),r=a(83810),n=a(14581),i=a(4120);let c=[{value:"available",label:"Available",color:"text-emerald-400",bgColor:"bg-emerald-500",description:"Ready to receive calls"},{value:"away",label:"Away",color:"text-amber-400",bgColor:"bg-amber-500",description:"Temporarily unavailable"},{value:"dnd",label:"Do Not Disturb",color:"text-red-400",bgColor:"bg-red-500",description:"No calls or notifications"},{value:"offline",label:"Offline",color:"text-gray-400",bgColor:"bg-gray-500",description:"Not logged in"}];function o(){let{agentStatus:e,setAgentStatus:t,currentCall:a}=(0,n.zs)(),[o,d]=(0,r.useState)(!1),x=(0,r.useRef)(null),m=c.find(t=>t.value===e)??c[3];(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=(0,r.useCallback)(e=>{a&&"ended"!==a.state||(t(e),d(!1))},[a,t]),u=a&&"ended"!==a.state;return(0,s.jsxs)("div",{className:"relative",ref:x,children:[(0,s.jsxs)("button",{onClick:()=>d(!o),disabled:!!u,className:(0,i.cn)("flex items-center gap-2 px-2 py-1 rounded-lg","text-xs font-medium transition-all","hover:bg-white/5",u&&"opacity-50 cursor-not-allowed"),children:[s.jsx("span",{className:(0,i.cn)("w-2 h-2 rounded-full",m.bgColor)}),s.jsx("span",{className:m.color,children:u?"On Call":m.label}),!u&&s.jsx(l.Z,{className:(0,i.cn)("w-3 h-3 text-gray-400 transition-transform",o&&"rotate-180")})]}),o&&!u&&s.jsx("div",{className:(0,i.cn)("absolute top-full left-0 mt-2 w-56 z-50","bg-slate-900 border border-white/10 rounded-xl","shadow-xl shadow-black/50 overflow-hidden","animate-in fade-in-0 zoom-in-95 duration-150"),children:c.map(t=>(0,s.jsxs)("button",{onClick:()=>h(t.value),className:(0,i.cn)("w-full px-4 py-3 flex items-center gap-3 text-left","hover:bg-white/5 transition-colors",e===t.value&&"bg-white/5"),children:[s.jsx("span",{className:(0,i.cn)("w-2.5 h-2.5 rounded-full",t.bgColor)}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:(0,i.cn)("text-sm font-medium",t.color),children:t.label}),s.jsx("p",{className:"text-xs text-gray-500",children:t.description})]}),e===t.value&&s.jsx("span",{className:"ml-auto text-cyan-400 text-xs",children:"✓"})]},t.value))})]})}},16340:(e,t,a)=>{"use strict";a.d(t,{c:()=>m});var s=a(27685),l=a(36168),r=a(77921),n=a(83810),i=a(14581),c=a(4283),o=a(4120);let d=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],x={1:[697,1209],2:[697,1336],3:[697,1477],4:[770,1209],5:[770,1336],6:[770,1477],7:[852,1209],8:[852,1336],9:[852,1477],"*":[941,1209],0:[941,1336],"#":[941,1477]};function m(){let{makeCall:e,sendDTMF:t,currentCall:a,isConnecting:m}=(0,i.zs)(),[h,u]=(0,n.useState)(""),b=(0,n.useRef)(null),g=(0,n.useCallback)(e=>{try{if(!b.current){let e=window.AudioContext||window.webkitAudioContext;e&&(b.current=new e)}let t=b.current;if(!t)return;let a=x[e];if(!a)return;let s=t.createOscillator(),l=t.createOscillator(),r=t.createGain();s.type="sine",l.type="sine",s.frequency.value=a[0],l.frequency.value=a[1],r.gain.value=.1,s.connect(r),l.connect(r),r.connect(t.destination),s.start(),l.start(),setTimeout(()=>{s.stop(),l.stop()},150)}catch{}},[]),f=(0,n.useCallback)(e=>{a&&"ended"!==a.state?t(e):u(t=>t+e),g(e)},[a,t,g]),p=(0,n.useCallback)(()=>{u(e=>e.slice(0,-1))},[]),w=(0,n.useCallback)(()=>{h&&!m&&(e(h),u(""))},[h,m,e]),v=(0,n.useCallback)(e=>{/^[0-9*#]$/.test(e.key)?f(e.key):"Backspace"===e.key?p():"Enter"===e.key&&h&&w()},[f,p,w,h]);return(0,s.jsxs)("div",{className:"space-y-4",onKeyDown:v,tabIndex:0,children:[(0,s.jsxs)("div",{className:(0,o.cn)("h-16 px-4 rounded-xl flexitems-center justify-between","bg-white/5 border border-white/10"),children:[s.jsx("input",{type:"text",value:h,onChange:e=>u(e.target.value.replace(/[^0-9+*#()-\s]/g,"")),placeholder:"Enter number...",className:(0,o.cn)("flex-1 bg-transparent text-2xl font-mono text-white","placeholder:text-gray-600 outline-none")}),h&&s.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white transition-colors",children:s.jsx(l.Z,{className:"w-5 h-5"})})]}),h&&s.jsx("p",{className:"text-center text-gray-400 text-sm",children:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`})(h)}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.map(({digit:e,letters:t})=>(0,s.jsxs)("button",{onClick:()=>f(e),className:(0,o.cn)("h-16 rounded-xl flex flex-col items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","border border-transparent hover:border-white/10","transition-all duration-150 ease-out","active:scale-95"),children:[s.jsx("span",{className:"text-2xl text-white font-medium",children:e}),t&&s.jsx("span",{className:"text-[10px] text-gray-500 tracking-widest -mt-0.5",children:t})]},e))}),(0,s.jsxs)(c.z,{onClick:w,disabled:!h||m,className:(0,o.cn)("w-full h-14 rounded-xl text-lg font-medium","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","disabled:opacity-50 disabled:cursor-not-allowed","shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30","transition-all duration-200"),children:[s.jsx(r.Z,{className:"w-5 h-5 mr-2"}),m?"Connecting...":"Call"]})]})}},64598:(e,t,a)=>{"use strict";a.d(t,{gw:()=>W,ZB:()=>N.ZB,zs:()=>N.zs});var s=a(27685),l=a(77921),r=a(92015),n=a(4610),i=a(24427),c=a(54654),o=a(28369),d=a(95101),x=a(22248),m=a(31087),h=a(48984),u=a(83810),b=a(14208),g=a(74854),f=a(85393),p=a(76500),w=a(43301),v=a(71459),j=a(61099),y=a(73045),N=a(14581),k=a(4283),C=a(14887),Z=a(4120);let S=[{id:"1",name:"John Smith",extension:"1001",status:"available"},{id:"2",name:"Jane Doe",extension:"1002",status:"busy"},{id:"3",name:"Bob Wilson",extension:"1003",status:"available"},{id:"4",name:"Alice Brown",extension:"1004",status:"offline"}],z=[{id:"q1",name:"Sales",waitingCalls:2,availableAgents:5},{id:"q2",name:"Support",waitingCalls:5,availableAgents:3},{id:"q3",name:"Billing",waitingCalls:0,availableAgents:2}];function P({onClose:e}){let{transferCall:t}=(0,N.zs)(),[a,r]=(0,u.useState)("agents"),[n,i]=(0,u.useState)(""),[d,x]=(0,u.useState)(""),[m,b]=(0,u.useState)("blind"),g=S.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.extension.includes(n)),f=z.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())),p=(0,u.useCallback)(a=>{t(a.extension,m),e()},[t,m,e]),w=(0,u.useCallback)(a=>{t(`queue:${a.id}`,m),e()},[t,m,e]),v=(0,u.useCallback)(()=>{d&&(t(d,m),e())},[t,d,m,e]),P=(0,u.useCallback)(e=>{i(e.target.value)},[]),T=(0,u.useCallback)(e=>{x(e.target.value)},[]),$=(0,u.useCallback)(t=>{t.target===t.currentTarget&&e()},[e]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:$,role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,Z.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:s.jsx(h.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-white text-lg font-semibold",children:"Transfer Call"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"Select a destination"})]})]}),s.jsx(k.z,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-white",children:s.jsx(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>b("blind"),className:(0,Z.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","blind"===m?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Blind Transfer"}),s.jsx("button",{onClick:()=>b("warm"),className:(0,Z.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","warm"===m?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Warm Transfer"})]}),s.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"blind"===m?"Call willbe transferred immediately":"You can speak to the recipient before transferring"})]}),s.jsx("div",{className:"px-6 pt-4",children:s.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["agents","queues","external"].map(e=>(0,s.jsxs)("button",{onClick:()=>r(e),className:(0,Z.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5",a===e?"bg-cyan-500 text-white":"text-gray-400 hover:text-white hover:bg-white/5"),children:["agents"===e&&s.jsx(o.Z,{className:"w-3.5 h-3.5"}),"queues"===e&&s.jsx(j.Z,{className:"w-3.5 h-3.5"}),"external"===e&&s.jsx(l.Z,{className:"w-3.5 h-3.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})}),(0,s.jsxs)("div",{className:"p-6",children:["external"!==a&&(0,s.jsxs)("div",{className:"relative mb-4",children:[s.jsx(y.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx(C.I,{value:n,onChange:P,placeholder:`Search ${a}...`,className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),"agents"===a&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[g.map(e=>(0,s.jsxs)("button",{onClick:()=>p(e),disabled:"available"!==e.status,className:(0,Z.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all","available"===e.status?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[s.jsx("div",{className:(0,Z.cn)("w-10 h-10 rounded-full flex items-center justify-center","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:s.jsx(o.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ext. ",e.extension]})]}),s.jsx("span",{className:(0,Z.cn)("text-xs px-2 py-0.5 rounded-full","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:e.status})]},e.id)),0===g.length&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No agents found"})]}),"queues"===a&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[f.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e),disabled:0===e.availableAgents,className:(0,Z.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all",e.availableAgents>0?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center",children:s.jsx(j.Z,{className:"w-5 h-5 text-purple-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:[e.waitingCalls," waiting • ",e.availableAgents," available"]})]})]},e.id)),0===f.length&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No queues found"})]}),"external"===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Phone Number"}),s.jsx(C.I,{value:d,onChange:T,placeholder:"+1 (555) 000-0000",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),(0,s.jsxs)(k.z,{onClick:v,disabled:!d,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600",children:[s.jsx(h.Z,{className:"w-4 h-4 mr-2"}),"Transfer to ",d||"Number"]})]})]})]})]})}function T(){let{currentCall:e,toggleMute:t,toggleHold:a,hangupCall:l}=(0,N.zs)(),[r,n]=(0,u.useState)(!1),[i,c]=(0,u.useState)(!1),o=e?.isMuted??!1,x=e?.isOnHold??!1,m=(0,u.useCallback)(()=>{t()},[t]),b=(0,u.useCallback)(()=>{a()},[a]),j=(0,u.useCallback)(()=>{l()},[l]),y=(0,u.useCallback)(()=>{n(!0)},[]);return((0,u.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key.toLowerCase()){case"m":m();break;case"h":b();break;case"t":y()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,b,y]),e)?(0,s.jsxs)(s.Fragment,{children:[r&&s.jsx(P,{onClose:()=>n(!1)}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsxs)("button",{onClick:m,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",o?"bg-red-500/20 border-2 border-red-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:o?s.jsx(g.Z,{className:"w-6 h-6 text-red-400"}):s.jsx(f.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:o?"Unmute":"Mute"})]}),(0,s.jsxs)("button",{onClick:b,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",x?"bg-amber-500/20 border-2 border-amber-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:x?s.jsx(p.Z,{className:"w-6 h-6 text-amber-400"}):s.jsx(d.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:x?"Resume":"Hold"})]}),(0,s.jsxs)("button",{onClick:y,className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","bg-white/10 border-2 border-transparent hover:bg-white/15","transition-all duration-200"),children:s.jsx(h.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:"Transfer"})]}),(0,s.jsxs)("button",{onClick:()=>c(!i),className:(0,Z.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",i?"bg-cyan-500/20 border-2 border-cyan-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:s.jsx(w.Z,{className:"w-6 h-6 text-white"})}),s.jsx("span",{className:"text-xs text-gray-400",children:"Keypad"})]})]}),i&&s.jsx($,{}),(0,s.jsxs)("button",{onClick:j,className:(0,Z.cn)("w-full py-4 rounded-xl flex items-center justify-center gap-3","bg-gradient-to-r from-red-500 to-red-600","hover:from-red-400 hover:to-red-500","shadow-lg shadow-red-500/25 hover:shadow-xl hover:shadow-red-500/30","transition-all duration-200","active:scale-98"),children:[s.jsx(v.Z,{className:"w-6 h-6 text-white"}),s.jsx("span",{className:"text-white font-semibold",children:"End Call"})]}),s.jsx("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:[s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"M"})," Mute"," ",s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"H"})," Hold"," ",s.jsx("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"T"})," Transfer"]})})]})]}):s.jsx(s.Fragment,{})}function $(){let{sendDTMF:e}=(0,N.zs)();return s.jsx("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/5 rounded-xl",children:["1","2","3","4","5","6","7","8","9","*","0","#"].map(t=>s.jsx("button",{onClick:()=>e(t),className:(0,Z.cn)("h-12 rounded-lg flex items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","text-white text-lg font-medium","transition-all duration-150 active:scale-95"),children:t},t))})}var I=a(16340),D=a(10532),O=a(95239),E=a(98952),A=a(25897),F=a(73972),M=a(66802),H=a(1943);let R={fullName:o.Z,firstName:o.Z,lastName:o.Z,phoneNumber:l.Z,email:O.Z,company:E.Z,address:A.Z,city:A.Z,state:A.Z,zipCode:A.Z,leadSource:D.Z,campaignName:D.Z,notes:F.Z,createdAt:M.Z,website:H.Z};function L({data:e,variant:t="panel",className:a}){let{screenPopFields:l}=(0,N.zs)(),[r,c]=(0,u.useState)("modal"===t),d=l.filter(e=>e.enabled).sort((e,t)=>e.order-t.order),x=t=>{if(t in e){let a=e[t];return null==a?null:"object"==typeof a?JSON.stringify(a):String(a)}return e.customFields&&t in e.customFields?String(e.customFields[t]):null},m=()=>{let t=[e.address,e.city,e.state,e.zipCode].filter(Boolean);return t.length>0?t.join(", "):null},h=e=>{let a=x(e.key);if(["address","city","state","zipCode"].includes(e.key)&&"address"===e.key)a=m();else if(["city","state","zipCode"].includes(e.key)){let e=d.find(e=>"address"===e.key);if(e?.enabled)return null}if(!a)return null;let l=R[e.key]??F.Z;return(0,s.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[s.jsx("div",{className:(0,Z.cn)("w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0","modal"===t?"bg-white/10":"bg-cyan-500/10"),children:s.jsx(l,{className:(0,Z.cn)("w-4 h-4","modal"===t?"text-cyan-400":"text-cyan-500")})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-gray-500 text-xs mb-0.5",children:e.label}),s.jsx("p",{className:(0,Z.cn)("text-sm break-words","modal"===t?"text-white":"text-gray-200"),children:a})]})]},e.id)},b=d.map(e=>({field:e,value:x(e.key)})).filter(({value:e})=>null!==e);if(0===b.length)return(0,s.jsxs)("div",{className:(0,Z.cn)("p-4 rounded-xl text-center","modal"===t?"bg-white/5":"bg-slate-800/50",a),children:[s.jsx(F.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No prospect data available"})]});let g="modal"===t?5:3,f=b.length>g;return(0,s.jsxs)("div",{className:(0,Z.cn)("rounded-xl overflow-hidden","modal"===t?"bg-white/5border border-white/10":"bg-slate-800/30 border border-white/5",a),children:[(0,s.jsxs)("div",{className:(0,Z.cn)("px-4 py-3 flex items-center justify-between","modal"===t?"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-white/10":"bg-white/5 border-b border-white/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(o.Z,{className:"w-4 h-4 text-cyan-400"}),s.jsx("span",{className:(0,Z.cn)("font-medium text-sm","modal"===t?"text-white":"text-gray-200"),children:"Prospect Information"})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[b.length," field",1!==b.length?"s":""]})]}),s.jsx("div",{className:"px-4 divide-y divide-white/5",children:d.slice(0,r?void 0:g).map(e=>h(e))}),f&&s.jsx("button",{onClick:()=>c(!r),className:(0,Z.cn)("w-full px-4 py-2 flex items-center justify-center gap-2","text-xs text-gray-400 hover:text-white","border-t border-white/5 hover:bg-white/5","transition-colors"),children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{className:"w-4 h-4"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{className:"w-4 h-4"}),"Show ",b.length-g," More"]})})]})}function q({call:e}){let{answerCall:t,hangupCall:a}=(0,N.zs)(),[r,n]=(0,u.useState)(0);return(0,u.useEffect)(()=>{let e=setInterval(()=>{n(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,Z.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-3xl border border-white/10 shadow-2xl shadow-cyan-500/10","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-300"),children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 rounded-full bg-cyan-500/20 animate-ping"}),s.jsx("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-cyan-500/10 animate-pulse"})]}),(0,s.jsxs)("div",{className:"relative pt-8 pb-4 text-center",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-cyan-500/10 rounded-full border border-cyan-500/20 mb-4",children:[s.jsx(l.Z,{className:"w-4 h-4 text-cyan-400 animate-bounce"}),s.jsx("span",{className:"text-cyan-400 text-sm font-medium",children:"Incoming Call"})]}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ringing for ",`${Math.floor(r/60).toString().padStart(2,"0")}:${(r%60).toString().padStart(2,"0")}`]})]}),(0,s.jsxs)("div",{className:"relative px-6 pb-6 text-center",children:[s.jsx("div",{className:(0,Z.cn)("w-24 h-24 mx-auto mb-4 rounded-full","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border-2 border-cyan-500/30","flex items-center justify-center","shadow-lg shadow-cyan-500/20"),children:s.jsx(o.Z,{className:"w-12 h-12 text-cyan-400"})}),s.jsx("h2",{className:"text-white text-2xl font-bold mb-1",children:e.callerName||"Unknown Caller"}),s.jsx("p",{className:"text-gray-400 text-lg font-mono",children:e.phoneNumber}),e.queueName&&s.jsx("div",{className:"mt-3 flex items-center justify-center gap-2",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-500/10 rounded-full text-purple-400 text-xs",children:[s.jsx(D.Z,{className:"w-3 h-3"}),e.queueName]})})]}),e.prospectData&&Object.keys(e.prospectData).length>0&&s.jsx("div",{className:"px-6 pb-6",children:s.jsx(L,{data:e.prospectData,variant:"modal"})}),s.jsx("div",{className:"px-6 pb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,s.jsxs)("button",{onClick:()=>{a()},className:(0,Z.cn)("group relative flex flex-colitems-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-16 h-16 rounded-full","bg-gradient-to-br from-red-500 to-red-600","flex items-center justify-center","shadow-lg shadow-red-500/30","group-hover:shadow-xl group-hover:shadow-red-500/40","transition-all duration-200"),children:s.jsx(v.Z,{className:"w-7 h-7 text-white"})}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Decline"})]}),(0,s.jsxs)("button",{onClick:()=>{t()},className:(0,Z.cn)("group relative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[s.jsx("div",{className:(0,Z.cn)("w-20 h-20 rounded-full","bg-gradient-to-br from-emerald-500 to-green-600","flex items-center justify-center","shadow-lg shadow-emerald-500/30","group-hover:shadow-xl group-hover:shadow-emerald-500/40","transition-allduration-200","animate-pulse"),children:s.jsx(l.Z,{className:"w-9 h-9 text-white"})}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Answer"})]})]})}),s.jsx("div",{className:"px-6 pb-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Press ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"A"})," to answer or ",s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"D"})," to decline"]})})]})]})}var B=a(26401),U=a(3920);function W(){var e;let{agentStatus:t,currentCall:a,isPhonePanelOpen:h,closePhonePanel:g,togglePhonePanel:f,error:p,clearError:w}=(0,N.zs)(),[v,j]=(0,u.useState)(!0),[y,C]=(0,u.useState)("dialpad"),[S,z]=(0,u.useState)(!1);return h?(0,s.jsxs)(s.Fragment,{children:[a?.state==="ringing"&&"inbound"===a.direction&&s.jsx(q,{call:a}),S&&s.jsx(B.h,{onClose:()=>z(!1)}),(0,s.jsxs)(U.Zb,{className:(0,Z.cn)("fixed bottom-6 right-6 z-40","w-[380px] overflow-hidden","bg-gradient-to-b from-slate-900/95 to-slate-950/95","backdrop-blur-xl border-white/10","shadow-2xl shadow-black/50","transition-all duration-300 ease-out",v?"h-auto":"h-[72px]"),children:[(0,s.jsxs)(U.Ol,{className:"p-4 pb-3 space-y-0 flex flex-row items-center justify-between border-b border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:(0,Z.cn)("w-10 h-10 rounded-xl flex items-center justify-center","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border border-cyan-500/30"),children:s.jsx(l.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-white text-sm",children:"Agent Phone"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(b.b,{})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[a?.state==="active"&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 rounded-full mr-2",children:[s.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-emerald-400 text-xs font-mono",children:(e=a.duration,`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`)})]}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>z(!0),children:s.jsx(r.Z,{className:"w-4 h-4"})}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>j(!v),children:v?s.jsx(n.Z,{className:"w-4 h-4"}):s.jsx(i.Z,{className:"w-4 h-4"})}),s.jsx(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:g,children:s.jsx(c.Z,{className:"w-4 h-4"})})]})]}),p&&s.jsx("div",{className:"px-4 py-2 bg-red-500/10 border-b border-red-500/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-red-400 text-xs",children:p}),s.jsx("button",{onClick:w,className:"text-red-400 hover:text-red-300",children:s.jsx(c.Z,{className:"w-3 h-3"})})]})}),v&&(0,s.jsxs)(U.aY,{className:"p-0",children:[a&&"ringing"!==a.state&&"ended"!==a.state&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[a.prospectData&&s.jsx(L,{data:a.prospectData}),(0,s.jsxs)("div",{className:"text-center py-4",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center border border-cyan-500/30",children:s.jsx(o.Z,{className:"w-8 h-8 text-cyan-400"})}),s.jsx("h4",{className:"text-white font-semibold text-lg",children:a.callerName||"Unknown Caller"}),s.jsx("p",{className:"text-gray-400 text-sm",children:a.phoneNumber}),a.queueName&&(0,s.jsxs)("p",{className:"text-cyan-400 text-xs mt-1",children:["From: ",a.queueName]})]}),a.isOnHold&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 bg-amber-500/10 rounded-lg",children:[s.jsx(d.Z,{className:"w-4 h-4 text-amber-400"}),s.jsx("span",{className:"text-amber-400 text-sm",children:"Call On Hold"})]}),s.jsx(T,{})]}),(!a||"ended"===a.state)&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[s.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["dialpad","history","settings"].map(e=>(0,s.jsxs)("button",{onClick:()=>C(e),className:(0,Z.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all",y===e?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5"),children:["dialpad"===e&&s.jsx(x.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"history"===e&&s.jsx(m.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"settings"===e&&s.jsx(r.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),"dialpad"===y&&s.jsx(I.c,{}),"history"===y&&s.jsx(J,{}),"settings"===y&&s.jsx(Y,{})]})]})]})]}):(0,s.jsxs)("button",{onClick:f,className:(0,Z.cn)("fixed bottom-6 right-6 z-50","flex items-center gap-3 px-5 py-3 rounded-full","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","text-white font-medium shadow-2xl","transition-all duration-300 ease-out","hover:scale-105 hover:shadow-cyan-500/25","border border-white/10",a?.state==="ringing"&&"animate-pulse"),"aria-label":"Open phone",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx(l.Z,{className:"w-5 h-5"}),a?.state==="ringing"&&s.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]}),s.jsx("span",{className:"capitalize",children:"on-call"===t?"On Call":t}),s.jsx("span",{className:(0,Z.cn)("w-2.5 h-2.5 rounded-full",(e=>{switch(e){case"available":return"bg-emerald-500";case"on-call":return"bg-amber-500";case"away":return"bg-red-500";case"dnd":return"bg-purple-500";default:return"bg-gray-500"}})(t))})]})}function J(){let{callHistory:e,makeCall:t}=(0,N.zs)(),a=e=>e?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",r=e=>{t(e)};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[s.jsx(m.Z,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),s.jsx("p",{className:"text-gray-500 text-sm",children:"No recent calls"})]}):s.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:e.map((e,t)=>s.jsx("button",{onClick:()=>r(e.phoneNumber),className:(0,Z.cn)("w-full p-3 rounded-lg text-left transition-all","bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:(0,Z.cn)("w-8 h-8 rounded-full flex items-center justify-center","inbound"===e.direction?"bg-cyan-500/20 text-cyan-400":"bg-blue-500/20 text-blue-400"),children:"inbound"===e.direction?s.jsx(l.Z,{className:"w-4 h-4"}):s.jsx(h.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-white text-sm font-medium",children:e.callerName||e.phoneNumber}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["inbound"===e.direction?"Incoming":"Outgoing",e.duration>0&&` • ${Math.floor(e.duration/60)}m ${e.duration%60}s`]})]})]}),s.jsx("span",{className:"text-gray-500 text-xs",children:a(e.startTime)})]})},`${e.callId}-${t}`))})}function Y(){let{audioDevices:e,selectedAudioInput:t,selectedAudioOutput:a,setAudioInput:l,setAudioOutput:n}=(0,N.zs)(),i=e.filter(e=>"audioinput"===e.kind),c=e.filter(e=>"audiooutput"===e.kind);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Microphone"}),s.jsx("select",{value:t??"",onChange:e=>l(e.target.value),className:(0,Z.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:i.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-2",children:"Speaker"}),s.jsx("select",{value:a??"",onChange:e=>n(e.target.value),className:(0,Z.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:c.map(e=>s.jsx("option",{value:e.deviceId,children:e.label||`Speaker ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Configure which prospect fields appear during incoming calls."}),(0,s.jsxs)(k.z,{variant:"outline",size:"sm",className:"w-full border-white/10 text-gray-300 hover:bg-white/5",children:[s.jsx(r.Z,{className:"w-4 h-4 mr-2"}),"Configure Screen Pop Fields"]})]})]})}},14581:(e,t,a)=>{"use strict";a.d(t,{ZB:()=>c,zs:()=>i});var s=a(27685),l=a(83810);let r=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}],n=(0,l.createContext)(null);function i(){let e=(0,l.useContext)(n);if(!e)throw Error("usePhone must be used within a PhoneProvider");return e}function c({children:e,wsUrl:t="ws://45.32.213.201:3001",apiUrl:a="http://45.32.213.201:3001"}){let i=a.replace(/\/api\/v1\/?$/,""),c="a1b2c3d4e5f67890",o=(0,l.useCallback)((e=!0)=>{let t={};return e&&(t["Content-Type"]="application/json"),c&&(t["x-api-key"]=c),t},[c]),[d,x]=(0,l.useState)("offline"),[m,h]=(0,l.useState)(null),[u,b]=(0,l.useState)([]),[g,f]=(0,l.useState)(!1),[p,w]=(0,l.useState)(!1),[v,j]=(0,l.useState)([]),[y,N]=(0,l.useState)(null),[k,C]=(0,l.useState)(null),[Z,S]=(0,l.useState)(()=>r),[z,P]=(0,l.useState)(null);(0,l.useRef)(null);let T=(0,l.useRef)(null),$=(0,l.useRef)(null),I=(0,l.useCallback)(()=>{$.current?.play().catch(()=>{})},[]),D=(0,l.useCallback)(()=>{$.current&&($.current.pause(),$.current.currentTime=0)},[]),O=(0,l.useCallback)(()=>{T.current&&clearInterval(T.current),T.current=setInterval(()=>{h(e=>e&&e.answerTime?{...e,duration:Math.floor((Date.now()-e.answerTime.getTime())/1e3)}:e)},1e3)},[]),E=(0,l.useCallback)(()=>{T.current&&(clearInterval(T.current),T.current=null)},[]),A=(0,l.useCallback)(e=>{e&&(h({callId:e.callId??`call_${Date.now()}`,direction:"inbound",state:"ringing",phoneNumber:e.callerNumber??e.from??"",callerName:e.callerName,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0,prospectData:e.prospectData??e.screenPopData,queueName:e.queueName,campaignId:e.campaignId}),f(!0),I())},[I]),F=(0,l.useCallback)(()=>{h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),D(),O()},[D,O]),M=(0,l.useCallback)(()=>{h(e=>{if(e){let t={...e,state:"ended",endTime:new Date};b(e=>[t,...e].slice(0,50))}return null}),x("available"),D(),E()},[D,E]),H=(0,l.useCallback)(e=>{e&&h(t=>{if(!t)return t;let a=e.isOnHold??!t.isOnHold;return{...t,isOnHold:a,state:a?"hold":"active"}})},[]),R=(0,l.useCallback)(e=>{let{type:t,channel:a,payload:s}=e;if("event"===t)switch(a){case"agent.call.incoming":A(s);break;case"agent.call.answered":F();break;case"agent.call.ended":M();break;case"agent.call.hold":H(s)}},[A,F,M,H]);(0,l.useEffect)(()=>{},[t,R]),(0,l.useEffect)(()=>{},[y,k]);let L=(0,l.useCallback)(e=>{S(e)},[]),q=(0,l.useCallback)(e=>{fetch(`${i}/api/v1/agent/status`,{method:"PUT",headers:o(),body:JSON.stringify({status:e})}).catch(()=>{}),x(e)},[i,o]),B=(0,l.useCallback)(()=>f(!0),[]),U=(0,l.useCallback)(()=>f(!1),[]),W=(0,l.useCallback)(()=>f(e=>!e),[]),J=(0,l.useCallback)(async e=>{console.log("[Phone] Initiating call to:",e),w(!0),P(null);try{let t=`${i}/api/v1/agent/call/originate`;console.log("[Phone] Calling API:",t);let a=await fetch(t,{method:"POST",headers:o(),body:JSON.stringify({phoneNumber:e})}),s=await a.json();if(console.log("[Phone] API response:",a.status,s),!a.ok)throw Error(s.error?.message??"Failed to place call");let l={callId:s.callId??`call_${Date.now()}`,direction:"outbound",state:"connecting",phoneNumber:e,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0};console.log("[Phone] Call initiated successfully:",l),h(l),x("on-call"),f(!0),setTimeout(()=>{h(e=>e&&e.callId===l.callId?{...e,state:"active",answerTime:new Date}:e),O()},2e3)}catch(e){console.error("[Phone] Call failed:",e),P(e instanceof Error?e.message:"Failed to place call")}finally{w(!1)}},[i,o,O]),Y=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/answer`,{method:"POST",headers:o(!1)}),h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),D(),O()}catch(e){P(e instanceof Error?e.message:"Failed to answer call")}},[i,m,D,O,o]),_=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/hangup`,{method:"POST",headers:o(!1)});let e={...m,state:"ended",endTime:new Date};b(t=>[e,...t].slice(0,50)),h(null),x("available"),E()}catch(e){P(e instanceof Error?e.message:"Failed to hang up")}},[i,m,E,o]),G=(0,l.useCallback)(()=>{h(e=>e?{...e,isMuted:!e.isMuted}:e)},[]),K=(0,l.useCallback)(async()=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/hold`,{method:"POST",headers:o(!1)}),h(e=>e?{...e,isOnHold:!e.isOnHold,state:e.isOnHold?"active":"hold"}:e)}catch(e){P(e instanceof Error?e.message:"Failed to toggle hold")}},[i,m,o]),Q=(0,l.useCallback)(e=>{m&&console.log("[Phone] Sending DTMF:",e)},[m]),V=(0,l.useCallback)(async(e,t)=>{if(m)try{await fetch(`${i}/api/v1/agent/call/${m.callId}/transfer`,{method:"POST",headers:o(),body:JSON.stringify({destination:e,type:t})}),"blind"===t&&(h(null),x("available"))}catch(e){P(e instanceof Error?e.message:"Failed to transfer call")}},[i,m,o]),X=(0,l.useCallback)(e=>{N(e)},[]),ee=(0,l.useCallback)(e=>{C(e)},[]),et=(0,l.useCallback)(()=>P(null),[]);return s.jsx(n.Provider,{value:{agentStatus:d,currentCall:m,callHistory:u,isPhonePanelOpen:g,isConnecting:p,audioDevices:v,selectedAudioInput:y,selectedAudioOutput:k,screenPopFields:Z,error:z,setAgentStatus:q,openPhonePanel:B,closePhonePanel:U,togglePhonePanel:W,makeCall:J,answerCall:Y,hangupCall:_,toggleMute:G,toggleHold:K,sendDTMF:Q,transferCall:V,setAudioInput:X,setAudioOutput:ee,updateScreenPopFields:L,clearError:et},children:e})}},26401:(e,t,a)=>{"use strict";a.d(t,{h:()=>j});var s=a(27685),l=a(28369),r=a(77921),n=a(95239),i=a(98952),c=a(25897),o=a(10532),d=a(73972),x=a(54654),m=a(70167),h=a(34748),u=a(63197),b=a(83810),g=a(14581),f=a(4283),p=a(4120);let w={fullName:l.Z,firstName:l.Z,lastName:l.Z,phoneNumber:r.Z,email:n.Z,company:i.Z,address:c.Z,city:c.Z,state:c.Z,zipCode:c.Z,leadSource:o.Z,campaignName:o.Z,notes:d.Z},v=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}];function j({onClose:e}){let{screenPopFields:t,updateScreenPopFields:a}=(0,g.zs)(),[l,r]=(0,b.useState)([...t]),[n,i]=(0,b.useState)(null),c=(0,b.useCallback)(e=>{r(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},[]),o=(0,b.useCallback)(e=>{i(e)},[]),j=(0,b.useCallback)(e=>{n&&n!==e&&r(t=>{let a=t.findIndex(e=>e.id===n),s=t.findIndex(t=>t.id===e);if(-1===a||-1===s)return t;let l=[...t],[r]=l.splice(a,1);return l.splice(s,0,r),l.map((e,t)=>({...e,order:t+1}))})},[n]),y=(0,b.useCallback)(()=>{i(null)},[]),N=(0,b.useCallback)(()=>{a(l),e()},[l,a,e]),k=(0,b.useCallback)(()=>{r([...v])},[]),C=(0,b.useCallback)(t=>{t.target===t.currentTarget&&e()},[e]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:C,role:"dialog","aria-modal":"true",children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,p.cn)("relative z-10 w-full max-w-lg mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-white text-lg font-semibold",children:"Screen Pop Settings"}),s.jsx("p",{className:"text-gray-500 text-sm mt-0.5",children:"Configure which fields appear during incoming calls"})]}),s.jsx(f.z,{variant:"ghost",size:"icon",onClick:e,className:"text-gray-400 hover:text-white",children:s.jsx(x.Z,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"px-6 py-4 max-h-[400px] overflow-y-auto",children:s.jsx("div",{className:"space-y-2",children:l.sort((e,t)=>e.order-t.order).map(e=>{let t=w[e.key]??d.Z;return(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>o(e.id),onDragOver:t=>{t.preventDefault(),j(e.id)},onDragEnd:y,className:(0,p.cn)("flex items-center gap-3 p-3 rounded-lg","bg-white/5 border border-transparent","hover:bg-white/10 hover:border-white/10","transition-all cursor-move",n===e.id&&"opacity-50 scale-95"),children:[s.jsx(m.Z,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),s.jsx("div",{className:(0,p.cn)("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",e.enabled?"bg-cyan-500/10 text-cyan-400":"bg-white/5 text-gray-500"),children:s.jsx(t,{className:"w-4 h-4"})}),s.jsx("span",{className:(0,p.cn)("flex-1 text-sm",e.enabled?"text-white":"text-gray-500"),children:e.label}),s.jsx("button",{onClick:()=>c(e.id),className:(0,p.cn)("w-10 h-6 rounded-full p-1 transition-colors",e.enabled?"bg-cyan-500":"bg-white/10"),children:s.jsx("div",{className:(0,p.cn)("w-4 h-4 rounded-full bg-white transition-transform",e.enabled?"translate-x-4":"translate-x-0")})})]},e.id)})})}),(0,s.jsxs)("div",{className:"px-6 py-3 bg-white/5 border-t border-white/10",children:[s.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Preview:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:l.filter(e=>e.enabled).sort((e,t)=>e.order-t.order).map(e=>s.jsx("span",{className:"px-2 py-1 bg-cyan-500/10 text-cyan-400 text-xs rounded-full border border-cyan-500/20",children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex items-center justify-between",children:[(0,s.jsxs)(f.z,{variant:"ghost",onClick:k,className:"text-gray-400 hover:text-white gap-2",children:[s.jsx(h.Z,{className:"w-4 h-4"}),"Reset to Default"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(f.z,{variant:"outline",onClick:e,className:"border-white/10",children:"Cancel"}),(0,s.jsxs)(f.z,{onClick:N,className:"bg-gradient-to-r from-cyan-600 to-blue-600 gap-2",children:[s.jsx(u.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})]})]})}},96500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ThemeProvider:()=>r});var s=a(27685),l=a(88351);function r({children:e,...t}){return s.jsx(l.f,{...t,children:e})}a(83810)},4283:(e,t,a)=>{"use strict";a.d(t,{z:()=>o});var s=a(27685),l=a(40461),r=a(31727),n=a(83810),i=a(4120);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...n},o)=>{let d=r?l.g7:"button";return s.jsx(d,{className:(0,i.cn)(c({variant:t,size:a,className:e})),ref:o,...n})});o.displayName="Button"},3920:(e,t,a)=>{"use strict";a.d(t,{Ol:()=>i,SZ:()=>o,Zb:()=>n,aY:()=>d,ll:()=>c});var s=a(27685),l=a(83810),r=a(4120);let n=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let i=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let c=l.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let o=l.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",l.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,r.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},14887:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var s=a(27685),l=a(83810),r=a(4120);let n=l.forwardRef(({className:e,type:t,...a},l)=>s.jsx("input",{type:t,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...a}));n.displayName="Input"},4120:(e,t,a)=>{"use strict";a.d(t,{LU:()=>c,cn:()=>r,p6:()=>o,un:()=>n,xG:()=>i});var s=a(91261),l=a(96510);function r(...e){return(0,l.m6)((0,s.W)(e))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`}return e}function i(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function c(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return t>0?`${t}:${String(a).padStart(2,"0")}:${String(s).padStart(2,"0")}`:`${a}:${String(s).padStart(2,"0")}`}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},41097:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>r,__esModule:()=>l,default:()=>n});let s=(0,a(30599).createProxy)(String.raw`/app/apps/web/src/app/(dashboard)/layout.tsx`),{__esModule:l,$$typeof:r}=s,n=s.default},47632:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m,metadata:()=>x});var s=a(36491),l=a(51846),r=a.n(l);a(75556);var n=a(30599);let i=(0,n.createProxy)(String.raw`/app/apps/web/src/components/theme-provider.tsx`),{__esModule:c,$$typeof:o}=i;i.default;let d=(0,n.createProxy)(String.raw`/app/apps/web/src/components/theme-provider.tsx#ThemeProvider`),x={title:"Hopwhistle",description:"Production-grade telephony platform"};function m({children:e}){return s.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:s.jsx("body",{className:r().className,children:s.jsx(d,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:e})})})}},75556:()=>{}};
/app/apps/web/.next/server/chunks/101.js:"use strict";exports.id=101,exports.ids=[101],exports.modules={65944:(e,t,r)=>{r.d(t,{Bw:()=>p,Ph:()=>c,Ql:()=>m,i4:()=>h,ki:()=>d});var n=r(27685),a=r(66134),i=r(4610),s=r(24427),o=r(63197),l=r(83810),u=r(4120);let c=a.fC;a.ZA;let d=a.B4,h=l.forwardRef(({className:e,children:t,...r},s)=>(0,n.jsxs)(a.xz,{ref:s,className:(0,u.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(a.JO,{asChild:!0,children:n.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));h.displayName=a.xz.displayName;let f=l.forwardRef(({className:e,...t},r)=>n.jsx(a.u_,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(s.Z,{className:"h-4 w-4"})}));f.displayName=a.u_.displayName;let g=l.forwardRef(({className:e,...t},r)=>n.jsx(a.$G,{ref:r,className:(0,u.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(i.Z,{className:"h-4 w-4"})}));g.displayName=a.$G.displayName;let p=l.forwardRef(({className:e,children:t,position:r="popper",...i},s)=>n.jsx(a.h_,{children:(0,n.jsxs)(a.VY,{ref:s,className:(0,u.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[n.jsx(f,{}),n.jsx(a.l_,{className:(0,u.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(g,{})]})}));p.displayName=a.VY.displayName,l.forwardRef(({className:e,...t},r)=>n.jsx(a.__,{ref:r,className:(0,u.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=a.__.displayName;let m=l.forwardRef(({className:e,children:t,...r},i)=>(0,n.jsxs)(a.ck,{ref:i,className:(0,u.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(a.wU,{children:n.jsx(o.Z,{className:"h-4 w-4"})})}),n.jsx(a.eT,{children:t})]}));m.displayName=a.ck.displayName,l.forwardRef(({className:e,...t},r)=>n.jsx(a.Z0,{ref:r,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=a.Z0.displayName},39881:(e,t,r)=>{r.d(t,{x:()=>a});class n{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a=`${this.baseUrl}${e}`,i={"Content-Type":"application/json",...t.headers};this.token&&(i.Authorization=`Bearer ${this.token}`),this.apiKey&&(i["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:i}),r=await e.json();if(!e.ok)return{error:{code:r.error?.code||"UNKNOWN_ERROR",message:r.error?.message||"An error occurred"}};return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}}let a=new n},33173:(e,t,r)=>{r.d(t,{Z:()=>n});/**
/app/apps/web/.next/server/chunks/201.js:"use strict";exports.id=201,exports.ids=[201],exports.modules={35090:(e,t,a)=>{a.d(t,{C:()=>d});var r=a(27685),s=a(31727);a(83810);var o=a(4120);let n=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...a}){return r.jsx("div",{className:(0,o.cn)(n({variant:t}),e),...a})}},44517:(e,t,a)=>{a.d(t,{X:()=>O});var r=a(27685),s=a(83810),o=a(68118),n=a(6872),d=a(2724),i=a(39294),l=a(39430),c=a(12518),f=a(1090),u=a(29548),m="Checkbox",[p,x]=(0,n.b)(m),[b,h]=p(m);function y(e){let{__scopeCheckbox:t,checked:a,children:o,defaultChecked:n,disabled:d,form:l,name:c,onCheckedChange:f,required:u,value:p="on",internal_do_not_use_render:x}=e,[h,y]=(0,i.T)({prop:a,defaultProp:n??!1,onChange:f,caller:m}),[g,N]=s.useState(null),[v,w]=s.useState(null),j=s.useRef(!1),k=!g||!!l||!!g.closest("form"),R={checked:h,disabled:d,setChecked:y,control:g,setControl:N,name:c,form:l,value:p,hasConsumerStoppedPropagationRef:j,required:u,defaultChecked:!T(n)&&n,isFormControl:k,bubbleInput:v,setBubbleInput:w};return(0,r.jsx)(b,{scope:t,...R,children:"function"==typeof x?x(R):o})}var g="CheckboxTrigger",N=s.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:a,...n},i)=>{let{control:l,value:c,disabled:f,checked:m,required:p,setControl:x,setChecked:b,hasConsumerStoppedPropagationRef:y,isFormControl:N,bubbleInput:v}=h(g,e),w=(0,o.e)(i,x),j=s.useRef(m);return s.useEffect(()=>{let e=l?.form;if(e){let t=()=>b(j.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,b]),(0,r.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":T(m)?"mixed":m,"aria-required":p,"data-state":E(m),"data-disabled":f?"":void 0,disabled:f,value:c,...n,ref:w,onKeyDown:(0,d.Mj)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.Mj)(a,e=>{b(e=>!!T(e)||!e),v&&N&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})})});N.displayName=g;var v=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:s,checked:o,defaultChecked:n,required:d,disabled:i,value:l,onCheckedChange:c,form:f,...u}=e;return(0,r.jsx)(y,{__scopeCheckbox:a,checked:o,defaultChecked:n,disabled:i,required:d,onCheckedChange:c,name:s,form:f,value:l,internal_do_not_use_render:({isFormControl:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{...u,ref:t,__scopeCheckbox:a}),e&&(0,r.jsx)(R,{__scopeCheckbox:a})]})})});v.displayName=m;var w="CheckboxIndicator",j=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:s,...o}=e,n=h(w,a);return(0,r.jsx)(f.z,{present:s||T(n.checked)||!0===n.checked,children:(0,r.jsx)(u.WV.span,{"data-state":E(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});j.displayName=w;var k="CheckboxBubbleInput",R=s.forwardRef(({__scopeCheckbox:e,...t},a)=>{let{control:n,hasConsumerStoppedPropagationRef:d,checked:i,defaultChecked:f,required:m,disabled:p,name:x,value:b,form:y,bubbleInput:g,setBubbleInput:N}=h(k,e),v=(0,o.e)(a,N),w=(0,l.D)(i),j=(0,c.t)(n);s.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!d.current;if(w!==i&&e){let a=new Event("click",{bubbles:t});g.indeterminate=T(i),e.call(g,!T(i)&&i),g.dispatchEvent(a)}},[g,w,i,d]);let R=s.useRef(!T(i)&&i);return(0,r.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??R.current,required:m,disabled:p,name:x,value:b,form:y,...t,tabIndex:-1,ref:v,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function T(e){return"indeterminate"===e}function E(e){return T(e)?"indeterminate":e?"checked":"unchecked"}R.displayName=k;var C=a(63197),D=a(4120);let O=s.forwardRef(({className:e,...t},a)=>r.jsx(v,{ref:a,className:(0,D.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(j,{className:(0,D.cn)("flex items-center justify-center text-current"),children:r.jsx(C.Z,{className:"h-4 w-4"})})}));O.displayName=v.displayName},84177:(e,t,a)=>{a.d(t,{$N:()=>p,Be:()=>x,Vq:()=>i,cN:()=>m,cZ:()=>f,fK:()=>u});var r=a(27685),s=a(35639),o=a(54654),n=a(83810),d=a(4120);let i=s.fC;s.xz;letl=s.h_;s.x8;let c=n.forwardRef(({className:e,...t},a)=>r.jsx(s.aV,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));c.displayName=s.aV.displayName;let f=n.forwardRef(({className:e,children:t,...a},n)=>(0,r.jsxs)(l,{children:[r.jsx(c,{}),(0,r.jsxs)(s.VY,{ref:n,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(o.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=s.VY.displayName;let u=({className:e,...t})=>r.jsx("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});u.displayName="DialogHeader";let m=({className:e,...t})=>r.jsx("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});m.displayName="DialogFooter";let p=n.forwardRef(({className:e,...t},a)=>r.jsx(s.Dx,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));p.displayName=s.Dx.displayName;let x=n.forwardRef(({className:e,...t},a)=>r.jsx(s.dk,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",e),...t}));x.displayName=s.dk.displayName},57869:(e,t,a)=>{a.d(t,{_:()=>d});var r=a(27685),s=a(73891),o=a(83810),n=a(4120);let d=o.forwardRef(({className:e,...t},a)=>r.jsx(s.f,{ref:a,className:(0,n.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));d.displayName=s.f.displayName},25277:(e,t,a)=>{a.d(t,{RM:()=>i,SC:()=>l,iA:()=>n,pj:()=>f,ss:()=>c,xD:()=>d});var r=a(27685),s=a(83810),o=a(4120);let n=s.forwardRef(({className:e,...t},a)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:a,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));n.displayName="Table";let d=s.forwardRef(({className:e,...t},a)=>r.jsx("thead",{ref:a,className:(0,o.cn)("[&_tr]:border-b",e),...t}));d.displayName="TableHeader";let i=s.forwardRef(({className:e,...t},a)=>r.jsx("tbody",{ref:a,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));i.displayName="TableBody",s.forwardRef(({className:e,...t},a)=>r.jsx("tfoot",{ref:a,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let l=s.forwardRef(({className:e,...t},a)=>r.jsx("tr",{ref:a,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));l.displayName="TableRow";let c=s.forwardRef(({className:e,...t},a)=>r.jsx("th",{ref:a,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let f=s.forwardRef(({className:e,...t},a)=>r.jsx("td",{ref:a,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));f.displayName="TableCell",s.forwardRef(({className:e,...t},a)=>r.jsx("caption",{ref:a,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},39881:(e,t,a)=>{a.d(t,{x:()=>s});class r{constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e,t={}){let a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let s=`${this.baseUrl}${e}`,o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization=`Bearer ${this.token}`),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:o}),a=await e.json();if(!e.ok)return{error:{code:a.error?.code||"UNKNOWN_ERROR",message:a.error?.message||"An error occurred"}};return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){returnthis.request(e,{method:"DELETE"})}}let s=new r}};
/app/apps/web/.next/static/chunks/4748-f436e6451501f6eb.js:"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4748],{1506:function(e,t,a){a.d(t,{b:function(){return o}});var s=a(91674),l=a(50802),r=a(86655),n=a(88562),i=a(33061);let c=[{value:"available",label:"Available",color:"text-emerald-400",bgColor:"bg-emerald-500",description:"Ready to receive calls"},{value:"away",label:"Away",color:"text-amber-400",bgColor:"bg-amber-500",description:"Temporarily unavailable"},{value:"dnd",label:"Do Not Disturb",color:"text-red-400",bgColor:"bg-red-500",description:"No callsor notifications"},{value:"offline",label:"Offline",color:"text-gray-400",bgColor:"bg-gray-500",description:"Not logged in"}];function o(){var e;let{agentStatus:t,setAgentStatus:a,currentCall:o}=(0,n.zs)(),[d,u]=(0,r.useState)(!1),x=(0,r.useRef)(null),m=null!==(e=c.find(e=>e.value===t))&&void 0!==e?e:c[3];(0,r.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let h=(0,r.useCallback)(e=>{o&&"ended"!==o.state||(a(e),u(!1))},[o,a]),b=o&&"ended"!==o.state;return(0,s.jsxs)("div",{className:"relative",ref:x,children:[(0,s.jsxs)("button",{onClick:()=>u(!d),disabled:!!b,className:(0,i.cn)("flex items-center gap-2 px-2 py-1 rounded-lg","text-xs font-medium transition-all","hover:bg-white/5",b&&"opacity-50 cursor-not-allowed"),children:[(0,s.jsx)("span",{className:(0,i.cn)("w-2 h-2 rounded-full",m.bgColor)}),(0,s.jsx)("span",{className:m.color,children:b?"On Call":m.label}),!b&&(0,s.jsx)(l.Z,{className:(0,i.cn)("w-3 h-3 text-gray-400 transition-transform",d&&"rotate-180")})]}),d&&!b&&(0,s.jsx)("div",{className:(0,i.cn)("absolute top-full left-0 mt-2 w-56 z-50","bg-slate-900 border border-white/10 rounded-xl","shadow-xl shadow-black/50 overflow-hidden","animate-in fade-in-0 zoom-in-95 duration-150"),children:c.map(e=>(0,s.jsxs)("button",{onClick:()=>h(e.value),className:(0,i.cn)("w-full px-4 py-3 flex items-center gap-3 text-left","hover:bg-white/5 transition-colors",t===e.value&&"bg-white/5"),children:[(0,s.jsx)("span",{className:(0,i.cn)("w-2.5 h-2.5 rounded-full",e.bgColor)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:(0,i.cn)("text-sm font-medium",e.color),children:e.label}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]}),t===e.value&&(0,s.jsx)("span",{className:"ml-auto text-cyan-400 text-xs",children:"✓"})]},e.value))})]})}},54506:function(e,t,a){a.d(t,{c:function(){return x}});var s=a(91674),l=a(55756),r=a(4458),n=a(86655),i=a(88562),c=a(90747),o=a(33061);let d=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}],u={1:[697,1209],2:[697,1336],3:[697,1477],4:[770,1209],5:[770,1336],6:[770,1477],7:[852,1209],8:[852,1336],9:[852,1477],"*":[941,1209],0:[941,1336],"#":[941,1477]};function x(){let{makeCall:e,sendDTMF:t,currentCall:a,isConnecting:x}=(0,i.zs)(),[m,h]=(0,n.useState)(""),b=(0,n.useRef)(null),g=(0,n.useCallback)(e=>{try{if(!b.current){let e=window.AudioContext||window.webkitAudioContext;e&&(b.current=new e)}let t=b.current;if(!t)return;let a=u[e];if(!a)return;let s=t.createOscillator(),l=t.createOscillator(),r=t.createGain();s.type="sine",l.type="sine",s.frequency.value=a[0],l.frequency.value=a[1],r.gain.value=.1,s.connect(r),l.connect(r),r.connect(t.destination),s.start(),l.start(),setTimeout(()=>{s.stop(),l.stop()},150)}catch(e){}},[]),f=(0,n.useCallback)(e=>{a&&"ended"!==a.state?t(e):h(t=>t+e),g(e)},[a,t,g]),p=(0,n.useCallback)(()=>{h(e=>e.slice(0,-1))},[]),v=(0,n.useCallback)(()=>{m&&!x&&(e(m),h(""))},[m,x,e]),w=(0,n.useCallback)(e=>{/^[0-9*#]$/.test(e.key)?f(e.key):"Backspace"===e.key?p():"Enter"===e.key&&m&&v()},[f,p,v,m]);return(0,s.jsxs)("div",{className:"space-y-4",onKeyDown:w,tabIndex:0,children:[(0,s.jsxs)("div",{className:(0,o.cn)("h-16 px-4 rounded-xl flex items-center justify-between","bg-white/5 border border-white/10"),children:[(0,s.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value.replace(/[^0-9+*#()-\s]/g,"")),placeholder:"Enter number...",className:(0,o.cn)("flex-1 bg-transparent text-2xl font-mono text-white","placeholder:text-gray-600 outline-none")}),m&&(0,s.jsx)("button",{onClick:p,className:"p-2 text-gray-400 hover:text-white transition-colors",children:(0,s.jsx)(l.Z,{className:"w-5 h-5"})})]}),m&&(0,s.jsx)("p",{className:"text-center text-gray-400 text-sm",children:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?"(".concat(t.slice(0,3),") ").concat(t.slice(3)):"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,10))})(m)}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:d.map(e=>{let{digit:t,letters:a}=e;return(0,s.jsxs)("button",{onClick:()=>f(t),className:(0,o.cn)("h-16 rounded-xl flex flex-col items-center justify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","border border-transparent hover:border-white/10","transition-all duration-150 ease-out","active:scale-95"),children:[(0,s.jsx)("span",{className:"text-2xl text-white font-medium",children:t}),a&&(0,s.jsx)("span",{className:"text-[10px] text-gray-500 tracking-widest -mt-0.5",children:a})]},t)})}),(0,s.jsxs)(c.z,{onClick:v,disabled:!m||x,className:(0,o.cn)("w-full h-14 rounded-xl text-lg font-medium","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","disabled:opacity-50 disabled:cursor-not-allowed","shadow-lg shadow-cyan-500/25 hover:shadow-xl hover:shadow-cyan-500/30","transition-all duration-200"),children:[(0,s.jsx)(r.Z,{className:"w-5 h-5 mr-2"}),x?"Connecting...":"Call"]})]})}},54748:function(e,t,a){a.d(t,{gw:function(){return W},ZB:function(){return j.ZB},zs:function(){return j.zs}});var s=a(91674),l=a(4458),r=a(25390),n=a(50802),i=a(98371),c=a(77037),o=a(61082),d=a(96733),u=a(81124),x=a(80317),m=a(34173),h=a(86655),b=a(1506),g=a(86819),f=a(40100),p=a(95807),v=a(10015),w=a(95902),y=a(51436),N=a(89175),j=a(88562),k=a(90747),C=a(66120),S=a(33061);let Z=[{id:"1",name:"John Smith",extension:"1001",status:"available"},{id:"2",name:"Jane Doe",extension:"1002",status:"busy"},{id:"3",name:"Bob Wilson",extension:"1003",status:"available"},{id:"4",name:"Alice Brown",extension:"1004",status:"offline"}],z=[{id:"q1",name:"Sales",waitingCalls:2,availableAgents:5},{id:"q2",name:"Support",waitingCalls:5,availableAgents:3},{id:"q3",name:"Billing",waitingCalls:0,availableAgents:2}];function I(e){let{onClose:t}=e,{transferCall:a}=(0,j.zs)(),[r,n]=(0,h.useState)("agents"),[i,d]=(0,h.useState)(""),[u,x]=(0,h.useState)(""),[b,g]=(0,h.useState)("blind"),f=Z.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.extension.includes(i)),p=z.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),v=(0,h.useCallback)(e=>{a(e.extension,b),t()},[a,b,t]),w=(0,h.useCallback)(e=>{a("queue:".concat(e.id),b),t()},[a,b,t]),I=(0,h.useCallback)(()=>{u&&(a(u,b),t())},[a,u,b,t]),D=(0,h.useCallback)(e=>{d(e.target.value)},[]),T=(0,h.useCallback)(e=>{x(e.target.value)},[]),O=(0,h.useCallback)(e=>{e.target===e.currentTarget&&t()},[t]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:O,role:"dialog","aria-modal":"true",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,S.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl bg-cyan-500/10 flex items-center justify-center",children:(0,s.jsx)(m.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-white text-lg font-semibold",children:"Transfer Call"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Select a destination"})]})]}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400hover:text-white",children:(0,s.jsx)(c.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"px-6 py-3 border-b border-white/10",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>g("blind"),className:(0,S.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","blind"===b?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Blind Transfer"}),(0,s.jsx)("button",{onClick:()=>g("warm"),className:(0,S.cn)("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all","warm"===b?"bg-cyan-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:"Warm Transfer"})]}),(0,s.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:"blind"===b?"Call will be transferred immediately":"You can speak to the recipient before transferring"})]}),(0,s.jsx)("div",{className:"px-6 pt-4",children:(0,s.jsx)("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["agents","queues","external"].map(e=>(0,s.jsxs)("button",{onClick:()=>n(e),className:(0,S.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-1.5",r===e?"bg-cyan-500 text-white":"text-gray-400 hover:text-white hover:bg-white/5"),children:["agents"===e&&(0,s.jsx)(o.Z,{className:"w-3.5 h-3.5"}),"queues"===e&&(0,s.jsx)(y.Z,{className:"w-3.5 h-3.5"}),"external"===e&&(0,s.jsx)(l.Z,{className:"w-3.5 h-3.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})}),(0,s.jsxs)("div",{className:"p-6",children:["external"!==r&&(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)(N.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),(0,s.jsx)(C.I,{value:i,onChange:D,placeholder:"Search ".concat(r,"..."),className:"pl-10 bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),"agents"===r&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[f.map(e=>(0,s.jsxs)("button",{onClick:()=>v(e),disabled:"available"!==e.status,className:(0,S.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all","available"===e.status?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-10 h-10 rounded-full flex items-center justify-center","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:(0,s.jsx)(o.Z,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ext. ",e.extension]})]}),(0,s.jsx)("span",{className:(0,S.cn)("text-xs px-2 py-0.5 rounded-full","available"===e.status?"bg-emerald-500/10 text-emerald-400":"busy"===e.status?"bg-amber-500/10 text-amber-400":"bg-gray-500/10 text-gray-400"),children:e.status})]},e.id)),0===f.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No agents found"})]}),"queues"===r&&(0,s.jsxs)("div",{className:"space-y-2 max-h-[250px] overflow-y-auto",children:[p.map(e=>(0,s.jsxs)("button",{onClick:()=>w(e),disabled:0===e.availableAgents,className:(0,S.cn)("w-full p-3 rounded-lg flex items-center gap-3 text-left","transition-all",e.availableAgents>0?"bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10":"opacity-50 cursor-not-allowed bg-white/5"),children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center",children:(0,s.jsx)(y.Z,{className:"w-5 h-5 text-purple-400"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:[e.waitingCalls," waiting • ",e.availableAgents," available"]})]})]},e.id)),0===p.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"No queues found"})]}),"external"===r&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Phone Number"}),(0,s.jsx)(C.I,{value:u,onChange:T,placeholder:"+1 (555) 000-0000",className:"bg-white/5 border-white/10 text-white placeholder:text-gray-500"})]}),(0,s.jsxs)(k.z,{onClick:I,disabled:!u,className:"w-full bg-gradient-to-r from-cyan-600 to-blue-600",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 mr-2"}),"Transfer to ",u||"Number"]})]})]})]})]})}function D(){var e,t;let{currentCall:a,toggleMute:l,toggleHold:r,hangupCall:n}=(0,j.zs)(),[i,c]=(0,h.useState)(!1),[o,u]=(0,h.useState)(!1),x=null!==(e=null==a?void 0:a.isMuted)&&void 0!==e&&e,b=null!==(t=null==a?void 0:a.isOnHold)&&void 0!==t&&t,y=(0,h.useCallback)(()=>{l()},[l]),N=(0,h.useCallback)(()=>{r()},[r]),k=(0,h.useCallback)(()=>{n()},[n]),C=(0,h.useCallback)(()=>{c(!0)},[]);return((0,h.useEffect)(()=>{let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key.toLowerCase()){case"m":y();break;case"h":N();break;case"t":C()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[y,N,C]),a)?(0,s.jsxs)(s.Fragment,{children:[i&&(0,s.jsx)(I,{onClose:()=>c(!1)}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,s.jsxs)("button",{onClick:y,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",x?"bg-red-500/20 border-2 border-red-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:x?(0,s.jsx)(g.Z,{className:"w-6 h-6 text-red-400"}):(0,s.jsx)(f.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:x?"Unmute":"Mute"})]}),(0,s.jsxs)("button",{onClick:N,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",b?"bg-amber-500/20 border-2 border-amber-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:b?(0,s.jsx)(p.Z,{className:"w-6 h-6 text-amber-400"}):(0,s.jsx)(d.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:b?"Resume":"Hold"})]}),(0,s.jsxs)("button",{onClick:C,className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","bg-white/10 border-2 border-transparent hover:bg-white/15","transition-all duration-200"),children:(0,s.jsx)(m.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Transfer"})]}),(0,s.jsxs)("button",{onClick:()=>u(!o),className:(0,S.cn)("group relative flex flex-col items-center gap-1.5","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-14 h-14 rounded-full flex items-center justify-center","transition-all duration-200",o?"bg-cyan-500/20 border-2 border-cyan-500":"bg-white/10 border-2 border-transparent hover:bg-white/15"),children:(0,s.jsx)(v.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Keypad"})]})]}),o&&(0,s.jsx)(T,{}),(0,s.jsxs)("button",{onClick:k,className:(0,S.cn)("w-full py-4 rounded-xl flex items-center justify-center gap-3","bg-gradient-to-r from-red-500 to-red-600","hover:from-red-400 hover:to-red-500","shadow-lg shadow-red-500/25 hover:shadow-xl hover:shadow-red-500/30","transition-all duration-200","active:scale-98"),children:[(0,s.jsx)(w.Z,{className:"w-6 h-6 text-white"}),(0,s.jsx)("span",{className:"text-white font-semibold",children:"End Call"})]}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:[(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"M"})," Mute"," ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"H"})," Hold"," ",(0,s.jsx)("kbd",{className:"px-1 py-0.5 bg-white/5 rounded text-gray-500",children:"T"})," Transfer"]})})]})]}):(0,s.jsx)(s.Fragment,{})}function T(){let{sendDTMF:e}=(0,j.zs)();return(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 p-4 bg-white/5 rounded-xl",children:["1","2","3","4","5","6","7","8","9","*","0","#"].map(t=>(0,s.jsx)("button",{onClick:()=>e(t),className:(0,S.cn)("h-12 rounded-lg flex items-centerjustify-center","bg-white/5 hover:bg-white/10 active:bg-cyan-500/20","text-white text-lg font-medium","transition-all duration-150 active:scale-95"),children:t},t))})}var O=a(54506),P=a(57197),E=a(30250),A=a(29182),F=a(27604),M=a(68182),L=a(40646),R=a(54375);let H={fullName:o.Z,firstName:o.Z,lastName:o.Z,phoneNumber:l.Z,email:E.Z,company:A.Z,address:F.Z,city:F.Z,state:F.Z,zipCode:F.Z,leadSource:P.Z,campaignName:P.Z,notes:M.Z,createdAt:L.Z,website:R.Z};function q(e){let{data:t,variant:a="panel",className:l}=e,{screenPopFields:r}=(0,j.zs)(),[c,d]=(0,h.useState)("modal"===a),u=r.filter(e=>e.enabled).sort((e,t)=>e.order-t.order),x=e=>{if(e in t){let a=t[e];return null==a?null:"object"==typeof a?JSON.stringify(a):String(a)}return t.customFields&&e in t.customFields?String(t.customFields[e]):null},m=()=>{let e=[t.address,t.city,t.state,t.zipCode].filter(Boolean);return e.length>0?e.join(", "):null},b=e=>{var t;let l=x(e.key);if(["address","city","state","zipCode"].includes(e.key)&&"address"===e.key)l=m();else if(["city","state","zipCode"].includes(e.key)){let e=u.find(e=>"address"===e.key);if(null==e?void 0:e.enabled)return null}if(!l)return null;let r=null!==(t=H[e.key])&&void 0!==t?t:M.Z;return(0,s.jsxs)("div",{className:"flex items-start gap-3 py-2",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0","modal"===a?"bg-white/10":"bg-cyan-500/10"),children:(0,s.jsx)(r,{className:(0,S.cn)("w-4 h-4","modal"===a?"text-cyan-400":"text-cyan-500")})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"text-gray-500 text-xsmb-0.5",children:e.label}),(0,s.jsx)("p",{className:(0,S.cn)("text-sm break-words","modal"===a?"text-white":"text-gray-200"),children:l})]})]},e.id)},g=u.map(e=>({field:e,value:x(e.key)})).filter(e=>{let{value:t}=e;return null!==t});if(0===g.length)return(0,s.jsxs)("div",{className:(0,S.cn)("p-4 rounded-xl text-center","modal"===a?"bg-white/5":"bg-slate-800/50",l),children:[(0,s.jsx)(M.Z,{className:"w-8 h-8 mx-auto mb-2 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No prospect data available"})]});let f="modal"===a?5:3,p=g.length>f;return(0,s.jsxs)("div",{className:(0,S.cn)("rounded-xl overflow-hidden","modal"===a?"bg-white/5 border border-white/10":"bg-slate-800/30 border border-white/5",l),children:[(0,s.jsxs)("div",{className:(0,S.cn)("px-4 py-3 flex items-center justify-between","modal"===a?"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-b border-white/10":"bg-white/5 border-b border-white/5"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-4 h-4 text-cyan-400"}),(0,s.jsx)("span",{className:(0,S.cn)("font-medium text-sm","modal"===a?"text-white":"text-gray-200"),children:"Prospect Information"})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:[g.length," field",1!==g.length?"s":""]})]}),(0,s.jsx)("div",{className:"px-4 divide-y divide-white/5",children:u.slice(0,c?void 0:f).map(e=>b(e))}),p&&(0,s.jsx)("button",{onClick:()=>d(!c),className:(0,S.cn)("w-full px-4 py-2 flex items-center justify-center gap-2","text-xs text-gray-400 hover:text-white","border-t border-white/5 hover:bg-white/5","transition-colors"),children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),"Show Less"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{className:"w-4 h-4"}),"Show ",g.length-f," More"]})})]})}function U(e){let{call:t}=e,{answerCall:a,hangupCall:r}=(0,j.zs)(),[n,i]=(0,h.useState)(0);return(0,h.useEffect)(()=>{let e=setInterval(()=>{i(e=>e+1)},1e3);return()=>clearInterval(e)},[]),(0,s.jsxs)("div",{className:"fixedinset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,S.cn)("relative z-10 w-full max-w-md mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-3xl border border-white/10 shadow-2xl shadow-cyan-500/10","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-300"),children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-32 h-32 rounded-full bg-cyan-500/20 animate-ping"}),(0,s.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-cyan-500/10 animate-pulse"})]}),(0,s.jsxs)("div",{className:"relative pt-8 pb-4 text-center",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-cyan-500/10 rounded-full border border-cyan-500/20 mb-4",children:[(0,s.jsx)(l.Z,{className:"w-4 h-4 text-cyan-400 animate-bounce"}),(0,s.jsx)("span",{className:"text-cyan-400 text-sm font-medium",children:"Incoming Call"})]}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["Ringing for ","".concat(Math.floor(n/60).toString().padStart(2,"0"),":").concat((n%60).toString().padStart(2,"0"))]})]}),(0,s.jsxs)("div",{className:"relative px-6 pb-6 text-center",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-24 h-24 mx-auto mb-4 rounded-full","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border-2 border-cyan-500/30","flex items-center justify-center","shadow-lg shadow-cyan-500/20"),children:(0,s.jsx)(o.Z,{className:"w-12 h-12 text-cyan-400"})}),(0,s.jsx)("h2",{className:"text-white text-2xl font-bold mb-1",children:t.callerName||"Unknown Caller"}),(0,s.jsx)("p",{className:"text-gray-400 text-lg font-mono",children:t.phoneNumber}),t.queueName&&(0,s.jsx)("div",{className:"mt-3 flex items-center justify-center gap-2",children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-purple-500/10 rounded-full text-purple-400 text-xs",children:[(0,s.jsx)(P.Z,{className:"w-3 h-3"}),t.queueName]})})]}),t.prospectData&&Object.keys(t.prospectData).length>0&&(0,s.jsx)("div",{className:"px-6 pb-6",children:(0,s.jsx)(q,{data:t.prospectData,variant:"modal"})}),(0,s.jsx)("div",{className:"px-6 pb-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,s.jsxs)("button",{onClick:()=>{r()},className:(0,S.cn)("grouprelative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-16 h-16 rounded-full","bg-gradient-to-br from-red-500 to-red-600","flex items-center justify-center","shadow-lg shadow-red-500/30","group-hover:shadow-xl group-hover:shadow-red-500/40","transition-all duration-200"),children:(0,s.jsx)(w.Z,{className:"w-7 h-7 text-white"})}),(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Decline"})]}),(0,s.jsxs)("button",{onClick:()=>{a()},className:(0,S.cn)("group relative flex flex-col items-center gap-2","transition-transform hover:scale-105 active:scale-95"),children:[(0,s.jsx)("div",{className:(0,S.cn)("w-20 h-20 rounded-full","bg-gradient-to-br from-emerald-500 to-green-600","flex items-center justify-center","shadow-lg shadow-emerald-500/30","group-hover:shadow-xl group-hover:shadow-emerald-500/40","transition-all duration-200","animate-pulse"),children:(0,s.jsx)(l.Z,{className:"w-9 h-9 text-white"})}),(0,s.jsx)("span",{className:"text-gray-400 text-sm",children:"Answer"})]})]})}),(0,s.jsx)("div",{className:"px-6 pb-6 text-center",children:(0,s.jsxs)("p",{className:"text-gray-600 text-xs",children:["Press ",(0,s.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"A"})," to answer or",(0,s.jsx)("kbd",{className:"px-1.5 py-0.5 bg-white/5 rounded text-gray-400",children:"D"})," to decline"]})})]})]})}var B=a(1560),J=a(30999);function W(){var e;let{agentStatus:t,currentCall:a,isPhonePanelOpen:m,closePhonePanel:g,togglePhonePanel:f,error:p,clearError:v}=(0,j.zs)(),[w,y]=(0,h.useState)(!0),[N,C]=(0,h.useState)("dialpad"),[Z,z]=(0,h.useState)(!1);return m?(0,s.jsxs)(s.Fragment,{children:[(null==a?void 0:a.state)==="ringing"&&"inbound"===a.direction&&(0,s.jsx)(U,{call:a}),Z&&(0,s.jsx)(B.h,{onClose:()=>z(!1)}),(0,s.jsxs)(J.Zb,{className:(0,S.cn)("fixed bottom-6 right-6 z-40","w-[380px] overflow-hidden","bg-gradient-to-b from-slate-900/95 to-slate-950/95","backdrop-blur-xl border-white/10","shadow-2xl shadow-black/50","transition-all duration-300 ease-out",w?"h-auto":"h-[72px]"),children:[(0,s.jsxs)(J.Ol,{className:"p-4 pb-3 space-y-0 flex flex-row items-center justify-between border-b border-white/5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-10 h-10 rounded-xl flex items-center justify-center","bg-gradient-to-br from-cyan-500/20 to-blue-500/20","border border-cyan-500/30"),children:(0,s.jsx)(l.Z,{className:"w-5 h-5 text-cyan-400"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-white text-sm",children:"Agent Phone"}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(b.b,{})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(null==a?void 0:a.state)==="active"&&(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-500/10 rounded-full mr-2",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),(0,s.jsx)("span",{className:"text-emerald-400 text-xs font-mono",children:(e=a.duration,"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0")))})]}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>z(!0),children:(0,s.jsx)(r.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:()=>y(!w),children:w?(0,s.jsx)(n.Z,{className:"w-4 h-4"}):(0,s.jsx)(i.Z,{className:"w-4 h-4"})}),(0,s.jsx)(k.z,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400 hover:text-white",onClick:g,children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})})]})]}),p&&(0,s.jsx)("div",{className:"px-4 py-2 bg-red-500/10 border-b border-red-500/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-red-400 text-xs",children:p}),(0,s.jsx)("button",{onClick:v,className:"text-red-400 hover:text-red-300",children:(0,s.jsx)(c.Z,{className:"w-3 h-3"})})]})}),w&&(0,s.jsxs)(J.aY,{className:"p-0",children:[a&&"ringing"!==a.state&&"ended"!==a.state&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[a.prospectData&&(0,s.jsx)(q,{data:a.prospectData}),(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full bg-gradient-to-br from-cyan-500/20 to-blue-500/20 flex items-center justify-center border border-cyan-500/30",children:(0,s.jsx)(o.Z,{className:"w-8 h-8 text-cyan-400"})}),(0,s.jsx)("h4",{className:"text-white font-semibold text-lg",children:a.callerName||"Unknown Caller"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:a.phoneNumber}),a.queueName&&(0,s.jsxs)("p",{className:"text-cyan-400 text-xs mt-1",children:["From:",a.queueName]})]}),a.isOnHold&&(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 py-2 bg-amber-500/10 rounded-lg",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 text-amber-400"}),(0,s.jsx)("span",{className:"text-amber-400 text-sm",children:"Call On Hold"})]}),(0,s.jsx)(D,{})]}),(!a||"ended"===a.state)&&(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsx)("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:["dialpad","history","settings"].map(e=>(0,s.jsxs)("button",{onClick:()=>C(e),className:(0,S.cn)("flex-1 py-2 px-3 rounded-md text-xs font-medium transition-all",N===e?"bg-gradient-to-r from-cyan-600 to-blue-600 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-white/5"),children:["dialpad"===e&&(0,s.jsx)(u.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"history"===e&&(0,s.jsx)(x.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),"settings"===e&&(0,s.jsx)(r.Z,{className:"w-3.5 h-3.5 inline mr-1.5"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))}),"dialpad"===N&&(0,s.jsx)(O.c,{}),"history"===N&&(0,s.jsx)(_,{}),"settings"===N&&(0,s.jsx)(K,{})]})]})]})]}):(0,s.jsxs)("button",{onClick:f,className:(0,S.cn)("fixed bottom-6 right-6 z-50","flex items-center gap-3 px-5 py-3 rounded-full","bg-gradient-to-r from-cyan-600 to-blue-600","hover:from-cyan-500 hover:to-blue-500","text-white font-medium shadow-2xl","transition-all duration-300 ease-out","hover:scale-105 hover:shadow-cyan-500/25","border border-white/10",(null==a?void0:a.state)==="ringing"&&"animate-pulse"),"aria-label":"Open phone",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5"}),(null==a?void 0:a.state)==="ringing"&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"})]}),(0,s.jsx)("span",{className:"capitalize",children:"on-call"===t?"On Call":t}),(0,s.jsx)("span",{className:(0,S.cn)("w-2.5 h-2.5 rounded-full",(e=>{switch(e){case"available":return"bg-emerald-500";case"on-call":return"bg-amber-500";case"away":return"bg-red-500";case"dnd":return"bg-purple-500";default:return"bg-gray-500"}})(t))})]})}function _(){let{callHistory:e,makeCall:t}=(0,j.zs)(),a=e=>e?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",r=e=>{t(e)};return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(x.Z,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent calls"})]}):(0,s.jsx)("div",{className:"space-y-2max-h-[300px] overflow-y-auto",children:e.map((e,t)=>(0,s.jsx)("button",{onClick:()=>r(e.phoneNumber),className:(0,S.cn)("w-full p-3 rounded-lg text-left transition-all","bg-white/5 hover:bg-white/10 border border-transparent hover:border-white/10"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,S.cn)("w-8 h-8 rounded-full flex items-center justify-center","inbound"===e.direction?"bg-cyan-500/20 text-cyan-400":"bg-blue-500/20 text-blue-400"),children:"inbound"===e.direction?(0,s.jsx)(l.Z,{className:"w-4 h-4"}):(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white text-sm font-medium",children:e.callerName||e.phoneNumber}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs",children:["inbound"===e.direction?"Incoming":"Outgoing",e.duration>0&&" • ".concat(Math.floor(e.duration/60),"m ").concat(e.duration%60,"s")]})]})]}),(0,s.jsx)("span",{className:"text-gray-500 text-xs",children:a(e.startTime)})]})},"".concat(e.callId,"-").concat(t)))})}function K(){let{audioDevices:e,selectedAudioInput:t,selectedAudioOutput:a,setAudioInput:l,setAudioOutput:n}=(0,j.zs)(),i=e.filter(e=>"audioinput"===e.kind),c=e.filter(e=>"audiooutput"===e.kind);return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Microphone"}),(0,s.jsx)("select",{value:null!=t?t:"",onChange:e=>l(e.target.value),className:(0,S.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:i.map(e=>(0,s.jsx)("option",{value:e.deviceId,children:e.label||"Microphone ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-400 mb-2",children:"Speaker"}),(0,s.jsx)("select",{value:null!=a?a:"",onChange:e=>n(e.target.value),className:(0,S.cn)("w-full px-3 py-2 rounded-lg text-sm","bg-white/5 border border-white/10","text-white focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500","outline-none transition-all"),children:c.map(e=>(0,s.jsx)("option",{value:e.deviceId,children:e.label||"Speaker ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),(0,s.jsxs)("div",{className:"pt-2 border-t border-white/5",children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Configure which prospect fields appear during incoming calls."}),(0,s.jsxs)(k.z,{variant:"outline",size:"sm",className:"w-full border-white/10 text-gray-300 hover:bg-white/5",children:[(0,s.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),"Configure Screen Pop Fields"]})]})]})}},88562:function(e,t,a){a.d(t,{ZB:function(){return c},zs:function(){return i}});var s=a(91674),l=a(86655);let r=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}],n=(0,l.createContext)(null);function i(){let e=(0,l.useContext)(n);if(!e)throw Error("usePhone must be used within a PhoneProvider");return e}function c(e){let{children:t,wsUrl:a="ws://45.32.213.201:3001",apiUrl:i="http://45.32.213.201:3001"}=e,c=i.replace(/\/api\/v1\/?$/,""),o="a1b2c3d4e5f67890",d=(0,l.useCallback)(function(){let e=!(arguments.length>0)||void0===arguments[0]||arguments[0],t={};return e&&(t["Content-Type"]="application/json"),o&&(t["x-api-key"]=o),t},[o]),[u,x]=(0,l.useState)("offline"),[m,h]=(0,l.useState)(null),[b,g]=(0,l.useState)([]),[f,p]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[y,N]=(0,l.useState)([]),[j,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(null),[Z,z]=(0,l.useState)(()=>{{let e=localStorage.getItem("screenPopFields");if(e)try{return JSON.parse(e)}catch(e){}}return r}),[I,D]=(0,l.useState)(null),T=(0,l.useRef)(null),O=(0,l.useRef)(null),P=(0,l.useRef)(null),E=(0,l.useCallback)(()=>{var e;P.current||(P.current=new Audio("/sounds/ringtone.mp3"),P.current.loop=!0),null===(e=P.current)||void 0===e||e.play().catch(()=>{})},[]),A=(0,l.useCallback)(()=>{P.current&&(P.current.pause(),P.current.currentTime=0)},[]),F=(0,l.useCallback)(()=>{O.current&&clearInterval(O.current),O.current=setInterval(()=>{h(e=>e&&e.answerTime?{...e,duration:Math.floor((Date.now()-e.answerTime.getTime())/1e3)}:e)},1e3)},[]),M=(0,l.useCallback)(()=>{O.current&&(clearInterval(O.current),O.current=null)},[]),L=(0,l.useCallback)(e=>{var t,a,s,l;e&&(h({callId:null!==(t=e.callId)&&void 0!==t?t:"call_".concat(Date.now()),direction:"inbound",state:"ringing",phoneNumber:null!==(s=null!==(a=e.callerNumber)&&void 0!==a?a:e.from)&&void 0!==s?s:"",callerName:e.callerName,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0,prospectData:null!==(l=e.prospectData)&&void 0!==l?l:e.screenPopData,queueName:e.queueName,campaignId:e.campaignId}),p(!0),E())},[E]),R=(0,l.useCallback)(()=>{h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),A(),F()},[A,F]),H=(0,l.useCallback)(()=>{h(e=>{if(e){let t={...e,state:"ended",endTime:new Date};g(e=>[t,...e].slice(0,50))}return null}),x("available"),A(),M()},[A,M]),q=(0,l.useCallback)(e=>{e&&h(t=>{var a;if(!t)return t;let s=null!==(a=e.isOnHold)&&void 0!==a?a:!t.isOnHold;return{...t,isOnHold:s,state:s?"hold":"active"}})},[]),U=(0,l.useCallback)(e=>{let{type:t,channel:a,payload:s}=e;if("event"===t)switch(a){case"agent.call.incoming":L(s);break;case"agent.call.answered":R();break;case"agent.call.ended":H();break;case"agent.call.hold":q(s)}},[L,R,H,q]);(0,l.useEffect)(()=>{let e=()=>{try{let t=new WebSocket("".concat(a,"/ws/events?apiKey=").concat("a1b2c3d4e5f67890"));t.onopen=()=>{t.send(JSON.stringify({type:"subscribe",channels:["agent.call.*","agent.status.*"]}))},t.onmessage=e=>{try{let t=JSON.parse(e.data);U(t)}catch(e){}},t.onclose=()=>{setTimeout(e,3e3)},T.current=t}catch(t){setTimeout(e,3e3)}};return e(),()=>{T.current&&T.current.close()}},[a,U]),(0,l.useEffect)(()=>{if(!navigator.mediaDevices)return;let e=async()=>{try{await navigator.mediaDevices.getUserMedia({audio:!0});let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind||"audiooutput"===e.kind);N(e);let t=e.find(e=>"audioinput"===e.kind),a=e.find(e=>"audiooutput"===e.kind);t&&!j&&k(t.deviceId),a&&!C&&S(a.deviceId)}catch(e){}};e();let t=()=>{e()};return navigator.mediaDevices.addEventListener("devicechange",t),()=>{navigator.mediaDevices.removeEventListener("devicechange",t)}},[j,C]);let B=(0,l.useCallback)(e=>{z(e),localStorage.setItem("screenPopFields",JSON.stringify(e))},[]),J=(0,l.useCallback)(e=>{fetch("".concat(c,"/api/v1/agent/status"),{method:"PUT",headers:d(),body:JSON.stringify({status:e})}).catch(()=>{}),x(e)},[c,d]),W=(0,l.useCallback)(()=>p(!0),[]),_=(0,l.useCallback)(()=>p(!1),[]),K=(0,l.useCallback)(()=>p(e=>!e),[]),Y=(0,l.useCallback)(async e=>{console.log("[Phone] Initiating call to:",e),w(!0),D(null);try{var t,a,s;let l="".concat(c,"/api/v1/agent/call/originate");console.log("[Phone] Calling API:",l);let r=await fetch(l,{method:"POST",headers:d(),body:JSON.stringify({phoneNumber:e})}),n=await r.json();if(console.log("[Phone] API response:",r.status,n),!r.ok)throw Error(null!==(a=null===(t=n.error)||void 0===t?void 0:t.message)&&void 0!==a?a:"Failed to place call");let i={callId:null!==(s=n.callId)&&void 0!==s?s:"call_".concat(Date.now()),direction:"outbound",state:"connecting",phoneNumber:e,startTime:new Date,duration:0,isMuted:!1,isOnHold:!1,recordingEnabled:!0};console.log("[Phone] Call initiated successfully:",i),h(i),x("on-call"),p(!0),setTimeout(()=>{h(e=>e&&e.callId===i.callId?{...e,state:"active",answerTime:new Date}:e),F()},2e3)}catch(e){console.error("[Phone] Call failed:",e),D(e instanceof Error?e.message:"Failed to place call")}finally{w(!1)}},[c,d,F]),G=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/answer"),{method:"POST",headers:d(!1)}),h(e=>e?{...e,state:"active",answerTime:new Date}:e),x("on-call"),A(),F()}catch(e){D(e instanceof Error?e.message:"Failed to answer call")}},[c,m,A,F,d]),V=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/hangup"),{method:"POST",headers:d(!1)});let e={...m,state:"ended",endTime:new Date};g(t=>[e,...t].slice(0,50)),h(null),x("available"),M()}catch(e){D(e instanceof Error?e.message:"Failed to hang up")}},[c,m,M,d]),$=(0,l.useCallback)(()=>{h(e=>e?{...e,isMuted:!e.isMuted}:e)},[]),Q=(0,l.useCallback)(async()=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/hold"),{method:"POST",headers:d(!1)}),h(e=>e?{...e,isOnHold:!e.isOnHold,state:e.isOnHold?"active":"hold"}:e)}catch(e){D(e instanceof Error?e.message:"Failed to toggle hold")}},[c,m,d]),X=(0,l.useCallback)(e=>{m&&console.log("[Phone] Sending DTMF:",e)},[m]),ee=(0,l.useCallback)(async(e,t)=>{if(m)try{await fetch("".concat(c,"/api/v1/agent/call/").concat(m.callId,"/transfer"),{method:"POST",headers:d(),body:JSON.stringify({destination:e,type:t})}),"blind"===t&&(h(null),x("available"))}catch(e){D(e instanceof Error?e.message:"Failed to transfer call")}},[c,m,d]),et=(0,l.useCallback)(e=>{k(e)},[]),ea=(0,l.useCallback)(e=>{S(e)},[]),es=(0,l.useCallback)(()=>D(null),[]);return(0,s.jsx)(n.Provider,{value:{agentStatus:u,currentCall:m,callHistory:b,isPhonePanelOpen:f,isConnecting:v,audioDevices:y,selectedAudioInput:j,selectedAudioOutput:C,screenPopFields:Z,error:I,setAgentStatus:J,openPhonePanel:W,closePhonePanel:_,togglePhonePanel:K,makeCall:Y,answerCall:G,hangupCall:V,toggleMute:$,toggleHold:Q,sendDTMF:X,transferCall:ee,setAudioInput:et,setAudioOutput:ea,updateScreenPopFields:B,clearError:es},children:t})}},1560:function(e,t,a){a.d(t,{h:function(){return y}});var s=a(91674),l=a(61082),r=a(4458),n=a(30250),i=a(29182),c=a(27604),o=a(57197),d=a(68182),u=a(77037),x=a(55491),m=a(47791),h=a(72781),b=a(86655),g=a(88562),f=a(90747),p=a(33061);let v={fullName:l.Z,firstName:l.Z,lastName:l.Z,phoneNumber:r.Z,email:n.Z,company:i.Z,address:c.Z,city:c.Z,state:c.Z,zipCode:c.Z,leadSource:o.Z,campaignName:o.Z,notes:d.Z},w=[{id:"fullName",label:"Full Name",key:"fullName",enabled:!0,order:1},{id:"phoneNumber",label:"Phone Number",key:"phoneNumber",enabled:!0,order:2},{id:"email",label:"Email",key:"email",enabled:!0,order:3},{id:"company",label:"Company",key:"company",enabled:!0,order:4},{id:"address",label:"Address",key:"address",enabled:!1,order:5},{id:"city",label:"City",key:"city",enabled:!1,order:6},{id:"state",label:"State",key:"state",enabled:!1,order:7},{id:"zipCode",label:"Zip Code",key:"zipCode",enabled:!1,order:8},{id:"leadSource",label:"Lead Source",key:"leadSource",enabled:!0,order:9},{id:"campaignName",label:"Campaign",key:"campaignName",enabled:!0,order:10},{id:"notes",label:"Notes",key:"notes",enabled:!1,order:11}];function y(e){let{onClose:t}=e,{screenPopFields:a,updateScreenPopFields:l}=(0,g.zs)(),[r,n]=(0,b.useState)([...a]),[i,c]=(0,b.useState)(null),o=(0,b.useCallback)(e=>{n(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},[]),y=(0,b.useCallback)(e=>{c(e)},[]),N=(0,b.useCallback)(e=>{i&&i!==e&&n(t=>{let a=t.findIndex(e=>e.id===i),s=t.findIndex(t=>t.id===e);if(-1===a||-1===s)return t;let l=[...t],[r]=l.splice(a,1);return l.splice(s,0,r),l.map((e,t)=>({...e,order:t+1}))})},[i]),j=(0,b.useCallback)(()=>{c(null)},[]),k=(0,b.useCallback)(()=>{l(r),t()},[r,l,t]),C=(0,b.useCallback)(()=>{n([...w])},[]),S=(0,b.useCallback)(e=>{e.target===e.currentTarget&&t()},[t]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:S,role:"dialog","aria-modal":"true",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,s.jsxs)("div",{className:(0,p.cn)("relative z-10 w-full max-w-lg mx-4","bg-gradient-to-b from-slate-900 to-slate-950","rounded-2xl border border-white/10 shadow-2xl","overflow-hidden animate-in fade-in-0 zoom-in-95 duration-200"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-white/10 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-white text-lg font-semibold",children:"Screen Pop Settings"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-0.5",children:"Configure which fields appear during incoming calls"})]}),(0,s.jsx)(f.z,{variant:"ghost",size:"icon",onClick:t,className:"text-gray-400 hover:text-white",children:(0,s.jsx)(u.Z,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"px-6 py-4 max-h-[400px] overflow-y-auto",children:(0,s.jsx)("div",{className:"space-y-2",children:r.sort((e,t)=>e.order-t.order).map(e=>{var t;let a=null!==(t=v[e.key])&&void 0!==t?t:d.Z;return(0,s.jsxs)("div",{draggable:!0,onDragStart:()=>y(e.id),onDragOver:t=>{t.preventDefault(),N(e.id)},onDragEnd:j,className:(0,p.cn)("flex items-center gap-3 p-3 rounded-lg","bg-white/5 border border-transparent","hover:bg-white/10 hover:border-white/10","transition-all cursor-move",i===e.id&&"opacity-50 scale-95"),children:[(0,s.jsx)(x.Z,{className:"w-4 h-4 text-gray-600 flex-shrink-0"}),(0,s.jsx)("div",{className:(0,p.cn)("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",e.enabled?"bg-cyan-500/10 text-cyan-400":"bg-white/5 text-gray-500"),children:(0,s.jsx)(a,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:(0,p.cn)("flex-1 text-sm",e.enabled?"text-white":"text-gray-500"),children:e.label}),(0,s.jsx)("button",{onClick:()=>o(e.id),className:(0,p.cn)("w-10 h-6 rounded-full p-1 transition-colors",e.enabled?"bg-cyan-500":"bg-white/10"),children:(0,s.jsx)("div",{className:(0,p.cn)("w-4 h-4 rounded-full bg-white transition-transform",e.enabled?"translate-x-4":"translate-x-0")})})]},e.id)})})}),(0,s.jsxs)("div",{className:"px-6 py-3 bg-white/5 border-t border-white/10",children:[(0,s.jsx)("p",{className:"text-gray-400 text-xs mb-2",children:"Preview:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:r.filter(e=>e.enabled).sort((e,t)=>e.order-t.order).map(e=>(0,s.jsx)("span",{className:"px-2 py-1 bg-cyan-500/10 text-cyan-400 text-xs rounded-full border border-cyan-500/20",children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-white/10 flex items-center justify-between",children:[(0,s.jsxs)(f.z,{variant:"ghost",onClick:C,className:"text-gray-400 hover:text-white gap-2",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4"}),"Reset to Default"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(f.z,{variant:"outline",onClick:t,className:"border-white/10",children:"Cancel"}),(0,s.jsxs)(f.z,{onClick:k,className:"bg-gradient-to-r from-cyan-600 to-blue-600 gap-2",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),"Save Changes"]})]})]})]})]})}},90747:function(e,t,a){a.d(t,{z:function(){return o}});var s=a(91674),l=a(32814),r=a(47828),n=a(86655),i=a(33061);let c=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:o=!1,...d}=e,u=o?l.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:r,size:n,className:a})),ref:t,...d})});o.displayName="Button"},30999:function(e,t,a){a.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},ll:function(){return c}});var s=a(91674),l=a(86655),r=a(33061);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});c.displayName="CardTitle";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});o.displayName="CardDescription";let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...l})});d.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},66120:function(e,t,a){a.d(t,{I:function(){return n}});var s=a(91674),l=a(86655),r=a(33061);let n=l.forwardRef((e,t)=>{let{className:a,type:l,...n}=e;return(0,s.jsx)("input",{type:l,className:(0,r.cn)("flex h-10 w-full rounded-md border border-inputbg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},33061:function(e,t,a){a.d(t,{LU:function(){return c},cn:function(){return r},p6:function(){return o},un:function(){return n},xG:function(){return i}});var s=a(44115),l=a(38352);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.m6)((0,s.W)(t))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function c(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),s=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(s).padStart(2,"0")):"".concat(a,":").concat(String(s).padStart(2,"0"))}function o(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/campaigns/page-082ed12c46fcb478.js: */let l=(0,a(19596).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 00 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);var i=a(86655),o=a(54741),d=a(90747),c=a(88151),u=a(66120),f=a(66801),m=a(38137),h=a(28314);function p(e){let{open:t,onOpenChange:a,onSuccess:s}=e,[n,l]=(0,i.useState)(!1),[p,x]=(0,i.useState)(null),[g,b]=(0,i.useState)([]),[v,y]=(0,i.useState)([]),[j,w]=(0,i.useState)(!1),[N,k]=(0,i.useState)({name:"",publisherId:"",flowId:"",status:"ACTIVE"});(0,i.useEffect)(()=>{t&&(k({name:"",publisherId:"",flowId:"",status:"ACTIVE"}),x(null),C())},[t]);letC=async()=>{w(!0);try{var e,t;if("true"===localStorage.getItem("demoMode"))b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]);else{let e=await h.x.get("/api/v1/publishers");(null===(t=e.data)||void 0===t?void 0:t.data)?b(e.data.data):b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}])}let a=await h.x.get("/api/v1/flows");(null===(e=a.data)||void 0===e?void 0:e.data)?y(a.data.data):y([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}catch(e){console.warn("Failedto load initial data, using mock data:",e),b([{id:"pub1",name:"Publisher 1",code:"PUB001"},{id:"pub2",name:"Publisher 2",code:"PUB002"}]),y([{id:"flow1",name:"Default Flow",version:1},{id:"flow2",name:"Holiday Flow",version:1}])}finally{w(!1)}},R=async()=>{if(!N.name.trim()){x("Campaign name isrequired");return}if(!N.publisherId){x("Publisher is required");return}l(!0),x(null);try{let t=await h.x.post("/api/v1/campaigns",{name:N.name.trim(),publisherId:N.publisherId,flowId:N.flowId||void 0,status:N.status});if(t.error){var e;if("NETWORK_ERROR"===t.error.code||(null===(e=t.error.message)||void 0===e?void 0:e.includes("Failed to fetch")))throw Error("Unable to connect to the server. Please make sure the API server is running.");throw Error(t.error.message||"Failed to create campaign")}t.data&&(null==s||s(),a(!1))}catch(t){let e=t instanceof Error?t.message:"Failed to create campaign";x(e),(e.includes("connect to the server")||e.includes("Failed to fetch"))&&alert("Cannot connect to the API server. Please make sure the backend is running on port 3001.")}finally{l(!1)}};return(0,r.jsx)(c.Vq,{open:t,onOpenChange:a,children:(0,r.jsxs)(c.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,r.jsxs)(c.fK,{children:[(0,r.jsx)(c.$N,{children:"Create New Campaign"}),(0,r.jsx)(c.Be,{children:"Create a new call campaign to manage your outbound calling operations."})]}),(0,r.jsx)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:j?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)(o.Z,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"name",children:"Campaign Name *"}),(0,r.jsx)(u.I,{id:"name",placeholder:"e.g., Summer Campaign 2024",value:N.name,onChange:e=>k({...N,name:e.target.value}),disabled:n})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"publisher",children:"Publisher *"}),(0,r.jsxs)(m.Ph,{value:N.publisherId||void 0,onValueChange:e=>k({...N,publisherId:e}),disabled:n||j,children:[(0,r.jsx)(m.i4,{id:"publisher",children:(0,r.jsx)(m.ki,{placeholder:"Select a publisher"})}),(0,r.jsx)(m.Bw,{children:0===g.length?(0,r.jsx)(m.Ql,{value:"no-publishers",disabled:!0,children:"No publishers available"}):g.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.name," (",e.code,")"]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"flow",children:"Flow (Optional)"}),(0,r.jsxs)(m.Ph,{value:N.flowId||void 0,onValueChange:e=>k({...N,flowId:e||""}),disabled:n||j,children:[(0,r.jsx)(m.i4,{id:"flow",children:(0,r.jsx)(m.ki,{placeholder:"Select a flow (optional)"})}),(0,r.jsx)(m.Bw,{children:0===v.length?(0,r.jsx)(m.Ql,{value:"no-flows",disabled:!0,children:"No flows available"}):v.map(e=>(0,r.jsxs)(m.Ql,{value:e.id,children:[e.name," (v",e.version,")"]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,r.jsxs)(m.Ph,{value:N.status,onValueChange:e=>k({...N,status:e}),disabled:n,children:[(0,r.jsx)(m.i4,{id:"status",children:(0,r.jsx)(m.ki,{})}),(0,r.jsxs)(m.Bw,{children:[(0,r.jsx)(m.Ql,{value:"ACTIVE",children:"Active"}),(0,r.jsx)(m.Ql,{value:"PAUSED",children:"Paused"})]})]})]}),p&&(0,r.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:p})]})}),(0,r.jsxs)(c.cN,{children:[(0,r.jsx)(d.z,{variant:"outline",onClick:()=>a(!1),disabled:n||j,children:"Cancel"}),(0,r.jsxs)(d.z,{onClick:R,disabled:n||j||!N.name.trim()||!N.publisherId,children:[n&&(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Campaign"]})]})]})})}var x=a(60044),g=a(30999),b=a(86190);let v=[{id:"1",name:"Summer Campaign",status:"active",flow:"Default Flow",calls:1234,asr:.65,createdAt:"2024-01-15"},{id:"2",name:"Winter Campaign",status:"paused",flow:"Holiday Flow",calls:567,asr:.58,createdAt:"2024-01-10"}];function y(){let[e,t]=(0,i.useState)(!1);return(0,r.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Campaigns"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your call campaigns and flows"})]}),(0,r.jsxs)(d.z,{onClick:()=>{t(!0)},children:[(0,r.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),"New Campaign"]})]}),(0,r.jsxs)(g.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,r.jsxs)(g.Ol,{className:"flex-shrink-0",children:[(0,r.jsx)(g.ll,{children:"Campaigns"}),(0,r.jsx)(g.SZ,{children:"View and manageall campaigns"})]}),(0,r.jsx)(g.aY,{className:"flex-1 overflow-y-auto min-h-0",children:(0,r.jsxs)(b.iA,{children:[(0,r.jsx)(b.xD,{children:(0,r.jsxs)(b.SC,{children:[(0,r.jsx)(b.ss,{children:"Name"}),(0,r.jsx)(b.ss,{children:"Status"}),(0,r.jsx)(b.ss,{children:"Flow"}),(0,r.jsx)(b.ss,{children:"Calls"}),(0,r.jsx)(b.ss,{children:"ASR"}),(0,r.jsx)(b.ss,{children:"Created"}),(0,r.jsx)(b.ss,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(b.RM,{children:v.map(e=>(0,r.jsxs)(b.SC,{children:[(0,r.jsx)(b.pj,{className:"font-medium",children:e.name}),(0,r.jsx)(b.pj,{children:(0,r.jsx)(x.C,{variant:"active"===e.status?"success":"secondary",children:e.status})}),(0,r.jsx)(b.pj,{children:e.flow}),(0,r.jsx)(b.pj,{children:e.calls.toLocaleString()}),(0,r.jsxs)(b.pj,{children:[(100*e.asr).toFixed(1),"%"]}),(0,r.jsx)(b.pj,{children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)(b.pj,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})}),(0,r.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,r.jsx)(l,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),(0,r.jsx)(p,{open:e,onOpenChange:t,onSuccess:()=>{window.location.reload()}})]})}},60044:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var r=a(91674),s=a(47828);a(86655);var n=a(33061);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...s})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(91674),s=a(32814),n=a(47828),l=a(86655),i=a(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},88151:function(e,t,a){"use strict";a.d(t,{$N:function(){return h},Be:function(){return p},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var r=a(91674),s=a(7472),n=a(77037),l=a(86655),i=a(33061);let o=s.fC;s.xz;let d=s.h_;s.x8;let c=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});c.displayName=s.aV.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[l,(0,r.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};m.displayName="DialogFooter";let h=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});h.displayName=s.Dx.displayName;let p=l.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});p.displayName=s.dk.displayName},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var r=a(91674),s=a(35974),n=a(86655),l=a(33061);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n})});i.displayName=s.f.displayName},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return p},Ph:function(){return c},Ql:function(){return x},i4:function(){return f},ki:function(){return u}});var r=a(91674),s=a(65485),n=a(50802),l=a(98371),i=a(72781),o=a(86655),d=a(33061);let c=s.fC;s.ZA;let u=s.B4,f=o.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,r.jsxs)(s.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[l,(0,r.jsx)(s.JO,{asChild:!0,children:(0,r.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let m=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let h=o.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(s.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:n,position:l="popper",...i}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsxs)(s.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(m,{}),(0,r.jsx)(s.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,r.jsx)(h,{})]})})});p.displayName=s.VY.displayName,o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})}).displayName=s.__.displayName;let x=o.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,r.jsxs)(s.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(s.eT,{children:n})]})});x.displayName=s.ck.displayName,o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)(s.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=s.Z0.displayName},86190:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var r=a(91674),s=a(86655),n=a(33061);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return s}});class r{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),a=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new r},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return d},un:function(){return l},xG:function(){return i}});var r=a(44115),s=a(38352);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,r.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(a,":").concat(String(r).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},54741:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/flows/page-30b598e10845117f.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7416],{51235:function(e,t,a){Promise.resolve().then(a.bind(a,4550))},4550:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var r=a(91674),n=a(28814),o=a(16728),l=a(54741),s=a(24341),i=a(30588),d=a(86655);a(10026);var c=a(95807),u=a(4458),m=a(77914),p=a(51436),f=a(6481),h=a(40100),g=a(57197),x=a(4608),v=a(80317),y=a(47791),b=a(95902),w=a(33061);let N={entry:c.Z,ivr:u.Z,if:m.Z,queue:p.Z,buyer:f.Z,record:h.Z,tag:g.Z,whisper:x.Z,timeout:v.Z,fallback:y.Z,hangup:b.Z},j={entry:"bg-[#00D084]",ivr:"bg-[#1E3A5F]",if:"bg-[#FF6B35]",queue:"bg-[#1E3A5F]",buyer:"bg-[#FF6B35]",record:"bg-[#00D084]",tag:"bg-[#1E3A5F]",whisper:"bg-[#00D084]",timeout:"bg-gray-500",fallback:"bg-[#FF6B35]",hangup:"bg-slate-500"};function k(e){let{data:t,selected:a}=e,l=t.nodeType||"entry",s=N[l]||c.Z,i=j[l]||"bg-gray-500";return(0,r.jsxs)("div",{className:(0,w.cn)("rounded-lg border-2 bg-card p-4shadow-md transition-all",a?"border-primary shadow-lg":"border-border"),children:[(0,r.jsx)(n.HH,{type:"target",position:o.Ly.Top,className:"!bg-primary"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:(0,w.cn)("flex h-10 w-10 items-center justify-center rounded",i),children:(0,r.jsx)(s,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:t.label}),t.config&&Object.keys(t.config).length>0&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:function(e,t){switch(e){case"entry":return t.target?"→ ".concat(t.target):"No target";case"ivr":return t.prompt?"Prompt: ".concat(String(t.prompt).substring(0,20),"..."):"No prompt";case"if":return t.condition?"If: ".concat(String(t.condition).substring(0,20),"..."):"No condition";case"queue":return t.queueId?"Queue:".concat(t.queueId):"No queue";case"buyer":return t.strategy?"Strategy: ".concat(t.strategy):"No strategy";case"record":return t.format?"Format: ".concat(t.format):"No format";case"tag":return t.tags?"".concat(Object.keys(t.tags).length," tags"):"No tags";case"whisper":return t.callerPrompt?"Whisper configured":"No prompts";case"timeout":return t.duration?"".concat(t.duration,"s"):"0s";case"fallback":return t.targets?"".concat(t.targets.length," targets"):"No targets";case"hangup":return t.reason?"Reason: ".concat(t.reason):"Normal";default:return""}}(l,t.config)})]})]}),(0,r.jsx)(n.HH,{type:"source",position:o.Ly.Bottom,className:"!bg-primary"})]})}var C=a(5814),E=a(90747);function F(e){var t,a,n;let{edge:o,onUpdate:l,onDelete:s}=e,i=(null===(t=o.data)||void 0===t?void 0:t.condition)||"",d=null!==(n=null===(a=o.data)||void 0===a?void 0:a.weight)&&void 0!==n?n:void 0;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Edge Configuration"}),s&&(0,r.jsx)(E.z,{onClick:()=>s(o.id),variant:"destructive",size:"sm",children:(0,r.jsx)(C.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["From: ",o.source," → To: ",o.target]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Condition"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>l(o.id,{...o.data,condition:e.target.value}),className:"w-full rounded border px-2 py-1",placeholder:"e.g., '1' for IVR choice, 'true' for if-then, 'connected' for queue"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Condition expression for routing (e.g., DTMF digit, event type, or boolean)"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Weight (Priority)"}),(0,r.jsx)("input",{type:"number",value:null!=d?d:"",onChange:e=>l(o.id,{...o.data,weight:e.target.value?parseInt(e.target.value):void 0}),className:"w-full rounded border px-2 py-1",placeholder:"Higher weight = higher priority"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Used for weighted routing and priority ordering"})]})]})}class Z{serializeToFlow(e,t,a,r,n){var o,l,s;let i=e.find(e=>"entry"===e.type);if(!i)throw Error("Flow must have an entry node");let d=new Map;e.forEach(e=>{d.set(e.id,e)});let c=new Map;t.forEach(e=>{var t,a;c.has(e.source)||c.set(e.source,[]),c.get(e.source).push({target:e.target,condition:null===(t=e.data)||void 0===t?void 0:t.condition,weight:null===(a=e.data)||void 0===a?void 0:a.weight})});let u=e.filter(e=>"entry"!==e.type).map(e=>this.convertNodeToFlowNode(e,c)),m=null===(o=i.data.config)||void 0===o?void 0:o.target,p=c.get(i.id)||[],f=m||(null===(l=p[0])||void 0===l?void 0:l.target)||(null===(s=u[0])||void 0===s?void 0:s.id)||"",h={id:i.id,type:"entry",target:f};return{id:n||"flow-".concat(Date.now()),name:a,version:r,entry:h,nodes:u}}convertNodeToFlowNode(e,t){var a,r,n,o,l;let s=e.data.config||{},i=t.get(e.id)||[],d=null===(a=i[0])||void 0===a?void 0:a.target;switch(e.type){case"ivr":{let t=i.filter(e=>e.condition).map(e=>({digits:e.condition||"",target:e.target}));return{id:e.id,type:"ivr",prompt:s.prompt||"",timeout:s.timeout||void 0,maxDigits:s.maxDigits||void 0,finishOnKey:s.finishOnKey||void 0,choices:t,default:(null===(r=i.find(e=>!e.condition))||void 0===r?void 0:r.target)||s.default,...d?{next:d}:{}}}case"if":{let t=i.find(e=>"true"===e.condition||1===e.weight),a=i.find(e=>"false"===e.condition||0===e.weight);return{id:e.id,type:"if",condition:s.condition||"",then:(null==t?void 0:t.target)||s.then||"",else:(null==a?void 0:a.target)||s.else||void 0}}case"queue":{let t=i.find(e=>"connected"===e.condition),a=i.find(e=>"timeout"===e.condition),r=i.find(e=>"full"===e.condition);return{id:e.id,type:"queue",queueId:s.queueId||"",waitUrl:s.waitUrl||void 0,timeout:s.timeout||void 0,maxSize:s.maxSize||void 0,onTimeout:(null==a?void 0:a.target)||s.onTimeout||void 0,onFull:(null==r?void 0:r.target)||s.onFull||void 0,onConnect:(null==t?void 0:t.target)||s.onConnect||void 0}}case"buyer":return{id:e.id,type:"buyer",buyers:s.buyers||[],strategy:s.strategy||"round-robin",onNoBuyers:(null===(n=i.find(e=>"no-buyers"===e.condition))||void 0===n?void 0:n.target)||s.onNoBuyers||void 0,onAllBusy:(null===(o=i.find(e=>"all-busy"===e.condition))||void 0===o?void 0:o.target)||s.onAllBusy||void 0,...d?{next:d}:{}};case"record":{let t=i.find(e=>"complete"===e.condition),a=i.find(e=>"error"===e.condition);return{id:e.id,type:"record",format:s.format||"wav",channels:s.channels||"dual",beep:s.beep||!1,onComplete:(null==t?void 0:t.target)||s.onComplete||void 0,onError:(null==a?void 0:a.target)||s.onError||void 0}}case"tag":return{id:e.id,type:"tag",tags:s.tags||{},...d?{next:d}:{}};case"whisper":{let t=i.find(e=>"accept"===e.condition),a=i.find(e=>"reject"===e.condition);return{id:e.id,type:"whisper",callerPrompt:s.callerPrompt||void 0,calleePrompt:s.calleePrompt||void 0,onAccept:(null==t?void 0:t.target)||s.onAccept||void 0,onReject:(null==a?void 0:a.target)||s.onReject||void 0,timeout:s.timeout||void 0}}case"timeout":return{id:e.id,type:"timeout",duration:s.duration||0,...d?{next:d}:{}};case"fallback":{let t=i.map(e=>e.target);return{id:e.id,type:"fallback",targets:t.length>0?t:s.targets||[],onAllFailed:(null===(l=i.find(e=>"all-failed"===e.condition))||void 0===l?void 0:l.target)||s.onAllFailed||void 0}}case"hangup":return{id:e.id,type:"hangup",reason:s.reason||"normal"};default:throw Error("Unknown node type: ".concat(e.type))}}deserializeFromFlow(e){let t=[],a=[],r={id:e.entry.id,type:"entry",position:{x:250,y:100},data:{label:"Entry",nodeType:"entry",config:{target:e.entry.target}}};t.push(r),e.entry.target&&a.push({id:"edge-".concat(e.entry.id,"-").concat(e.entry.target),source:e.entry.id,target:e.entry.target,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});let n=new Map;return e.nodes.forEach((e,r)=>{let o={x:250+r%3*300,y:200+150*Math.floor(r/3)};n.set(e.id,o);let l=this.convertFlowNodeToNode(e,o);t.push(l),this.createEdgesFromFlowNode(e,a)}),{nodes:t,edges:a}}convertFlowNodeToNode(e,t){let a={id:e.id,type:e.type,position:t,data:{label:e.type.charAt(0).toUpperCase()+e.type.slice(1),nodeType:e.type,config:{}}};switch(e.type){case"ivr":a.data.config={prompt:e.prompt,timeout:e.timeout,maxDigits:e.maxDigits,finishOnKey:e.finishOnKey,default:e.default};break;case"if":a.data.config={condition:e.condition,then:e.then,else:e.else};break;case"queue":a.data.config={queueId:e.queueId,waitUrl:e.waitUrl,timeout:e.timeout,maxSize:e.maxSize,onTimeout:e.onTimeout,onFull:e.onFull,onConnect:e.onConnect};break;case"buyer":a.data.config={buyers:e.buyers,strategy:e.strategy,onNoBuyers:e.onNoBuyers,onAllBusy:e.onAllBusy};break;case"record":a.data.config={format:e.format,channels:e.channels,beep:e.beep,onComplete:e.onComplete,onError:e.onError};break;case"tag":a.data.config={tags:e.tags};break;case"whisper":a.data.config={callerPrompt:e.callerPrompt,calleePrompt:e.calleePrompt,onAccept:e.onAccept,onReject:e.onReject,timeout:e.timeout};break;case"timeout":a.data.config={duration:e.duration};break;case"fallback":a.data.config={targets:e.targets,onAllFailed:e.onAllFailed};break;case"hangup":a.data.config={reason:e.reason}}return a}createEdgesFromFlowNode(e,t){switch(e.type){case"ivr":e.choices&&e.choices.forEach((a,r)=>{t.push({id:"edge-".concat(e.id,"-").concat(a.target,"-").concat(r),source:e.id,target:a.target,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:a.digits}})}),e.default&&t.push({id:"edge-".concat(e.id,"-").concat(e.default,"-default"),source:e.id,target:e.default,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}}),"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});break;case"if":e.then&&t.push({id:"edge-".concat(e.id,"-").concat(e.then,"-then"),source:e.id,target:e.then,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"true"}}),e.else&&t.push({id:"edge-".concat(e.id,"-").concat(e.else,"-else"),source:e.id,target:e.else,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"false"}});break;case"queue":e.onConnect&&t.push({id:"edge-".concat(e.id,"-").concat(e.onConnect,"-connect"),source:e.id,target:e.onConnect,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"connected"}}),e.onTimeout&&t.push({id:"edge-".concat(e.id,"-").concat(e.onTimeout,"-timeout"),source:e.id,target:e.onTimeout,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"timeout"}}),e.onFull&&t.push({id:"edge-".concat(e.id,"-").concat(e.onFull,"-full"),source:e.id,target:e.onFull,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"full"}});break;case"buyer":"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}}),e.onNoBuyers&&t.push({id:"edge-".concat(e.id,"-").concat(e.onNoBuyers,"-no-buyers"),source:e.id,target:e.onNoBuyers,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"no-buyers"}}),e.onAllBusy&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAllBusy,"-all-busy"),source:e.id,target:e.onAllBusy,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"all-busy"}});break;case"record":e.onComplete&&t.push({id:"edge-".concat(e.id,"-").concat(e.onComplete,"-complete"),source:e.id,target:e.onComplete,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"complete"}}),e.onError&&t.push({id:"edge-".concat(e.id,"-").concat(e.onError,"-error"),source:e.id,target:e.onError,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"error"}});break;case"tag":case"timeout":"next"in e&&e.next&&t.push({id:"edge-".concat(e.id,"-").concat(e.next,"-next"),source:e.id,target:e.next,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}});break;case"whisper":e.onAccept&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAccept,"-accept"),source:e.id,target:e.onAccept,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"accept"}}),e.onReject&&t.push({id:"edge-".concat(e.id,"-").concat(e.onReject,"-reject"),source:e.id,target:e.onReject,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"reject"}});break;case"fallback":e.targets&&e.targets.forEach((a,r)=>{t.push({id:"edge-".concat(e.id,"-").concat(a,"-").concat(r),source:e.id,target:a,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}})}),e.onAllFailed&&t.push({id:"edge-".concat(e.id,"-").concat(e.onAllFailed,"-all-failed"),source:e.id,target:e.onAllFailed,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed},data:{condition:"all-failed"}})}}}var A=a(77037),S=a(30999);function T(e){let{nodes:t,edges:a,onClose:n}=e,[o,l]=(0,d.useState)(!1),[s,i]=(0,d.useState)({currentNodeId:null,path:[],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[]}),u=(0,d.useMemo)(()=>t.find(e=>"entry"===e.type),[t]),m=(0,d.useMemo)(()=>{let e=new Map;return t.forEach(t=>e.set(t.id,t)),e},[t]),p=(0,d.useMemo)(()=>{let e=new Map;returna.forEach(t=>{e.has(t.source)||e.set(t.source,[]),e.get(t.source).push(t)}),e},[a]),f=(0,d.useCallback)(()=>{var e,t;if(!u){alert("No entry node found");return}let r=(null===(e=u.data.config)||void 0===e?void 0:e.target)||(null===(t=a.find(e=>e.source===u.id))||void 0===t?void 0:t.target);if(!r){alert("No target node found from entry");return}l(!0),i({currentNodeId:r,path:[u.id,r],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[{type:"call.started",timestamp:new Date().toISOString(),data:{from:"+1234567890",to:"+0987654321"}}]})},[u,a]),h=(0,d.useCallback)((e,t)=>{if(!s.currentNodeId)return;let a=m.get(s.currentNodeId);if(!a)return;let r=[...s.events,{type:e,timestamp:newDate().toISOString(),data:t}],n=function(e,t,a,r,n){var o,l,s,i,d,c;let u=r.get(e.id)||[],m=e.data.config||{};switch(e.type){case"ivr":if("dtmf.received"===t){let e=(null==a?void 0:a.digits)||"",t=u.find(t=>{var a;return(null===(a=t.data)||void 0===a?void 0:a.condition)===e});return(null==t?void 0:t.target)||m.default||null}break;case"if":{let e=function(e,t){try{let a=e;if((a=(a=a.replace(/\$\{caller\.number\}/g,"'+1234567890'")).replace(/\$\{hour\}/g,String(t.hour||12))).includes("==")){let[e,t]=a.split("==").map(e=>e.trim());return e===t}if(a.includes(">=")){let[e,t]=a.split(">=").map(e=>parseInt(e.trim()));return e>=t}return!1}catch(e){return!1}}(m.condition||"",n),t=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="true"}),a=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="false"});return e?(null==t?void 0:t.target)||m.then||null:(null==a?void 0:a.target)||m.else||null}case"queue":if("queue.connected"===t)return m.onConnect||(null===(o=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="connected"}))||void 0===o?void 0:o.target)||null;if("queue.timeout"===t)return m.onTimeout||(null===(l=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="timeout"}))||void 0===l?void 0:l.target)||null;break;case"whisper":if("whisper.accepted"===t)return m.onAccept||(null===(s=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="accept"}))||void 0===s?void 0:s.target)||null;if("whisper.rejected"===t)return m.onReject||(null===(i=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void0:t.condition)==="reject"}))||void 0===i?void 0:i.target)||null;break;case"record":if("recording.completed"===t)return m.onComplete||(null===(d=u.find(e=>{var t;return(null===(t=e.data)||void 0===t?void 0:t.condition)==="complete"}))||void 0===d?void 0:d.target)||null;break;default:return(null===(c=u[0])||void 0===c?void 0:c.target)||m.next||null}return null}(a,e,t,p,s.variables);n?i({...s,currentNodeId:n,path:[...s.path,n],events:r}):i({...s,events:r})},[s,m,p]),g=(0,d.useCallback)(()=>{l(!1),i({currentNodeId:null,path:[],variables:{caller:{number:"+1234567890"},callee:{number:"+0987654321"},hour:new Date().getHours()},events:[]})},[]),x=s.currentNodeId?m.get(s.currentNodeId):null;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,r.jsxs)(S.Zb,{className:"w-full max-w-4xl p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Flow Simulator"}),(0,r.jsx)(E.z,{variant:"ghost",size:"sm",onClick:n,children:(0,r.jsx)(A.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(E.z,{onClick:f,disabled:o,children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Start Simulation"]}),(0,r.jsxs)(E.z,{onClick:g,variant:"outline",children:[(0,r.jsx)(y.Z,{className:"mr-2 h-4 w-4"}),"Reset"]})]}),x&&(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsxs)("div",{className:"font-semibold",children:["Current Node: ",x.data.label]}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["ID: ",x.id]}),(0,r.jsxs)("div",{className:"mt-2 text-sm",children:["Type: ",x.type]})]}),(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Execution Path"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:s.path.map((e,t)=>{let a=m.get(e);return(0,r.jsxs)("div",{className:"rounded px-2 py-1 text-xs ".concat(e===s.currentNodeId?"bg-primary text-primary-foreground":"bg-background"),children:[(null==a?void 0:a.data.label)||e,t<s.path.length-1&&(0,r.jsx)("span",{className:"ml-2",children:"→"})]},t)})})]}),x&&(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Inject Event"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:(function(e){switch(e){case"ivr":return["dtmf.received","call.ended"];case"queue":return["queue.connected","queue.timeout","call.ended"];case"whisper":return["whisper.accepted","whisper.rejected","call.ended"];case"record":return["recording.completed","call.ended"];default:return["call.answered","call.ended"]}})(x.type).map(e=>(0,r.jsx)(E.z,{size:"sm",variant:"outline",onClick:()=>h(e),children:e},e))})]}),(0,r.jsxs)("div",{className:"rounded border bg-muted p-4",children:[(0,r.jsx)("div",{className:"mb-2 font-semibold",children:"Events"}),(0,r.jsx)("div",{className:"max-h-48 space-y-1 overflow-y-auto",children:s.events.map((e,t)=>(0,r.jsxs)("div",{className:"text-xs",children:[(0,r.jsx)("span",{className:"font-mono text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()}),": ",(0,r.jsx)("span",{className:"font-semibold",children:e.type}),e.data&&(0,r.jsx)("span",{className:"ml-2 text-muted-foreground",children:JSON.stringify(e.data)})]},t))})]})]})]})})}let R=[{type:"entry",label:"Entry",icon:c.Z,color:"bg-[#00D084]"},{type:"ivr",label:"IVR",icon:u.Z,color:"bg-[#1E3A5F]"},{type:"if",label:"If",icon:m.Z,color:"bg-[#FF6B35]"},{type:"queue",label:"Queue",icon:p.Z,color:"bg-[#1E3A5F]"},{type:"buyer",label:"Buyer",icon:f.Z,color:"bg-[#FF6B35]"},{type:"record",label:"Record",icon:h.Z,color:"bg-[#00D084]"},{type:"tag",label:"Tag",icon:g.Z,color:"bg-[#1E3A5F]"},{type:"whisper",label:"Whisper",icon:x.Z,color:"bg-[#00D084]"},{type:"timeout",label:"Timeout",icon:v.Z,color:"bg-gray-500"},{type:"fallback",label:"Fallback",icon:y.Z,color:"bg-[#FF6B35]"},{type:"hangup",label:"Hangup",icon:b.Z,color:"bg-slate-500"}];function D(e){let{onAddNode:t}=e,a=(0,d.useCallback)((e,t)=>{e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"},[]);return(0,r.jsxs)("div",{className:"w-64 border-r bg-card flex flex-col overflow-hidden flex-shrink-0 h-full",children:[(0,r.jsx)("div",{className:"p-4 flex-shrink-0",children:(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Node Palette"})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4 pt-0",children:(0,r.jsx)("div",{className:"space-y-2",children:R.map(e=>(0,r.jsxs)("div",{draggable:!0,onDragStart:t=>a(t,e.type),className:(0,w.cn)("flex cursor-grab items-center gap-3 rounded-lg border p-3 transition-colors hover:bg-accent","active:cursor-grabbing"),children:[(0,r.jsx)("div",{className:(0,w.cn)("flex h-8 w-8 items-center justify-center rounded",e.color),children:(0,r.jsx)(e.icon,{className:"h-4 w-4 text-white"})}),(0,r.jsx)("span",{className:"font-medium",children:e.label})]},e.type))})})]})}var I=a(66801),q=a(38137),z=a(28314);let B={entry:k,ivr:k,if:k,queue:k,buyer:k,record:k,tag:k,whisper:k,timeout:k,fallback:k,hangup:k},P=[{id:"entry-1",type:"entry",position:{x:250,y:100},data:{label:"Entry",nodeType:"entry",config:{}}}],O=[];function Q(){let e=(0,d.useRef)(null),[t,a,c]=(0,n.Rr)(P),[u,m,p]=(0,n.ll)(O),[f,h]=(0,d.useState)(null),[g,x]=(0,d.useState)(null),[v,y]=(0,d.useState)("New Flow"),[b,w]=(0,d.useState)("1.0.0"),[N,j]=(0,d.useState)(null),[k,C]=(0,d.useState)(!1),[A,S]=(0,d.useState)([]),[R,Q]=(0,d.useState)(null),[_,M]=(0,d.useState)(!1),[V,H]=(0,d.useState)(!1),K=(0,d.useCallback)(e=>{m(t=>(0,o.Z_)({...e,type:"smoothstep",animated:!0,markerEnd:{type:o.QZ.ArrowClosed}},t))},[m]),L=(0,d.useCallback)((e,t)=>{h(t),x(null)},[]),J=(0,d.useCallback)((e,t)=>{x(t),h(null)},[]),W=(0,d.useCallback)(()=>{h(null),x(null)},[]),$=(0,d.useCallback)((e,t)=>{let r={id:"".concat(e,"-").concat(Date.now()),type:e,position:t,data:{label:e.charAt(0).toUpperCase()+e.slice(1),nodeType:e,config:function(e){switch(e){case"entry":return{target:""};case"ivr":return{prompt:"",timeout:10,maxDigits:1,choices:[],default:""};case"if":return{condition:"",then:"",else:""};case"queue":return{queueId:"",timeout:60};case"buyer":return{buyers:[],strategy:"round-robin"};case"record":return{format:"wav",channels:"dual",beep:!1};case"tag":return{tags:{}};case"whisper":return{callerPrompt:"",calleePrompt:"",timeout:10};case"timeout":return{duration:0};case"fallback":return{targets:[]};case"hangup":return{reason:"normal"};default:return{}}}(e)}};a(e=>[...e,r])},[a]),G=(0,d.useCallback)(t=>{t.preventDefault();let a=t.dataTransfer.getData("application/reactflow");if(!a||!e.current)return;let r=e.current.getBoundingClientRect();$(a,{x:t.clientX-r.left,y:t.clientY-r.top})},[$]),Y=(0,d.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),X=(0,d.useCallback)((e,t)=>{a(a=>a.map(a=>a.id===e?{...a,data:{...a.data,config:t}}:a))},[a]),ee=(0,d.useCallback)((e,t)=>{m(a=>a.map(a=>a.id===e?{...a,data:{...a.data,...t}}:a))},[m]),et=(0,d.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e)),m(t=>t.filter(t=>t.source!==e&&t.target!==e)),(null==f?void 0:f.id)===e&&h(null)},[a,m,f]),ea=(0,d.useCallback)(e=>{m(t=>t.filter(t=>t.id!==e)),(null==g?void 0:g.id)===e&&x(null)},[m,g]);(0,d.useEffect)(()=>{er()},[]);let er=async()=>{M(!0);try{var e;let t=await z.x.get("/api/v1/flows");(null===(e=t.data)||void 0===e?void 0:e.data)&&S(t.data.data)}catch(e){console.error("Failed to load flows:",e)}finally{M(!1)}},en=async(e,t)=>{M(!0);try{var r,n;let o=t?"/api/v1/flows/".concat(e,"/versions/").concat(t):"/api/v1/flows/".concat(e),l=await z.x.get(o);if(null===(r=l.data)||void 0===r?void 0:r.flow){let{nodes:t,edges:r}=new Z().deserializeFromFlow(l.data.flow);a(t),m(r),j(l.data.flowId),y(l.data.flow.name||"Unnamed Flow"),w(l.data.version),Q(e)}else alert("Error: ".concat((null===(n=l.error)||void 0===n?void 0:n.message)||"Failed to load flow"))}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to load flow"))}finally{M(!1)}},eo=()=>{a(P),m([]),j(null),y("New Flow"),w("1.0.0"),Q(null)},el=(0,d.useCallback)(async()=>{if(!v.trim()){alert("Please enter a flow name");return}H(!0);let e=new Z().serializeToFlow(t,u,v,b,N);try{let t=await z.x.post("/api/v1/flows",e);if(t.data)j(t.data.flowId),Q(t.data.flowId),await er(),alert("Flow saved successfully!");else{var a;alert("Error: ".concat((null===(a=t.error)||void 0===a?void 0:a.message)||"Failed to save flow"))}}catch(e){alert("Error: ".concat(e instanceof Error?e.message:"Failed to save flow"))}finally{H(!1)}},[t,u,v,b,N]),es=(0,d.useCallback)(()=>{let e=new Z().serializeToFlow(t,u,v,b,N),a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="".concat(v,"-").concat(b,".json"),n.click(),URL.revokeObjectURL(r)},[t,u,v,b,N]);return(0,r.jsx)(n.tV,{children:(0,r.jsxs)("div",{className:"flex h-full w-full flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b bg-card px-3 py-2 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,r.jsx)("h1",{className:"text-lg font-bold whitespace-nowrap",children:"Flow Builder"}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(I._,{htmlFor:"flow-select",className:"text-xs whitespace-nowrap",children:"Flow:"}),(0,r.jsxs)(q.Ph,{value:R||"new",onValueChange:e=>{"new"===e?eo():en(e)},disabled:_,children:[(0,r.jsx)(q.i4,{id:"flow-select",className:"w-48 h-8 text-sm",children:(0,r.jsx)(q.ki,{placeholder:"Select a flow"})}),(0,r.jsxs)(q.Bw,{children:[(0,r.jsx)(q.Ql,{value:"new",children:"+ New Flow"}),A.map(e=>(0,r.jsxs)(q.Ql,{value:e.id,children:[e.name||e.id," ",e.publishedVersion?"(v".concat(e.publishedVersion,")"):""]},e.id))]})]})]}),(0,r.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),className:"rounded border px-2 py-1 h-8 text-sm w-40",placeholder:"Flow Name"}),(0,r.jsx)("input",{type:"text",value:b,onChange:e=>w(e.target.value),className:"rounded border px-2 py-1 h-8 w-20 text-sm",placeholder:"Version"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(0,r.jsxs)(E.z,{onClick:el,variant:"default",disabled:V||_,size:"sm",className:"h-8",children:[V?(0,r.jsx)(l.Z,{className:"mr-1.5 h-3.5 w-3.5 animate-spin"}):(0,r.jsx)(s.Z,{className:"mr-1.5 h-3.5 w-3.5"}),"Save"]}),(0,r.jsxs)(E.z,{onClick:es,variant:"outline",disabled:_,size:"sm",className:"h-8",children:[(0,r.jsx)(i.Z,{className:"mr-1.5 h-3.5 w-3.5"}),"Export"]}),(0,r.jsx)(E.z,{onClick:()=>C(!k),variant:"outline",size:"sm",className:"h-8",children:"Simulator"})]})]}),(0,r.jsxs)("div",{className:"flex flex-1 overflow-hidden min-h-0",children:[(0,r.jsx)(D,{onAddNode:$}),(0,r.jsx)("div",{className:"relative flex-1 min-w-0 h-full",ref:e,onDrop:G,onDragOver:Y,children:(0,r.jsxs)(n.x$,{nodes:t,edges:u,onNodesChange:c,onEdgesChange:p,onConnect:K,onNodeClick:L,onEdgeClick:J,onPaneClick:W,nodeTypes:B,fitView:!0,className:"h-full w-full",children:[(0,r.jsx)(n.Aq,{}),(0,r.jsx)(n.ZX,{}),(0,r.jsx)(n.a9,{})]})}),(0,r.jsx)("div",{className:"w-80 border-l bg-card p-4 overflow-y-auto flex-shrink-0 h-full",children:f?(0,r.jsx)(U,{node:f,onUpdate:X,onDelete:et}):g?(0,r.jsx)(F,{edge:g,onUpdate:ee,onDelete:ea}):(0,r.jsx)("div",{className:"text-muted-foreground",children:"Select a node or edge to configure"})})]}),k&&(0,r.jsx)(T,{nodes:t,edges:u,onClose:()=>C(!1)})]})})}function U(e){let{node:t,onUpdate:a,onDelete:n}=e,o=t.data.config||{};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:t.data.label}),(0,r.jsx)(E.z,{onClick:()=>n(t.id),variant:"destructive",size:"sm",children:"Delete"})]}),(0,r.jsx)(_,{nodeType:t.data.nodeType,config:o,onChange:(e,r)=>{a(t.id,{...o,[e]:r})}})]})}function _(e){let{nodeType:t,config:a,onChange:n}=e;switch(t){case"entry":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Target Node ID"}),(0,r.jsx)("input",{type:"text",value:a.target||"",onChange:e=>n("target",e.target.value),className:"w-full rounded border px-2 py-1"})]});case"ivr":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Prompt"}),(0,r.jsx)("input",{type:"text",value:a.prompt||"",onChange:e=>n("prompt",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:"Audio URL or text"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.timeout||10,onChange:e=>n("timeout",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Max Digits"}),(0,r.jsx)("input",{type:"number",value:a.maxDigits||1,onChange:e=>n("maxDigits",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"if":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Condition"}),(0,r.jsx)("textarea",{value:a.condition||"",onChange:e=>n("condition",e.target.value),className:"w-full rounded border px-2 py-1",placeholder:'e.g., ${caller.number == "+1234567890"}',rows:3})]});case"queue":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Queue ID"}),(0,r.jsx)("input",{type:"text",value:a.queueId||"",onChange:e=>n("queueId",e.target.value),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Timeout (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.timeout||60,onChange:e=>n("timeout",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"buyer":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Strategy"}),(0,r.jsxs)("select",{value:a.strategy||"round-robin",onChange:e=>n("strategy",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"round-robin",children:"Round Robin"}),(0,r.jsx)("option",{value:"weighted",children:"Weighted"}),(0,r.jsx)("option",{value:"least-calls",children:"Least Calls"})]})]});case"record":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Format"}),(0,r.jsxs)("select",{value:a.format||"wav",onChange:e=>n("format",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"wav",children:"WAV"}),(0,r.jsx)("option",{value:"mp3",children:"MP3"})]})]});case"tag":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Tags (JSON)"}),(0,r.jsx)("textarea",{value:JSON.stringify(a.tags||{},null,2),onChange:e=>{try{n("tags",JSON.parse(e.target.value))}catch(e){}},className:"w-full rounded border px-2 py-1 font-mono text-xs",rows:5})]});case"whisper":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Caller Prompt"}),(0,r.jsx)("input",{type:"text",value:a.callerPrompt||"",onChange:e=>n("callerPrompt",e.target.value),className:"w-full rounded border px-2 py-1"}),(0,r.jsx)("label",{className:"text-sm font-medium",children:"Callee Prompt"}),(0,r.jsx)("input",{type:"text",value:a.calleePrompt||"",onChange:e=>n("calleePrompt",e.target.value),className:"w-full rounded border px-2 py-1"})]});case"timeout":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Duration (seconds)"}),(0,r.jsx)("input",{type:"number",value:a.duration||0,onChange:e=>n("duration",parseInt(e.target.value)),className:"w-full rounded border px-2 py-1"})]});case"fallback":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Target Node IDs (comma-separated)"}),(0,r.jsx)("input",{type:"text",value:(a.targets||[]).join(", "),onChange:e=>n("targets",e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),className:"w-full rounded border px-2 py-1"})]});case"hangup":return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Reason"}),(0,r.jsxs)("select",{value:a.reason||"normal",onChange:e=>n("reason",e.target.value),className:"w-full rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"normal",children:"Normal"}),(0,r.jsx)("option",{value:"busy",children:"Busy"}),(0,r.jsx)("option",{value:"rejected",children:"Rejected"}),(0,r.jsx)("option",{value:"timeout",children:"Timeout"}),(0,r.jsx)("option",{value:"error",children:"Error"})]})]});default:return(0,r.jsx)("div",{children:"No configuration available"})}}function M(){return(0,r.jsx)("div",{className:"h-full w-full -m-6",children:(0,r.jsx)(Q,{})})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var r=a(91674),n=a(32814),o=a(47828),l=a(86655),s=a(33061);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:o,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,s.cn)(i({variant:o,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return s},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return i}});var r=a(91674),n=a(86655),o=a(33061);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let s=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...n})});s.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){returns}});var r=a(91674),n=a(35974),o=a(86655),l=a(33061);let s=o.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...o})});s.displayName=n.f.displayName},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return g},i4:function(){return m},ki:function(){return u}});var r=a(91674),n=a(65485),o=a(50802),l=a(98371),s=a(72781),i=a(86655),d=a(33061);let c=n.fC;n.ZA;let u=n.B4,m=i.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,r.jsxs)(n.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[l,(0,r.jsx)(n.JO,{asChild:!0,children:(0,r.jsx)(o.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.xz.displayName;let p=i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...o,children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})});p.displayName=n.u_.displayName;let f=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})});f.displayName=n.$G.displayName;let h=i.forwardRef((e,t)=>{let{className:a,children:o,position:l="popper",...s}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsxs)(n.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...s,children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.l_,{className:(0,d.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,r.jsx)(f,{})]})})});h.displayName=n.VY.displayName,i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...o})}).displayName=n.__.displayName;let g=i.forwardRef((e,t)=>{let{className:a,children:o,...l}=e;return(0,r.jsxs)(n.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.wU,{children:(0,r.jsx)(s.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(n.eT,{children:o})]})});g.displayName=n.ck.displayName,i.forwardRef((e,t)=>{let{className:a,...o}=e;return(0,r.jsx)(n.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...o})}).displayName=n.Z0.displayName},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return n}});class r{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){lett=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),r=localStorage.getItem("demoTenantId");a&&r&&(t.headers={...t.headers,"X-Demo-Tenant-Id":r});let n="".concat(this.baseUrl).concat(e),o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization="Bearer ".concat(this.token)),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(n,{...t,headers:o}),a=await e.json();if(!e.ok){var l,s;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(s=a.error)||void 0===s?void 0:s.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let n=new r},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return i},cn:function(){return o},p6:function(){return d},un:function(){return l},xG:function(){return s}});var r=a(44115),n=a(38352);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,r.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function i(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),r=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(a,":").concat(String(r).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[130,1856,7880,2546,802,8474,4395,4623,8700,1293,9997,1744],function(){return e(e.s=51235)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/billing/page-a0900e5c34202e7d.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8921],{8121:function(e,t,r){Promise.resolve().then(r.bind(r,88825))},88825:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(91674),s=r(54741),a=r(92277),i=r(92794),o=r(30588),l=r(86655),c=r(60044),d=r(90747),u=r(30999),f=r(86190),m=r(28314),x=r(33061);function h(){let[e,t]=(0,l.useState)([]),[r,h]=(0,l.useState)(null),[p,g]=(0,l.useState)(!0),[b,y]=(0,l.useState)(null),v=(0,l.useCallback)(async()=>{g(!0),y(null);try{let[e,r]=await Promise.all([m.x.get("/api/v1/billing/invoices"),m.x.get("/api/v1/billing/balance")]);e.data&&t(e.data.data||[]),r.data&&h(r.data)}catch(e){y(e instanceof Error?e.message:"Failed to load billing data")}finally{g(!1)}},[]);return((0,l.useEffect)(()=>{v()},[v]),p)?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Billing"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})})]}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Billing"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage invoices, balances, and payouts"})]}),b&&(0,n.jsx)(u.Zb,{children:(0,n.jsx)(u.aY,{className:"pt-6",children:(0,n.jsxs)("div",{className:"text-center text-destructive",children:["Error: ",b]})})}),r&&(0,n.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Available Balance"}),(0,n.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.available))})})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Pending"}),(0,n.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.pending))})})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(u.ll,{className:"text-sm font-medium",children:"Held"}),(0,n.jsx)(a.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:(0,x.xG)(parseFloat(r.held))})})]})]}),(0,n.jsxs)(u.Zb,{children:[(0,n.jsxs)(u.Ol,{children:[(0,n.jsx)(u.ll,{children:"Invoices"}),(0,n.jsx)(u.SZ,{children:"View and download your invoices"})]}),(0,n.jsx)(u.aY,{children:0===e.length?(0,n.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found"}):(0,n.jsxs)(f.iA,{children:[(0,n.jsx)(f.xD,{children:(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.ss,{children:"Invoice Number"}),(0,n.jsx)(f.ss,{children:"Period"}),(0,n.jsx)(f.ss,{children:"Amount"}),(0,n.jsx)(f.ss,{children:"Status"}),(0,n.jsx)(f.ss,{children:"Due Date"}),(0,n.jsx)(f.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(f.RM,{children:e.map(e=>(0,n.jsxs)(f.SC,{children:[(0,n.jsx)(f.pj,{className:"font-medium",children:e.invoiceNumber}),(0,n.jsxs)(f.pj,{children:[(0,x.p6)(e.period.start)," -",(0,x.p6)(e.period.end)]}),(0,n.jsx)(f.pj,{children:(0,x.xG)(parseFloat(e.total))}),(0,n.jsx)(f.pj,{children:(0,n.jsx)(c.C,{variant:"paid"===e.status?"success":"warning",children:e.status})}),(0,n.jsx)(f.pj,{children:(0,x.p6)(e.dueDate)}),(0,n.jsx)(f.pj,{className:"text-right",children:(0,n.jsx)(d.z,{variant:"ghost",size:"sm",children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(91674),s=r(47828);r(86655);var a=r(33061);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(91674),s=r(32814),a=r(47828),i=r(86655),o=r(33061);let l=(0,a.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,n.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var n=r(91674),s=r(86655),a=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,a.cn)("text-smtext-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return o}});var n=r(91674),s=r(86655),a=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...s})});o.displayName="TableHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...s})});l.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("th",{ref:t,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("td",{ref:t,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let s="".concat(this.baseUrl).concat(e),a={"Content-Type":"application/json",...t.headers};this.token&&(a.Authorization="Bearer ".concat(this.token)),this.apiKey&&(a["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:a}),r=await e.json();if(!e.ok){var i,o;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(o=r.error)||void 0===o?void 0:o.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){returnthis.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new n},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return a},p6:function(){return c},un:function(){return i},xG:function(){return o}});var n=r(44115),s=r(38352);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},19596:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(86655),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
/app/apps/web/.next/static/chunks/app/(dashboard)/numbers/page-f56fc061f4b4f3b5.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{93410:function(e,t,r){Promise.resolve().then(r.bind(r,9443))},9443:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(91674),s=r(30588),n=r(98548),i=r(89175),l=r(54741),o=r(86655),c=r(90747),d=r(55738),u=r(88151),f=r(66801),m=r(38137),h=r(28314);function x(e){var t,r,s,n;let{open:i,onOpenChange:x,numberId:p,number:v,currentStatus:g,currentCampaignId:j,currentCapabilities:b={},onSuccess:y}=e,[N,w]=(0,o.useState)(!1),[C,k]=(0,o.useState)(!1),[S,R]=(0,o.useState)(null),[_,E]=(0,o.useState)([]),[T,I]=(0,o.useState)({status:g.toUpperCase(),campaignId:j||"",capabilities:{voice:null===(t=b.voice)||void 0===t||t,sms:null!==(r=b.sms)&&void 0!==r&&r,mms:null!==(s=b.mms)&&void 0!==s&&s,fax:null!==(n=b.fax)&&void0!==n&&n}});(0,o.useEffect)(()=>{if(i){var e,t,r,a;I({status:g.toUpperCase(),campaignId:j||"",capabilities:{voice:null===(e=b.voice)||void 0===e||e,sms:null!==(t=b.sms)&&void 0!==t&&t,mms:null!==(r=b.mms)&&void 0!==r&&r,fax:null!==(a=b.fax)&&void 0!==a&&a}}),Z()}},[i,g,j,b]);let Z=async()=>{k(!0);try{var e;let t=await h.x.get("/api/v1/campaigns");(null===(e=t.data)||void 0===e?void 0:e.data)&&E(t.data.data)}catch(e){console.error("Failed to load campaigns:",e)}finally{k(!1)}},F=async()=>{w(!0),R(null);try{let e=await h.x.patch("/api/v1/numbers/".concat(p),{status:T.status,campaignId:T.campaignId||null,capabilities:T.capabilities});if(e.error)throw Error(e.error.message||"Failed to update number");e.data&&(null==y||y(),x(!1))}catch(e){R(e instanceof Error?e.message:"Failed to update number")}finally{w(!1)}};return(0,a.jsx)(u.Vq,{open:i,onOpenChange:x,children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(u.fK,{children:[(0,a.jsx)(u.$N,{children:"Edit Phone Number"}),(0,a.jsxs)(u.Be,{children:["Update settings for ",v]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"status",children:"Status"}),(0,a.jsxs)(m.Ph,{value:T.status,onValueChange:e=>I({...T,status:e}),disabled:N,children:[(0,a.jsx)(m.i4,{id:"status",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"ACTIVE",children:"Active"}),(0,a.jsx)(m.Ql,{value:"INACTIVE",children:"Inactive"}),(0,a.jsx)(m.Ql,{value:"SUSPENDED",children:"Suspended"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"campaign",children:"Campaign (Optional)"}),(0,a.jsxs)(m.Ph,{value:T.campaignId||void 0,onValueChange:e=>I({...T,campaignId:e||""}),disabled:N||C,children:[(0,a.jsx)(m.i4,{id:"campaign",children:(0,a.jsx)(m.ki,{placeholder:"Selecta campaign (optional)"})}),(0,a.jsx)(m.Bw,{children:_.map(e=>(0,a.jsx)(m.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(f._,{children:"Capabilities"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-voice",checked:T.capabilities.voice,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,voice:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-voice",className:"font-normal cursor-pointer",children:"Voice"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-sms",checked:T.capabilities.sms,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,sms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-sms",className:"font-normal cursor-pointer",children:"SMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-mms",checked:T.capabilities.mms,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,mms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-mms",className:"font-normal cursor-pointer",children:"MMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"edit-fax",checked:T.capabilities.fax,onCheckedChange:e=>I({...T,capabilities:{...T.capabilities,fax:!!e}})}),(0,a.jsx)(f._,{htmlFor:"edit-fax",className:"font-normal cursor-pointer",children:"Fax"})]})]})]}),S&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:S})]}),(0,a.jsxs)(u.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>x(!1),disabled:N,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:F,disabled:N,children:[N&&(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})}var p=r(66120);function v(e){let{open:t,onOpenChange:r,onSuccess:s}=e,[n,i]=(0,o.useState)(!1),[x,v]=(0,o.useState)(null),[g,j]=(0,o.useState)({areaCode:"",country:"US",region:"",provider:"local",features:{voice:!0,sms:!1,mms:!1,fax:!1}}),b=async()=>{i(!0),v(null);try{let e=await h.x.post("/api/v1/numbers",{areaCode:g.areaCode||void 0,country:g.country,region:g.region||void 0,provider:g.provider,features:g.features});if(e.error)throw Error(e.error.message||"Failed to purchase number");e.data&&(null==s||s(),r(!1),j({areaCode:"",country:"US",region:"",provider:"local",features:{voice:!0,sms:!1,mms:!1,fax:!1}}))}catch(e){v(e instanceof Error?e.message:"Failed to purchase number")}finally{i(!1)}};return(0,a.jsx)(u.Vq,{open:t,onOpenChange:r,children:(0,a.jsxs)(u.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(u.fK,{children:[(0,a.jsx)(u.$N,{children:"Purchase Phone Number"}),(0,a.jsx)(u.Be,{children:"Search and purchase a new phone number for your account."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"provider",children:"Provider"}),(0,a.jsxs)(m.Ph,{value:g.provider,onValueChange:e=>j({...g,provider:e}),children:[(0,a.jsx)(m.i4,{id:"provider",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"local",children:"Local (Test)"}),(0,a.jsx)(m.Ql,{value:"signalwire",children:"SignalWire"}),(0,a.jsx)(m.Ql,{value:"telnyx",children:"Telnyx"}),(0,a.jsx)(m.Ql,{value:"bandwidth",children:"Bandwidth"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"country",children:"Country"}),(0,a.jsxs)(m.Ph,{value:g.country,onValueChange:e=>j({...g,country:e}),children:[(0,a.jsx)(m.i4,{id:"country",children:(0,a.jsx)(m.ki,{})}),(0,a.jsxs)(m.Bw,{children:[(0,a.jsx)(m.Ql,{value:"US",children:"United States"}),(0,a.jsx)(m.Ql,{value:"CA",children:"Canada"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"areaCode",children:"Area Code (Optional)"}),(0,a.jsx)(p.I,{id:"areaCode",placeholder:"e.g., 212, 310, 415",value:g.areaCode,onChange:e=>j({...g,areaCode:e.target.value}),maxLength:3,pattern:"[0-9]{3}"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty to get any available number"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"region",children:"Region/State (Optional)"}),(0,a.jsx)(p.I,{id:"region",placeholder:"e.g., CA, NY, TX",value:g.region,onChange:e=>j({...g,region:e.target.value}),maxLength:2})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(f._,{children:"Capabilities"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-centerspace-x-2",children:[(0,a.jsx)(d.X,{id:"voice",checked:g.features.voice,onCheckedChange:e=>j({...g,features:{...g.features,voice:!!e}})}),(0,a.jsx)(f._,{htmlFor:"voice",className:"font-normal cursor-pointer",children:"Voice"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"sms",checked:g.features.sms,onCheckedChange:e=>j({...g,features:{...g.features,sms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"sms",className:"font-normal cursor-pointer",children:"SMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"mms",checked:g.features.mms,onCheckedChange:e=>j({...g,features:{...g.features,mms:!!e}})}),(0,a.jsx)(f._,{htmlFor:"mms",className:"font-normal cursor-pointer",children:"MMS"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.X,{id:"fax",checked:g.features.fax,onCheckedChange:e=>j({...g,features:{...g.features,fax:!!e}})}),(0,a.jsx)(f._,{htmlFor:"fax",className:"font-normal cursor-pointer",children:"Fax"})]})]})]}),x&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:x})]}),(0,a.jsxs)(u.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>r(!1),disabled:n,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:b,disabled:n,children:[n&&(0,a.jsx)(l.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Purchase Number"]})]})]})})}var g=r(60044),j=r(30999),b=r(86190),y=r(33061);function N(){var e;let[t,r]=(0,o.useState)(""),[d,u]=(0,o.useState)(!1),[f,m]=(0,o.useState)(!1),[N,w]=(0,o.useState)(null),[C,k]=(0,o.useState)([]),[S,R]=(0,o.useState)(!0);(0,o.useEffect)(()=>{_()},[]);let _=async()=>{R(!0);try{var e;let t=await h.x.get("/api/v1/numbers");(null===(e=t.data)||void 0===e?void 0:e.data)&&k(t.data.data)}catch(e){console.error("Failed to load numbers:",e)}finally{R(!1)}},E=C.filter(e=>{var r;return e.number.includes(t)||(null===(r=e.campaign)||void 0===r?void 0:r.name.toLowerCase().includes(t.toLowerCase()))}),T=e=>{w(e),m(!0)};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Numbers"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage your phone numbers and assignments"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.z,{variant:"outline",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.xlsx,.xls",e.onchange=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&alert("Import functionality coming soon. Selected file: ".concat(r.name))},e.click()},children:[(0,a.jsx)(s.Z,{className:"mr-2 h-4 w-4"}),"Import"]}),(0,a.jsxs)(c.z,{onClick:()=>{u(!0)},children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Buy Number"]})]})]}),(0,a.jsxs)(j.Zb,{className:"flex-1 flex flex-col overflow-hiddenmin-h-0",children:[(0,a.jsx)(j.Ol,{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(j.ll,{children:"Phone Numbers"}),(0,a.jsx)(j.SZ,{children:"Search and manage your numbers"})]}),(0,a.jsxs)("div",{className:"relative w-64",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(p.I,{id:"numbers-search",name:"numbers-search",placeholder:"Search numbers...",value:t,onChange:e=>r(e.target.value),className:"pl-10"})]})]})}),(0,a.jsx)(j.aY,{className:"flex-1 overflow-y-auto min-h-0",children:S?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(l.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===E.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No phone numbers found"}):(0,a.jsxs)(b.iA,{children:[(0,a.jsx)(b.xD,{children:(0,a.jsxs)(b.SC,{children:[(0,a.jsx)(b.ss,{children:"Number"}),(0,a.jsx)(b.ss,{children:"Status"}),(0,a.jsx)(b.ss,{children:"Campaign"}),(0,a.jsx)(b.ss,{children:"Purchased"}),(0,a.jsx)(b.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(b.RM,{children:E.map(e=>{var t;return(0,a.jsxs)(b.SC,{children:[(0,a.jsx)(b.pj,{className:"font-mono",children:(0,y.un)(e.number)}),(0,a.jsx)(b.pj,{children:(0,a.jsx)(g.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),(0,a.jsx)(b.pj,{children:(null===(t=e.campaign)||void 0===t?void 0:t.name)||"-"}),(0,a.jsx)(b.pj,{children:e.purchasedAt?new Date(e.purchasedAt).toLocaleDateString():"-"}),(0,a.jsx)(b.pj,{className:"text-right",children:(0,a.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>T(e),children:"Edit"})})]},e.id)})})]})})]}),(0,a.jsx)(v,{open:d,onOpenChange:u,onSuccess:()=>{_()}}),N&&(0,a.jsx)(x,{open:f,onOpenChange:m,numberId:N.id,number:N.number,currentStatus:N.status,currentCampaignId:null===(e=N.campaign)||void 0===e?void 0:e.id,currentCapabilities:N.capabilities,onSuccess:()=>{_()}})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(91674),s=r(47828);r(86655);var n=r(33061);let i=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(91674),s=r(32814),n=r(47828),i=r(86655),l=r(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-nonedisabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return o}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},55738:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var a=r(91674),s=r(38598),n=r(72781),i=r(86655),l=r(33061);let o=i.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...i,children:(0,a.jsx)(s.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});o.displayName=s.fC.displayName},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return h},Be:function(){return x},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),s=r(7472),n=r(77037),i=r(86655),l=r(33061);let o=s.fC;s.xz;let c=s.h_;s.x8;let d=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});d.displayName=s.aV.displayName;let u=i.forwardRef((e,t)=>{let{className:r,children:i,...o}=e;return(0,a.jsxs)(c,{children:[(0,a.jsx)(d,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[i,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let h=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});h.displayName=s.Dx.displayName;letx=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...n})});x.displayName=s.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return l}});var a=r(91674),s=r(35974),n=r(86655),i=r(33061);let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});l.displayName=s.f.displayName},38137:function(e,t,r){"use strict";r.d(t,{Bw:function(){return x},Ph:function(){return d},Ql:function(){return p},i4:function(){return f},ki:function(){return u}});var a=r(91674),s=r(65485),n=r(50802),i=r(98371),l=r(72781),o=r(86655),c=r(33061);let d=s.fC;s.ZA;let u=s.B4,f=o.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,a.jsxs)(s.xz,{ref:t,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[i,(0,a.jsx)(s.JO,{asChild:!0,children:(0,a.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=s.xz.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.u_,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...n,children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})});m.displayName=s.u_.displayName;let h=o.forwardRef((e,t)=>{let{className:r,...i}=e;return(0,a.jsx)(s.$G,{ref:t,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",r),...i,children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})});h.displayName=s.$G.displayName;let x=o.forwardRef((e,t)=>{let{className:r,children:n,position:i="popper",...l}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsxs)(s.VY,{ref:t,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...l,children:[(0,a.jsx)(m,{}),(0,a.jsx)(s.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,a.jsx)(h,{})]})})});x.displayName=s.VY.displayName,o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.__,{ref:t,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...n})}).displayName=s.__.displayName;let p=o.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,a.jsxs)(s.ck,{ref:t,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(s.wU,{children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(s.eT,{children:n})]})});p.displayName=s.ck.displayName,o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Z0,{ref:t,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",r),...n})}).displayName=s.Z0.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return l}});var a=r(91674),s=r(86655),n=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});i.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});l.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),r=await e.json();if(!e.ok){var i,l;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(l=r.error)||void 0===l?void 0:l.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return c},un:function(){return i},xG:function(){return l}});var a=r(44115),s=r(38352);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},30588:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/quotas/page-3b8b6b5431f63b41.js: */let s=(0,r.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l=(0,r.Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var i=a(4458),o=a(80317),d=a(92277),c=a(86655),u=a(78419),m=a(90747),f=a(30999),x=a(66120),h=a(66801),g=a(81317),v=a(76604),p=a(28314);function y(){var e,t,a,r,y,b,N,j,k,S,w,C,R;let[E,M]=(0,c.useState)(""),[T,B]=(0,c.useState)(null),[D,O]=(0,c.useState)(!1),[P,I]=(0,c.useState)(null),[_,U]=(0,c.useState)(null),[F,A]=(0,c.useState)({maxConcurrentCalls:"",maxMinutesPerDay:"",maxRecordingRetentionDays:"",maxPhoneNumbers:"",maxStorageGB:"",enabled:!0}),[Z,q]=(0,c.useState)({monthlyBudget:"",dailyBudget:"",alertThreshold:"80",alertEmails:"",alertSlackWebhook:"",hardStopEnabled:!0,enabled:!0}),[W,z]=(0,c.useState)(null),[G,L]=(0,c.useState)(null);(0,c.useEffect)(()=>{M("00000000-0000-0000-0000-000000000000")},[]);let V=async()=>{if(E)try{O(!0);let e=await p.x.get("/admin/api/v1/tenants/".concat(E,"/quota/status"));e.data?B(e.data):e.error&&I(e.error.message||"Failed to load quota status")}catch(e){I("Failed to load quota status")}finally{O(!1)}},Q=async()=>{if(E)try{let l=await p.x.get("/admin/api/v1/tenants/".concat(E,"/quota"));if(l.data){var e,t,a,n,r,s;A({maxConcurrentCalls:(null===(e=l.data.maxConcurrentCalls)||void 0===e?void 0:e.toString())||"",maxMinutesPerDay:(null===(t=l.data.maxMinutesPerDay)||void 0===t?void 0:t.toString())||"",maxRecordingRetentionDays:(null===(a=l.data.maxRecordingRetentionDays)||void 0===a?void 0:a.toString())||"",maxPhoneNumbers:(null===(n=l.data.maxPhoneNumbers)||void 0===n?void 0:n.toString())||"",maxStorageGB:(null===(r=l.data.maxStorageGB)||void 0===r?void 0:r.toString())||"",enabled:null===(s=l.data.enabled)||void 0===s||s})}}catch(e){}},Y=async()=>{if(E)try{let l=await p.x.get("/admin/api/v1/tenants/".concat(E,"/budget"));if(l.data){var e,t,a,n,r,s;q({monthlyBudget:(null===(e=l.data.monthlyBudget)||void 0===e?void 0:e.toString())||"",dailyBudget:(null===(t=l.data.dailyBudget)||void 0===t?void 0:t.toString())||"",alertThreshold:(null===(a=l.data.alertThreshold)||void 0===a?void 0:a.toString())||"80",alertEmails:(null===(n=l.data.alertEmails)||void 0===n?void 0:n.join(", "))||"",alertSlackWebhook:l.data.alertSlackWebhook||"",hardStopEnabled:null===(r=l.data.hardStopEnabled)||void 0===r||r,enabled:null===(s=l.data.enabled)||void 0===s||s})}}catch(e){}};(0,c.useEffect)(()=>{E&&(V(),Q(),Y())},[E]);let $=async()=>{if(E)try{O(!0),I(null),await p.x.patch("/admin/api/v1/tenants/".concat(E,"/quota"),{maxConcurrentCalls:F.maxConcurrentCalls?parseInt(F.maxConcurrentCalls):null,maxMinutesPerDay:F.maxMinutesPerDay?parseInt(F.maxMinutesPerDay):null,maxRecordingRetentionDays:F.maxRecordingRetentionDays?parseInt(F.maxRecordingRetentionDays):null,maxPhoneNumbers:F.maxPhoneNumbers?parseInt(F.maxPhoneNumbers):null,maxStorageGB:F.maxStorageGB?parseFloat(F.maxStorageGB):null,enabled:F.enabled}),U("Quota settings saved"),V(),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to save quota settings")}finally{O(!1)}},K=async()=>{if(E)try{O(!0),I(null),await p.x.patch("/admin/api/v1/tenants/".concat(E,"/budget"),{monthlyBudget:Z.monthlyBudget?parseFloat(Z.monthlyBudget):null,dailyBudget:Z.dailyBudget?parseFloat(Z.dailyBudget):null,alertThreshold:parseFloat(Z.alertThreshold),alertEmails:Z.alertEmails.split(",").map(e=>e.trim()).filter(Boolean),alertSlackWebhook:Z.alertSlackWebhook||null,hardStopEnabled:Z.hardStopEnabled,enabled:Z.enabled}),U("Budget settings saved"),V(),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to save budget settings")}finally{O(!1)}},H=async()=>{if(E)try{O(!0),I(null);let e=await p.x.post("/admin/api/v1/tenants/".concat(E,"/budget/override-token"),{expiresInHours:24});z(e.token),L(e.expiresAt),U("Override token generated"),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to generate override token")}finally{O(!1)}},X=async()=>{if(E)try{O(!0),I(null),await p.x.delete("/admin/api/v1/tenants/".concat(E,"/budget/override-token")),z(null),L(null),U("Override token revoked"),setTimeout(()=>U(null),3e3)}catch(e){I("Failed to revoke override token")}finally{O(!1)}};return(0,n.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex-shrink-0 mb-2",children:[(0,n.jsx)("h1",{className:"text-xl font-bold",children:"Quotas & Budgets"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage tenant quotas and budget controls"})]}),P&&(0,n.jsxs)(u.bZ,{variant:"destructive",className:"flex-shrink-0 mb-2 py-2",children:[(0,n.jsx)(s,{className:"h-3 w-3"}),(0,n.jsx)(u.X,{className:"text-sm",children:P})]}),_&&(0,n.jsxs)(u.bZ,{className:"flex-shrink-0 mb-2 py-2",children:[(0,n.jsx)(l,{className:"h-3 w-3"}),(0,n.jsx)(u.X,{className:"text-sm",children:_})]}),T&&T.concurrentCalls&&(0,n.jsxs)(f.Zb,{className:"flex-shrink-0 mb-2",children:[(0,n.jsx)(f.Ol,{className:"pb-3",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Current Usage"})}),(0,n.jsx)(f.aY,{className:"pt-0",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Concurrent Calls"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(S=T.concurrentCalls.current)&&void 0!==S?S:0,T.concurrentCalls.limit&&" / ".concat(T.concurrentCalls.limit)]}),null!==T.concurrentCalls.remaining&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.concurrentCalls.remaining," remaining"]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(o.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Daily Minutes"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(w=null===(e=T.dailyMinutes)||void 0===e?void 0:e.current)&&void 0!==w?w:0,(null===(t=T.dailyMinutes)||void 0===t?void 0:t.limit)&&" / ".concat(T.dailyMinutes.limit)]}),(null===(a=T.dailyMinutes)||void 0===a?void 0:a.remaining)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.dailyMinutes.remaining," remaining"]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(i.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Phone Numbers"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:[null!==(C=null===(r=T.phoneNumbers)||void 0===r?void 0:r.current)&&void 0!==C?C:0,(null===(y=T.phoneNumbers)||void 0===y?void 0:y.limit)&&" / ".concat(T.phoneNumbers.limit)]}),(null===(b=T.phoneNumbers)||void 0===b?void 0:b.remaining)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.phoneNumbers.remaining," remaining"]})]}),T.budget&&(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(d.Z,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,n.jsx)("span",{className:"text-xs font-medium",children:"Monthly Budget"})]}),(0,n.jsxs)("div",{className:"text-lg font-bold",children:["$",(null!==(R=null===(N=T.budget.monthly)||void 0===N?void 0:N.current)&&void 0!==R?R:0).toFixed(2),(null===(j=T.budget.monthly)||void 0===j?void 0:j.limit)&&" / $".concat(T.budget.monthly.limit.toFixed(2))]}),(null===(k=T.budget.monthly)||void 0===k?void 0:k.percentage)!==null&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground",children:[T.budget.monthly.percentage.toFixed(1),"% used"]})]})]})})]}),(0,n.jsxs)(v.mQ,{defaultValue:"quotas",className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,n.jsxs)(v.dr,{className:"flex-shrink-0 h-9",children:[(0,n.jsx)(v.SP,{value:"quotas",className:"text-sm",children:"Quotas"}),(0,n.jsx)(v.SP,{value:"budget",className:"text-sm",children:"Budget"}),(0,n.jsx)(v.SP,{value:"overrides",className:"text-sm",children:"Overrides"})]}),(0,n.jsx)(v.nU,{value:"quotas",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,n.jsxs)(f.Zb,{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsx)(f.Ol,{className:"pb-2 flex-shrink-0",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Quota Settings"})}),(0,n.jsxs)(f.aY,{className:"flex-1overflow-y-auto space-y-3 pt-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Enable Quotas"})}),(0,n.jsx)(g.r,{checked:F.enabled,onCheckedChange:e=>A({...F,enabled:e})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxConcurrentCalls",className:"text-sm",children:"Max Concurrent Calls"}),(0,n.jsx)(x.I,{id:"maxConcurrentCalls",type:"number",value:F.maxConcurrentCalls,onChange:e=>A({...F,maxConcurrentCalls:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxMinutesPerDay",className:"text-sm",children:"Max Minutes Per Day"}),(0,n.jsx)(x.I,{id:"maxMinutesPerDay",type:"number",value:F.maxMinutesPerDay,onChange:e=>A({...F,maxMinutesPerDay:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxPhoneNumbers",className:"text-sm",children:"Max Phone Numbers"}),(0,n.jsx)(x.I,{id:"maxPhoneNumbers",type:"number",value:F.maxPhoneNumbers,onChange:e=>A({...F,maxPhoneNumbers:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxRecordingRetentionDays",className:"text-sm",children:"Max Recording Retention (Days)"}),(0,n.jsx)(x.I,{id:"maxRecordingRetentionDays",type:"number",value:F.maxRecordingRetentionDays,onChange:e=>A({...F,maxRecordingRetentionDays:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"maxStorageGB",className:"text-sm",children:"Max Storage (GB)"}),(0,n.jsx)(x.I,{id:"maxStorageGB",type:"number",step:"0.01",value:F.maxStorageGB,onChange:e=>A({...F,maxStorageGB:e.target.value}),placeholder:"Unlimited",className:"h-8"})]})]}),(0,n.jsx)(m.z,{onClick:$,disabled:D,size:"sm",className:"mt-2",children:"Save Quota Settings"})]})]})}),(0,n.jsxs)(v.nU,{value:"budget",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:[(0,n.jsxs)(f.Zb,{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsx)(f.Ol,{className:"pb-2 flex-shrink-0",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Budget Settings"})}),(0,n.jsxs)(f.aY,{className:"flex-1 overflow-y-auto space-y-3 pt-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Enable Budget"})}),(0,n.jsx)(g.r,{checked:Z.enabled,onCheckedChange:e=>q({...Z,enabled:e})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"monthlyBudget",className:"text-sm",children:"Monthly Budget ($)"}),(0,n.jsx)(x.I,{id:"monthlyBudget",type:"number",step:"0.01",value:Z.monthlyBudget,onChange:e=>q({...Z,monthlyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"dailyBudget",className:"text-sm",children:"Daily Budget ($)"}),(0,n.jsx)(x.I,{id:"dailyBudget",type:"number",step:"0.01",value:Z.dailyBudget,onChange:e=>q({...Z,dailyBudget:e.target.value}),placeholder:"Unlimited",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertThreshold",className:"text-sm",children:"Alert Threshold (%)"}),(0,n.jsx)(x.I,{id:"alertThreshold",type:"number",value:Z.alertThreshold,onChange:e=>q({...Z,alertThreshold:e.target.value}),placeholder:"80",className:"h-8"})]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertEmails",className:"text-sm",children:"Alert Email Addresses"}),(0,n.jsx)(x.I,{id:"alertEmails",value:Z.alertEmails,onChange:e=>q({...Z,alertEmails:e.target.value}),placeholder:"admin@example.com, finance@example.com",className:"h-8"})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(h._,{htmlFor:"alertSlackWebhook",className:"text-sm",children:"Slack Webhook URL"}),(0,n.jsx)(x.I,{id:"alertSlackWebhook",value:Z.alertSlackWebhook,onChange:e=>q({...Z,alertSlackWebhook:e.target.value}),placeholder:"https://hooks.slack.com/services/...",className:"h-8"})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{children:(0,n.jsx)(h._,{className:"text-sm",children:"Hard Stop Enabled"})}),(0,n.jsx)(g.r,{checked:Z.hardStopEnabled,onCheckedChange:e=>q({...Z,hardStopEnabled:e})})]}),(0,n.jsx)(m.z,{onClick:K,disabled:D,size:"sm",className:"mt-2",children:"Save Budget Settings"})]})]}),(0,n.jsxs)(f.Zb,{className:"mt-2",children:[(0,n.jsx)(f.Ol,{className:"pb-2",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Override Token"})}),(0,n.jsx)(f.aY,{className:"pt-0 space-y-2",children:W?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(u.bZ,{className:"py-2",children:(0,n.jsxs)(u.X,{className:"text-sm",children:[(0,n.jsx)("div",{className:"font-mono text-xs break-all",children:W}),G&&(0,n.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",new Date(G).toLocaleString()]})]})}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Use this token in the ",(0,n.jsx)("code",{className:"text-xs",children:"X-Quota-Override"})," header to bypass quota limits."]}),(0,n.jsx)(m.z,{variant:"destructive",onClick:X,disabled:D,size:"sm",children:"Revoke Token"})]}):(0,n.jsx)(m.z,{onClick:H,disabled:D,size:"sm",children:"Generate Override Token"})})]})]}),(0,n.jsx)(v.nU,{value:"overrides",className:"flex-1 overflow-y-auto min-h-0 mt-2",children:(0,n.jsxs)(f.Zb,{children:[(0,n.jsx)(f.Ol,{className:"pb-2",children:(0,n.jsx)(f.ll,{className:"text-base",children:"Quota Overrides"})}),(0,n.jsx)(f.aY,{className:"pt-0",children:(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quota overrides allow temporarily increasing limits for specific quota types. Use the API to create overrides programmatically."})})]})})]})]})}},78419:function(e,t,a){"use strict";a.d(t,{X:function(){return d},bZ:function(){return o}});var n=a(91674),r=a(47828),s=a(86655),l=a(33061);let i=(0,r.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:r,...s}=e;return(0,n.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:r}),a),...s})});o.displayName="Alert",s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",a),...r})}).displayName="AlertTitle";let d=s.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",a),...r})});d.displayName="AlertDescription"},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var n=a(91674),r=a(32814),s=a(47828),l=a(86655),i=a(33061);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var n=a(91674),r=a(86655),s=a(33061);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flexflex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var n=a(91674),r=a(86655),s=a(33061);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,n.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},66801:function(e,t,a){"use strict";a.d(t,{_:function(){return i}});var n=a(91674),r=a(35974),s=a(86655),l=a(33061);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...s})});i.displayName=r.f.displayName},81317:function(e,t,a){"use strict";a.d(t,{r:function(){return i}});var n=a(91674),r=a(47650),s=a(86655),l=a(33061);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:(0,n.jsx)(r.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=r.fC.displayName},76604:function(e,t,a){"use strict";a.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return i},nU:function(){return c}});var n=a(91674),r=a(89258),s=a(86655),l=a(33061);let i=r.fC,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});o.displayName=r.aV.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-centerwhitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});d.displayName=r.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});c.displayName=r.VY.displayName},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");a&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:s}),a=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=a.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let r=new n},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return s},p6:function(){return d},un:function(){return l},xG:function(){return i}});var n=a(44115),r=a(38352);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,n.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}returne}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(a,":").concat(String(n).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},80317:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/users/page-2a3b2c32045129bb.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1456],{13326:function(e,t,r){Promise.resolve().then(r.bind(r,5699))},5699:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(91674),n=r(98548),s=r(54741),i=r(30250),o=r(32353),l=r(86655),d=r(60044),c=r(90747),u=r(30999),f=r(86190),m=r(88151),x=r(66120),h=r(66801),p=r(28314);function g(e){let{open:t,onOpenChange:r,onSuccess:n}=e,[i,o]=(0,l.useState)(!1),[d,u]=(0,l.useState)(null),[f,g]=(0,l.useState)({email:"",firstName:"",lastName:""});(0,l.useEffect)(()=>{t&&(g({email:"",firstName:"",lastName:""}),u(null))},[t]);let v=async()=>{if(!f.email.trim()){u("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)){u("Invalid email format");return}o(!0),u(null);try{let e=await p.x.post("/api/v1/users/invite",{email:f.email.trim(),firstName:f.firstName.trim()||void 0,lastName:f.lastName.trim()||void 0});if(e.error)throw Error(e.error.message||"Failed to invite user");e.data&&(e.data.tempPassword?alert("User invited successfully!\n\nTemporary password: ".concat(e.data.tempPassword,"\n\n(Note: In production, this would be sent via email)")):alert("User invited successfully!"),null==n||n(),r(!1))}catch(e){u(e instanceof Error?e.message:"Failed to invite user")}finally{o(!1)}};return(0,a.jsx)(m.Vq,{open:t,onOpenChange:r,children:(0,a.jsxs)(m.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,a.jsxs)(m.fK,{children:[(0,a.jsx)(m.$N,{children:"Invite User"}),(0,a.jsx)(m.Be,{children:"Send an invitationto a new team member"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"email",children:"Email Address *"}),(0,a.jsx)(x.I,{id:"email",type:"email",placeholder:"user@example.com",value:f.email,onChange:e=>g({...f,email:e.target.value}),disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"firstName",children:"First Name (Optional)"}),(0,a.jsx)(x.I,{id:"firstName",placeholder:"John",value:f.firstName,onChange:e=>g({...f,firstName:e.target.value}),disabled:i})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h._,{htmlFor:"lastName",children:"Last Name (Optional)"}),(0,a.jsx)(x.I,{id:"lastName",placeholder:"Doe",value:f.lastName,onChange:e=>g({...f,lastName:e.target.value}),disabled:i})]}),d&&(0,a.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:d})]}),(0,a.jsxs)(m.cN,{children:[(0,a.jsx)(c.z,{variant:"outline",onClick:()=>r(!1),disabled:i,children:"Cancel"}),(0,a.jsxs)(c.z,{onClick:v,disabled:i||!f.email.trim(),children:[i&&(0,a.jsx)(s.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Invitation"]})]})]})})}function v(){let[e,t]=(0,l.useState)([]),[r,m]=(0,l.useState)(!0),[x,h]=(0,l.useState)(!1);(0,l.useEffect)(()=>{v()},[]);let v=async()=>{m(!0);try{var e;let r=await p.x.get("/api/v1/users");(null===(e=r.data)||void 0===e?void 0:e.data)&&t(r.data.data)}catch(e){console.error("Failed to load users:",e)}finally{m(!1)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Users"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage team members and permissions"})]}),(0,a.jsxs)(c.z,{onClick:()=>h(!0),children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Invite User"]})]}),(0,a.jsxs)(u.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,a.jsxs)(u.Ol,{className:"flex-shrink-0",children:[(0,a.jsx)(u.ll,{children:"Team Members"}),(0,a.jsx)(u.SZ,{children:"View and manage user access"})]}),(0,a.jsx)(u.aY,{className:"flex-1 overflow-y-auto min-h-0",children:r?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?(0,a.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No users found"}):(0,a.jsxs)(f.iA,{children:[(0,a.jsx)(f.xD,{children:(0,a.jsxs)(f.SC,{children:[(0,a.jsx)(f.ss,{children:"Email"}),(0,a.jsx)(f.ss,{children:"Role"}),(0,a.jsx)(f.ss,{children:"Status"}),(0,a.jsx)(f.ss,{children:"Invited"}),(0,a.jsx)(f.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(f.RM,{children:e.map(e=>(0,a.jsxs)(f.SC,{children:[(0,a.jsxs)(f.pj,{className:"flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"}),e.email]}),(0,a.jsx)(f.pj,{children:(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.roles.map(e=>(0,a.jsxs)(d.C,{variant:"outline",className:"flex items-center gap-1 w-fit",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3"}),e]},e))})}),(0,a.jsx)(f.pj,{children:(0,a.jsx)(d.C,{variant:"active"===e.status?"success":"warning",children:e.status})}),(0,a.jsx)(f.pj,{children:new Date(e.invitedAt).toLocaleDateString()}),(0,a.jsx)(f.pj,{className:"text-right",children:(0,a.jsx)(c.z,{variant:"ghost",size:"sm",children:"Edit"})})]},e.id))})]})})]}),(0,a.jsx)(g,{open:x,onOpenChange:h,onSuccess:v})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(91674),n=r(47828);r(86655);var s=r(33061);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(i({variant:r}),t),...n})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(91674),n=r(32814),s=r(47828),i=r(86655),o=r(33061);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},ll:function(){return l}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return l},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),n=r(7472),s=r(77037),i=r(86655),o=r(33061);let l=n.fC;n.xz;let d=n.h_;n.x8;let c=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s})});c.displayName=n.aV.displayName;let u=i.forwardRef((e,t)=>{let{className:r,children:i,...l}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[i,(0,a.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(s.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let x=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",r),...s})});x.displayName=n.Dx.displayName;let h=i.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...s})});h.displayName=n.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var a=r(91674),n=r(35974),s=r(86655),i=r(33061);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,i.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...s})});o.displayName=n.f.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var a=r(91674),n=r(86655),s=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...n})});o.displayName="TableHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...n})});l.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});d.displayName="TableRow";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});c.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let n="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(n,{...t,headers:s}),r=await e.json();if(!e.ok){var i,o;return{error:{code:(null===(i=r.error)||void 0===i?void 0:i.code)||"UNKNOWN_ERROR",message:(null===(o=r.error)||void 0===o?void 0:o.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let n=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return s},p6:function(){return d},un:function(){return i},xG:function(){return o}});var a=r(44115),n=r(38352);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}function i(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},54741:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
/app/apps/web/.next/static/chunks/app/(dashboard)/settings/dnc/page-8d7c3f369bc18f0d.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2807],{43175:function(e,t,r){Promise.resolve().then(r.bind(r,76696))},76696:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(91674),a=r(48929),s=r(54741),o=r(5814),i=r(86655),l=r(60044),c=r(90747),d=r(30999),u=r(86190),f=r(28314);function h(){let[e,t]=(0,i.useState)([]),[r,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{m()},[]);let m=async()=>{h(!0);try{var e;let r=await f.x.get("/api/v1/compliance/dnc-lists");(null===(e=r.data)||void 0===e?void 0:e.data)&&t(r.data.data)}catch(e){console.error("Failed to load DNC lists:",e)}finally{h(!1)}},x=async e=>{if(confirm("Are you sure you want to delete this DNC list? This action cannot be undone."))try{let t=await f.x.delete("/api/v1/compliance/dnc-lists/".concat(e));t.error?alert("Failed to delete DNC list: ".concat(t.error.message)):m()}catch(e){alert("Failed to delete DNC list: ".concat(e instanceof Error?e.message:"Unknown error"))}};return(0,n.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",children:[(0,n.jsxs)("div",{className:"flexitems-center justify-between flex-shrink-0 mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Do Not Call Lists"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Manage DNC lists and compliance"})]}),(0,n.jsxs)(c.z,{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".csv,.txt",e.onchange=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&alert("DNC list upload functionality coming soon. Selected file: ".concat(r.name))},e.click()},children:[(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4"}),"Upload List"]})]}),(0,n.jsxs)(d.Zb,{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[(0,n.jsxs)(d.Ol,{className:"flex-shrink-0",children:[(0,n.jsx)(d.ll,{children:"DNC Lists"}),(0,n.jsx)(d.SZ,{children:"View and manage your Do Not Call lists"})]}),(0,n.jsx)(d.aY,{className:"flex-1 overflow-y-auto min-h-0",children:r?(0,n.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,n.jsx)(s.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):0===e.length?(0,n.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"No DNC listsfound"}):(0,n.jsxs)(u.iA,{children:[(0,n.jsx)(u.xD,{children:(0,n.jsxs)(u.SC,{children:[(0,n.jsx)(u.ss,{children:"Name"}),(0,n.jsx)(u.ss,{children:"Type"}),(0,n.jsx)(u.ss,{children:"Entries"}),(0,n.jsx)(u.ss,{children:"Status"}),(0,n.jsx)(u.ss,{children:"Created"}),(0,n.jsx)(u.ss,{className:"text-right",children:"Actions"})]})}),(0,n.jsx)(u.RM,{children:e.map(e=>(0,n.jsxs)(u.SC,{children:[(0,n.jsx)(u.pj,{className:"font-medium",children:e.name}),(0,n.jsx)(u.pj,{children:(0,n.jsx)(l.C,{variant:"outline",children:e.type.toLowerCase()})}),(0,n.jsx)(u.pj,{children:e.entryCount.toLocaleString()}),(0,n.jsx)(u.pj,{children:(0,n.jsx)(l.C,{variant:"ACTIVE"===e.status?"success":"secondary",children:e.status.toLowerCase()})}),(0,n.jsx)(u.pj,{children:new Date(e.createdAt).toLocaleDateString()}),(0,n.jsx)(u.pj,{className:"text-right",children:(0,n.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>x(e.id),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})]},e.id))})]})})]})]})}},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(91674),a=r(47828);r(86655);var s=r(33061);let o=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparentbg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(o({variant:r}),t),...a})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var n=r(91674),a=r(32814),s=r(47828),o=r(86655),i=r(33061);let l=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,i.cn)(l({variant:s,size:o,className:r})),ref:t,...d})});c.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return c},Zb:function(){return o},aY:function(){return d},ll:function(){return l}});var n=r(91674),a=r(86655),s=r(33061);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});l.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return o},pj:function(){return u},ss:function(){return d},xD:function(){return i}});var n=r(91674),a=r(86655),s=r(33061);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",r),...a})})});o.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",r),...a})});i.displayName="TableHeader";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",r),...a})});l.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});c.displayName="TableRow";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});d.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});classn{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:s}),r=await e.json();if(!e.ok){var o,i;return{error:{code:(null===(o=r.error)||void 0===o?void 0:o.code)||"UNKNOWN_ERROR",message:(null===(i=r.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let a=new n},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return l},cn:function(){return s},p6:function(){return c},un:function(){return o},xG:function(){return i}});var n=r(44115),a=r(38352);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function o(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function l(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function c(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},19596:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(86655),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
/app/apps/web/.next/static/chunks/app/(dashboard)/dashboard/page-45925c94347a6319.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6903],{14887:function(e,t,a){Promise.resolve().then(a.bind(a,24617))},24617:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return $}});varl=a(91674),r=a(86655),s=a(40646),n=a(64936),i=a(4458),o=a(89648),d=a(36963),c=a(92794),u=a(99659),m=a(92277),x=a(76283),f=a(69057),h=a(67359),p=a(50450),g=a(33061);function b(e){let{title:t,value:a,unit:r,trend:s,trendLabel:n,icon:i,onClick:o,className:d,loading:c,variant:u="default"}=e,m=s&&s>0,x=s&&s<0,b=!s||0===s;return(0,l.jsxs)("div",{role:o?"button":void 0,tabIndex:o?0:void 0,onClick:o,onKeyDown:e=>{o&&("Enter"===e.key||" "===e.key)&&o()},className:(0,g.cn)("relative overflow-hidden rounded-xl border p-5 transition-all duration-200",{default:"bg-card border-border",revenue:"bg-gradient-to-br from-emerald-500/10 to-emerald-600/5 border-emerald-500/20",conversion:"bg-gradient-to-br from-blue-500/10 to-blue-600/5 border-blue-500/20",warning:"bg-gradient-to-br from-amber-500/10 to-amber-600/5 border-amber-500/20"}[u],o&&"cursor-pointer hover:shadow-lg hover:scale-[1.02] active:scale-[0.98]",d),children:[i&&(0,l.jsx)("div",{className:"absolute -right-4 -top-4 opacity-5",children:(0,l.jsx)(i,{className:"h-24 w-24"})}),(0,l.jsxs)("div",{className:"relative z-10 space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:t}),i&&(0,l.jsx)(i,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)("div",{className:"flex items-baseline gap-1.5",children:c?(0,l.jsx)("div",{className:"h-9 w-24 animate-pulse rounded bg-muted"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-3xl font-bold tracking-tight text-foreground",children:"number"==typeof a?a.toLocaleString():a}),r&&(0,l.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:r})]})}),void 0!==s&&!c&&(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:(0,g.cn)("flex items-center gap-0.5 rounded-full px-2 py-0.5 text-xs font-medium",m&&"bg-emerald-500/10 text-emerald-600 dark:text-emerald-400",x&&"bg-rose-500/10 text-rose-600 dark:text-rose-400",b&&"bg-muted text-muted-foreground"),children:[m&&(0,l.jsx)(f.Z,{className:"h-3 w-3"}),x&&(0,l.jsx)(h.Z,{className:"h-3 w-3"}),b&&(0,l.jsx)(p.Z,{className:"h-3 w-3"}),(0,l.jsxs)("span",{children:[Math.abs(s).toFixed(1),"%"]})]}),n&&(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:n})]})]})]})}var v=a(28314);function j(e){vart,a,s,n,f,h,p;let{dateRange:g,onFilterChange:j}=e,[N,y]=(0,r.useState)(null),[w,C]=(0,r.useState)(!0),[S,k]=(0,r.useState)(null),R=(0,r.useCallback)(async()=>{C(!0),k(null);try{var e,t;let a=new Date,l=(null==g?void 0:g.start)||new Date(a.getTime()-864e5),r=(null==g?void 0:g.end)||a,s=r.getTime()-l.getTime(),n=new Date(l.getTime()-s),i=new URLSearchParams({startDate:l.toISOString(),endDate:r.toISOString(),granularity:"hour"}),o=new URLSearchParams({startDate:n.toISOString(),endDate:l.toISOString(),granularity:"hour"}),[d,c]=await Promise.all([v.x.get("/api/v1/reporting/metrics?".concat(i)),v.x.get("/api/v1/reporting/metrics?".concat(o))]);if(d.error)throw Error(d.error.message);let u=null===(e=d.data)||void 0===e?void 0:e.metrics,m=null===(t=c.data)||void 0===t?void 0:t.metrics;if(!u)throw Error("No metrics data received");let x=u.completedCalls||0,f=u.totalCalls-x,h=Math.floor(x*(u.conversionRate||.15)),p=x>0?h/x*100:0,b=u.totalCost||0,j=u.totalCalls>0?b/u.totalCalls:0,N=(null==m?void 0:m.completedCalls)||0,w=Math.floor(N*((null==m?void 0:m.conversionRate)||.15)),C=(null==m?void 0:m.totalCost)||0,S=(e,t)=>0===t?e>0?100:0:(e-t)/t*100;y({totalCalls:u.totalCalls||0,billableCalls:x,nonBillableCalls:f,salesClosed:h,conversionRate:p,revenue:b,revenuePerCall:j,trends:{calls:S(u.totalCalls||0,(null==m?void 0:m.totalCalls)||0),billable:S(x,N),sales:S(h,w),revenue:S(b,C)}})}catch(e){k(e instanceof Error?e.message:"Failed to fetch metrics"),y({totalCalls:0,billableCalls:0,nonBillableCalls:0,salesClosed:0,conversionRate:0,revenue:0,revenuePerCall:0,trends:{calls:0,billable:0,sales:0,revenue:0}})}finally{C(!1)}},[g]);(0,r.useEffect)(()=>{R();let e=setInterval(R,3e4);return()=>clearInterval(e)},[R]);let T=e=>e>=1e6?"$".concat((e/1e6).toFixed(2),"M"):e>=1e3?"$".concat((e/1e3).toFixed(1),"K"):"$".concat(e.toFixed(2));return(0,l.jsxs)("div",{className:"space-y-4",children:[S&&(0,l.jsxs)("div",{className:"rounded-lg border border-amber-500/20 bg-amber-500/10 p-3 text-sm text-amber-600 dark:text-amber-400",children:[S," - Showing default values"]}),(0,l.jsxs)("div",{className:"grid gap-4 grid-cols-2 lg:grid-cols-4 xl:grid-cols-7",children:[(0,l.jsx)(b,{title:"Total Calls",value:null!==(t=null==N?void 0:N.totalCalls)&&void 0!==t?t:0,icon:i.Z,trend:null==N?void 0:N.trends.calls,trendLabel:"vs prev period",loading:w,onClick:()=>null==j?void 0:j({type:"status",value:"all"})}),(0,l.jsx)(b,{title:"Billable Calls",value:null!==(a=null==N?void 0:N.billableCalls)&&void 0!==a?a:0,icon:o.Z,trend:null==N?void 0:N.trends.billable,trendLabel:"vs prev period",variant:"revenue",loading:w,onClick:()=>null==j?void 0:j({type:"billable",value:"true"})}),(0,l.jsx)(b,{title:"Non-Billable",value:null!==(s=null==N?void 0:N.nonBillableCalls)&&void 0!==s?s:0,icon:d.Z,variant:"warning",loading:w,onClick:()=>null==j?void 0:j({type:"billable",value:"false"})}),(0,l.jsx)(b,{title:"Sales Closed",value:null!==(n=null==N?void 0:N.salesClosed)&&void 0!==n?n:0,icon:c.Z,trend:null==N?void 0:N.trends.sales,trendLabel:"vs prev period",variant:"conversion",loading:w,onClick:()=>null==j?void 0:j({type:"sale",value:"true"})}),(0,l.jsx)(b,{title:"Conversion Rate",value:"".concat((null!==(f=null==N?void 0:N.conversionRate)&&void 0!==f?f:0).toFixed(1),"%"),icon:u.Z,variant:"conversion",loading:w}),(0,l.jsx)(b,{title:"Revenue",value:T(null!==(h=null==N?void 0:N.revenue)&&void 0!==h?h:0),icon:m.Z,trend:null==N?void 0:N.trends.revenue,trendLabel:"vs prev period",variant:"revenue",loading:w}),(0,l.jsx)(b,{title:"RPC",value:T(null!==(p=null==N?void 0:N.revenuePerCall)&&void 0!==p?p:0),icon:x.Z,loading:w})]})]})}var N=a(13015),y=a(54255),w=a(19011),C=a(34174),S=a(68947),k=a(11480),R=a(81758),T=a(32784),D=a(30999),O=a(90747);function Z(e){let{onPeriodSelect:t}=e,[a,s]=(0,r.useState)("day"),[n,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),m=(0,r.useCallback)(e=>{let t,a;let l=new Date;switch(e){case"day":t=new Date(l.getTime()-864e5),a="hour";break;case"week":t=new Date(l.getTime()-6048e5),a="day";break;case"month":t=new Date(l.getTime()-2592e6),a="day"}return{start:t,end:l,granularity:a}},[]),x=(0,r.useCallback)(async()=>{d(!0),u(null);try{var e;let{start:t,end:l,granularity:r}=m(a),s=new URLSearchParams({startDate:t.toISOString(),endDate:l.toISOString(),granularity:r}),n=await v.x.get("/api/v1/reporting/metrics?".concat(s));if(n.error)throw Error(n.error.message);let o=((null===(e=n.data)||void 0===e?void 0:e.breakdown)||[]).map(e=>{let t=new Date(e.timestamp),l=Math.floor(.7*e.answeredCalls),r=e.totalCalls-l;return{time:"day"===a?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),billable:l,nonBillable:r,total:e.totalCalls}});i(o)}catch(e){u(e instanceof Error?e.message:"Failed to fetch data"),i([])}finally{d(!1)}},[a,m]);return(0,r.useEffect)(()=>{x()},[x]),(0,l.jsxs)(D.Zb,{className:"col-span-full lg:col-span-2",children:[(0,l.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between pb-2",children:[(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Calls Over Time"}),(0,l.jsx)("div",{className:"flex items-center gap-1",children:["day","week","month"].map(e=>(0,l.jsx)(O.z,{variant:a===e?"default":"ghost",size:"sm",onClick:()=>s(e),className:(0,g.cn)("h-7 px-3 text-xs",a===e&&"bg-primary text-primary-foreground"),children:"day"===e?"24H":"week"===e?"7D":"30D"},e))})]}),(0,l.jsxs)(D.aY,{children:[c&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:c}),o?(0,l.jsx)("div",{className:"flex h-[280px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):0===n.length?(0,l.jsx)("div",{className:"flex h-[280px] items-center justify-center text-muted-foreground",children:"No call data available"}):(0,l.jsx)(N.h,{width:"100%",height:280,children:(0,l.jsxs)(y.T,{data:n,margin:{top:10,right:10,left:0,bottom:0},children:[(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"billableGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"hsl(160 100% 41%)",stopOpacity:.3}),(0,l.jsx)("stop",{offset:"95%",stopColor:"hsl(160 100% 41%)",stopOpacity:0})]}),(0,l.jsxs)("linearGradient",{id:"nonBillableGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,l.jsx)("stop",{offset:"5%",stopColor:"hsl(45 100% 51%)",stopOpacity:.3}),(0,l.jsx)("stop",{offset:"95%",stopColor:"hsl(45 100% 51%)",stopOpacity:0})]})]}),(0,l.jsx)(w.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,l.jsx)(C.K,{dataKey:"time",tick:{fontSize:11},tickLine:!1,axisLine:!1,className:"fill-muted-foreground"}),(0,l.jsx)(S.B,{tick:{fontSize:11},tickLine:!1,axisLine:!1,className:"fill-muted-foreground"}),(0,l.jsx)(k.u,{content:(0,l.jsx)(e=>{let{active:t,payload:a,label:r}=e;return t&&a?(0,l.jsxs)("div",{className:"rounded-lg border bg-popover p-3 shadow-lg",children:[(0,l.jsx)("p",{className:"mb-2 font-medium text-foreground",children:r}),a.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,l.jsx)("div",{className:"h-2 w-2 rounded-full",style:{backgroundColor:e.color}}),(0,l.jsxs)("span",{className:"text-muted-foreground",children:[e.name,":"]}),(0,l.jsx)("span",{className:"font-medium",children:e.value})]},t))]}):null},{})}),(0,l.jsx)(R.D,{wrapperStyle:{paddingTop:"16px"},formatter:e=>(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:e})}),(0,l.jsx)(T.u,{type:"monotone",dataKey:"billable",name:"Billable",stackId:"1",stroke:"hsl(160 100% 41%)",fill:"url(#billableGradient)",strokeWidth:2}),(0,l.jsx)(T.u,{type:"monotone",dataKey:"nonBillable",name:"Non-Billable",stackId:"1",stroke:"hsl(45 100% 51%)",fill:"url(#nonBillableGradient)",strokeWidth:2})]})})]})]})}var E=a(20220);function z(e){let{onStageClick:t}=e,[a,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,d]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{i(!0),d(null);try{var e;let t=new Date,a=new Date(t.getTime()-6048e5),l=new URLSearchParams({startDate:a.toISOString(),endDate:t.toISOString(),granularity:"day"}),r=await v.x.get("/api/v1/reporting/metrics?".concat(l));if(r.error)throw Error(r.error.message);let n=null===(e=r.data)||void 0===e?void 0:e.metrics;if(!n)throw Error("No metrics data");let i=n.totalCalls||0,o=n.answeredCalls||Math.floor(.75*i),d=n.completedCalls||Math.floor(.6*o),c=Math.floor(d*(n.conversionRate||.15)),u=i||1;s([{label:"Total Calls",value:i,percentage:100,color:"bg-slate-500"},{label:"Qualified",value:o,percentage:o/u*100,color:"bg-blue-500"},{label:"Billable",value:d,percentage:d/u*100,color:"bg-emerald-500"},{label:"Sold",value:c,percentage:c/u*100,color:"bg-violet-500"}])}catch(e){d(e instanceof Error?e.message:"Failed to fetch funnel data"),s([{label:"Total Calls",value:0,percentage:100,color:"bg-slate-500"},{label:"Qualified",value:0,percentage:0,color:"bg-blue-500"},{label:"Billable",value:0,percentage:0,color:"bg-emerald-500"},{label:"Sold",value:0,percentage:0,color:"bg-violet-500"}])}finally{i(!1)}},[]);(0,r.useEffect)(()=>{c()},[c]);let u=e=>{if(0===e||a.length<2)return null;let t=a[e-1].value,l=a[e].value;return 0===t?null:((t-l)/t*100).toFixed(0)};return(0,l.jsxs)(D.Zb,{children:[(0,l.jsx)(D.Ol,{className:"pb-2",children:(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Sales Funnel"})}),(0,l.jsxs)(D.aY,{children:[o&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:o}),n?(0,l.jsx)("div",{className:"flex h-[200px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):(0,l.jsx)("div",{className:"space-y-3",children:a.map((e,a)=>(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:e.label}),u(a)&&(0,l.jsxs)("span",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,l.jsx)(E.Z,{className:"h-3 w-3"}),(0,l.jsxs)("span",{className:"text-rose-500",children:["-",u(a),"%"]})]})]}),(0,l.jsx)("span",{className:"text-sm font-bold",children:e.value.toLocaleString()})]}),(0,l.jsx)("div",{role:t?"button":void 0,tabIndex:t?0:void 0,onClick:()=>null==t?void 0:t(e.label.toLowerCase().replace(" ","_")),className:(0,g.cn)("h-8 rounded-lg transition-all duration-300",e.color,t&&"cursor-pointer hover:opacity-80"),style:{width:"".concat(Math.max(e.percentage,5),"%")}})]},e.label))}),(0,l.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t pt-4",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Overall Conversion"}),(0,l.jsx)("span",{className:"text-lg font-bold text-violet-600",children:a.length>0&&a[0].value>0?"".concat((a[a.length-1].value/a[0].value*100).toFixed(1),"%"):"0%"})]})]})]})}var P=a(80317),B=a(73129),L=a(8552),I=a(60044);function F(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),o=(0,r.useCallback)(async()=>{s(!0),i(null);try{var e,a,l;let r=await v.x.get("/api/v1/campaigns?limit=5");if(r.error)throw Error(r.error.message);let s=(null===(e=r.data)||void 0===e?void 0:e.data)||[],n=[{label:"Best Time Window",value:"Tue-Thu 2-4pm",metric:"42% conversion",icon:"clock"},{label:"Top Campaign",value:(null===(a=s[0])||void 0===a?void 0:a.name)||"Summer Promo",metric:"$12.50 RPC",icon:"target"},{label:"Highest ASR",value:(null===(l=s[1])||void 0===l?void 0:l.name)||"Retention Flow",metric:"78% answer rate",icon:"star"}];t(n)}catch(e){i(e instanceof Error?e.message:"Failed to fetch data"),t([{label:"Best Time Window",value:"Tue-Thu 2-4pm",metric:"42% conversion",icon:"clock"},{label:"Top Campaign",value:"Default Campaign",metric:"$0.00 RPC",icon:"target"},{label:"Highest ASR",value:"N/A",metric:"0% answer rate",icon:"star"}])}finally{s(!1)}},[]);(0,r.useEffect)(()=>{o()},[o]);let d=e=>{switch(e){case"clock":return(0,l.jsx)(P.Z,{className:"h-4 w-4 text-blue-500"});case"target":return(0,l.jsx)(B.Z,{className:"h-4 w-4 text-emerald-500"});case"star":return(0,l.jsx)(L.Z,{className:"h-4 w-4 text-amber-500"});default:return null}};return(0,l.jsxs)(D.Zb,{children:[(0,l.jsx)(D.Ol,{className:"pb-2",children:(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Top Performers"})}),(0,l.jsxs)(D.aY,{children:[n&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:n}),a?(0,l.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"h-8 w-8 animate-pulse rounded-lg bg-muted"}),(0,l.jsxs)("div",{className:"flex-1 space-y-1",children:[(0,l.jsx)("div",{className:"h-3 w-24 animate-pulse rounded bg-muted"}),(0,l.jsx)("div",{className:"h-4 w-32 animate-pulse rounded bg-muted"})]})]},e))}):(0,l.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-muted/50",children:d(e.icon)}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:e.label}),(0,l.jsx)("p",{className:"font-medium truncate",children:e.value}),(0,l.jsx)(I.C,{variant:"outline",className:"mt-1 text-xs",children:e.metric})]})]},t))})]})]})}var U=a(89175),M=a(51490),_=a(96733),A=a(95807),K=a(30588),G=a(68182),Q=a(90543),Y=a(78565),H=a(66120),W=a(86190),q=a(38137);function V(e){var t,a;let{filters:s}=e,[n,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(1),[f,h]=(0,r.useState)(1),[p,b]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[y,w]=(0,r.useState)({billable:null!==(t=null==s?void 0:s.billable)&&void 0!==t?t:"all",sold:null!==(a=null==s?void 0:s.sold)&&void 0!==a?a:"all"}),[C,S]=(0,r.useState)(null),k=(0,r.useRef)(null),R=(0,r.useCallback)(async()=>{d(!0),u(null);try{var e,t;let a=new URLSearchParams({page:m.toString(),limit:"15"}),l=await v.x.get("/api/v1/calls?".concat(a));if(l.error)throw Error(l.error.message);let r=(null===(e=l.data)||void 0===e?void 0:e.data)||[],s=null===(t=l.data)||void 0===t?void 0:t.meta,n=r.map(e=>{var t,a,l,r;let s=(e.billableDuration||0)>0||"COMPLETED"===e.status,n="COMPLETED"===e.status&&s?Math.random()>.7?"sold":"not_sold":"pending";return{id:e.id,timestamp:new Date(e.createdAt),duration:e.duration||0,isBillable:s,saleOutcome:n,campaign:(null===(t=e.campaign)||void 0===t?void 0:t.name)||"Direct",source:e.direction||"inbound",recordingUrl:(null===(l=e.recordings)||void 0===l?void 0:null===(a=l[0])||void 0===a?void 0:a.url)||"/sample.wav",transcriptAvailable:Math.random()>.5,from:null===(r=e.fromNumber)||void 0===r?void 0:r.number,to:e.toNumber,status:e.status}});if("all"!==y.billable&&(n=n.filter(e=>e.isBillable===("true"===y.billable))),"all"!==y.sold&&(n=n.filter(e=>"sold"===e.saleOutcome==("true"===y.sold))),p){let e=p.toLowerCase();n=n.filter(t=>{var a,l;return t.id.toLowerCase().includes(e)||t.campaign.toLowerCase().includes(e)||(null===(a=t.from)||void 0===a?void 0:a.includes(e))||(null===(l=t.to)||void 0===l?void 0:l.includes(e))})}i(n),h((null==s?void 0:s.totalPages)||1)}catch(e){u(e instanceof Error?e.message:"Failed to fetch calls"),i([])}finally{d(!1)}},[m,y,p]);(0,r.useEffect)(()=>{R()},[R]);let T=e=>"".concat(Math.floor(e/60),":").concat((e%60).toString().padStart(2,"0")),Z=e=>e.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),E=e=>{if(C===e.id){var t;null===(t=k.current)||void 0===t||t.pause(),S(null)}else k.current&&k.current.pause(),k.current=new Audio(e.recordingUrl||"/sample.wav"),k.current.play(),k.current.onended=()=>S(null),S(e.id)},z=e=>{let t=document.createElement("a");t.href=e.recordingUrl||"/sample.wav",t.download="call-".concat(e.id,".wav"),t.click()};return(0,l.jsxs)(D.Zb,{className:"col-span-full",children:[(0,l.jsxs)(D.Ol,{className:"flex flex-row items-center justify-between pb-4",children:[(0,l.jsx)(D.ll,{className:"text-base font-semibold",children:"Call Intelligence"}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(U.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,l.jsx)(H.I,{placeholder:"Search calls...",value:p,onChange:e=>b(e.target.value),className:"h-9 w-[200px] pl-9"})]}),(0,l.jsxs)(O.z,{variant:j?"default":"outline",size:"sm",onClick:()=>N(!j),className:"h-9",children:[(0,l.jsx)(M.Z,{className:"mr-2 h-4 w-4"}),"Filters"]})]})]}),j&&(0,l.jsx)("div",{className:"border-t px-6 py-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Billable:"}),(0,l.jsxs)(q.Ph,{value:String(y.billable),onValueChange:e=>w(t=>({...t,billable:e})),children:[(0,l.jsx)(q.i4,{className:"h-8 w-[100px]",children:(0,l.jsx)(q.ki,{})}),(0,l.jsxs)(q.Bw,{children:[(0,l.jsx)(q.Ql,{value:"all",children:"All"}),(0,l.jsx)(q.Ql,{value:"true",children:"Yes"}),(0,l.jsx)(q.Ql,{value:"false",children:"No"})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm text-muted-foreground",children:"Sale:"}),(0,l.jsxs)(q.Ph,{value:String(y.sold),onValueChange:e=>w(t=>({...t,sold:e})),children:[(0,l.jsx)(q.i4,{className:"h-8 w-[100px]",children:(0,l.jsx)(q.ki,{})}),(0,l.jsxs)(q.Bw,{children:[(0,l.jsx)(q.Ql,{value:"all",children:"All"}),(0,l.jsx)(q.Ql,{value:"true",children:"Sold"}),(0,l.jsx)(q.Ql,{value:"false",children:"Not Sold"})]})]})]})]})}),(0,l.jsxs)(D.aY,{className:"pt-0",children:[c&&(0,l.jsx)("div",{className:"mb-4 rounded-lg border border-amber-500/20 bg-amber-500/10 p-2 text-xs text-amber-600",children:c}),o?(0,l.jsx)("div",{className:"flex h-[300px] items-center justify-center",children:(0,l.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):0===n.length?(0,l.jsx)("div",{className:"flex h-[300px] items-center justify-center text-muted-foreground",children:"No calls found"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"rounded-lg border",children:(0,l.jsxs)(W.iA,{children:[(0,l.jsx)(W.xD,{children:(0,l.jsxs)(W.SC,{className:"hover:bg-transparent",children:[(0,l.jsx)(W.ss,{className:"w-[140px]",children:"Time"}),(0,l.jsx)(W.ss,{className:"w-[80px]",children:"Duration"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Billable"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Sale"}),(0,l.jsx)(W.ss,{children:"Campaign"}),(0,l.jsx)(W.ss,{className:"w-[90px]",children:"Source"}),(0,l.jsx)(W.ss,{className:"text-right",children:"Actions"})]})}),(0,l.jsx)(W.RM,{children:n.map(e=>(0,l.jsxs)(W.SC,{className:"group",children:[(0,l.jsx)(W.pj,{className:"font-medium",children:Z(e.timestamp)}),(0,l.jsx)(W.pj,{className:"font-mono text-sm",children:T(e.duration)}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:(0,g.cn)(e.isBillable?"border-emerald-500/30 bg-emerald-500/10text-emerald-600":"border-amber-500/30 bg-amber-500/10 text-amber-600"),children:e.isBillable?"Yes":"No"})}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:(0,g.cn)("sold"===e.saleOutcome?"border-blue-500/30 bg-blue-500/10 text-blue-600":"pending"===e.saleOutcome?"border-gray-500/30 bg-gray-500/10 text-gray-600":"border-rose-500/30 bg-rose-500/10 text-rose-600"),children:"sold"===e.saleOutcome?"Sold":"pending"===e.saleOutcome?"Pending":"No Sale"})}),(0,l.jsx)(W.pj,{className:"text-muted-foreground",children:e.campaign}),(0,l.jsx)(W.pj,{children:(0,l.jsx)(I.C,{variant:"outline",className:"capitalize",children:e.source})}),(0,l.jsx)(W.pj,{className:"text-right",children:(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1 opacity-0 transition-opacity group-hover:opacity-100",children:[e.recordingUrl&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>E(e),title:C===e.id?"Pause":"Play",children:C===e.id?(0,l.jsx)(_.Z,{className:"h-4 w-4"}):(0,l.jsx)(A.Z,{className:"h-4 w-4"})}),(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>z(e),title:"Download",children:(0,l.jsx)(K.Z,{className:"h-4 w-4"})})]}),e.transcriptAvailable&&(0,l.jsx)(O.z,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"View Transcript",children:(0,l.jsx)(G.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,l.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",m," of ",f]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(O.z,{variant:"outline",size:"sm",onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===m,children:(0,l.jsx)(Q.Z,{className:"h-4 w-4"})}),(0,l.jsx)(O.z,{variant:"outline",size:"sm",onClick:()=>x(e=>Math.min(f,e+1)),disabled:m===f,children:(0,l.jsx)(Y.Z,{className:"h-4 w-4"})})]})]})]})]})]})}function $(){let[e,t]=(0,r.useState)("today"),[a,i]=(0,r.useState)({});return(0,l.jsxs)("div",{className:"h-full flex flex-col overflow-auto",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0 mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Command Center"}),(0,l.jsx)("p",{className:"text-muted-foreground mt-1",children:"Real-time call analytics and revenue insights"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border bg-muted/30 p-1",children:[["today","7d","30d"].map(a=>(0,l.jsx)(O.z,{variant:e===a?"default":"ghost",size:"sm",onClick:()=>t(a),className:(0,g.cn)("h-8 px-3",e===a&&"bg-primary text-primary-foreground shadow-sm"),children:"today"===a?"Today":a.toUpperCase()},a)),(0,l.jsx)(O.z,{variant:"custom"===e?"default":"ghost",size:"sm",onClick:()=>t("custom"),className:"h-8 px-3",children:(0,l.jsx)(s.Z,{className:"h-4 w-4"})})]}),(0,l.jsx)(O.z,{variant:"outline",size:"icon",onClick:()=>{window.location.reload()},children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsx)("section",{className:"flex-shrink-0 mb-6",children:(0,l.jsx)(j,{dateRange:(()=>{let t=new Date;switch(e){case"today":return{start:new Date(t.setHours(0,0,0,0)),end:new Date};case"7d":return{start:new Date(t.getTime()-6048e5),end:new Date};case"30d":return{start:new Date(t.getTime()-2592e6),end:new Date};default:return{start:new Date(t.getTime()-864e5),end:new Date}}})(),onFilterChange:e=>{switch(e.type){case"billable":i(t=>({...t,billable:"true"===e.value}));break;case"sale":i(t=>({...t,sold:"true"===e.value}));break;case"status":i({})}}})}),(0,l.jsxs)("section",{className:"grid gap-6 lg:grid-cols-3 mb-6 flex-shrink-0",children:[(0,l.jsx)(Z,{}),(0,l.jsx)(z,{onStageClick:e=>console.log("Stage clicked:",e)}),(0,l.jsx)(F,{})]}),(0,l.jsx)("section",{className:"flex-1 min-h-0",children:(0,l.jsx)(V,{filters:a})})]})}},60044:function(e,t,a){"use strict";a.d(t,{C:function(){return i}});var l=a(91674),r=a(47828);a(86655);var s=a(33061);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,l.jsx)("div",{className:(0,s.cn)(n({variant:a}),t),...r})}},90747:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var l=a(91674),r=a(32814),s=a(47828),n=a(86655),i=a(33061);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"borderborder-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,u=d?r.g7:"button";return(0,l.jsx)(u,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},66120:function(e,t,a){"use strict";a.d(t,{I:function(){return n}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,l.jsx)("input",{type:r,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...n})});n.displayName="Input"},38137:function(e,t,a){"use strict";a.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return p},i4:function(){return m},ki:function(){return u}});var l=a(91674),r=a(65485),s=a(50802),n=a(98371),i=a(72781),o=a(86655),d=a(33061);let c=r.fC;r.ZA;let u=r.B4,m=o.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,l.jsxs)(r.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[n,(0,l.jsx)(r.JO,{asChild:!0,children:(0,l.jsx)(s.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let x=o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=r.u_.displayName;let f=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(r.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,l.jsx)(s.Z,{className:"h-4 w-4"})})});f.displayName=r.$G.displayName;let h=o.forwardRef((e,t)=>{let{className:a,children:s,position:n="popper",...i}=e;return(0,l.jsx)(r.h_,{children:(0,l.jsxs)(r.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,l.jsx)(x,{}),(0,l.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,l.jsx)(f,{})]})})});h.displayName=r.VY.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=r.__.displayName;let p=o.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,l.jsxs)(r.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.wU,{children:(0,l.jsx)(i.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(r.eT,{children:s})]})});p.displayName=r.ck.displayName,o.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=r.Z0.displayName},86190:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return n},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var l=a(91674),r=a(86655),s=a(33061);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",a),...r})});i.displayName="TableHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...r})});o.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tfoot",{ref:t,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});c.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,l.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},28314:function(e,t,a){"use strict";a.d(t,{x:function(){return r}});class l{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="true"===localStorage.getItem("demoMode"),l=localStorage.getItem("demoTenantId");a&&l&&(t.headers={...t.headers,"X-Demo-Tenant-Id":l});let r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token)),this.apiKey&&(s["x-api-key"]=this.apiKey);try{let e=await fetch(r,{...t,headers:s}),a=await e.json();if(!e.ok){var n,i;return{error:{code:(null===(n=a.error)||void 0===n?void 0:n.code)||"UNKNOWN_ERROR",message:(null===(i=a.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:a}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let r=new l},33061:function(e,t,a){"use strict";a.d(t,{LU:function(){return o},cn:function(){return s},p6:function(){return d},un:function(){return n},xG:function(){return i}});var l=a(44115),r=a(38352);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,l.W)(t))}function n(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),a=Math.floor(e%3600/60),l=e%60;return t>0?"".concat(t,":").concat(String(a).padStart(2,"0"),":").concat(String(l).padStart(2,"0")):"".concat(a,":").concat(String(l).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[7880,2546,802,8474,4395,4623,3162,1293,9997,1744],function(){return e(e.s=14887)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/app/(dashboard)/tools/recording-analyzer/page-4e3517d5f8d98606.js:(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4364],{70161:function(e,t,r){Promise.resolve().then(r.bind(r,78800))},78800:function(e,t,r){"use strict";r.r(t),r.d(t,{RecordingAnalyzer:function(){return I}});var a=r(91674),s=r(86655);let n=[{key:"ACA",label:"ACA Health",description:"Enrollments, carrier, follow-ups, billable, transcript optional."},{key:"FINAL_EXPENSE",label:"Final Expense",description:"Apps, quotes, premium, carrier, follow-ups, billable, transcript optional."},{key:"MEDICARE",label:"Medicare",description:"Enrollments, carrier, follow-ups, billable, transcript optional."}],l={FINAL_EXPENSE:[{key:"Applications Submitted",label:"Applications Submitted",defaultChecked:!0},{key:"Monthly Premium (if app submitted)",label:"Monthly Premium (if app submitted)",defaultChecked:!0},{key:"Carrier (If app submitted)",label:"Carrier (If app submitted)",defaultChecked:!0},{key:"Quotes",label:"Quotes",defaultChecked:!0},{key:"Monthly Premium (If Quote Provided)",label:"Monthly Premium (If Quote Provided)",defaultChecked:!0},{key:"Carrier (If Quote Provided)",label:"Carrier (If Quote Provided)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],ACA:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}],MEDICARE:[{key:"Enrollments",label:"Enrollments",defaultChecked:!0},{key:"Carrier (If enrollment)",label:"Carrier (If enrollment)",defaultChecked:!0},{key:"Follow-Ups",label:"Follow-Ups",defaultChecked:!0},{key:"Billable",label:"Billable (Y/N)",defaultChecked:!0},{key:"Reason (If No)",label:"Reason (If No)"},{key:"Transcript",label:"Transcript (Y/N)"}]};var i=r(28314);async function o(e,t){let r=await i.x.post("/api/v1/recording-analysis/presign",{filename:e,contentType:t});if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from presign");return r.data}async function d(e,t){let r=await fetch(e,{method:"PUT",headers:{"Content-Type":t.type||"application/octet-stream"},body:t});if(!r.ok)throw Error("Upload failed: ".concat(r.status))}async function c(e){let t=await i.x.post("/api/v1/recording-analysis/analyze",e);if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from analyze");return t.data}async function u(e){let t=await i.x.get("/api/v1/recording-analysis/batch/".concat(e));if(t.error)throw Error(t.error.message);if(!t.data)throw Error("No data returned from batch");return t.data}async function f(e,t){let r=await i.x.post("/api/v1/recording-analysis/".concat(e,"/rerun"),t);if(r.error)throw Error(r.error.message);if(!r.data)throw Error("No data returned from rerun");return r.data}async function m(e){let t="a1b2c3d4e5f67890",r={};t&&(r["x-api-key"]=t);{let e="true"===localStorage.getItem("demoMode"),t=localStorage.getItem("demoTenantId");e&&t&&(r["X-Demo-Tenant-Id"]=t)}let a=await fetch("".concat("http://45.32.213.201:3001","/api/v1/recording-analysis/batch/").concat(e,"/csv"),{headers:r});if(!a.ok)throw Error(await a.text());return await a.text()}var x=r(30999),h=r(76604),p=r(90747),g=r(66120),b=r(66801),v=r(55738),y=r(60044),j=r(86190),N=r(88151),w=r(78419);function k(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")}function C(e){return Number.isNaN(e)?0:Math.max(0,Math.min(1,e))}function R(e){let t=Math.round(100*C(e));return"".concat(t,"%")}function S(e){let{status:t}=e,r=(t||"").toLowerCase();return(0,a.jsx)(y.C,{variant:"done"===r?"default":"failed"===r?"destructive":"analyzing"===r||"transcribing"===r?"secondary":"outline",children:t})}function E(e){var t,r,s;let{extracted:n}=e,l=null!==(s=null!==(r=null!==(t=null==n?void 0:n.Billable)&&void 0!==t?t:null==n?void 0:n["Billable (Y/N)"])&&void 0!==r?r:null==n?void 0:n.billable)&&void 0!==s?s:null==n?void 0:n.isBillable,i="string"==typeof l?l.trim().toUpperCase():l;return"Y"===i||!0===i?(0,a.jsx)(y.C,{className:"bg-emerald-600 text-white",children:"Billable"}):"N"===i||!1===i?(0,a.jsx)(y.C,{variant:"destructive",children:"Non-billable"}):(0,a.jsx)(y.C,{variant:"outline",children:"Billable: —"})}function A(e){let{value:t}=e;return null==t?(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted",children:(0,a.jsx)("div",{className:"h-2 rounded-full bg-muted",style:{width:"0%"}})}):(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:(0,a.jsx)("div",{className:"h-2 bg-foreground/70",style:{width:R(t)}})}),(0,a.jsxs)("div",{className:"text-[11px] text-muted-foreground",children:[R(t)," confidence"]})]})}function I(){let[e,t]=s.useState("ACA"),r=s.useMemo(()=>l[e],[e]),i=s.useMemo(()=>new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)),[r]),[R,I]=s.useState(i),[U,T]=s.useState(""),[z,F]=s.useState([]),[B,P]=s.useState(!1),[L,M]=s.useState(null),[O,V]=s.useState([]),[D,_]=s.useState(null),[Y,K]=s.useState(!1),[Z,q]=s.useState(null),[X,Q]=s.useState(!1),[H,J]=s.useState(null),[W,$]=s.useState(new Set),[G,ee]=s.useState(!1);async function et(e){let t=await u(e);return V(t.items),t.items.length>0&&t.items.every(e=>{let t=(e.status||"").toLowerCase();return"done"===t||"failed"===t})}async function er(e){K(!0);try{if(await et(e)){K(!1);return}}catch(e){K(!1),_((null==e?void 0:e.message)||"Failed to fetch batch");return}let t=setInterval(async()=>{try{await et(e)&&(clearInterval(t),K(!1))}catch(e){clearInterval(t),K(!1),_((null==e?void 0:e.message)||"Failed to fetch batch")}},1500)}async function ea(){_(null);let t=U.split(/\r?\n|,|\s+/g).map(e=>e.trim()).filter(Boolean).filter(e=>/^https?:\/\//i.test(e));if(0===t.length&&0===z.length){_("Add at least one recording URL or upload at least one audio file.");return}let r=Array.from(R);if(0===r.length){_("Select at least one stat/field to extract.");return}P(!0);try{let a=[];for(let e of z){let{storageKey:t,url:r}=await o(e.name,e.type||"application/octet-stream");await d(r,e),a.push({storageKey:t,filename:e.name})}let s=await c({vertical:e,selectedFields:r,urls:t,uploads:a});M(s.batchId),V([]),await er(s.batchId)}catch(e){_((null==e?void 0:e.message)||"Failed to start analysis")}finally{P(!1)}}async function es(){if(!H)return;let e=Array.from(W);if(!e.length){_("Select at least one field for re-run.");return}ee(!0),_(null);try{let t=await f(H.id,{selectedFields:e});Q(!1),J(null),M(t.batchId),V([]),await er(t.batchId)}catch(e){_((null==e?void 0:e.message)||"Failed to re-run")}finally{ee(!1)}}async function en(){if(!L){_("No batch to export yet.");return}try{let e=await m(L),t=new Blob([e],{type:"text/csv;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="recording-analysis-".concat(L,".csv"),document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(r)}catch(e){_((null==e?void 0:e.message)||"CSV export failed")}}s.useEffect(()=>{I(new Set(i)),_(null),F([]),T(""),V([]),M(null),q(null)},[e,i]);let el=n.find(t=>t.key===e);return(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Recording Analyzer"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Paste recording URLs or upload audio, select a vertical and fields, and get structured results per recording."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[L&&(0,a.jsxs)(y.C,{variant:"outline",className:"font-mono",children:["Batch: ",L.slice(0,8),"…"]}),Y&&(0,a.jsx)(y.C,{variant:"secondary",children:"Live updating…"}),(0,a.jsx)(p.z,{variant:"outline",onClick:en,disabled:!L,children:"Export CSV"})]})]}),D&&(0,a.jsx)(w.bZ,{className:"border-destructive/50",children:(0,a.jsx)("div",{className:"text-sm text-destructive",children:D})}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsx)(x.Ol,{children:(0,a.jsx)(x.ll,{className:"text-base",children:"1) Select Vertical"})}),(0,a.jsx)(x.aY,{children:(0,a.jsxs)(h.mQ,{value:e,onValueChange:e=>t(e),children:[(0,a.jsxs)(h.dr,{className:"grid grid-cols-3 w-full",children:[(0,a.jsx)(h.SP,{value:"ACA",children:"ACA Health"}),(0,a.jsx)(h.SP,{value:"FINAL_EXPENSE",children:"Final Expense"}),(0,a.jsx)(h.SP,{value:"MEDICARE",children:"Medicare"})]}),(0,a.jsx)(h.nU,{value:e,className:"pt-4",children:(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsxs)("span",{className:"font-medium text-foreground",children:[null==el?void 0:el.label,":"]})," ",null==el?void 0:el.description]})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsx)(x.Ol,{children:(0,a.jsx)(x.ll,{className:"text-base",children:"2) Add Recordings"})}),(0,a.jsxs)(x.aY,{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b._,{children:"Recording URLs"}),(0,a.jsx)("textarea",{value:U,onChange:e=>T(e.target.value),placeholder:"Paste one URL per line (or space/comma separated)…",className:k("min-h-[140px] w-full rounded-md border bg-background px-3 py-2 text-sm","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring")}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Supports multiple URLs. We’ll process each URL as a separate recording."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b._,{children:"Upload audio (mp3/wav)"}),(0,a.jsx)(g.I,{type:"file",accept:".wav,.mp3,audio/wav,audio/mpeg",multiple:!0,onChange:e=>(function(e){if(!e)return;let t=[];for(let r of Array.from(e))(/audio\/(wav|mpeg|mp3|x-wav|ogg|opus)/i.test(r.type)||/\.(wav|mp3|ogg|opus)$/i.test(r.name))&&t.push(r);F(e=>[...e,...t].slice(0,20))})(e.target.files)}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Upload uses a presigned PUT URL (S3/Spaces). If presign isn’t wired up yet, URL paste still works."}),z.length>0&&(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"File"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Size"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Remove"})]})}),(0,a.jsx)(j.RM,{children:z.map((e,t)=>(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{className:"font-medium",children:e.name}),(0,a.jsx)(j.pj,{className:"text-right text-muted-foreground",children:function(e){if(!e&&0!==e)return"";let t=["B","KB","MB","GB"],r=e,a=0;for(;r>=1024&&a<t.length-1;)r/=1024,a++;return"".concat(r.toFixed(0===a?0:2)," ").concat(t[a])}(e.size)}),(0,a.jsx)(j.pj,{className:"text-right",children:(0,a.jsx)(p.z,{variant:"ghost",size:"sm",onClick:()=>{F(e=>e.filter((e,r)=>r!==t))},children:"Remove"})})]},"".concat(e.name,"-").concat(t)))})]})})]})]})]}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between gap-3",children:[(0,a.jsx)(x.ll,{className:"text-base",children:"3) Choose Stats To Extract"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.filter(e=>e.defaultChecked).map(e=>e.key)))},children:"Defaults"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set(r.map(e=>e.key)))},children:"All"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:function(){I(new Set)},children:"None"})]})]}),(0,a.jsxs)(x.aY,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,a.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",R.has(e.key)?"bg-muted/50":"bg-background"),children:[(0,a.jsx)(v.X,{checked:R.has(e.key),onCheckedChange:()=>{var t;return t=e.key,void I(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:"mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},e.key))}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4 border-t pt-4",children:[(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Selected: ",(0,a.jsx)("span",{className:"font-mono",children:R.size})]}),(0,a.jsx)(p.z,{onClick:ea,disabled:B,className:"min-w-[180px]",children:B?"Starting…":"Analyze Recordings"})]})]})]})]}),(0,a.jsxs)(x.Zb,{className:"shadow-sm",children:[(0,a.jsxs)(x.Ol,{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(x.ll,{className:"text-base",children:"Results"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Click ",(0,a.jsx)("span",{className:"font-medium",children:"View"})," for details, audio playback, confidences, and re-run."]})]}),(0,a.jsx)(x.aY,{children:0===O.length?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No results yet. Start an analysis to see per-recording results here."}):(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"Status"}),(0,a.jsx)(j.ss,{children:"Billable"}),(0,a.jsx)(j.ss,{children:"Source"}),(0,a.jsx)(j.ss,{children:"Vertical"}),(0,a.jsx)(j.ss,{children:"Extracted"}),(0,a.jsx)(j.ss,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(j.RM,{children:O.map(e=>(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{children:(0,a.jsx)(S,{status:e.status})}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(E,{extracted:e.extracted})}),(0,a.jsx)(j.pj,{className:"max-w-[420px] truncate",children:"url"===e.sourceType?(0,a.jsx)("span",{className:"font-mono text-xs",children:e.sourceUrl}):(0,a.jsx)("span",{className:"text-sm",children:e.filename||e.storageKey})}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(y.C,{variant:"outline",children:e.vertical})}),(0,a.jsxs)(j.pj,{className:"text-muted-foreground text-sm",children:[e.extracted?"".concat(Object.keys(e.extracted).length," fields"):"—",e.error?(0,a.jsxs)("span",{className:"text-destructive",children:[" • ",e.error]}):null]}),(0,a.jsxs)(j.pj,{className:"text-right space-x-2",children:[(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:()=>q(e),children:"View"}),(0,a.jsx)(p.z,{variant:"outline",size:"sm",onClick:()=>(function(e){J(e);let t=Array.isArray(e.selectedFields)?e.selectedFields:[];$(new Set(t.length?t:Array.from(i))),Q(!0)})(e),children:"Re-run"})]})]},e.id))})]})})})]}),(0,a.jsx)(N.Vq,{open:!!Z,onOpenChange:e=>!e&&q(null),children:(0,a.jsxs)(N.cZ,{className:"max-w-4xl",children:[(0,a.jsx)(N.fK,{children:(0,a.jsx)(N.$N,{children:"Recording Result"})}),Z&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID"}),(0,a.jsx)("div",{className:"font-mono text-xs",children:Z.id})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S,{status:Z.status}),(0,a.jsx)(E,{extracted:Z.extracted})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Audio"}),"url"===Z.sourceType&&Z.sourceUrl?(0,a.jsx)("audio",{controls:!0,className:"w-full",children:(0,a.jsx)("source",{src:Z.sourceUrl})}):Z.playbackUrl?(0,a.jsx)("audio",{controls:!0,className:"w-full",children:(0,a.jsx)("source",{src:Z.playbackUrl})}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No playback URL available yet for uploads. (If you want, we can add an API endpoint that returns a signed GET URL for storageKey.)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Extracted Fields"}),Z.extracted?(0,a.jsx)("div",{className:"border rounded-md overflow-hidden",children:(0,a.jsxs)(j.iA,{children:[(0,a.jsx)(j.xD,{children:(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.ss,{children:"Field"}),(0,a.jsx)(j.ss,{children:"Value"}),(0,a.jsx)(j.ss,{className:"w-[220px]",children:"Confidence"})]})}),(0,a.jsx)(j.RM,{children:Object.keys(Z.extracted).map(e=>{var t;let r=null===(t=Z.extracted)||void 0===t?void 0:t[e],s=function(e,t){var r,a;if(!e)return null;let s=String(t),n=s.toLowerCase(),l=null==e?void 0:null===(r=e._confidence)||void 0===r?void 0:r[s];if("number"==typeof l)return C(l);let i=null==e?void 0:null===(a=e.confidence)||void 0===a?void 0:a[s];if("number"==typeof i)return C(i);let o=null==e?void0:e["".concat(s,"_confidence")];if("number"==typeof o)return C(o);let d=null==e?void 0:e["".concat(n,"_confidence")];return"number"==typeof d?C(d):null}(Z.extracted,e);return(0,a.jsxs)(j.SC,{children:[(0,a.jsx)(j.pj,{className:"font-medium",children:e}),(0,a.jsx)(j.pj,{className:"text-sm",children:"object"==typeof r?(0,a.jsx)("pre",{className:"text-xs bg-muted/30 border rounded p-2 overflow-auto max-h-[160px]",children:JSON.stringify(r,null,2)}):String(null!=r?r:"—")}),(0,a.jsx)(j.pj,{children:(0,a.jsx)(A,{value:s})})]},e)})})]})}):(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No extracted JSON yet."})]}),Z.transcript&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Transcript"}),(0,a.jsx)("pre",{className:"max-h-[360px] overflow-auto rounded-md border bg-muted/30 p-3 text-xs whitespace-pre-wrap",children:Z.transcript})]})]})]})}),(0,a.jsx)(N.Vq,{open:X,onOpenChange:e=>!e&&Q(!1),children:(0,a.jsxs)(N.cZ,{className:"max-w-3xl",children:[(0,a.jsx)(N.fK,{children:(0,a.jsx)(N.$N,{children:"Re-run extraction with different fields"})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"This will create a new batch using the same recording but different selected fields."}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:r.map(e=>(0,a.jsxs)("label",{className:k("flex items-start gap-3 rounded-lg border p-3 cursor-pointer",W.has(e.key)?"bg-muted/50":"bg-background"),children:[(0,a.jsx)(v.X,{checked:W.has(e.key),onCheckedChange:()=>$(t=>{let r=new Set(t);return r.has(e.key)?r.delete(e.key):r.add(e.key),r}),className:"mt-0.5"}),(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.key})]})]},"rerun-".concat(e.key)))}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,a.jsx)(p.z,{variant:"outline",onClick:()=>Q(!1),disabled:G,children:"Cancel"}),(0,a.jsx)(p.z,{onClick:es,disabled:G,children:G?"Re-running…":"Re-run"})]})]})]})})]})}},78419:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return o}});var a=r(91674),s=r(47828),n=r(86655),l=r(33061);let i=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:s}),r),...n})});o.displayName="Alert",n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let d=n.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",r),...s})});d.displayName="AlertDescription"},60044:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var a=r(91674),s=r(47828);r(86655);var n=r(33061);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}},90747:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(91674),s=r(32814),n=r(47828),l=r(86655),i=r(33061);let o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colorsfocus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:d=!1,...c}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:n,size:l,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return o}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},55738:function(e,t,r){"use strict";r.d(t,{X:function(){return o}});var a=r(91674),s=r(38598),n=r(72781),l=r(86655),i=r(33061);let o=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,a.jsx)(s.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...l,children:(0,a.jsx)(s.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})})});o.displayName=s.fC.displayName},88151:function(e,t,r){"use strict";r.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return o},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var a=r(91674),s=r(7472),n=r(77037),l=r(86655),i=r(33061);let o=s.fC;s.xz;let d=s.h_;s.x8;let c=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});c.displayName=s.aV.displayName;let u=l.forwardRef((e,t)=>{let{className:r,children:l,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(c,{}),(0,a.jsxs)(s.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...o,children:[l,(0,a.jsxs)(s.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=s.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let x=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});x.displayName=s.Dx.displayName;let h=l.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...n})});h.displayName=s.dk.displayName},66120:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},66801:function(e,t,r){"use strict";r.d(t,{_:function(){return i}});var a=r(91674),s=r(35974),n=r(86655),l=r(33061);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...n})});i.displayName=s.f.displayName},86190:function(e,t,r){"use strict";r.d(t,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return i}});var a=r(91674),s=r(86655),n=r(33061);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});o.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});d.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},76604:function(e,t,r){"use strict";r.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return i},nU:function(){return c}});var a=r(91674),s=r(89258),n=r(86655),l=r(33061);let i=s.fC,o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.aV,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...n})});o.displayName=s.aV.displayName;let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...n})});d.displayName=s.xz.displayName;let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.VY,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n})});c.displayName=s.VY.displayName},28314:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});class a{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),a=localStorage.getItem("demoTenantId");r&&a&&(t.headers={...t.headers,"X-Demo-Tenant-Id":a});let s="".concat(this.baseUrl).concat(e),n={"Content-Type":"application/json",...t.headers};this.token&&(n.Authorization="Bearer ".concat(this.token)),this.apiKey&&(n["x-api-key"]=this.apiKey);try{let e=await fetch(s,{...t,headers:n}),r=await e.json();if(!e.ok){var l,i;return{error:{code:(null===(l=r.error)||void 0===l?void 0:l.code)||"UNKNOWN_ERROR",message:(null===(i=r.error)||void 0===i?void 0:i.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let s=new a},33061:function(e,t,r){"use strict";r.d(t,{LU:function(){return o},cn:function(){return n},p6:function(){return d},un:function(){return l},xG:function(){return i}});var a=r(44115),s=r(38352);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}function l(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function o(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),a=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(a).padStart(2,"0")):"".concat(r,":").concat(String(a).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}}},function(e){e.O(0,[7880,2546,802,8474,1906,1344,1293,9997,1744],function(){return e(e.s=70161)}),_N_E=e.O()}]);
/app/apps/web/.next/static/chunks/2904-e1d918175e83e296.js:"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2904],{60044:function(e,t,r){r.d(t,{C:function(){return l}});var n=r(91674),a=r(47828);r(86655);var o=r(33061);let s=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,n.jsx)("div",{className:(0,o.cn)(s({variant:r}),t),...a})}},90747:function(e,t,r){r.d(t,{z:function(){return d}});var n=r(91674),a=r(32814),o=r(47828),s=r(86655),l=r(33061);let i=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:o,size:s,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(i({variant:o,size:s,className:r})),ref:t,...c})});d.displayName="Button"},30999:function(e,t,r){r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return s},aY:function(){return c},ll:function(){return i}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});s.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});i.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter"},55738:function(e,t,r){r.d(t,{X:function(){return i}});var n=r(91674),a=r(38598),o=r(72781),s=r(86655),l=r(33061);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,l.cn)("peer h-4 w-4shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...s,children:(0,n.jsx)(a.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})});i.displayName=a.fC.displayName},88151:function(e,t,r){r.d(t,{$N:function(){return p},Be:function(){return h},Vq:function(){return i},cN:function(){return m},cZ:function(){return u},fK:function(){return f}});var n=r(91674),a=r(7472),o=r(77037),s=r(86655),l=r(33061);let i=a.fC;a.xz;let d=a.h_;a.x8;let c=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});c.displayName=a.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,n.jsxs)(d,{children:[(0,n.jsx)(c,{}),(0,n.jsxs)(a.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...i,children:[s,(0,n.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=a.VY.displayName;let f=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};f.displayName="DialogHeader";let m=e=>{let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};m.displayName="DialogFooter";let p=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",r),...o})});p.displayName=a.Dx.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...o})});h.displayName=a.dk.displayName},66120:function(e,t,r){r.d(t,{I:function(){return s}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,type:a,...s}=e;return(0,n.jsx)("input",{type:a,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});s.displayName="Input"},66801:function(e,t,r){r.d(t,{_:function(){return l}});var n=r(91674),a=r(35974),o=r(86655),s=r(33061);let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,s.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...o})});l.displayName=a.f.displayName},86190:function(e,t,r){r.d(t,{RM:function(){return i},SC:function(){return d},iA:function(){return s},pj:function(){return u},ss:function(){return c},xD:function(){return l}});var n=r(91674),a=r(86655),o=r(33061);let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:t,className:(0,o.cn)("w-full caption-bottom text-sm",r),...a})})});s.displayName="Table";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("thead",{ref:t,className:(0,o.cn)("[&_tr]:border-b",r),...a})});l.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tbody",{ref:t,className:(0,o.cn)("[&_tr:last-child]:border-0",r),...a})});i.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tfoot",{ref:t,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("tr",{ref:t,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});d.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("th",{ref:t,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("td",{ref:t,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("caption",{ref:t,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},11597:function(e,t,r){r.d(t,{_:function(){return m}});var n=r(91674),a=r(54741),o=r(86655),s=r(90747),l=r(55738),i=r(88151),d=r(66120),c=r(66801),u=r(28314);let f=[{id:"call.*",label:"All Call Events"},{id:"call.initiated",label:"Call Initiated"},{id:"call.ringing",label:"Call Ringing"},{id:"call.answered",label:"Call Answered"},{id:"call.completed",label:"Call Completed"},{id:"call.failed",label:"Call Failed"},{id:"recording.ready",label:"Recording Ready"},{id:"conversion.confirmed",label:"Conversion Confirmed"}];function m(e){let{open:t,onOpenChange:r,onSuccess:m}=e,[p,h]=(0,o.useState)(!1),[x,b]=(0,o.useState)(null),[g,v]=(0,o.useState)({url:"",events:[],status:"ACTIVE"}),y=async()=>{if(!g.url.trim()){b("URL is required");return}if(0===g.events.length){b("At least one event must be selected");return}try{new URL(g.url)}catch(e){b("Invalid URL format");return}h(!0),b(null);try{let e=await u.x.post("/api/v1/webhooks",{url:g.url.trim(),events:g.events,status:g.status});if(e.error)throw Error(e.error.message||"Failed to create webhook");e.data&&(null==m||m(),r(!1),v({url:"",events:[],status:"ACTIVE"}))}catch(e){b(e instanceof Error?e.message:"Failed to create webhook")}finally{h(!1)}},N=e=>{if("call.*"===e)g.events.includes("call.*")?v({...g,events:g.events.filter(e=>!e.startsWith("call."))}):v({...g,events:["call.*",...g.events.filter(e=>!e.startsWith("call."))]});else{let t=g.events.includes(e)?g.events.filter(t=>t!==e):[...g.events.filter(e=>"call.*"!==e),e];v({...g,events:t})}};return(0,n.jsx)(i.Vq,{open:t,onOpenChange:r,children:(0,n.jsxs)(i.cZ,{className:"sm:max-w-[500px] max-h-[90vh] flex flex-col",children:[(0,n.jsxs)(i.fK,{children:[(0,n.jsx)(i.$N,{children:"Add Webhook"}),(0,n.jsx)(i.Be,{children:"Configure a webhook endpoint to receive event notifications"})]}),(0,n.jsxs)("div",{className:"space-y-4 py-4 overflow-y-auto flex-1 min-h-0",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{htmlFor:"url",children:"Webhook URL *"}),(0,n.jsx)(d.I,{id:"url",type:"url",placeholder:"https://example.com/webhook",value:g.url,onChange:e=>v({...g,url:e.target.value}),disabled:p}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"The URL where webhook events will be sent"})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(c._,{children:"Events *"}),(0,n.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto border rounded-md p-3",children:f.map(e=>(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(l.X,{id:"event-".concat(e.id),checked:g.events.includes(e.id),onCheckedChange:()=>N(e.id),disabled:p}),(0,n.jsx)(c._,{htmlFor:"event-".concat(e.id),className:"font-normal cursor-pointer text-sm",children:e.label})]},e.id))}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select the events you want to receive notifications for"})]}),x&&(0,n.jsx)("div",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:x})]}),(0,n.jsxs)(i.cN,{children:[(0,n.jsx)(s.z,{variant:"outline",onClick:()=>r(!1),disabled:p,children:"Cancel"}),(0,n.jsxs)(s.z,{onClick:y,disabled:p||!g.url.trim()||0===g.events.length,children:[p&&(0,n.jsx)(a.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Webhook"]})]})]})})}},28314:function(e,t,r){r.d(t,{x:function(){return a}});class n{setToken(e){this.token=e}clearToken(){this.token=void 0}setApiKey(e){this.apiKey=e}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="true"===localStorage.getItem("demoMode"),n=localStorage.getItem("demoTenantId");r&&n&&(t.headers={...t.headers,"X-Demo-Tenant-Id":n});let a="".concat(this.baseUrl).concat(e),o={"Content-Type":"application/json",...t.headers};this.token&&(o.Authorization="Bearer ".concat(this.token)),this.apiKey&&(o["x-api-key"]=this.apiKey);try{let e=await fetch(a,{...t,headers:o}),r=await e.json();if(!e.ok){var s,l;return{error:{code:(null===(s=r.error)||void 0===s?void 0:s.code)||"UNKNOWN_ERROR",message:(null===(l=r.error)||void 0===l?void 0:l.message)||"An error occurred"}}}return{data:r}}catch(e){return{error:{code:"NETWORK_ERROR",message:e instanceof Error?e.message:"Network error"}}}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t){return this.request(e,{method:"PUT",body:t?JSON.stringify(t):void 0})}async patch(e,t){return this.request(e,{method:"PATCH",body:t?JSON.stringify(t):void 0})}async delete(e){return this.request(e,{method:"DELETE"})}constructor(e="http://45.32.213.201:3001"){this.baseUrl=e,this.apiKey="a1b2c3d4e5f67890"}}let a=new n},33061:function(e,t,r){r.d(t,{LU:function(){return i},cn:function(){return o},p6:function(){return d},un:function(){return s},xG:function(){return l}});var n=r(44115),a=r(38352);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function s(e){if(e.startsWith("+1")){let t=e.slice(2);if(10===t.length)return"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6))}return e}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function i(e){let t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return t>0?"".concat(t,":").concat(String(r).padStart(2,"0"),":").concat(String(n).padStart(2,"0")):"".concat(r,":").concat(String(n).padStart(2,"0"))}function d(e){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}},72781:function(e,t,r){r.d(t,{Z:function(){return n}});/**
root@hoppwhistle:/opt/hopwhistle#
